/*!
 * jQuery JavaScript Library v1.9.0
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2012 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-1-14
 */
function getDomId(e){return e.match(/\d+$/)[0]}function selectRelation(e){$("#permissions").html(""),$("#relation_customs_list div.options").hide(),$(e).siblings("div.options").show(),$.ajax({url:"../permissions",context:document.body,data:{relation_id:getDomId($(e).attr("id"))},dataType:"script"})}function selectPermission(e){var t=getDomId($(e).attr("id")),n=$('input[id="relation_custom_permission_ids_'+t+'"]'),r=$('label[for="relation_custom_permission_ids_'+t+'"]');$(e).is(":checked")?(n.attr("checked","checked"),r.parent().show()):(n.removeAttr("checked"),r.parent().hide())}function Boxy(e,t){this.boxy=jQuery(Boxy.WRAPPER),jQuery.data(this.boxy[0],"boxy",this),this.visible=!1,this.options=jQuery.extend({},Boxy.DEFAULTS,t||{}),this.options.modal&&(this.options=jQuery.extend(this.options,{center:!0,draggable:!1})),this.options.actuator&&jQuery.data(this.options.actuator,"active.boxy",this),this.setContent(e||"<div></div>"),this._setupTitleBar(),this.boxy.css("display","none").appendTo(document.body),this.toTop(),this.options.fixed&&(jQuery.browser.msie&&jQuery.browser.version<7?this.options.fixed=!1:this.boxy.addClass("fixed")),this.options.center&&Boxy._u(this.options.x,this.options.y)?this.center():this.moveTo(Boxy._u(this.options.x)?this.options.x:Boxy.DEFAULT_X,Boxy._u(this.options.y)?this.options.y:Boxy.DEFAULT_Y),this.options.show&&this.show()}function getHostname(){return window.location.hostname}(function(e,t){"use strict";function _(e){var t=e.length,n=y.type(e);return y.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||n!=="function"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function P(e){var t=D[e]={};return y.each(e.match(w)||[],function(e,n){t[n]=!0}),t}function j(e,n,r,i){if(!y.acceptData(e))return;var s,o,u=y.expando,a=typeof n=="string",l=e.nodeType,c=l?y.cache:e,h=l?e[u]:e[u]&&u;if((!h||!c[h]||!i&&!c[h].data)&&a&&r===t)return;h||(l?e[u]=h=f.pop()||y.guid++:h=u),c[h]||(c[h]={},l||(c[h].toJSON=y.noop));if(typeof n=="object"||typeof n=="function")i?c[h]=y.extend(c[h],n):c[h].data=y.extend(c[h].data,n);return s=c[h],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[y.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[y.camelCase(n)])):o=s,o}function F(e,t,n){if(!y.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?y.cache:e,a=o?e[y.expando]:y.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){y.isArray(t)?t=t.concat(y.map(t,y.camelCase)):t in r?t=[t]:(t=y.camelCase(t),t in r?t=[t]:t=t.split(" "));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?q:y.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!q(u[a]))return}o?y.cleanData([e],!0):y.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null}function I(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(B,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:H.test(r)?y.parseJSON(r):r}catch(s){}y.data(e,n,r)}else r=t}return r}function q(e){var t;for(t in e){if(t==="data"&&y.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function nt(){return!0}function rt(){return!1}function ft(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function lt(e,t,n){t=t||0;if(y.isFunction(t))return y.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return y.grep(e,function(e){return e===t===n});if(typeof t=="string"){var r=y.grep(e,function(e){return e.nodeType===1});if(ot.test(t))return y.filter(t,r,!n);t=y.filter(t,r)}return y.grep(e,function(e){return y.inArray(e,t)>=0===n})}function ct(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function At(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ot(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function Mt(e){var t=Tt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _t(e,t){var n,r=0;for(;(n=e[r])!=null;r++)y._data(n,"globalEval",!t||y._data(t[r],"globalEval"))}function Dt(e,t){if(t.nodeType!==1||!y.hasData(e))return;var n,r,i,s=y._data(e),o=y._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)y.event.add(t,n,u[n][r])}o.data&&(o.data=y.extend({},o.data))}function Pt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!y.support.noCloneEvent&&t[y.expando]){r=y._data(t);for(i in r.events)y.removeEvent(t,i,r.handle);t.removeAttribute(y.expando)}if(n==="script"&&t.text!==e.text)Ot(t).text=e.text,Mt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),y.support.html5Clone&&e.innerHTML&&!y.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&Et.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function Ht(e,n){var r,i,s=0,o=typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll(n||"*"):t;if(!o)for(o=[],r=e.childNodes||e;(i=r[s])!=null;s++)!n||y.nodeName(i,n)?o.push(i):y.merge(o,Ht(i,n));return n===t||n&&y.nodeName(e,n)?y.merge([e],o):o}function Bt(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Zt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Yt.length;while(i--){t=Yt[i]+n;if(t in e)return t}return r}function en(e,t){return e=t||e,y.css(e,"display")==="none"||!y.contains(e.ownerDocument,e)}function tn(e,t){var n,r=[],i=0,s=e.length;for(;i<s;i++){n=e[i];if(!n.style)continue;r[i]=y._data(n,"olddisplay"),t?(!r[i]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&en(n)&&(r[i]=y._data(n,"olddisplay",on(n.nodeName)))):!r[i]&&!en(n)&&y._data(n,"olddisplay",y.css(n,"display"))}for(i=0;i<s;i++){n=e[i];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?r[i]||"":"none"}return e}function nn(e,t,n){var r=Xt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function rn(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=y.css(e,n+Gt[s],!0,i)),r?(n==="content"&&(o-=y.css(e,"padding"+Gt[s],!0,i)),n!=="margin"&&(o-=y.css(e,"border"+Gt[s]+"Width",!0,i))):(o+=y.css(e,"padding"+Gt[s],!0,i),n!=="padding"&&(o+=y.css(e,"border"+Gt[s]+"Width",!0,i)));return o}function sn(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=Ft(e),o=y.support.boxSizing&&y.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=jt(e,t,s);if(i<0||i==null)i=e.style[t];if(Vt.test(i))return i;r=o&&(y.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+rn(e,t,n||(o?"border":"content"),r,s)+"px"}function on(e){var t=i,n=Jt[e];if(!n){n=un(e,t);if(n==="none"||!n)It=(It||y("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=un(e,t),It.detach();Jt[e]=n}return n}function un(e,t){var n=y(t.createElement(e)).appendTo(t.body),r=y.css(n[0],"display");return n.remove(),r}function pn(e,t,n,r){var i;if(y.isArray(t))y.each(t,function(t,i){n||fn.test(e)?r(e,i):pn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&y.type(t)==="object")for(i in t)pn(e+"["+i+"]",t[i],n,r);else r(e,t)}function On(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(w)||[];if(y.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Mn(e,t,n,r){function o(u){var a;return i[u]=!0,y.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===kn;return o(t.dataTypes[0])||!i["*"]&&o("*")}function _n(e,n){var r,i,s=y.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);return i&&y.extend(!0,e,i),e}function Dn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("Content-Type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function Pn(e,t){var n,r,i,s,o={},u=0,a=e.dataTypes.slice(),f=a[0];e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(a[1])for(n in e.converters)o[n.toLowerCase()]=e.converters[n];for(;i=a[++u];)if(i!=="*"){if(f!=="*"&&f!==i){n=o[f+" "+i]||o["* "+i];if(!n)for(r in o){s=r.split(" ");if(s[1]===i){n=o[f+" "+s[0]]||o["* "+s[0]];if(n){n===!0?n=o[r]:o[r]!==!0&&(i=s[0],a.splice(u--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+f+" to "+i}}}f=i}return{state:"success",data:t}}function Rn(){try{return new e.XMLHttpRequest}catch(t){}}function Un(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Qn(){return setTimeout(function(){zn=t}),zn=y.now()}function Gn(e,t){y.each(t,function(t,n){var r=(Kn[t]||[]).concat(Kn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Yn(e,t,n){var r,i,s=0,o=Jn.length,u=y.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=zn||Qn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:y.extend({},t),opts:y.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:zn||Qn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=y.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Zn(l,f.opts.specialEasing);for(;s<o;s++){r=Jn[s].call(f,e,l,f.opts);if(r)return r}return Gn(f,l),y.isFunction(f.opts.start)&&f.opts.start.call(e,f),y.fx.timer(y.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Zn(e,t){var n,r,i,s,o;for(n in e){r=y.camelCase(n),i=t[r],s=e[n],y.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=y.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function er(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},v=[],m=e.nodeType&&en(e);n.queue||(l=y._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,y.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],y.css(e,"display")==="inline"&&y.css(e,"float")==="none"&&(!y.support.inlineBlockNeedsLayout||on(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",y.support.shrinkWrapBlocks||h.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Xn.exec(s)){delete t[r],a=a||s==="toggle";if(s===(m?"hide":"show"))continue;v.push(r)}}o=v.length;if(o){u=y._data(e,"fxshow")||y._data(e,"fxshow",{}),"hidden"in u&&(m=u.hidden),a&&(u.hidden=!m),m?y(e).show():h.done(function(){y(e).hide()}),h.done(function(){var t;y._removeData(e,"fxshow");for(t in d)y.style(e,t,d[t])});for(r=0;r<o;r++)i=v[r],f=h.createTween(i,m?u[i]:0),d[i]=u[i]||y.style(e,i),i in u||(u[i]=f.start,m&&(f.end=f.start,f.start=i==="width"||i==="height"?1:0))}}function tr(e,t,n,r,i){return new tr.prototype.init(e,t,n,r,i)}function nr(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=Gt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function rr(e){return y.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.jQuery,u=e.$,a={},f=[],l="1.9.0",c=f.concat,h=f.push,p=f.slice,d=f.indexOf,v=a.toString,m=a.hasOwnProperty,g=l.trim,y=function(e,t){return new y.fn.init(e,t,n)},b=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,E=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,S=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,x=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,T=/^[\],:{}\s]*$/,N=/(?:^|:|,)(?:\s*\[)+/g,C=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,k=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,L=/^-ms-/,A=/-([\da-z])/gi,O=function(e,t){return t.toUpperCase()},M=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",M,!1),y.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",M),y.ready())};y.fn=y.prototype={jquery:l,constructor:y,init:function(e,n,r){var s,o;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=S.exec(e);if(s&&(s[1]||!n)){if(s[1]){n=n instanceof y?n[0]:n,y.merge(this,y.parseHTML(s[1],n&&n.nodeType?n.ownerDocument||n:i,!0));if(x.test(s[1])&&y.isPlainObject(n))for(s in n)y.isFunction(this[s])?this[s](n[s]):this.attr(s,n[s]);return this}o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):y.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),y.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return p.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=y.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return y.each(this,e,t)},ready:function(e){return y.ready.promise().done(e),this},slice:function(){return this.pushStack(p.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(y.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},y.fn.init.prototype=y.fn,y.extend=y.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!y.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(y.isPlainObject(i)||(s=y.isArray(i)))?(s?(s=!1,o=r&&y.isArray(r)?r:[]):o=r&&y.isPlainObject(r)?r:{},u[n]=y.extend(l,o,i)):i!==t&&(u[n]=i)}return u},y.extend({noConflict:function(t){return e.$===y&&(e.$=u),t&&e.jQuery===y&&(e.jQuery=o),y},isReady:!1,readyWait:1,holdReady:function(e){e?y.readyWait++:y.ready(!0)},ready:function(e){if(e===!0?--y.readyWait:y.isReady)return;if(!i.body)return setTimeout(y.ready);y.isReady=!0;if(e!==!0&&--y.readyWait>0)return;r.resolveWith(i,[y]),y.fn.trigger&&y(i).trigger("ready").off("ready")},isFunction:function(e){return y.type(e)==="function"},isArray:Array.isArray||function(e){return y.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?a[v.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||y.type(e)!=="object"||e.nodeType||y.isWindow(e))return!1;try{if(e.constructor&&!m.call(e,"constructor")&&!m.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||m.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||i;var r=x.exec(e),s=!n&&[];return r?[t.createElement(r[1])]:(r=y.buildFragment([e],t,s),s&&y(s).remove(),y.merge([],r.childNodes))},parseJSON:function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(t===null)return t;if(typeof t=="string"){t=y.trim(t);if(t&&T.test(t.replace(C,"@").replace(k,"]").replace(N,"")))return(new Function("return "+t))()}y.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&y.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&y.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(L,"ms-").replace(A,O)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=_(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:g&&!g.call("﻿ ")?function(e){return e==null?"":g.call(e)}:function(e){return e==null?"":(e+"").replace(E,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(_(Object(e))?y.merge(n,typeof e=="string"?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(d)return d.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=_(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),r!=null&&(u[u.length]=r);return c.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),y.isFunction(e)?(i=p.call(arguments,2),s=function(){return e.apply(n||this,i.concat(p.call(arguments)))},s.guid=e.guid=e.guid||y.guid++,s):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=r==null;if(y.type(r)==="object"){s=!0;for(a in r)y.access(e,n,a,r[a],!0,o,u)}else if(i!==t){s=!0,y.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(y(e),n)}));if(n)for(;a<f;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)))}return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()}}),y.ready.promise=function(t){if(!r){r=y.Deferred();if(i.readyState==="complete")setTimeout(y.ready);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",M,!1),e.addEventListener("load",y.ready,!1);else{i.attachEvent("onreadystatechange",M),e.attachEvent("onload",y.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!y.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}y.ready()}}()}}return r.promise(t)},y.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){a["[object "+t+"]"]=t.toLowerCase()}),n=y(i);var D={};y.Callbacks=function(e){e=typeof e=="string"?D[e]||P(e):y.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){y.each(t,function(t,n){var i=y.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&y.each(arguments,function(e,t){var n;while((n=y.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return y.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},y.extend({Deferred:function(e){var t=[["resolve","done",y.Callbacks("once memory"),"resolved"],["reject","fail",y.Callbacks("once memory"),"rejected"],["notify","progress",y.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return y.Deferred(function(n){y.each(t,function(t,s){var o=s[0],u=y.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&y.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?y.extend(e,r):r}},i={};return r.pipe=r.then,y.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=p.call(arguments),r=n.length,i=r!==1||e&&y.isFunction(e.promise)?r:0,s=i===1?e:y.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?p.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&y.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),y.support=function(){var t,n,r,s,o,u,a,f,l,c,h=i.createElement("div");h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=h.getElementsByTagName("*"),r=h.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=h.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:h.className!=="t",leadingWhitespace:h.firstChild.nodeType===3,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!u.value,optSelected:o.selected,enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete h.test}catch(p){t.deleteExpando=!1}u=i.createElement("input"),u.setAttribute("value",""),t.input=u.getAttribute("value")==="",u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","t"),u.setAttribute("name","t"),a=i.createDocumentFragment(),a.appendChild(u),t.appendChecked=u.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,h.attachEvent&&(h.attachEvent("onclick",function(){t.noCloneEvent=!1}),h.cloneNode(!0).click());for(c in{submit:!0,change:!0,focusin:!0})h.setAttribute(f="on"+c,"t"),t[c+"Bubbles"]=f in e||h.attributes[f].expando===!1;return h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle=h.style.backgroundClip==="content-box",y(function(){var n,r,s,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",u=i.getElementsByTagName("body")[0];if(!u)return;n=i.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(h),h.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=h.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",l=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=l&&s[0].offsetHeight===0,h.innerHTML="",h.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=h.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=u.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(h,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(h,null)||{width:"4px"}).width==="4px",r=h.appendChild(i.createElement("div")),r.style.cssText=h.style.cssText=o,r.style.marginRight=r.style.width="0",h.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof h.style.zoom!="undefined"&&(h.innerHTML="",h.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=h.offsetWidth===3,h.style.display="block",h.innerHTML="<div></div>",h.firstChild.style.width="5px",t.shrinkWrapBlocks=h.offsetWidth!==3,u.style.zoom=1),u.removeChild(n),n=h=s=r=null}),n=s=a=o=r=u=null,t}();var H=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,B=/([A-Z])/g;y.extend({cache:{},expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?y.cache[e[y.expando]]:e[y.expando],!!e&&!q(e)},data:function(e,t,n){return j(e,t,n,!1)},removeData:function(e,t){return F(e,t,!1)},_data:function(e,t,n){return j(e,t,n,!0)},_removeData:function(e,t){return F(e,t,!0)},acceptData:function(e){var t=e.nodeName&&y.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),y.fn.extend({data:function(e,n){var r,i,s=this[0],o=0,u=null;if(e===t){if(this.length){u=y.data(s);if(s.nodeType===1&&!y._data(s,"parsedAttrs")){r=s.attributes;for(;o<r.length;o++)i=r[o].name,i.indexOf("data-")||(i=y.camelCase(i.substring(5)),I(s,i,u[i]));y._data(s,"parsedAttrs",!0)}}return u}return typeof e=="object"?this.each(function(){y.data(this,e)}):y.access(this,function(n){if(n===t)return s?I(s,e,y.data(s,e)):null;this.each(function(){y.data(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){y.removeData(this,e)})}}),y.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=y._data(e,t),n&&(!r||y.isArray(n)?r=y._data(e,t,y.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=y.queue(e,t),r=n.length,i=n.shift(),s=y._queueHooks(e,t),o=function(){y.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),s.cur=i,i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return y._data(e,n)||y._data(e,n,{empty:y.Callbacks("once memory").add(function(){y._removeData(e,t+"queue"),y._removeData(e,n)})})}}),y.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?y.queue(this[0],e):n===t?this:this.each(function(){var t=y.queue(this,e,n);y._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&y.dequeue(this,e)})},dequeue:function(e){return this.each(function(){y.dequeue(this,e)})},delay:function(e,t){return e=y.fx?y.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=y.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=y._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var R,U,z=/[\t\r\n]/g,W=/\r/g,X=/^(?:input|select|textarea|button|object)$/i,V=/^(?:a|area)$/i,$=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,J=/^(?:checked|selected)$/i,K=y.support.getSetAttribute,Q=y.support.input;y.fn.extend({attr:function(e,t){return y.access(this,y.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){y.removeAttr(this,e)})},prop:function(e,t){return y.access(this,y.prop,e,t,arguments.length>1)},removeProp:function(e){return e=y.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=typeof e=="string"&&e;if(y.isFunction(e))return this.each(function(t){y(this).addClass(e.call(this,t,this.className))});if(a){t=(e||"").match(w)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(z," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=y.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=arguments.length===0||typeof e=="string"&&e;if(y.isFunction(e))return this.each(function(t){y(this).removeClass(e.call(this,t,this.className))});if(a){t=(e||"").match(w)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(z," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?y.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return y.isFunction(e)?this.each(function(n){y(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=y(this),u=t,a=e.match(w)||[];while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&y._data(this,"__className__",this.className),this.className=this.className||e===!1?"":y._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(z," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=y.valHooks[s.type]||y.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(W,""):r==null?"":r);return}return i=y.isFunction(e),this.each(function(r){var s,o=y(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":y.isArray(s)&&(s=y.map(s,function(e){return e==null?"":e+""})),n=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),y.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(y.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!y.nodeName(n.parentNode,"optgroup"))){t=y(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=y.makeArray(t);return y(e).find("option").each(function(){this.selected=y.inArray(y(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;if(typeof e.getAttribute=="undefined")return y.prop(e,n,r);o=u!==1||!y.isXMLDoc(e),o&&(n=n.toLowerCase(),s=y.attrHooks[n]||($.test(n)?U:R));if(r===t)return s&&o&&"get"in s&&(i=s.get(e,n))!==null?i:(typeof e.getAttribute!="undefined"&&(i=e.getAttribute(n)),i==null?t:i);if(r!==null)return s&&o&&"set"in s&&(i=s.set(e,r,n))!==t?i:(e.setAttribute(n,r+""),r);y.removeAttr(e,n)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(w);if(s&&e.nodeType===1)while(n=s[i++])r=y.propFix[n]||n,$.test(n)?!K&&J.test(n)?e[y.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:y.attr(e,n,""),e.removeAttribute(K?n:r)},attrHooks:{type:{set:function(e,t){if(!y.support.radioValue&&t==="radio"&&y.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing"
,cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!y.isXMLDoc(e),o&&(n=y.propFix[n]||n,s=y.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):X.test(e.nodeName)||V.test(e.nodeName)&&e.href?0:t}}}}),U={get:function(e,n){var r=y.prop(e,n),i=typeof r=="boolean"&&e.getAttribute(n),s=typeof r=="boolean"?Q&&K?i!=null:J.test(n)?e[y.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return s&&s.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?y.removeAttr(e,n):Q&&K||!J.test(n)?e.setAttribute(!K&&y.propFix[n]||n,n):e[y.camelCase("default-"+n)]=e[n]=!0,n}};if(!Q||!K)y.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return y.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,t,n){if(!y.nodeName(e,"input"))return R&&R.set(e,t,n);e.defaultValue=t}};K||(R=y.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&(n==="id"||n==="name"||n==="coords"?r.value!=="":r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="",r==="value"||n===e.getAttribute(r)?n:t}},y.attrHooks.contenteditable={get:R.get,set:function(e,t,n){R.set(e,t===""?!1:t,n)}},y.each(["width","height"],function(e,t){y.attrHooks[t]=y.extend(y.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})})),y.support.hrefNormalized||(y.each(["href","src","width","height"],function(e,n){y.attrHooks[n]=y.extend(y.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r==null?t:r}})}),y.each(["href","src"],function(e,t){y.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),y.support.style||(y.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),y.support.optSelected||(y.propHooks.selected=y.extend(y.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),y.support.enctype||(y.propFix.enctype="encoding"),y.support.checkOn||y.each(["radio","checkbox"],function(){y.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),y.each(["radio","checkbox"],function(){y.valHooks[this]=y.extend(y.valHooks[this],{set:function(e,t){if(y.isArray(t))return e.checked=y.inArray(y(e).val(),t)>=0}})});var G=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,et=/^(?:focusinfocus|focusoutblur)$/,tt=/^([^.]*)(?:\.(.+)|)$/;y.event={global:{},add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=e.nodeType!==3&&e.nodeType!==8&&y._data(e);if(!g)return;r.handler&&(o=r,r=o.handler,s=o.selector),r.guid||(r.guid=y.guid++),(f=g.events)||(f=g.events={}),(u=g.handle)||(u=g.handle=function(e){return typeof y=="undefined"||!!e&&y.event.triggered===e.type?t:y.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=(n||"").match(w)||[""],l=n.length;while(l--){a=tt.exec(n[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),h=y.event.special[d]||{},d=(s?h.delegateType:h.bindType)||d,h=y.event.special[d]||{},c=y.extend({type:d,origType:m,data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&y.expr.match.needsContext.test(s),namespace:v.join(".")},o);if(!(p=f[d])){p=f[d]=[],p.delegateCount=0;if(!h.setup||h.setup.call(e,i,v,u)===!1)e.addEventListener?e.addEventListener(d,u,!1):e.attachEvent&&e.attachEvent("on"+d,u)}h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),s?p.splice(p.delegateCount++,0,c):p.push(c),y.event.global[d]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=y.hasData(e)&&y._data(e);if(!m||!(a=m.events))return;t=(t||"").match(w)||[""],f=t.length;while(f--){u=tt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in a)y.event.remove(e,p+t[f],n,r,!0);continue}c=y.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=a[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;while(s--)l=h[s],(i||v===l.origType)&&(!n||n.guid===l.guid)&&(!u||u.test(l.namespace))&&(!r||r===l.selector||r==="**"&&l.selector)&&(h.splice(s,1),l.selector&&h.delegateCount--,c.remove&&c.remove.call(e,l));o&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&y.removeEvent(e,p,m.handle),delete a[p])}y.isEmptyObject(a)&&(delete m.handle,y._removeData(e,"events"))},trigger:function(n,r,s,o){var u,a,f,l,c,h,p,d=[s||i],v=n.type||n,m=n.namespace?n.namespace.split("."):[];a=f=s=s||i;if(s.nodeType===3||s.nodeType===8)return;if(et.test(v+y.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),c=v.indexOf(":")<0&&"on"+v,n=n[y.expando]?n:new y.Event(v,typeof n=="object"&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=s),r=r==null?[n]:y.makeArray(r,[n]),p=y.event.special[v]||{};if(!o&&p.trigger&&p.trigger.apply(s,r)===!1)return;if(!o&&!p.noBubble&&!y.isWindow(s)){l=p.delegateType||v,et.test(l+v)||(a=a.parentNode);for(;a;a=a.parentNode)d.push(a),f=a;f===(s.ownerDocument||i)&&d.push(f.defaultView||f.parentWindow||e)}u=0;while((a=d[u++])&&!n.isPropagationStopped())n.type=u>1?l:p.bindType||v,h=(y._data(a,"events")||{})[n.type]&&y._data(a,"handle"),h&&h.apply(a,r),h=c&&a[c],h&&y.acceptData(a)&&h.apply&&h.apply(a,r)===!1&&n.preventDefault();n.type=v;if(!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(v!=="click"||!y.nodeName(s,"a"))&&y.acceptData(s)&&c&&s[v]&&!y.isWindow(s)){f=s[c],f&&(s[c]=null),y.event.triggered=v;try{s[v]()}catch(g){}y.event.triggered=t,f&&(s[c]=f)}return n.result},dispatch:function(e){e=y.event.fix(e);var n,r,i,s,o,u=[],a=p.call(arguments),f=(y._data(this,"events")||{})[e.type]||[],l=y.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=y.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,r=0;while((o=s.handlers[r++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(o.namespace))e.handleObj=o,e.data=o.data,i=((y.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),i!==t&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||e.type!=="click"))for(;f!=this;f=f.parentNode||this)if(f.disabled!==!0||e.type!=="click"){i=[];for(r=0;r<a;r++)o=n[r],s=o.selector+" ",i[s]===t&&(i[s]=o.needsContext?y(s,this).index(f)>=0:y.find(s,this,null,[f]).length),i[s]&&i.push(o);i.length&&u.push({elem:f,handlers:i})}return a<n.length&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[y.expando])return e;var t,n,r=e,s=y.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=new y.Event(r),t=o.length;while(t--)n=o[t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){if(y.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1}},focus:{trigger:function(){if(this!==i.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===i.activeElement&&this.blur)return this.blur(),!1},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=y.extend(new y.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?y.event.trigger(i,null,t):y.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},y.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},y.Event=function(e,t){if(!(this instanceof y.Event))return new y.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?nt:rt):this.type=e,t&&y.extend(this,t),this.timeStamp=e&&e.timeStamp||y.now(),this[y.expando]=!0},y.Event.prototype={isDefaultPrevented:rt,isPropagationStopped:rt,isImmediatePropagationStopped:rt,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=nt;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=nt;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=nt,this.stopPropagation()}},y.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){y.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!y.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),y.support.submitBubbles||(y.event.special.submit={setup:function(){if(y.nodeName(this,"form"))return!1;y.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=y.nodeName(n,"input")||y.nodeName(n,"button")?n.form:t;r&&!y._data(r,"submitBubbles")&&(y.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),y._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&y.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(y.nodeName(this,"form"))return!1;y.event.remove(this,"._submit")}}),y.support.changeBubbles||(y.event.special.change={setup:function(){if(G.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")y.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),y.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),y.event.simulate("change",this,e,!0)});return!1}y.event.add(this,"beforeactivate._change",function(e){var t=e.target;G.test(t.nodeName)&&!y._data(t,"changeBubbles")&&(y.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&y.event.simulate("change",this.parentNode,e,!0)}),y._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return y.event.remove(this,"._change"),!G.test(this.nodeName)}}),y.support.focusinBubbles||y.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){y.event.simulate(t,e.target,y.event.fix(e),!0)};y.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),y.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=rt;else if(!i)return this;return s===1&&(o=i,i=function(e){return y().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=y.guid++)),this.each(function(){y.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,y(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=rt),this.each(function(){y.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){y.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return y.event.trigger(e,t,n,!0)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),y.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){y.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Y.test(t)&&(y.event.fixHooks[t]=y.event.keyHooks),Z.test(t)&&(y.event.fixHooks[t]=y.event.mouseHooks)}),function(e,t){function rt(e){return J.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function st(e){return e[w]=!0,e}function ot(e){var t=c.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function ut(e,t,n,r){var i,s,o,u,a,f,h,v,m,y;(t?t.ownerDocument||t:E)!==c&&l(t),t=t||c,n=n||[];if(!e||typeof e!="string")return n;if((u=t.nodeType)!==1&&u!==9)return[];if(!p&&!r){if(i=K.exec(e))if(o=i[1]){if(u===9){s=t.getElementById(o);if(!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&g(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return _.apply(n,D.call(t.getElementsByTagName(e),0)),n;if((o=i[3])&&S.getByClassName&&t.getElementsByClassName)return _.apply(n,D.call(t.getElementsByClassName(o),0)),n}if(S.qsa&&!d.test(e)){h=!0,v=w,m=t,y=u===9&&e;if(u===1&&t.nodeName.toLowerCase()!=="object"){f=ht(e),(h=t.getAttribute("id"))?v=h.replace(Y,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",a=f.length;while(a--)f[a]=v+pt(f[a]);m=$.test(e)&&t.parentNode||t,y=f.join(",")}if(y)try{return _.apply(n,D.call(m.querySelectorAll(y),0)),n}catch(b){}finally{h||t.removeAttribute("id")}}}return Et(e.replace(R,"$1"),t,n,r)}function at(e,t){var n=e&&t&&e.nextSibling;for(;n;n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e,t){var n,r,s,o,u,a,f,l=C[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=U.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=z.exec(u))n=r.shift(),s.push({value:n,type:r[0].replace(R," ")}),u=u.slice(n.length);for(o in i.filter)(r=V[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(n=r.shift(),s.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ut.error(e):C(e,a).slice(0)}function pt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function dt(e,t,n){var i=t.dir,s=n&&t.dir==="parentNode",o=T++;return t.first?function(t,n,r){while(t=t[i])if(t.nodeType===1||s)return e(t,n,r)}:function(t,n,u){var a,f,l,c=x+" "+o;if(u){while(t=t[i])if(t.nodeType===1||s)if(e(t,n,u))return!0}else while(t=t[i])if(t.nodeType===1||s){l=t[w]||(t[w]={});if((f=l[i])&&f[0]===c){if((a=f[1])===!0||a===r)return a===!0}else{f=l[i]=[c],f[1]=e(t,n,u)||r;if(f[1]===!0)return!0}}}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function gt(e,t,n,r,i,s){return r&&!r[w]&&(r=gt(r)),i&&!i[w]&&(i=gt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?mt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=mt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=mt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function yt(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,l=dt(function(e){return e===t},u,!0),c=dt(function(e){return P.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[dt(vt(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[w]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return gt(a>1&&vt(h),a>1&&pt(e.slice(0,a-1)).replace(R,"$1"),n,a<r&&yt(e.slice(a,r)),r<s&&yt(e=e.slice(r)),r<s&&pt(e))}h.push(n)}return vt(h)}function bt(e,t){var n=0,s=t.length>0,o=e.length>0,u=function(u,a,l,h,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=p!=null,S=f,T=u||o&&i.find.TAG("*",p&&a.parentNode||a),N=x+=S==null?1:Math.E;E&&(f=a!==c&&a,r=n);for(;(d=T[b])!=null;b++){if(o&&d){for(v=0;m=e[v];v++)if(m(d,a,l)){h.push(d);break}E&&(x=N,r=++n)}s&&((d=!m&&d)&&y--,u&&w.push(d))}y+=b;if(s&&b!==y){for(v=0;m=t[v];v++)m(w,g,a,l);if(u){if(y>0)while(b--)!w[b]&&!g[b]&&(g[b]=M.call(h));g=mt(g)}_.apply(h,g),E&&!u&&g.length>0&&y+t.length>1&&ut.uniqueSort(h)}return E&&(x=N,f=S),w};return s?st(u):u}function wt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ut(e,t[r],n);return n}function Et(e,t,n,r){var s,o,a,f,l,c=ht(e);if(!r&&c.length===1){o=c[0]=c[0].slice(0);if(o.length>2&&(a=o[0]).type==="ID"&&t.nodeType===9&&!p&&i.relative[o[1].type]){t=i.find.ID(a.matches[0].replace(et,tt),t)[0];if(!t)return n;e=e.slice(o.shift().value.length)}for(s=V.needsContext.test(e)?-1:o.length-1;s>=0;s--){a=o[s];if(i.relative[f=a.type])break;if(l=i.find[f])if(r=l(a.matches[0].replace(et,tt),$.test(o[0].type)&&t.parentNode||t)){o.splice(s,1),e=r.length&&pt(o);if(!e)return _.apply(n,D.call(r,0)),n;break}}}return u(e,c)(r,t,p,n,$.test(e)),n}function St(){}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,b,w="sizzle"+ -(new Date),E=e.document,S={},x=0,T=0,N=it(),C=it(),k=it(),L=typeof t,A=1<<31,O=[],M=O.pop,_=O.push,D=O.slice,P=O.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},H="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=B.replace("w","w#"),F="([*^$|!~]?=)",I="\\["+H+"*("+B+")"+H+"*(?:"+F+H+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+j+")|)|)"+H+"*\\]",q=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),U=new RegExp("^"+H+"*,"+H+"*"),z=new RegExp("^"+H+"*([\\x20\\t\\r\\n\\f>+~])"+H+"*"),W=new RegExp(q),X=new RegExp("^"+j+"$"),V={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),NAME:new RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},$=/[\x20\t\r\n\f]*[+~]/,J=/\{\s*\[native code\]\s*\}/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)};try{D.call(h.childNodes,0)[0].nodeType}catch(nt){D=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}o=ut.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},l=ut.setDocument=function(e){var n=e?e.ownerDocument||e:E;if(n===c||n.nodeType!==9||!n.documentElement)return c;c=n,h=n.documentElement,p=o(n),S.tagNameNoComments=ot(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),S.attributes=ot(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),S.getByClassName=ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),S.getByName=ot(function(e){e.id=w+0,e.innerHTML="<a name='"+w+"'></a><div name='"+w+"'></div>",h.insertBefore(e,h.firstChild);var t=n.getElementsByName&&n.getElementsByName(w).length===2+n.getElementsByName(w+0).length;return S.getIdNotName=!n.getElementById(w),h.removeChild(e),t}),i.attrHandle=ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&e.firstChild.getAttribute("href")==="#"})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},S.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==L&&!p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==L&&!p){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==L&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=S.tagNameNoComments?function(e,t){if(typeof t.getElementsByTagName!==L)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){for(;n=s[i];i++)n.nodeType===1&&r.push(n);return r}return s},i.find.NAME=S.getByName&&function(e,t){if(typeof t.getElementsByName!==L)return t.getElementsByName(name)},i.find.CLASS=S.getByClassName&&function(e,t){if(typeof t.getElementsByClassName!==L&&!p)return t.getElementsByClassName(e)},v=[],d=[":focus"];if(S.qsa=rt(n.querySelectorAll))ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+H+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&d.push("[*^$]="+H+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")});return(S.matchesSelector=rt(m=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){S.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=new RegExp(d.join("|")),v=new RegExp(v.join("|")),g=rt(h.contains)||h.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},b=h.compareDocumentPosition?function(e,t){var r;if(e===t)return a=!0,0;if(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))return r&1||e.parentNode&&e.parentNode.nodeType===11?e===n||g(E,e)?-1:t===n||g(E,t)?1:0:r&4?-1:1;return e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],f=[t];if(e===t)return a=!0,0;if(e.sourceIndex&&t.sourceIndex)return(~t.sourceIndex||A)-(g(E,e)&&~e.sourceIndex||A);if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:0;if(s===o)return at(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)f.unshift(r);while(u[i]===f[i])i++;return i?at(u[i],f[i]):u[i]===E?-1:f[i]===E?1:0},a=!1,[0,0].sort(b),S.detectDuplicates=a,c},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){(e.ownerDocument||e)!==c&&l(e),t=t.replace(Z,"='$1']");if(S.matchesSelector&&!p&&(!v||!v.test(t))&&!d.test(t))try{var n=m.call(e,t);if(n||S.disconnectedMatch||e.document&&e.document.nodeType!==11)return n}catch(r){}return ut(t,c,null,[e]).length>0},ut.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},ut.attr=function(e,t){var n;return(e.ownerDocument||e)!==c&&l(e),p||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):p||S.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},ut.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,n=[],r=1,i=0;a=!S.detectDuplicates,e.sort(b);if(a){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},s=ut.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r];r++)n+=s(t);else if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue;return n},i=ut.selectors={cacheLength:50,createPseudo:st,match:V,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return V.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&W.test(n)&&(t=ht(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=N[e+" "];return t||(t=new RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&N(e,function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ut.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.substr(i.length-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===x&&f[1],h=f[0]===x&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[x,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===x)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[w]||(c[w]={}))[e]=[x,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=P.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:st(function(e){var t=[],n=[],r=u(e.replace(R,"$1"));return r[w]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return ut(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:st(function(e){return X.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[n<0?n+t:n]}),even:ct(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=lt(n);u=ut.compile=function(e,t){var n,r=[],i=[],s=k[e+" "];if(!s){t||(t=ht(e)),n=t.length;while(n--)s=yt(t[n]),s[w]?r.push(s):i.push(s);s=k(e,bt(i,r))}return s},i.pseudos.nth=i.pseudos.eq,i.filters=St.prototype=i.pseudos,i.setFilters=new St,l(),ut.attr=y.attr,y.find=ut,y.expr=ut.selectors,y.expr[":"]=y.expr.pseudos,y.unique=ut.uniqueSort,y.text=ut.getText,y.isXMLDoc=ut.isXML,y.contains=ut.contains}(e);var it=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ot=/^.[^:#\[\.,]*$/,ut=y.expr.match.needsContext,at={children:!0,contents:!0,next:!0,prev:!0};y.fn.extend({find:function(e){var t,n,r;if(typeof e!="string")return r=this,this.pushStack(y(e).filter(function(){for(t=0;t<r.length;t++)if(y.contains(r[t],this))return!0}));n=[];for(t=0;t<this.length;t++)y.find(e,this[t],n);return n=this.pushStack(y.unique(n)),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=y(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(y.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(lt(this,e,!1))},filter:function(e){return this.pushStack(lt(this,e,!0))},is:function(e){return!!e&&(typeof e=="string"?ut.test(e)?y(e,this.context).index(this[0])>=0:y.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ut.test(e)||typeof e!="string"?y(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:y.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return this.pushStack(s.length>1?y.unique(s):s)},index:function(e){return e?typeof e=="string"?y.inArray(this[0],y(e)):y.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?y(e,t):y.makeArray(e&&
e.nodeType?[e]:e),r=y.merge(this.get(),n);return this.pushStack(y.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),y.fn.andSelf=y.fn.addBack,y.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return y.dir(e,"parentNode")},parentsUntil:function(e,t,n){return y.dir(e,"parentNode",n)},next:function(e){return ft(e,"nextSibling")},prev:function(e){return ft(e,"previousSibling")},nextAll:function(e){return y.dir(e,"nextSibling")},prevAll:function(e){return y.dir(e,"previousSibling")},nextUntil:function(e,t,n){return y.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return y.dir(e,"previousSibling",n)},siblings:function(e){return y.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return y.sibling(e.firstChild)},contents:function(e){return y.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:y.merge([],e.childNodes)}},function(e,t){y.fn[e]=function(n,r){var i=y.map(this,t,n);return it.test(e)||(r=n),r&&typeof r=="string"&&(i=y.filter(r,i)),i=this.length>1&&!at[e]?y.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),y.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?y.find.matchesSelector(t[0],e)?[t[0]]:[]:y.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!y(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",pt=/ jQuery\d+="(?:null|\d+)"/g,dt=new RegExp("<(?:"+ht+")[\\s/>]","i"),vt=/^\s+/,mt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,gt=/<([\w:]+)/,yt=/<tbody/i,bt=/<|&#?\w+;/,wt=/<(?:script|style|link)/i,Et=/^(?:checkbox|radio)$/i,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/^$|\/(?:java|ecma)script/i,Tt=/^true\/(.*)/,Nt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ct={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:y.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},kt=ct(i),Lt=kt.appendChild(i.createElement("div"));Ct.optgroup=Ct.option,Ct.tbody=Ct.tfoot=Ct.colgroup=Ct.caption=Ct.thead,Ct.th=Ct.td,y.fn.extend({text:function(e){return y.access(this,function(e){return e===t?y.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(y.isFunction(e))return this.each(function(t){y(this).wrapAll(e.call(this,t))});if(this[0]){var t=y(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return y.isFunction(e)?this.each(function(t){y(this).wrapInner(e.call(this,t))}):this.each(function(){var t=y(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=y.isFunction(e);return this.each(function(n){y(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){y.nodeName(this,"body")||y(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||y.filter(e,[n]).length>0)!t&&n.nodeType===1&&y.cleanData(Ht(n)),n.parentNode&&(t&&y.contains(n.ownerDocument,n)&&_t(Ht(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&y.cleanData(Ht(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&y.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return y.clone(this,e,t)})},html:function(e){return y.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(pt,""):t;if(typeof e=="string"&&!wt.test(e)&&(y.support.htmlSerialize||!dt.test(e))&&(y.support.leadingWhitespace||!vt.test(e))&&!Ct[(gt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(mt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(y.cleanData(Ht(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=y.isFunction(e);return!t&&typeof e!="string"&&(e=y(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;if(n&&this.nodeType===1||this.nodeType===11)y(this).remove(),t?t.parentNode.insertBefore(e,t):n.appendChild(e)})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=c.apply([],e);var i,s,o,u,a,f,l=0,h=this.length,p=this,d=h-1,v=e[0],m=y.isFunction(v);if(m||!(h<=1||typeof v!="string"||y.support.checkClone||!St.test(v)))return this.each(function(i){var s=p.eq(i);m&&(e[0]=v.call(this,i,n?s.html():t)),s.domManip(e,n,r)});if(h){i=y.buildFragment(e,this[0].ownerDocument,!1,this),s=i.firstChild,i.childNodes.length===1&&(i=s);if(s){n=n&&y.nodeName(s,"tr"),o=y.map(Ht(i,"script"),Ot),u=o.length;for(;l<h;l++)a=i,l!==d&&(a=y.clone(a,!0,!0),u&&y.merge(o,Ht(a,"script"))),r.call(n&&y.nodeName(this[l],"table")?At(this[l],"tbody"):this[l],a,l);if(u){f=o[o.length-1].ownerDocument,y.map(o,Mt);for(l=0;l<u;l++)a=o[l],xt.test(a.type||"")&&!y._data(a,"globalEval")&&y.contains(f,a)&&(a.src?y.ajax({url:a.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):y.globalEval((a.text||a.textContent||a.innerHTML||"").replace(Nt,"")))}i=s=null}}return this}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){y.fn[e]=function(e){var n,r=0,i=[],s=y(e),o=s.length-1;for(;r<=o;r++)n=r===o?this:this.clone(!0),y(s[r])[t](n),h.apply(i,n.get());return this.pushStack(i)}}),y.extend({clone:function(e,t,n){var r,i,s,o,u,a=y.contains(e.ownerDocument,e);y.support.html5Clone||y.isXMLDoc(e)||!dt.test("<"+e.nodeName+">")?u=e.cloneNode(!0):(Lt.innerHTML=e.outerHTML,Lt.removeChild(u=Lt.firstChild));if((!y.support.noCloneEvent||!y.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!y.isXMLDoc(e)){r=Ht(u),i=Ht(e);for(o=0;(s=i[o])!=null;++o)r[o]&&Pt(s,r[o])}if(t)if(n){i=i||Ht(e),r=r||Ht(u);for(o=0;(s=i[o])!=null;o++)Dt(s,r[o])}else Dt(e,u);return r=Ht(u,"script"),r.length>0&&_t(r,!a&&Ht(e,"script")),r=i=s=null,u},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=ct(t),p=[],d=0;for(;d<c;d++){s=e[d];if(s||s===0)if(y.type(s)==="object")y.merge(p,s.nodeType?[s]:s);else if(!bt.test(s))p.push(t.createTextNode(s));else{u=u||h.appendChild(t.createElement("div")),o=(gt.exec(s)||["",""])[1].toLowerCase(),a=Ct[o]||Ct._default,u.innerHTML=a[1]+s.replace(mt,"<$1></$2>")+a[2],l=a[0];while(l--)u=u.lastChild;!y.support.leadingWhitespace&&vt.test(s)&&p.push(t.createTextNode(vt.exec(s)[0]));if(!y.support.tbody){s=o==="table"&&!yt.test(s)?u.firstChild:a[1]==="<table>"&&!yt.test(s)?u:0,l=s&&s.childNodes.length;while(l--)y.nodeName(f=s.childNodes[l],"tbody")&&!f.childNodes.length&&s.removeChild(f)}y.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}}u&&h.removeChild(u),y.support.appendChecked||y.grep(Ht(p,"input"),Bt),d=0;while(s=p[d++]){if(r&&y.inArray(s,r)!==-1)continue;i=y.contains(s.ownerDocument,s),u=Ht(h.appendChild(s),"script"),i&&_t(u);if(n){l=0;while(s=u[l++])xt.test(s.type||"")&&n.push(s)}}return u=null,h},cleanData:function(e,t){var n,r,i,s,o=0,u=y.expando,a=y.cache,l=y.support.deleteExpando,c=y.event.special;for(;(i=e[o])!=null;o++)if(t||y.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)c[s]?y.event.remove(i,s):y.removeEvent(i,s,n.handle);a[r]&&(delete a[r],l?delete i[u]:typeof i.removeAttribute!="undefined"?i.removeAttribute(u):i[u]=null,f.push(r))}}}});var jt,Ft,It,qt=/alpha\([^)]*\)/i,Rt=/opacity\s*=\s*([^)]*)/,Ut=/^(top|right|bottom|left)$/,zt=/^(none|table(?!-c[ea]).+)/,Wt=/^margin/,Xt=new RegExp("^("+b+")(.*)$","i"),Vt=new RegExp("^("+b+")(?!px)[a-z%]+$","i"),$t=new RegExp("^([+-])=("+b+")","i"),Jt={BODY:"block"},Kt={position:"absolute",visibility:"hidden",display:"block"},Qt={letterSpacing:0,fontWeight:400},Gt=["Top","Right","Bottom","Left"],Yt=["Webkit","O","Moz","ms"];y.fn.extend({css:function(e,n){return y.access(this,function(e,n,r){var i,s,o={},u=0;if(y.isArray(n)){i=Ft(e),s=n.length;for(;u<s;u++)o[n[u]]=y.css(e,n[u],!1,i);return o}return r!==t?y.style(e,n,r):y.css(e,n)},e,n,arguments.length>1)},show:function(){return tn(this,!0)},hide:function(){return tn(this)},toggle:function(e){var t=typeof e=="boolean";return this.each(function(){(t?e:en(this))?y(this).show():y(this).hide()})}}),y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=jt(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":y.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=y.camelCase(n),f=e.style;n=y.cssProps[a]||(y.cssProps[a]=Zt(f,a)),u=y.cssHooks[n]||y.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=$t.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(y.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!y.cssNumber[a]&&(r+="px"),!y.support.clearCloneStyle&&r===""&&n.indexOf("background")===0&&(f[n]="inherit");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=y.camelCase(n);return n=y.cssProps[a]||(y.cssProps[a]=Zt(e.style,a)),u=y.cssHooks[n]||y.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,r)),s===t&&(s=jt(e,n,i)),s==="normal"&&n in Qt&&(s=Qt[n]),r?(o=parseFloat(s),r===!0||y.isNumeric(o)?o||0:s):s},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),e.getComputedStyle?(Ft=function(t){return e.getComputedStyle(t,null)},jt=function(e,n,r){var i,s,o,u=r||Ft(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(a===""&&!y.contains(e.ownerDocument,e)&&(a=y.style(e,n)),Vt.test(a)&&Wt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):i.documentElement.currentStyle&&(Ft=function(e){return e.currentStyle},jt=function(e,n,r){var i,s,o,u=r||Ft(e),a=u?u[n]:t,f=e.style;return a==null&&f&&f[n]&&(a=f[n]),Vt.test(a)&&!Ut.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left=n==="fontSize"?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),a===""?"auto":a}),y.each(["height","width"],function(e,t){y.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&zt.test(y.css(e,"display"))?y.swap(e,Kt,function(){return sn(e,t,r)}):sn(e,t,r)},set:function(e,n,r){var i=r&&Ft(e);return nn(e,n,r?rn(e,t,r,y.support.boxSizing&&y.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),y.support.opacity||(y.cssHooks.opacity={get:function(e,t){return Rt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=y.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&y.trim(s.replace(qt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=qt.test(s)?s.replace(qt,i):s+" "+i}}),y(function(){y.support.reliableMarginRight||(y.cssHooks.marginRight={get:function(e,t){if(t)return y.swap(e,{display:"inline-block"},jt,[e,"marginRight"])}}),!y.support.pixelPosition&&y.fn.position&&y.each(["top","left"],function(e,t){y.cssHooks[t]={get:function(e,n){if(n)return n=jt(e,t),Vt.test(n)?y(e).position()[t]+"px":n}}})}),y.expr&&y.expr.filters&&(y.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!y.support.reliableHiddenOffsets&&(e.style&&e.style.display||y.css(e,"display"))==="none"},y.expr.filters.visible=function(e){return!y.expr.filters.hidden(e)}),y.each({margin:"",padding:"",border:"Width"},function(e,t){y.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+Gt[r]+t]=s[r]||s[r-2]||s[0];return i}},Wt.test(e)||(y.cssHooks[e+t].set=nn)});var an=/%20/g,fn=/\[\]$/,ln=/\r?\n/g,cn=/^(?:submit|button|image|reset)$/i,hn=/^(?:input|select|textarea|keygen)/i;y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=y.prop(this,"elements");return e?y.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!y(this).is(":disabled")&&hn.test(this.nodeName)&&!cn.test(e)&&(this.checked||!Et.test(e))}).map(function(e,t){var n=y(this).val();return n==null?null:y.isArray(n)?y.map(n,function(e){return{name:t.name,value:e.replace(ln,"\r\n")}}):{name:t.name,value:n.replace(ln,"\r\n")}}).get()}}),y.param=function(e,n){var r,i=[],s=function(e,t){t=y.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=y.ajaxSettings&&y.ajaxSettings.traditional);if(y.isArray(e)||e.jquery&&!y.isPlainObject(e))y.each(e,function(){s(this.name,this.value)});else for(r in e)pn(r,e[r],n,s);return i.join("&").replace(an,"+")};var dn,vn,mn=y.now(),gn=/\?/,yn=/#.*$/,bn=/([?&])_=[^&]*/,wn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,En=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Sn=/^(?:GET|HEAD)$/,xn=/^\/\//,Tn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Nn=y.fn.load,Cn={},kn={},Ln="*/".concat("*");try{vn=s.href}catch(An){vn=i.createElement("a"),vn.href="",vn=vn.href}dn=Tn.exec(vn.toLowerCase())||[],y.fn.load=function(e,n,r){if(typeof e!="string"&&Nn)return Nn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),y.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),u.length>0&&y.ajax({url:e,type:s,dataType:"html",data:n}).done(function(e){o=arguments,u.html(i?y("<div>").append(y.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,o||[e.responseText,t,e])}),this},y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){y.fn[t]=function(e){return this.on(t,e)}}),y.each(["get","post"],function(e,n){y[n]=function(e,r,i,s){return y.isFunction(r)&&(s=s||i,i=r,r=t),y.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vn,type:"GET",isLocal:En.test(dn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ln,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":y.parseJSON,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_n(_n(e,y.ajaxSettings),t):_n(y.ajaxSettings,e)},ajaxPrefilter:On(Cn),ajaxTransport:On(kn),ajax:function(e,n){function N(e,n,o,a){var l,g,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),r=t,s=a||"",x.readyState=e>0?4:0,o&&(w=Dn(c,x,o));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(y.lastModified[i]=S),S=x.getResponseHeader("etag"),S&&(y.etag[i]=S)),e===304?(l=!0,T="notmodified"):(l=Pn(c,w),T=l.state,g=l.data,b=l.error,l=!b);else{b=T;if(e||!T)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(m),m=t,f&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:b]),v.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--y.active||y.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=y.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?y(h):y.event,d=y.Deferred(),v=y.Callbacks("once memory"),m=c.statusCode||{},g={},b={},E=0,S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(E===2){if(!o){o={};while(t=wn.exec(s))o[t[1].toLowerCase()]=t[2]}t=o[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return E===2?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return E||(e=b[n]=b[n]||e,g[e]=t),this},overrideMimeType:function(e){return E||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(E<2)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||S;return r&&r.abort(t),N(0,t),this}};d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||vn)+"").replace(yn,"").replace(xn,dn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=y.trim(c.dataType||"*").toLowerCase().match(w)||[""],c.crossDomain==null&&(a=Tn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===dn[1]&&a[2]===dn[2]&&(a[3]||(a[1]==="http:"?80:443))==(dn[3]||(dn[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=y.param(c.data,c.traditional)),Mn(Cn,c,n,x);if(E===2)return x;f=c.global,f&&y.active++===0&&y.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Sn.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(gn.test(i)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=bn.test(i)?i.replace(bn,"$1_="+mn++):i+(gn.test(i)?"&":"?")+"_="+mn++)),c.ifModified&&(y.lastModified[i]&&x.setRequestHeader("If-Modified-Since",y.lastModified[i]),y.etag[i]&&x.setRequestHeader("If-None-Match",y.etag[i])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Ln+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);r=Mn(kn,c,n,x);if(!r)N(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,r.send(g,N)}catch(T){if(!(E<2))throw T;N(-1,T)}}return x}return x.abort()},getScript:function(e,n){return y.get(e,t,n,"script")},getJSON:function(e,t,n){return y.get(e,t,n,"json")}}),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return y.globalEval(e),e}}}),y.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),y.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||y("head")[0]||i.documentElement;return{send:function(t,s){n=i.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){if(t||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||s(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Hn=[],Bn=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Hn.pop()||y.expando+"_"+mn++;return this[e]=!0,e}}),y.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Bn.test(n.url)?"url":typeof n.data=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");if(a||n.dataTypes[0]==="jsonp")return s=n.jsonpCallback=y.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Bn,"$1"+s):n.jsonp!==!1&&(n.url+=(gn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||y.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Hn.push(s)),u&&y.isFunction(o)&&o(u[0]),u=o=t}),"script"});var jn,Fn,In=0,qn=e.ActiveXObject&&function(){var e;for(e in jn)jn[e](t,!0)};y.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Rn()||Un()}:Rn,Fn=y.ajaxSettings.xhr(),y.support.cors=!!Fn&&"withCredentials"in Fn,Fn=y.support.ajax=!!Fn,Fn&&y.ajaxTransport(function(n){if(!n.crossDomain||y.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=y.noop,qn&&delete jn[o]);if(i)a.readyState!==4&&a.abort();else{c={},u=a.status,h=a.responseXML,l=a.getAllResponseHeaders(),h&&h.documentElement&&(c.xml=h),typeof a.responseText=="string"&&(c.text=a.responseText);try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r):(o=++In,qn&&(jn||(jn={},y(e).unload(qn)),jn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var zn,Wn,Xn=/^(?:toggle|show|hide)$/,Vn=new RegExp("^(?:([+-])=|)("+b+")([a-z%]*)$","i"),$n=/queueHooks$/,Jn=[er],Kn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=Vn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(y.cssNumber[e]?"":"px");if(r!=="px"&&u){u=y.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,y.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};y.Animation=y.extend(Yn,{tweener:function(e,t){y.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Kn[n]=Kn[n]||[],Kn[n].unshift(t)},prefilter:function(e,t){t?Jn.unshift(e):Jn.push(e)}}),y.Tween=tr,tr.prototype={constructor:tr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(y.cssNumber[n]?"":"px")},cur:function(){var e=tr.propHooks[this.prop];return e&&e.get?e.get(this):tr.propHooks._default.get(this)},run:function(e){var t,n=tr.propHooks[this.prop];return this.options.duration?this.pos=t=y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tr.propHooks._default.set(this),this}},tr.prototype.init.prototype=tr.prototype,tr.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=y.css(e.elem,e.prop,"auto"),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){y.fx.step[e.prop]?y.fx.step[e.prop](e):e.elem.style&&(e.elem.style[y.cssProps[e.prop]]!=null||y.cssHooks[e.prop])?y.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},tr.propHooks.scrollTop=tr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},y.each(["toggle","show","hide"],function(e,t){var n=y.fn[t];y.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(nr(t,!0),e,r,i)}}),y.fn.extend({fadeTo:function(e,t,n,r){return this.filter(en).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=y.isEmptyObject(e),s=y.speed(t,n,r),o=function(){var t=Yn(this,y.extend({},e),s);o.finish=function(){t.stop(!0)},(i||y._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=y.timers,o=y._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&$n.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&y.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=y._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=y.timers,o=r?r.length:0;n.finish=!0,y.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),y.each({slideDown:nr("show"),slideUp:nr("hide"),slideToggle:nr("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){y.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),y.speed=function(e,t,n){var r=e&&typeof e=="object"?y.extend({},e):{complete:n||!n&&t||y.isFunction(e)&&e,duration:e,easing:n&&t||t&&!y.isFunction(t)&&t};r.duration=y.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in y.fx.speeds?y.fx.speeds[r.duration]:y.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){y.isFunction(r.old)&&r.old.call(this),r.queue&&y.dequeue(this,r.queue)},r},y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},y.timers=[],y.fx=tr.prototype.init,y.fx.tick=function(){var e,n=y.timers,r=0;zn=y.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||y.fx.stop(),zn=t},y.fx.timer=function(e){e()&&y.timers.push(e)&&y.fx.start()},y.fx.interval=13,y.fx.start=function(){Wn||(Wn=setInterval(y.fx.tick,y.fx.interval))},y.fx.stop=function(){clearInterval(Wn),Wn=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fx.step={},y.expr&&y.expr.filters&&(y.expr.filters.animated=function(e){return y.grep(y.timers,function(t){return e===t.elem}).length}),y.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){y.offset.setOffset(this,e,t)});var n,r,i={top:0,left:0},s=this[0],o=s&&s.ownerDocument;if(!o)return;return n=o.documentElement,y.contains(n,s)?(typeof s.getBoundingClientRect!="undefined"&&(i=s.getBoundingClientRect()),r=rr(o),{top:i.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:i.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):i},y.offset={setOffset:function(e,t,n){var r=y.css(e,"position");r==="static"&&(e.style.position="relative");var i=y(e),s=i.offset(),o=y.css(e,"top"),u=y.css(e,"left"),a=(r==="absolute"||r==="fixed")&&y.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),y.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},y.fn.extend({position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return y.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),y.nodeName(e[0],"html")||(n=e.offset()),n.top+=y.css(e[0],"borderTopWidth",!0),n.left+=y.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-y.css(r,"marginTop",!0),left:t.left-n.left-y.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.documentElement;while(e&&!y.nodeName(e,"html")&&y.css(e,"position")==="static")e=e.offsetParent;return e||i.documentElement})}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);y.fn[e]=function(i){return y.access(this,function(e,i,s){var o=rr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?y(o).scrollLeft():s,r?s:y(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),y.each({Height:"height",Width:"width"},function(e,n){y.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){y.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return y.access(this,function(n,r,i){var s;return y.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?y.css(n,r,u):y.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=y,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return y})})(window),function(e,t){var n=function(){var t=e._data(document,"events");return t&&t.click&&e.grep(t.click,function(e){return e.namespace==="rails"}).length};n()&&e.error("jquery-ujs has already been loaded!");var r;e.rails=r={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(n){var i,s,o,u,a,f,l,c;if(r.fire(n,"ajax:before")){u=n.data("cross-domain"),a=u===t?null:u,f=n.data("with-credentials")||null,l=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType;if(n.is("form")){i=n.attr("method"),s=n.attr("action"),o=n.serializeArray();var h=n.data("ujs:submit-button");h&&(o.push(h),n.data("ujs:submit-button",null))}else n.is(r.inputChangeSelector)?(i=n.data("method"),s=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(i=n.data("method"),s=r.href(n),o=n.data("params")||null);c={type:i||"GET",data:o,dataType:l,beforeSend:function(e,i){return i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),r.fire(n,"ajax:beforeSend",[e,i])},success:function(e,t,r){n.trigger("ajax:success",[e,t,r])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,r){n.trigger("ajax:error",[e,t,r])},xhrFields:{withCredentials:f},crossDomain:a},s&&(c.url=s);var p=r.ajax(c);return n.trigger("ajax:send",p),p}return!1},handleMethod:function(n){var i=r.href(n),s=n.data("method"),o=n.attr("target"),u=e("meta[name=csrf-token]").attr("content"),a=e("meta[name=csrf-param]").attr("content"),f=e('<form method="post" action="'+i+'"></form>'),l='<input name="_method" value="'+s+'" type="hidden" />';a!==t&&u!==t&&(l+='<input name="'+a+'" value="'+u+'" type="hidden" />'),o&&f.attr("target",o),f.hide().append(l).appendTo("body"),f.submit()},disableFormElements:function(t){t.find(r.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(r.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t=e.data("confirm"),n=!1,i;return t?(r.fire(e,"confirm")&&(n=r.confirm(t),i=r.fire(e,"confirm:complete",[n])),n&&i):!0},blankInputs:function(t,n,r){var i=e(),s,o,u=n||"input,textarea",a=t.find(u);return a.each(function(){s=e(this),o=s.is(":checkbox,:radio")?s.is(":checked"):s.val();if(!o==!r){if(s.is(":radio")&&a.filter('input:radio:checked[name="'+s.attr("name")+'"]').length)return!0
;i=i.add(s)}}),i.length?i:!1},nonBlankInputs:function(e,t){return r.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(n,r){var i=n.data("events"),s=!0;return i!==t&&i.submit!==t&&e.each(i.submit,function(e,t){if(typeof t.handler=="function")return s=t.handler(r)}),s},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return r.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},r.fire(e(document),"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||r.CSRFProtection(n)}),e(document).delegate(r.linkDisableSelector,"ajax:complete",function(){r.enableElement(e(this))}),e(document).delegate(r.linkClickSelector,"click.rails",function(n){var i=e(this),s=i.data("method"),o=i.data("params");if(!r.allowAction(i))return r.stopEverything(n);i.is(r.linkDisableSelector)&&r.disableElement(i);if(i.data("remote")!==t){if((n.metaKey||n.ctrlKey)&&(!s||s==="GET")&&!o)return!0;var u=r.handleRemote(i);return u===!1?r.enableElement(i):u.error(function(){r.enableElement(i)}),!1}if(i.data("method"))return r.handleMethod(i),!1}),e(document).delegate(r.inputChangeSelector,"change.rails",function(t){var n=e(this);return r.allowAction(n)?(r.handleRemote(n),!1):r.stopEverything(t)}),e(document).delegate(r.formSubmitSelector,"submit.rails",function(n){var i=e(this),s=i.data("remote")!==t,o=r.blankInputs(i,r.requiredInputSelector),u=r.nonBlankInputs(i,r.fileInputSelector);if(!r.allowAction(i))return r.stopEverything(n);if(o&&i.attr("novalidate")==t&&r.fire(i,"ajax:aborted:required",[o]))return r.stopEverything(n);if(s){if(u){setTimeout(function(){r.disableFormElements(i)},13);var a=r.fire(i,"ajax:aborted:file",[u]);return a||setTimeout(function(){r.enableFormElements(i)},13),a}return!e.support.submitBubbles&&e().jquery<"1.7"&&r.callFormSubmitBindings(i,n)===!1?r.stopEverything(n):(r.handleRemote(i),!1)}setTimeout(function(){r.disableFormElements(i)},13)}),e(document).delegate(r.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!r.allowAction(n))return r.stopEverything(t);var i=n.attr("name"),s=i?{name:i,value:n.val()}:null;n.closest("form").data("ujs:submit-button",s)}),e(document).delegate(r.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&r.disableFormElements(e(this))}),e(document).delegate(r.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&r.enableFormElements(e(this))}),e(function(){csrf_token=e("meta[name=csrf-token]").attr("content"),csrf_param=e("meta[name=csrf-param]").attr("content"),e('form input[name="'+csrf_param+'"]').val(csrf_token)}))}(jQuery),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=parseFloat(t[1],10)===6}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){var o=!1,u=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!=u&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(u.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height
;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e,t){e.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t=="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,a=n.offset.left,f=a+n.proportions.width,l=n.offset.top,c=l+n.proportions.height;switch(r){case"fit":return a<=i&&s<=f&&l<=o&&u<=c;case"intersect":return a<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<f&&l<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<c;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,d=e.ui.isOver(p,h,l,a,n.proportions.height,n.proportions.width);return d;case"touch":return(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c)&&(i>=a&&i<=f||s>=a&&s<=f||i<a&&s>f);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;i=="mousedown"&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.options.scope,u=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===o});u.length&&(s=e.data(u[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e,t){e.widget("ui.resizable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="ui-resizable-"+s,u=e('<div class="ui-resizable-handle '+o+'"></div>');u.css({zIndex:n.zIndex}),"se"==s&&u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(n.disabled)return;e(this).removeClass("ui-resizable-autohide"),t._handles.show()}).mouseleave(function(){if(n.disabled)return;t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")}).insertAfter(n),n.remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),this._renderProxy();var o=n(this.helper.css("left")),u=n(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var a=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",a=="auto"?this.axis+"-resize":a),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(e){var t=this.helper,n=this.options,r={},i=this,s=this.originalMousePosition,o=this.axis,u=e.pageX-s.left||0,a=e.pageY-s.top||0,f=this._change[o];if(!f)return!1;var l=f.apply(this,[e,u,a]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey)l=this._updateRatio(l,e);return l=this._respectSize(l,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,a={width:r.helper.width()-u,height:r.helper.height()-o},f=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(a,{top:l,left:f})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t=this.options,n,i,s,o,u;u={minWidth:r(t.minWidth)?t.minWidth:0,maxWidth:r(t.maxWidth)?t.maxWidth:Infinity,minHeight:r(t.minHeight)?t.minHeight:0,maxHeight:r(t.maxHeight)?t.maxHeight:Infinity};if(this._aspectRatio||e)n=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,i=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,n>u.minWidth&&(u.minWidth=n),s>u.minHeight&&(u.minHeight=s),i<u.maxWidth&&(u.maxWidth=i),o<u.maxHeight&&(u.maxHeight=o);this._vBoundaries=u},_updateCache:function(e){var t=this.options;this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=this.options,i=this.position,s=this.size,o=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),o=="sw"&&(e.left=i.left+(s.width-e.width),e.top=null),o=="nw"&&(e.top=i.top+(s.height-e.height),e.left=i.left+(s.width-e.width)),e},_respectSize:function(e,t){var n=this.helper,i=this._vBoundaries,s=this._aspectRatio||t.shiftKey,o=this.axis,u=r(e.width)&&i.maxWidth&&i.maxWidth<e.width,a=r(e.height)&&i.maxHeight&&i.maxHeight<e.height,f=r(e.width)&&i.minWidth&&i.minWidth>e.width,l=r(e.height)&&i.minHeight&&i.minHeight>e.height;f&&(e.width=i.minWidth),l&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),a&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,p=/sw|nw|w/.test(o),d=/nw|ne|n/.test(o);f&&p&&(e.left=c-i.minWidth),u&&p&&(e.left=c-i.maxWidth),l&&d&&(e.top=h-i.minHeight),a&&d&&(e.top=h-i.maxHeight);var v=!e.width&&!e.height;return v&&!e.left&&e.top?e.top=null:v&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){var t=this.options;if(!this._proportionallyResizeElements.length)return;var n=this.helper||this.element;for(var r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.ui.ie6?1:0,i=e.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+i,height:this.element.outerHeight()+i,position:"absolute",left:this.elementOffset.left-r+"px",top:this.elementOffset.top-r+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof i.alsoResize=="object"&&!i.alsoResize.parentNode?i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)}):s(i.alsoResize)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(t,n){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&e.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,f={width:r.size.width-a,height:r.size.height-u},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,c=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(f,c&&l?{top:c,left:l}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,r){var i=e(this).data("resizable"),s=i.options,o=i.element,u=s.containment,a=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!a)return;i.containerElement=e(a);if(/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var f=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){l[e]=n(f.css("padding"+t))}),i.containerOffset=f.offset(),i.containerPosition=f.position(),i.containerSize={height:f.innerHeight()-l[3],width:f.innerWidth()-l[1]};var c=i.containerOffset,h=i.containerSize.height,p=i.containerSize.width,d=e.ui.hasScroll(a,"left")?a.scrollWidth:p,v=e.ui.hasScroll(a)?a.scrollHeight:h;i.parentData={element:a,left:c.left,top:c.top,width:d,height:v}}},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.containerSize,o=r.containerOffset,u=r.size,a=r.position,f=r._aspectRatio||t.shiftKey,l={top:0,left:0},c=r.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=o),a.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-l.left),f&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=i.helper?o.left:0),a.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),f&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var h=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),p=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-o.top)+r.sizeDiff.height),d=r.containerElement.get(0)==r.element.parent().get(0),v=/relative|absolute/.test(r.containerElement.css("position"));d&&v&&(h-=r.parentData.left),h+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-h,f&&(r.size.height=r.size.width/r.aspectRatio)),p+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-p,f&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.position,o=r.containerOffset,u=r.containerPosition,a=r.containerElement,f=e(r.helper),l=f.offset(),c=f.outerWidth()-r.sizeDiff.width,h=f.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h}),r._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:""),r.ghost.appendTo(r.helper)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,a=r.axis,f=i._aspectRatio||t.shiftKey;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var l=Math.round((s.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),c=Math.round((s.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c):/^(ne)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c):/^(sw)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.left=u.left-l):(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c,r.position.left=u.left-l)}});var n=function(e){return parseInt(e,10)||0},r=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.addClass("ui-selectee"),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;var r=this.options;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().andSelf().each(function(){var r=e.data(this,"selectable-item");if(r){var i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected");return r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1}})},_mouseDrag:function(t){var n=this;this.dragged=!0;if(this.options.disabled)return;var r=this.options,i=this.opos[0],s=this.opos[1],o=t.pageX,u=t.pageY;if(i>o){var a=o;o=i,i=a}if(s>u){var a=u;u=s,s=a}return this.helper.css({left:i,top:s,width:o-i,height:u-s}),this.selectees.each(function(){var a=e.data(this,"selectable-item");if(!a||a.element==n.element[0])return;var f=!1;r.tolerance=="touch"?f=!(a.left>o||a.right<i||a.top>u||a.bottom<s):r.tolerance=="fit"&&(f=a.left>i&&a.right<o&&a.top>s&&a.bottom<u),f?(a.selected&&(a.$element.removeClass("ui-selected"),a.selected=!1),a.unselecting&&(a.$element.removeClass("ui-unselecting"),a.unselecting=!1),a.selecting||(a.$element.addClass("ui-selecting"),a.selecting=!0,n._trigger("selecting",t,{selecting:a.element}))):(a.selecting&&((t.metaKey||t.ctrlKey)&&a.startselected?(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.$element.addClass("ui-selected"),a.selected=!0):(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.startselected&&(a.$element.addClass("ui-unselecting"),a.unselecting=!0),n._trigger("unselecting",t,{unselecting:a.element}))),a.selected&&!t.metaKey&&!t.ctrlKey&&!a.startselected&&(a.$element.removeClass("ui-selected"),a.selected=!1,a.$element.addClass("ui-unselecting"),a.unselecting=!0,n._trigger("unselecting",t,{unselecting:a.element})))}),!1},_mouseStop:function(t){var n=this;this.dragged=!1;var r=this.options;return e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e,t){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var i=null,s=e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")==r)return i=e(this),!1});e.data(t.target,r.widgetName+"-item")==r&&(i=e(t.target));if(!i)return!1;if(this.options.handle&&!n){var o=!1;e(this.options.handle,i).find("*").andSelf().each(function(){this==t.target&&(o=!0)});if(!o)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this
._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(s.instance!==this.currentContainer)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=this.options.axis==="x"||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=this.options.axis==="y"||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],r=[],i=this._connectWith();if(i&&t)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&r.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=r.length-1;s>=0;s--)r[s][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]==e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],i=this._connectWith();if(i&&this.ready)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&(r.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a))}}for(var s=r.length-1;s>=0;s--){var f=r[s][1],l=r[s][0];for(var u=0,c=l.length;u<c;u++){var h=e(l[u]);h.data(this.widgetName+"-item",f),n.push({item:h,instance:f,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var n=t.options;if(!n.placeholder||n.placeholder.constructor==String){var r=n.placeholder;n.placeholder={element:function(){var n=e(document.createElement(t.currentItem[0].nodeName)).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(n.style.visibility="hidden"),n},update:function(e,i){if(r&&!n.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n=null,r=null;for(var i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!n)return;if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else{var s=1e4,o=null,u=this.containers[r].floating?"left":"top",a=this.containers[r].floating?"width":"height",f=this.positionAbs[u]+this.offset.click[u];for(var l=this.items.length-1;l>=0;l--){if(!e.contains(this.containers[r].element[0],this.items[l].item[0]))continue;if(this.items[l].item[0]==this.currentItem[0])continue;var c=this.items[l].item.offset()[u],h=!1;Math.abs(c-f)>Math.abs(c+this.items[l][a]-f)&&(h=!0,c+=this.items[l][a]),Math.abs(c-f)<s&&(s=Math.abs(c-f),o=this.items[l],this.direction=h?"up":"down")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var a=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2]?a-this.offset.click.left<this.containment[0]?a+n.grid[0]:a-n.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i==this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")this._storedCSS[i]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var i=this.containers.length-1;i>=0;i--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),jQuery.effects||function(e,t){var n=e.uiBackCompat!==!1,r="ui-effects-";e.effects={effect:{}},function(t,n){function p(e,t,n){var r=a[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function d(e){var n=o(),r=n._rgba=[];return e=e.toLowerCase(),h(s,function(t,i){var s,o=i.re.exec(e),a=o&&i.parse(o),f=i.space||"rgba";if(a)return s=n[f](a),n[u[f].cache]=s[u[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&t.extend(r,c.transparent),n):c[e]}function v(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),i=/^([\-+])=\s*(\d+\.?\d*)/,s=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],o=t.Color=function(e,n,r,i){return new t.Color.fn.parse(e,n,r,i)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},a={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=o.support={},l=t("<p>")[0],c,h=t.each;l.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=l.style.backgroundColor.indexOf("rgba")>-1,h(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),o.fn=t.extend(o.prototype,{parse:function(r,i,s,a){if(r===n)return this._rgba=[null,null,null,null],this;if(r.jquery||r.nodeType)r=t(r).css(i),i=n;var f=this,l=t.type(r),v=this._rgba=[];i!==n&&(r=[r,i,s,a],l="array");if(l==="string")return this.parse(d(r)||c._default);if(l==="array")return h(u.rgba.props,function(e,t){v[t.idx]=p(r[t.idx],t)}),this;if(l==="object")return r instanceof o?h(u,function(e,t){r[t.cache]&&(f[t.cache]=r[t.cache].slice())}):h(u,function(t,n){var i=n.cache;h(n.props,function(e,t){if(!f[i]&&n.to){if(e==="alpha"||r[e]==null)return;f[i]=n.to(f._rgba)}f[i][t.idx]=p(r[e],t,!0)}),f[i]&&e.inArray(null,f[i].slice(0,3))<0&&(f[i][3]=1,n.from&&(f._rgba=n.from(f[i])))}),this},is:function(e){var t=o(e),n=!0,r=this;return h(u,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],h(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return h(u,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=o(e),r=n._space(),i=u[r],s=this.alpha()===0?o("transparent"):this,f=s[i.cache]||i.to(s._rgba),l=f.slice();return n=n[i.cache],h(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],u=a[r.type]||{};if(o===null)return;s===null?l[i]=o:(u.mod&&(o-s>u.mod/2?s+=u.mod:s-o>u.mod/2&&(s-=u.mod)),l[i]=p((o-s)*t+s,r))}),this[r](l)},blend:function(e){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=o(e)._rgba;return o(t.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),r=n.pop();return e&&n.push(~~(r*255)),"#"+t.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),o.fn.parse.prototype=o.fn,u.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,f===0||f===1?c=f:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},u.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(v(o,s,t+1/3)*255),Math.round(v(o,s,t)*255),Math.round(v(o,s,t-1/3)*255),i]},h(u,function(e,r){var s=r.props,u=r.cache,a=r.to,f=r.from;o.fn[e]=function(e){a&&!this[u]&&(this[u]=a(this._rgba));if(e===n)return this[u].slice();var r,i=t.type(e),l=i==="array"||i==="object"?e:arguments,c=this[u].slice();return h(s,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=c[t.idx]),c[t.idx]=p(n,t)}),f?(r=o(f(c)),r[u]=c,r):o(c)},h(s,function(n,r){if(o.fn[n])return;o.fn[n]=function(s){var o=t.type(s),u=n==="alpha"?this._hsla?"hsla":"rgba":e,a=this[u](),f=a[r.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=t.type(s)),s==null&&r.empty?this:(o==="string"&&(l=i.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[r.idx]=s,this[u](a)))}})}),h(r,function(e,n){t.cssHooks[n]={set:function(e,r){var i,s,u="";if(t.type(r)!=="string"||(i=d(r))){r=o(i||r);if(!f.rgba&&r._rgba[3]!==1){s=n==="backgroundColor"?e.parentNode:e;while((u===""||u==="transparent")&&s&&s.style)try{u=t.css(s,"backgroundColor"),s=s.parentNode}catch(a){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{e.style[n]=r}catch(l){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=o(e.elem,n),e.end=o(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}}),t.cssHooks.borderColor={expand:function(e){var t={};return h(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},c=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var t=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,n={},r,i;if(t&&t.length&&t[0]&&t[t[0]]){i=t.length;while(i--)r=t[i],typeof t[r]=="string"&&(n[e.camelCase(r)]=t[r])}else for(r in t)typeof t[r]=="string"&&(n[r]=t[r]);return n}function s(t,n){var i={},s,o;for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.effects.animateClass=function(t,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var r=e(this),o=r.attr("class")||"",u,f=a.children?r.find("*").andSelf():r;f=f.map(function(){var t=e(this);return{el:t,start:i.call(this)}}),u=function(){e.each(n,function(e,n){t[n]&&r[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=i.call(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=jQuery.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{add:t},n,r,i):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{remove:t},n,r,i):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):this._toggleClass(n,r):e.effects.animateClass.call(this,{toggle:n},r,i,s)},switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function i(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function s(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]?n&&e.effects[t]?!1:!0:!1}e.extend(e.effects,{version:"1.9.2",save:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.data(r+t[n],e[0].style[t[n]])},restore:function(e,n){var i,s;for(s=0;s<n.length;s++)n[s]!==null&&(i=e.data(r+n[s]),i===t&&(i=""),e.css(n[s],i))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function a(n){function u(){e.isFunction(i)&&i.call(r[0]),e.isFunction(n)&&n()}var r=e(this),i=t.complete,s=t.mode;(r.is(":hidden")?s==="hide":s==="show")?u():o.call(r[0],t,u)}var t=i.apply(this,arguments),r=t.mode,s=t.queue,o=e.effects.effect[t.effect],u=!o&&n&&e.effects[t.effect];return e.fx.off||!o&&!u?r?this[r](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):o?s===!1?this.each(a):this.queue(s||"fx",a):u.call(this,{options:t,duration:t.duration,callback:t.complete,mode:t.mode})},_show:e.fn.show,show:function(e){if(s(e))return this._show.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(s(e))return this._hide.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(s(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery),function(e,t){var n=0,r={},i={};r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show"
,e.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n),r=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(r.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),!r.collapsible&&(r.active===!1||r.active==null)&&(r.active=0),r.active<0&&(r.active+=this.headers.length),this.active=this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(n){var r=e(this),i=r.attr("id"),s=r.next(),o=s.attr("id");i||(i=t+"-header-"+n,r.attr("id",i)),o||(o=t+"-panel-"+n,s.attr("id",o)),r.attr("aria-controls",o),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(r.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this.options.heightStyle!=="content"&&e.css("height","")},_setOption:function(e,t){if(e==="active"){this._activate(t);return}e==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),e==="collapsible"&&!t&&this.options.active===!1&&this._activate(0),e==="icons"&&(this._destroyIcons(),t&&this._createIcons()),e==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)},_keydown:function(t){if(t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t,n,r=this.options.heightStyle,i=this.element.parent();r==="fill"?(e.support.minHeight||(n=i.css("overflow"),i.css("overflow","hidden")),t=i.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");if(r==="absolute"||r==="fixed")return;t-=n.outerHeight(!0)}),n&&i.css("overflow",n),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):r==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];if(n===this.active[0])return;n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):e()},_setupEvents:function(t){var n={};if(!t)return;e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._on(this.headers,n)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault();if(s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1)return;n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active"))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-expanded":"false","aria-hidden":"true"}),r.prev().attr("aria-selected","false"),n.length&&r.length?r.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,n){var s,o,u,a=this,f=0,l=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},h=l&&c.down||c,p=function(){a._toggleComplete(n)};typeof h=="number"&&(u=h),typeof h=="string"&&(o=h),o=o||h.easing||c.easing,u=u||h.duration||c.duration;if(!t.length)return e.animate(i,u,o,p);if(!e.length)return t.animate(r,u,o,p);s=e.show().outerHeight(),t.animate(r,{duration:u,easing:o,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:u,easing:o,complete:p,step:function(e,n){n.now=Math.round(e),n.prop!=="height"?f+=n.now:a.options.heightStyle!=="content"&&(n.now=Math.round(s-t.outerHeight()-f),f=0)}})},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.uiBackCompat!==!1&&(function(e,t){e.extend(t.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var n=t._create;t._create=function(){if(this.options.navigation){var t=this,r=this.element.find(this.options.header),i=r.next(),s=r.add(i).find("a").filter(this.options.navigationFilter)[0];s&&r.add(i).each(function(n){if(e.contains(this,s))return t.options.active=Math.floor(n/2),!1})}n.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var n=t._create,r=t._setOption;e.extend(t,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),n.call(this)},_setOption:function(e){if(e==="autoHeight"||e==="clearStyle"||e==="fillSpace")this.options.heightStyle=this._mergeHeightStyle();r.apply(this,arguments)},_mergeHeightStyle:function(){var e=this.options;if(e.fillSpace)return"fill";if(e.clearStyle)return"content";if(e.autoHeight)return"auto"}})}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var n=t._createIcons;t._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),n.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){t.activate=t._activate;var n=t._findActive;t._findActive=function(e){return e===-1&&(e=!1),e&&typeof e!="number"&&(e=this.headers.index(this.headers.filter(e)),e===-1&&(e=!1)),n.call(this,e)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(e,t){e.extend(t.options,{change:null,changestart:null});var n=t._trigger;t._trigger=function(e,t,r){var i=n.apply(this,arguments);return i?(e==="beforeActivate"?i=n.call(this,"changestart",t,{oldHeader:r.oldHeader,oldContent:r.oldPanel,newHeader:r.newHeader,newContent:r.newPanel}):e==="activate"&&(i=n.call(this,"change",t,{oldHeader:r.oldHeader,oldContent:r.oldPanel,newHeader:r.newHeader,newContent:r.newPanel})),i):!1}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{animate:null,animated:"slide"});var n=t._create;t._create=function(){var e=this.options;e.animate===null&&(e.animated?e.animated==="slide"?e.animate=300:e.animated==="bounceslide"?e.animate={duration:200,down:{easing:"easeOutBounce",duration:1e3}}:e.animate=e.animated:e.animate=!1),n.call(this)}}(jQuery,jQuery.ui.accordion.prototype))}(jQuery),function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this.document.find(t||"body")[0]),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})}(jQuery),function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",c=a?"":"ui-state-active",h="ui-state-focus";u.label===null&&(u.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(u.disabled)return;this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click"+this.eventNamespace,function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change"+this.eventNamespace,function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup"+this.eventNamespace,function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).toggleClass("ui-state-active"),t.buttonElement.attr("aria-pressed",t.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",function(){n=null})}).bind("mouseup"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(u.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){t?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){e==="disabled"&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,n=r);return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress)
.unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}return!0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1)return;extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),i=r[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),a=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e)))e=e[n?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME))return;if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase())return s=n[0],g+=r.length,!1});if(s!=-1)return s+1;throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="'"&&!p("'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/1e4);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(g<t.length){var w=t.substr(g);if(!/^\s+/.test(w))throw"Extra/unparsed characters found in date: "+w}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var E=this._getDaysInMonth(a,f-1);if(l<=E)break;f++,l-=E}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*1e4+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++)if(n)e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i);else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v)p--,p<0&&(p=11,d--)}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1)switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var v=0;v<12;v++)(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>");h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f)c+='<span class="ui-datepicker-year">'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;b<=w;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",r={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var t=this,r=this.options,i=r.title||"&#160;",s,o,u,a,f;s=(this.uiDialog=e("<div>")).addClass(n+r.dialogClass).css({display:"none",outline:0,zIndex:r.zIndex}).attr("tabIndex",-1).keydown(function(n){r.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}).mousedown(function(e){t.moveToTop(!1,e)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(s),o=(this.uiDialogTitlebar=e("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){s.focus()}).prependTo(s),u=e("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(e){e.preventDefault(),t.close(e)}).appendTo(o),(this.uiDialogTitlebarCloseText=e("<span>")).addClass("ui-icon ui-icon-closethick").text(r.closeText).appendTo(u),a=e("<span>").uniqueId().addClass("ui-dialog-title").html(i).prependTo(o),f=(this.uiDialogButtonPane=e("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=e("<div>")).addClass("ui-dialog-buttonset").appendTo(f),s.attr({role:"dialog","aria-labelledby":a.attr("id")}),o.find("*").add(o).disableSelection(),this._hoverable(u),this._focusable(u),r.draggable&&e.fn.draggable&&this._makeDraggable(),r.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(r.buttons),this._isOpen=!1,e.fn.bgiframe&&s.bgiframe(),this._on(s,{keydown:function(t){if(!r.modal||t.keyCode!==e.ui.keyCode.TAB)return;var n=e(":tabbable",s),i=n.filter(":first"),o=n.filter(":last");if(t.target===o[0]&&!t.shiftKey)return i.focus(1),!1;if(t.target===i[0]&&t.shiftKey)return o.focus(1),!1}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var e,t=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(t){var n=this,r,i;if(!this._isOpen)return;if(!1===this._trigger("beforeClose",t))return;return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options
.hide,function(){n._trigger("close",t)}):(this.uiDialog.hide(),this._trigger("close",t)),e.ui.dialog.overlay.resize(),this.options.modal&&(r=0,e(".ui-dialog").each(function(){this!==n.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(r=Math.max(r,i)))}),e.ui.dialog.maxZ=r),this},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var r=this.options,i;return r.modal&&!t||!r.stack&&!r.modal?this._trigger("focus",n):(r.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=r.zIndex),this.overlay&&(e.ui.dialog.maxZ+=1,e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ,this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ)),i={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},e.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",e.ui.dialog.maxZ),this.element.attr(i),this._trigger("focus",n),this)},open:function(){if(this._isOpen)return;var t,n=this.options,r=this.uiDialog;return this._size(),this._position(n.position),r.show(n.show),this.overlay=n.modal?new e.ui.dialog.overlay(this):null,this.moveToTop(!0),t=this.element.find(":tabbable"),t.length||(t=this.uiDialogButtonPane.find(":tabbable"),t.length||(t=r)),t.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this},_createButtons:function(t){var n=this,r=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),typeof t=="object"&&t!==null&&e.each(t,function(){return!(r=!0)}),r?(e.each(t,function(t,r){var i,s;r=e.isFunction(r)?{click:r,text:t}:r,r=e.extend({type:"button"},r),s=r.click,r.click=function(){s.apply(n.element[0],arguments)},i=e("<button></button>",r).appendTo(n.uiButtonSet),e.fn.button&&i.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){n.position=[s.position.left-t.document.scrollLeft(),s.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._trigger("dragStop",i,r(s)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(n){function u(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var r=this,i=this.options,s=this.uiDialog.css("position"),o=typeof n=="string"?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:o,start:function(t,n){e(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",t,u(n))},resize:function(e,t){r._trigger("resize",e,u(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),i.height=e(this).height(),i.width=e(this).width(),r._trigger("resizeStop",t,u(n)),e.ui.dialog.overlay.resize()}}).css("position",s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()},_setOptions:function(t){var n=this,s={},o=!1;e.each(t,function(e,t){n._setOption(e,t),e in r&&(o=!0),e in i&&(s[e]=t)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,r){var i,s,o=this.uiDialog;switch(t){case"buttons":this._createButtons(r);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+r);break;case"dialogClass":o.removeClass(this.options.dialogClass).addClass(n+r);break;case"disabled":r?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":i=o.is(":data(draggable)"),i&&!r&&o.draggable("destroy"),!i&&r&&this._makeDraggable();break;case"position":this._position(r);break;case"resizable":s=o.is(":data(resizable)"),s&&!r&&o.resizable("destroy"),s&&typeof r=="string"&&o.resizable("option","handles",r),!s&&r!==!1&&this._makeResizable(r);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(""+(r||"&#160;"))}this._super(t,r)},_size:function(){var t,n,r,i=this.options,s=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),n=Math.max(0,i.minHeight-t),i.height==="auto"?e.support.minHeight?this.element.css({minHeight:n,height:"auto"}):(this.uiDialog.show(),r=this.element.css("height","auto").height(),s||this.uiDialog.hide(),this.element.height(Math.max(r,n))):this.element.height(Math.max(i.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){if(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)return!1})},1),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=this.oldInstances.pop()||e("<div>").addClass("ui-widget-overlay");return e(document).bind("keydown.dialog-overlay",function(r){var i=e.ui.dialog.overlay.instances;i.length!==0&&i[i.length-1]===n&&t.options.closeOnEscape&&!r.isDefaultPrevented()&&r.keyCode&&r.keyCode===e.ui.keyCode.ESCAPE&&(t.close(r),r.preventDefault())}),n.appendTo(document.body).css({width:this.width(),height:this.height()}),e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){var n=e.inArray(t,this.instances),r=0;n!==-1&&this.oldInstances.push(this.instances.splice(n,1)[0]),this.instances.length===0&&e([document,window]).unbind(".dialog-overlay"),t.height(0).width(0).remove(),e.each(this.instances,function(){r=Math.max(r,this.css("z-index"))}),this.maxZ=r},height:function(){var t,n;return e.ui.ie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<n?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.ui.ie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<n?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e,t){var n=/up|down|vertical/,r=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,i){var s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a=t.direction||"up",f=n.test(a),l=f?"height":"width",c=f?"top":"left",h=r.test(a),p={},d=u==="show",v,m,g;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),o):e.effects.save(s,o),s.show(),v=e.effects.createWrapper(s).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(s.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e,t){e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.explode=function(t,n){function y(){c.push(this),c.length===r*i&&b()}function b(){s.css({visibility:"visible"}),e(c).remove(),u||s.hide(),n()}var r=t.pieces?Math.round(Math.sqrt(t.pieces)):3,i=r,s=e(this),o=e.effects.setMode(s,t.mode||"hide"),u=o==="show",a=s.show().css("visibility","hidden").offset(),f=Math.ceil(s.outerWidth()/i),l=Math.ceil(s.outerHeight()/r),c=[],h,p,d,v,m,g;for(h=0;h<r;h++){v=a.top+h*l,g=h-(r-1)/2;for(p=0;p<i;p++)d=a.left+p*f,m=p-(i-1)/2,s.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*f,top:-h*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:l,left:d+(u?m*f:0),top:v+(u?g*l:0),opacity:u?0:1}).animate({left:d+(u?0:m*f),top:v+(u?0:g*l),opacity:u?1:0},t.duration||500,t.easing,y)}}}(jQuery),function(e,t){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),function(e,t){e.effects.effect.fold=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=s==="hide",a=t.size||15,f=/([0-9]+)%/.exec(a),l=!!t.horizFirst,c=o!==l,h=c?["width","height"]:["height","width"],p=t.duration/2,d,v,m={},g={};e.effects.save(r,i),r.show(),d=e.effects.createWrapper(r).css({overflow:"hidden"}),v=c?[d.width(),d.height()]:[d.height(),d.width()],f&&(a=parseInt(f[1],10)/100*v[u?0:1]),o&&d.css(l?{height:0,width:a}:{height:a,width:0}),m[h[0]]=o?v[0]:a,g[h[1]]=o?v[1]:0,d.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()})}}(jQuery),function(e,t){e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};s==="hide"&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),n()}})}}(jQuery),function(e,t){e.effects.effect.pulsate=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"show"),s=i==="show",o=i==="hide",u=s||i==="hide",a=(t.times||5)*2+(u?1:0),f=t.duration/a,l=0,c=r.queue(),h=c.length,p;if(s||!r.is(":visible"))r.css("opacity",0).show(),l=1;for(p=1;p<a;p++)r.animate({opacity:l},f,t.easing),l=1-l;r.animate({opacity:l},f,t.easing),r.queue(function(){o&&r.hide(),n()}),h>1&&c.splice.apply(c,[1,0].concat(c.splice(h,a+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s=i==="hide",o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u,outerHeight:a.outerHeight*u,outerWidth:a.outerWidth*u}}),r.effect(t)},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||p!=="effect",v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0,outerHeight:0,outerWidth:0};p==="show"&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},t.mode==="toggle"&&p==="show"?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||(p==="show"?b:r),o.to=t.to||(p==="hide"?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}};if(v==="box"||v==="both")s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to));(v==="content"||v==="both")&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from);if(v==="content"||v==="both")c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x,outerHeight:r.outerHeight*s.from.y,outerWidth:r.outerWidth*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x,outerHeight:r.height*s.to.y,outerWidth:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})});o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o.to.opacity===0&&o.css("opacity",o.from.opacity),p==="hide"&&o.hide(),e.effects.restore(o,y),d||(g==="static"?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return n==="auto"?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})}}(jQuery),function(e,t){e.effects.effect.shake=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",u=t.distance||20,a=t.times||3,f=a*2+1,l=Math.round(t.duration/f),c=o==="up"||o==="down"?"top":"left",h=o==="up"||o==="left",p={},d={},v={},m,g=r.queue(),y=g.length;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),p[c]=(h?"-=":"+=")+u,d[c]=(h?"+=":"-=")+u*2,v[c]=(h?"-=":"+=")+u*2,r.animate(p,l,t.easing);for(m=1;m<a;m++)r.animate(d,l,t.easing).animate(v,l,t.easing);r.animate(d,l,t.easing).animate(p,l/2,t.easing).queue(function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,f+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}}(jQuery),function(e,t){var n=!1;e.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var r=e(t.target).closest(".ui-menu-item");!n&&r.not(".ui-state-disabled").length&&(n=!0,this.select(t),r.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),n=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,i,s,o,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,r=this.element.find(this.options.menus);r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),r=t.prev("a"),i=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);r.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",r.attr("id"))}),t=r.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-—–\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(jQuery),function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,d,v,m,g=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=g[0],E=(t.collision||"flip").split(" "),S={};return w.nodeType===9?(l=g.width(),d=g.height(),v={top:0,left:0}):e.isWindow(w)?(l=g.width(),d=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(t.at="left top",l=d=0,v={top:w.pageY,left:w.pageX}):(l=g.outerWidth(),d=g.outerHeight(),v=g.offset()),m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=l:t.at[0]==="center"&&(m.left+=l/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),n=h(S.at,l,d),m.left+=n[0],m.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),w=p(this,"marginLeft"),x=p(this,"marginTop"),T=f+w+p(this,"marginRight")+b.width,N=c+x+p(this,"marginBottom")+b.height,C=e.extend({},m),k=h(S.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:w,marginTop:x},e.each(["left","top"],function(r,i){e.ui.position[E[r]]&&e.ui.position[E[r]][i](C,{targetWidth:l,targetHeight:d,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:y,elem:a})}),e.fn.bgiframe&&a.bgiframe(),t.using&&(u=function(e){var n=v.left-C.left,s=n+l-f,o=v.top-C.top,u=o+d-c,h={target:{element:g,left:v.left,top:v.top,width:l,height:d},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),d<c&&i(o+u)<d&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=
u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return n.call(this,r);var i=r.offset.split(" "),s=r.at.split(" ");return i.length===1&&(i[1]=i[0]),/^\d/.test(i[0])&&(i[0]="+"+i[0]),/^\d/.test(i[1])&&(i[1]="+"+i[1]),s.length===1&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:t}))}}(jQuery)}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(e,t){e==="value"&&(this.options.value=t,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(e,t)},_value:function(){var e=this.options.value;return typeof e!="number"&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}})}(jQuery),function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,r,i=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",u=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),i.range&&(i.range===!0&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&i.values.length!==2&&(i.values=[i.values[0],i.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(i.range==="min"||i.range==="max"?" ui-slider-range-"+i.range:""))),r=i.values&&i.values.length||1;for(t=s.length;t<r;t++)u.push(o);this.handles=s.add(e(u.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){i.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._on(this.handles,{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1)return}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));i>n&&(i=n,s=e(this),o=t)}),c.range===!0&&this.values(1)===c.min&&(o+=1,s=e(this.handles[o])),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.9.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,r){var i=n.attr(r);i!==undefined&&i.length&&(t[r]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(!t)return;if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()},"mousedown .ui-spinner-button":function(t){function r(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,r.call(this)});if(this._start(t)===!1)return;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(!e(t.currentTarget).hasClass("ui-state-active"))return;if(this._start(t)===!1)return!1;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(e.height()*.5)&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return!this.spinning&&this._trigger("start",e)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter));if(!this.spinning||this._trigger("spin",t,{value:n})!==!1)this._value(n),this.counter++},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return this.options.min!==null&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=r.min!==null?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),r.max!==null&&e>r.max?r.max:r.min!==null&&e<r.min?r.min:e},_stop:function(e){if(!this.spinning)return;clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e)},_setOption:function(e,t){if(e==="culture"||e==="numberFormat"){var n=this._parse(this.element.val());this.options[e]=t,this.element.val(this._format(n));return}(e==="max"||e==="min"||e==="step")&&typeof t=="string"&&(t=this._parse(t)),this._super(e,t),e==="disabled"&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return typeof e=="string"&&e!==""&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),e===""||isNaN(e)?null:e},_format:function(e){return e===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;e!==""&&(n=this._parse(e),n!==null&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._spin((e||1)*this.options.step)},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._spin((e||1)*-this.options.step)},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++n}function s(e){return e.hash.length>1&&e.href.replace(r,"")===location.href.replace(r,"").replace(/\s/g,"%20")}var n=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,n=this.options,r=n.active,i=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs();if(r===null){i&&this.tabs.each(function(t,n){if(e(n).attr("aria-controls")===i)return r=t,!1}),r===null&&(r=this.tabs.index(this.tabs.filter(".ui-tabs-active")));if(r===null||r===-1)r=this.tabs.length?0:!1}r!==!1&&(r=this.tabs.index(this.tabs.eq(r)),r===-1&&(r=n.collapsible?!1:0)),n.active=r,!n.collapsible&&n.active===!1&&this.anchors.length&&(n.active=0),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(this.options.active):this.active=e(),this._refresh(),this.active.length&&this.load(n.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),i=!0;if(this._handlePageNav(t))return;switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:t.preventDefault(),clearTimeout(this.activating),this._activate(r);return;case e.ui.keyCode.ENTER:t.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r);return;default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),t.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))},_panelKeydown:function(t){if(this._handlePageNav(t))return;t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(t,n){function i(){return t>r&&(t=0),t<0&&(t=r),t}var r=this.tabs.length-1;while(e.inArray(i(),this.options.disabled)!==-1)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="disabled"){this._setupDisabled(t);return}this._super(e,t),e==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&this.options.active===!1&&this._activate(0)),e==="event"&&this._setupEvents(t),e==="heightStyle"&&this._setupHeightStyle(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active===!1||!this.anchors.length?(t.active=!1,this.active=e()):this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var i,o,u,a=e(r).uniqueId().attr("id"),f=e(r).closest("li"),l=f.attr("aria-controls");s(r)?(i=r.hash,o=t.element.find(t._sanitizeSelector(i))):(u=t._tabId(f),i="#"+u,o=t.element.find(i),o.length||(o=t._createPanel(u),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),l&&f.data("ui-tabs-aria-controls",l),f.attr({"aria-controls":i.substring(1),"aria-labelledby":a}),o.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n=0,r;r=this.tabs[n];n++)t===!0||e.inArray(n,t)!==-1?e(r).addClass("ui-state-disabled").attr("aria-disabled","true"):e(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r,i=this.element.parent();t==="fill"?(e.support.minHeight||(r=i.css("overflow"),i.css("overflow","hidden")),n=i.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");if(r==="absolute"||r==="fixed")return;n-=t.outerHeight(!0)}),r&&i.css("overflow",r),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):t==="auto"&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault();if(s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1)return;n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),!f.length&&!a.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l)},_toggle:function(t,n){function o(){r.running=!1,r._trigger("activate",t,n)}function u(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),i.length&&r.options.show?r._show(i,r.options.show,o):(i.show(),o())}var r=this,i=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),u()),s.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),i.length&&s.length?n.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);if(r[0]===this.active[0])return;r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n):t.removeAttr("aria-controls")}),this.panels.show(),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(n){var r=this.options.disabled;if(r===!1)return;n===t?r=!1:(n=this._getIndex(n),e.isArray(r)?r=e.map(r,function(e){return e!==n?e:null}):r=e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(r)},disable:function(n){var r=this.options.disabled;if(r===!0)return;if(n===t)r=!0;else{n=this._getIndex(n);if(e.inArray(n,r)!==-1)return;e.isArray(r)?r=e.merge([n],r).sort():r=[n]}this._setupDisabled(r)},load:function(t,n){t=this._getIndex(t);var r=this,i=this.tabs.eq(t),o=i.find(".ui-tabs-anchor"),u=this._getPanelForTab(i),a={tab:i,panel:u};if(s(o[0]))return;this.xhr=e.ajax(this._ajaxSettings(o,n,a)),this.xhr&&this.xhr.statusText!=="canceled"&&(i.addClass("ui-tabs-loading"),u.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){u.html(e),r._trigger("load",n,a)},1)}).complete(function(e,t){setTimeout(function(){t==="abort"&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),u.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)}))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href"),beforeSend:function(t,s){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),e.uiBackCompat!==!1&&(e.ui.tabs.prototype._ui=function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},e.widget("ui.tabs",e.ui.tabs,{url:function(e,t){this.anchors.eq(e).attr("href",t)}}),e.widget("ui.tabs",e.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var t=this;this._on({tabsbeforeload:function(n,r){if(e.data(r.tab[0],"cache.tabs")){n.preventDefault();return}r.jqXHR.success(function(){t.options.cache&&e.data(r.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(t,n,r){var i=this.options.ajaxOptions;return e.extend({},i,{error:function(e,t){try{i.error(e,t,r.tab.closest("li").index(),r.tab[0])}catch(n){}}},this._superApply(arguments))},_setOption:function(e,t){e==="cache"&&t===!1&&this.anchors.removeData("cache.tabs"),this._super(e,t)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(e){this.anchors.eq(e).removeData("cache.tabs"),this._superApply(arguments)}}),e.widget("ui.tabs",e.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),e.widget("ui.tabs",e.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(e,t){if(e.target!==this.element[0]||!this.options.spinner)return;var n=t.tab.find("span"),r=n.html();n
.html(this.options.spinner),t.jqXHR.complete(function(){n.html(r)})}})}}),e.widget("ui.tabs",e.ui.tabs,{options:{enable:null,disable:null},enable:function(t){var n=this.options,r;if(t&&n.disabled===!0||e.isArray(n.disabled)&&e.inArray(t,n.disabled)!==-1)r=!0;this._superApply(arguments),r&&this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t]))},disable:function(t){var n=this.options,r;if(t&&n.disabled===!1||e.isArray(n.disabled)&&e.inArray(t,n.disabled)===-1)r=!0;this._superApply(arguments),r&&this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))}}),e.widget("ui.tabs",e.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(n,r,i){i===t&&(i=this.anchors.length);var s,o,u=this.options,a=e(u.tabTemplate.replace(/#\{href\}/g,n).replace(/#\{label\}/g,r)),f=n.indexOf("#")?this._tabId(a):n.replace("#","");return a.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),a.attr("aria-controls",f),s=i>=this.tabs.length,o=this.element.find("#"+f),o.length||(o=this._createPanel(f),s?i>0?o.insertAfter(this.panels.eq(-1)):o.appendTo(this.element):o.insertBefore(this.panels[i])),o.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),s?a.appendTo(this.tablist):a.insertBefore(this.tabs[i]),u.disabled=e.map(u.disabled,function(e){return e>=i?++e:e}),this.refresh(),this.tabs.length===1&&u.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[i],this.panels[i])),this},remove:function(t){t=this._getIndex(t);var n=this.options,r=this.tabs.eq(t).remove(),i=this._getPanelForTab(r).remove();return r.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(t+(t+1<this.anchors.length?1:-1)),n.disabled=e.map(e.grep(n.disabled,function(e){return e!==t}),function(e){return e>=t?--e:e}),this.refresh(),this._trigger("remove",null,this._ui(r.find("a")[0],i[0])),this}}),e.widget("ui.tabs",e.ui.tabs,{length:function(){return this.anchors.length}}),e.widget("ui.tabs",e.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(t){var n=t.is("li")?t.find("a[href]"):t;return n=n[0],e(n).closest("li").attr("aria-controls")||n.title&&n.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+i()}}),e.widget("ui.tabs",e.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(t){return e(this.options.panelTemplate).attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),e.widget("ui.tabs",e.ui.tabs,{_create:function(){var e=this.options;e.active===null&&e.selected!==t&&(e.active=e.selected===-1?!1:e.selected),this._super(),e.selected=e.active,e.selected===!1&&(e.selected=-1)},_setOption:function(e,t){if(e!=="selected")return this._super(e,t);var n=this.options;this._super("active",t===-1?!1:t),n.selected=n.active,n.selected===!1&&(n.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),e.widget("ui.tabs",e.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(e,t,n){var r,i,s=this._superApply(arguments);return s?(e==="beforeActivate"?(r=n.newTab.length?n.newTab:n.oldTab,i=n.newPanel.length?n.newPanel:n.oldPanel,s=this._super("select",t,{tab:r.find(".ui-tabs-anchor")[0],panel:i[0],index:r.closest("li").index()})):e==="activate"&&n.newTab.length&&(s=this._super("show",t,{tab:n.newTab.find(".ui-tabs-anchor")[0],panel:n.newPanel[0],index:n.newTab.closest("li").index()})),s):!1}}),e.widget("ui.tabs",e.ui.tabs,{select:function(e){e=this._getIndex(e);if(e===-1){if(!this.options.collapsible||this.options.selected===-1)return;e=this.options.selected}this.anchors.eq(e).trigger(this.options.event+this.eventNamespace)}}),function(){var t=0;e.widget("ui.tabs",e.ui.tabs,{options:{cookie:null},_create:function(){var e=this.options,t;e.active==null&&e.cookie&&(t=parseInt(this._cookie(),10),t===-1&&(t=!1),e.active=t),this._super()},_cookie:function(n){var r=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++t)];return arguments.length&&(r.push(n===!1?-1:n),r.push(this.options.cookie)),e.cookie.apply(null,r)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),e.widget("ui.tabs",e.ui.tabs,{_trigger:function(t,n,r){var i=e.extend({},r);return t==="load"&&(i.panel=i.panel[0],i.tab=i.tab.find(".ui-tabs-anchor")[0]),this._super(t,n,i)}}),e.widget("ui.tabs",e.ui.tabs,{options:{fx:null},_getFx:function(){var t,n,r=this.options.fx;return r&&(e.isArray(r)?(t=r[0],n=r[1]):t=n=r),r?{show:n,hide:t}:null},_toggle:function(e,t){function o(){n.running=!1,n._trigger("activate",e,t)}function u(){t.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&s.show?r.animate(s.show,s.show.duration,function(){o()}):(r.show(),o())}var n=this,r=t.newPanel,i=t.oldPanel,s=this._getFx();if(!s)return this._super(e,t);n.running=!0,i.length&&s.hide?i.animate(s.hide,s.hide.duration,function(){t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),i.hide(),u())}}))}(jQuery),function(e){function n(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))}function r(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")}var t=0;e.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return e(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var r=this;if(t==="disabled"){this[n?"_disable":"_enable"](),this.options[t]=n;return}this._super(t,n),t==="content"&&e.each(this.tooltips,function(e,t){r._updateContent(t)})},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0)}),this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);if(!r.length||r.data("ui-tooltip-id"))return;r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&t.type==="mouseover"&&r.parents().each(function(){var t=e(this),r;t.data("ui-tooltip-open")&&(r=e.Event("blur"),r.target=r.currentTarget=this,n.close(r,!0)),t.attr("title")&&(t.uniqueId(),n.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._updateContent(r,t)},_updateContent:function(e,t){var n,r=this.options.content,i=this,s=t?t.type:null;if(typeof r=="string")return this._open(t,e,r);n=r.call(e[0],function(n){if(!e.data("ui-tooltip-open"))return;i._delay(function(){t&&(t.type=s),this._open(t,e,n)})}),n&&this._open(t,e,n)},_open:function(t,r,i){function f(e){a.of=e;if(s.is(":hidden"))return;s.position(a)}var s,o,u,a=e.extend({},this.options.position);if(!i)return;s=this._find(r);if(s.length){s.find(".ui-tooltip-content").html(i);return}r.is("[title]")&&(t&&t.type==="mouseover"?r.attr("title",""):r.removeAttr("title")),s=this._tooltip(r),n(r,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:f}),f(t)):s.position(e.extend({of:r},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(u=setInterval(function(){s.is(":visible")&&(f(a.of),clearInterval(u))},e.fx.interval)),this._trigger("open",t,{tooltip:s}),o={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}},remove:function(){this._removeTooltip(s)}};if(!t||t.type==="mouseover")o.mouseleave="close";if(!t||t.type==="focusin")o.focusout="close";this._on(!0,r,o)},close:function(t){var n=this,i=e(t?t.currentTarget:this.element),s=this._find(i);if(this.closing)return;i.data("ui-tooltip-title")&&i.attr("title",i.data("ui-tooltip-title")),r(i),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(e(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&e.each(this.parents,function(t,r){e(r.element).attr("title",r.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1},_tooltip:function(n){var r="ui-tooltip-"+t++,i=e("<div>").attr({id:r,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),e.fn.bgiframe&&i.bgiframe(),this.tooltips[r]=n,i},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})}(jQuery),jQuery.migrateMute===void 0&&(jQuery.migrateMute=!0),function(e,t,n){"use strict";function r(n){s[n]||(s[n]=!0,e.migrateWarnings.push(n),t.console&&console.warn&&!e.migrateMute&&console.warn("JQMIGRATE: "+n))}function i(t,i,s,o){if(Object.defineProperty)try{return Object.defineProperty(t,i,{configurable:!0,enumerable:!0,get:function(){return r(o),s},set:function(e){r(o),s=e}}),n}catch(u){}e._definePropertyBroken=!0,t[i]=s}var s={};e.migrateWarnings=[],e.migrateReset=function(){s={},e.migrateWarnings.length=0},"BackCompat"===document.compatMode&&r("jQuery is not compatible with Quirks Mode");var o={},u=e.attr,a=e.attrHooks.value&&e.attrHooks.value.get||function(){return null},f=e.attrHooks.value&&e.attrHooks.value.set||function(){return n},l=/^(?:input|button)$/i,c=/^[238]$/,h=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,p=/^(?:checked|selected)$/i;i(e,"attrFn",o,"jQuery.attrFn is deprecated"),e.attr=function(t,i,s,o){var a=i.toLowerCase(),f=t&&t.nodeType;return o&&(r("jQuery.fn.attr( props, pass ) is deprecated"),t&&!c.test(f)&&e.isFunction(e.fn[i]))?e(t)[i](s):("type"===i&&s!==n&&l.test(t.nodeName)&&r("Can't change the 'type' of an input or button in IE 6/7/8"),!e.attrHooks[a]&&h.test(a)&&(e.attrHooks[a]={get:function(t,r){var i,s=e.prop(t,r);return s===!0||"boolean"!=typeof s&&(i=t.getAttributeNode(r))&&i.nodeValue!==!1?r.toLowerCase():n},set:function(t,n,r){var i;return n===!1?e.removeAttr(t,r):(i=e.propFix[r]||r,i in t&&(t[i]=!0),t.setAttribute(r,r.toLowerCase())),r}},p.test(a)&&r("jQuery.fn.attr("+a+") may use property instead of attribute")),u.call(e,t,i,s))},e.attrHooks.value={get:function(e,t){var n=(e.nodeName||"").toLowerCase();return"button"===n?a.apply(this,arguments):("input"!==n&&"option"!==n&&r("property-based jQuery.fn.attr('value') is deprecated"),t in e?e.value:null)},set:function(e,t){var i=(e.nodeName||"").toLowerCase();return"button"===i?f.apply(this,arguments):("input"!==i&&"option"!==i&&r("property-based jQuery.fn.attr('value', val) is deprecated"),e.value=t,n)}};var d,v,m=e.fn.init,g=/^(?:.*(<[\w\W]+>)[^>]*|#([\w\-]*))$/;e.fn.init=function(t,n,i){var s;return t&&"string"==typeof t&&!e.isPlainObject(n)&&(s=g.exec(t))&&s[1]&&("<"!==t.charAt(0)&&r("$(html) HTML strings must start with '<' character"),n&&n.context&&(n=n.context),e.parseHTML)?m.call(this,e.parseHTML(e.trim(t),n,!0),n,i):m.apply(this,arguments)},e.fn.init.prototype=e.fn,e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},d=e.uaMatch(navigator.userAgent),v={},d.browser&&(v[d.browser]=!0,v.version=d.version),v.chrome?v.webkit=!0:v.webkit&&(v.safari=!0),e.browser=v,i(e,"browser",v,"jQuery.browser is deprecated"),e.sub=function(){function t(e,n){return new t.fn.init(e,n)}e.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(r,i){return i&&i instanceof e&&!(i instanceof t)&&(i=t(i)),e.fn.init.call(this,r,i,n)},t.fn.init.prototype=t.fn;var n=t(document);return r("jQuery.sub() is deprecated"),t};var y=e.fn.data;e.fn.data=function(t){var i,s,o=this[0];return!o||"events"!==t||1!==arguments.length||(i=e.data(o,t),s=e._data(o,t),i!==n&&i!==s||s===n)?y.apply(this,arguments):(r("Use of jQuery.fn.data('events') is deprecated"),s)};var b=/\/(java|ecma)script/i,w=e.fn.andSelf||e.fn.addBack,E=e.buildFragment;e.fn.andSelf=function(){return r("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),w.apply(this,arguments)},e.clean||(e.clean=function(t,i,s,o){i=i||document,i=!i.nodeType&&i[0]||i,i=i.ownerDocument||i,r("jQuery.clean() is deprecated");var u,a,f,l,c=[];if(e.merge(c,e.buildFragment(t,i).childNodes),s)for(f=function(e){return!e.type||b.test(e.type)?o?o.push(e.parentNode?e.parentNode.removeChild(e):e):s.appendChild(e):n},u=0;null!=(a=c[u]);u++)e.nodeName(a,"script")&&f(a)||(s.appendChild(a),a.getElementsByTagName!==n&&(l=e.grep(e.merge([],a.getElementsByTagName("script")),f),c.splice.apply(c,[u+1,0].concat(l)),u+=l.length));return c}),e.buildFragment=function(t,n,s,o){var u,a="jQuery.buildFragment() is deprecated";n=n||document,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n;try{u=E.call(e,t,n,s,o)}catch(f){u=E.call(e,t,n.nodeType?[n]:n[0],s,o),r(a)}return u.fragment||(i(u,"fragment",u,a),i(u,"cacheable",!1,a)),u};var S=e.event.add,x=e.event.remove,T=e.event.trigger,N=e.fn.toggle,C=e.fn.live,k=e.fn.die,L="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",A=RegExp("\\b(?:"+L+")\\b"),O=/(?:^|\s)hover(\.\S+|)\b/,M=function(t){return"string"!=typeof t||e.event.special.hover?t:(O.test(t)&&r("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(O,"mouseenter$1 mouseleave$1"))};e.event.props&&"attrChange"!==e.event.props[0]&&e.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),i(e.event,"handle",e.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),e.event.add=function(e,t,n,i,s){e!==document&&A.test(t)&&r("AJAX events should be attached to document: "+t),S.call(this,e,M(t||""),n,i,s)},e.event.remove=function(e,t,n,r,i){x.call(this,e,M(t)||"",n,r,i)},e.fn.error=function(){var e=Array.prototype.slice.call(arguments,0);return r("jQuery.fn.error() is deprecated"),e.splice(0,0,"error"),arguments.length?this.bind.apply(this,e):(this.triggerHandler.apply(this,e),this)},e.fn.toggle=function(t,n){if(!e.isFunction(t)||!e.isFunction(n))return N.apply(this,arguments);r("jQuery.fn.toggle(handler, handler...) is deprecated");var i=arguments,s=t.guid||e.guid++,o=0,u=function(n){var r=(e._data(this,"lastToggle"+t.guid)||0)%o;return e._data(this,"lastToggle"+t.guid,r+1),n.preventDefault(),i[r].apply(this,arguments)||!1};for(u.guid=s;i.length>o;)i[o++].guid=s;return this.click(u)},e.fn.live=function(t,n,i){return r("jQuery.fn.live() is deprecated"),C?C.apply(this,arguments):(e(this.context).on(t,this.selector,n,i),this)},e.fn.die=function(t,n){return r("jQuery.fn.die() is deprecated"),k?k.apply(this,arguments):(e(this.context).off(t,this.selector||"**",n),this)},e.event.trigger=function(e,t,n,i){return!n&!A.test(e)&&r("Global events are undocumented and deprecated"),T.call(this,e,t,n||document,i)},e.each(L.split("|"),function(t,n){e.event.special[n]={setup:function(){var t=this;return t!==document&&(e.event.add(document,n+"."+e.guid,function(){e.event.trigger(n,null,t,!0)}),e._data(this,n,e.guid++)),!1},teardown:function(){return this!==document&&e.event.remove(document,n+"."+e._data(this,n)),!1}}})}(jQuery,window),window.Modernizr=function(e,t,n){function r(){c.input=function(e){for(var t=0,n=e.length;t<n;t++)C[e[t]]=e[t]in y;return C}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),c.inputtypes=function(e){for(var r=0,i,s,o,u=e.length;r<u;r++)y.setAttribute("type",s=e[r]),i=y.type!=="text",i&&(y.value=b,y.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(s)&&y.style.WebkitAppearance!==n?(p.appendChild(y),o=t.defaultView,i=o.getComputedStyle&&o.getComputedStyle(y,null).WebkitAppearance!=="textfield"&&y.offsetHeight!==0,p.removeChild(y)):/^(search|tel)$/.test(s)||(/^(url|email)$/.test(s)?i=y.checkValidity&&y.checkValidity()===!1:/^color$/.test(s)?(p.appendChild(y),p.offsetWidth,i=y.value!=b,p.removeChild(y)):i=y.value!=b)),N[e[r]]=!!i;return N}("search tel url email datetime date month week time datetime-local number range color".split(" "))}function i(e,t){var n=e.charAt(0).toUpperCase()+e.substr(1),r=(e+" "+S.join(n+" ")+n).split(" ");return s(r,t)}function s(e,t){for(var r in e)if(g[e[r]]!==n)return t=="pfx"?e[r]:!0;return!1}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t){return typeof e===t}function a(e,t){return f(E.join(e+";")+(t||""))}function f(e){g.cssText=e}var l="2.0.6",c={},h=!0,p=t.documentElement,d=t.head||t.getElementsByTagName("head")[0],v="modernizr",m=t.createElement(v),g=m.style,y=t.createElement("input"),b=":)",w=Object.prototype.toString,E=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),S="Webkit Moz O ms Khtml".split(" "),x={svg:"http://www.w3.org/2000/svg"},T={},N={},C={},k=[],L=function(e,n,r,i){var s,o,u,a=t.createElement("div");if(parseInt(r,10))while(r--)u=t.createElement("div"),u.id=i?i[r]:v+(r+1),a.appendChild(u);return s=["&shy;","<style>",e,"</style>"].join(""),a.id=v,a.innerHTML+=s,p.appendChild(a),o=n(a,e),a.parentNode.removeChild(a),!!o},A=function(t){if(e.matchMedia)return matchMedia(t).matches;var n;return L("@media "+t+" { #"+v+" { position: absolute; } }",function(t){n=(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position=="absolute"}),n},O=function(){function e(e,i){i=i||t.createElement(r[e]||"div"),e="on"+e;var s=e in i;return s||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(e,""),s=u(i[e],"function"),u(i[e],n)||(i[e]=n),i.removeAttribute(e))),i=null,s}var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),M,_={}.hasOwnProperty,D;!u(_,n)&&!u(_.call,n)?D=function(e,t){return _.call(e,t)}:D=function(e,t){return t in e&&u(e.constructor.prototype[t],n)};var P=function(n,r){var i=n.join(""),s=r.length;L(i,function(n,r){var i=t.styleSheets[t.styleSheets.length-1],o=i.cssRules&&i.cssRules[0]?i.cssRules[0].cssText:i.cssText||"",u=n.childNodes,a={};while(s--)a[u[s].id]=u[s];c.touch="ontouchstart"in e||a.touch.offsetTop===9,c.csstransforms3d=a.csstransforms3d.offsetLeft===9,c.generatedcontent=a.generatedcontent.offsetHeight>=1,c.fontface=/src/i.test(o)&&o.indexOf(r.split(" ")[0])===0},s,r)}(['@font-face {font-family:"font";src:url("https://")}',["@media (",E.join("touch-enabled),("),v,")","{#touch{top:9px;position:absolute}}"].join(""),["@media (",E.join("transform-3d),("),v,")","{#csstransforms3d{left:9px;position:absolute}}"].join(""),['#generatedcontent:after{content:"',b,'";visibility:hidden}'].join("")],["fontface","touch","csstransforms3d","generatedcontent"]);T.flexbox=function(){function e(e,t,n,r){e.style.cssText=E.join(t+":"+n+";")+(r||"")}function n(e,t,n,r){t+=":",e.style.cssText=(t+E.join(n+";"+t)).slice(0,-t.length)+(r||"")}var r=t.createElement("div"),i=t.createElement("div");n(r,"display","box","width:42px;padding:0;"),e(i,"box-flex","1","width:10px;"),r.appendChild(i),p.appendChild(r);var s=i.offsetWidth===42;return r.removeChild(i),p.removeChild(r),s},T.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},T.canvastext=function(){return!!c.canvas&&!!u(t.createElement("canvas").getContext("2d").fillText,"function")},T.webgl=function(){return!!e.WebGLRenderingContext},T.touch=function(){return c.touch},T.geolocation=function(){return!!navigator.geolocation},T.postmessage=function(){return!!e.postMessage},T.websqldatabase=function(){var t=!!e.openDatabase;return t},T.indexedDB=function(){for(var t=-1,n=S.length;++t<n;)if(e[S[t].toLowerCase()+"IndexedDB"])return!0;return!!e.indexedDB},T.hashchange=function(){return O("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},T.history=function(){return!!e.history&&!!history.pushState},T.draganddrop=function(){return O("dragstart")&&O("drop")},T.websockets=function(){for(var t=-1,n=S.length;++t<n;)if(e[S[t]+"WebSocket"])return!0;return"WebSocket"in e},T.rgba=function(){return f("background-color:rgba(150,255,150,.5)"),o(g.backgroundColor,"rgba")},T.hsla=function(){return f("background-color:hsla(120,40%,100%,.5)"),o(g.backgroundColor,"rgba")||o(g.backgroundColor,"hsla")},T.multiplebgs=function(){return f("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(g.background)},T.backgroundsize=function(){return i("backgroundSize")},T.borderimage=function(){return i("borderImage")},T.borderradius=function(){return i("borderRadius")},T.boxshadow=function(){return i("boxShadow")},T.textshadow=function(){return t.createElement("div").style.textShadow===""},T.opacity=function(){return a("opacity:.55"),/^0.55$/.test(g.opacity)},T.cssanimations=function(){return i("animationName")},T.csscolumns=function(){return i("columnCount")},T.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return f((e+E.join(t+e)+E.join(n+e)).slice(0,-e.length)),o(g.backgroundImage,"gradient")},T.cssreflections=function(){return i("boxReflect")},T.csstransforms=function(){return!!s(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])},T.csstransforms3d=function(){var e=!!s(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);return e&&"webkitPerspective"in p.style&&(e=c.csstransforms3d),e},T.csstransitions=function(){return i("transitionProperty")},T.fontface=function(){return c.fontface},T.generatedcontent=function(){return c.generatedcontent},T.video=function(){var e=t.createElement("video"),n=!1;try{if(n=!!e.canPlayType){n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"');var r='video/mp4; codecs="avc1.42E01E';n.h264=e.canPlayType(r+'"')||e.canPlayType(r+', mp4a.40.2"'),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"')}}catch(i){}return n},T.audio=function(){var e=t.createElement("audio"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"'),n.mp3=e.canPlayType("audio/mpeg;"),n.wav=e.canPlayType('audio/wav; codecs="1"'),n.m4a=e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")}catch(r){}return n},T.localstorage=function(){try{return!!localStorage.getItem}catch(e){return!1}},T.sessionstorage=function(){try{return!!sessionStorage.getItem}catch(e){return!1}},T.webworkers=function(){return!!e.Worker},T.applicationcache=function(){return!!e.applicationCache},T.svg=function(){return!!t.createElementNS&&!!t.createElementNS(x.svg,"svg").createSVGRect},T.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==x.svg},T.smil=function(){return!!t.createElementNS&&/SVG/.test(w.call(t.createElementNS(x.svg,"animate")))},T.svgclippaths=function(){return!!t.createElementNS&&/SVG/.test(w.call(t.createElementNS(x.svg,"clipPath")))};for(var H in T)D(T,H)&&(M=H.toLowerCase(),c[M]=T[H](),k.push((c[M]?"":"no-")+M));return c.input||r(),c.addTest=function(e,t){if(typeof e=="object")for(var r in e)D(e,r)&&c.addTest(r,e[r]);else{e=e.toLowerCase();if(c[e]!==n)return;t=typeof t=="boolean"?t:!!t(),p.className+=" "+(t?"":"no-")+e,c[e]=t}return c},f(""),m=y=null,e.attachEvent&&function(){var e=t.createElement("div");return e.innerHTML="<elem></elem>",e.childNodes.length!==1}()&&function(e,t){function r(e){var t=-1;while(++t<u)e.createElement(o[t])}e.iepp=e.iepp||{};var i=e.iepp,s=i.html5elements||"abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",o=s.split("|"),u=o.length,a=new RegExp("(^|\\s)("+s+")","gi"),f=new RegExp("<(/*)("+s+")","gi"),l=/^\s*[\{\}]\s*$/,c=new RegExp("(^|[^\\n]*?\\s)("+s+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),h=t.createDocumentFragment(),p=t.documentElement,d=p.firstChild,v=t.createElement("body"),m=t.createElement("style"),g=/print|all/,y;i.getCSS=function(e,t){if(e+""===n)return"";var r=-1,s=e.length,o,u=[];while(++r<s){o=e[r];if(o.disabled)continue;t=o.media||t,g.test(t)&&u.push(i.getCSS(o.imports,t),o.cssText),t="all"}return u.join("")},i.parseCSS=function(e){var t=[],n;while((n=c.exec(e))!=null)t.push(((l.exec(n[1])?"\n":n[1])+n[2]+n[3]).replace(a,"$1.iepp_$2")+n[4]);return t.join("\n")},i.writeHTML=function(){var e=-1;y=y||t.body;while(++e<u){var n=t.getElementsByTagName(o[e]),r=n.length,i=-1;while(++i<r)n[i].className.indexOf("iepp_")<0&&(n[i].className+=" iepp_"+o[e])}h.appendChild(y),p.appendChild(v),v.className=y.className,v.id=y.id,v.innerHTML=y.innerHTML.replace(f,"<$1font")},i._beforePrint=function(){m.styleSheet.cssText=i.parseCSS(i.getCSS(t.styleSheets,"all")),i.writeHTML()},i.restoreHTML=function(){v.innerHTML="",p.removeChild(v),p.appendChild(y)},i._afterPrint=function(){i.restoreHTML(),m.styleSheet.cssText=""},r(t),r(h),i.disablePP||(d.insertBefore(m,d.firstChild),m.media="print",m.className="iepp-printshim",e.attachEvent("onbeforeprint",i._beforePrint),e.attachEvent("onafterprint",i._afterPrint))}(e,t),c._version=l,c._prefixes=E,c._domPrefixes=S,c.mq=A,c.hasEvent=O,c.testProp=function(e){return s([e])},c.testAllProps=i,c.testStyles=L,c.prefixed=function(e){return i(e,"pfx")},p.className=p.className.replace(/\bno-js\b/,"")+(h?" js "+k.join(" "):""),c}(this,this.document),function(e,t){function n(){y(!0)}e.respond={},respond.update=function(){},respond.mediaQueriesSupported=t;if(!t){var r=e.document,i=r.documentElement,s=[],o=[],u=[],a={},f=30,l=r.getElementsByTagName("head")[0]||i,c=l.getElementsByTagName("link"),h=[],p=function(){var t=c,n=t.length,r=0,i,s,o,u;for(;r<n;r++)i=t[r],s=i.href,o=i.media,u=i.rel&&i.rel.toLowerCase()==="stylesheet",!!s&&u&&!a[s]&&(!/^([a-zA-Z]+?:(\/\/)?(www\.)?)/.test(s)||s.replace(RegExp.$1,"").split("/")[0]===e.location.host?h.push({href:s,media:o}):a[s]=!0);d()},d=function(){if(h.length){var e=h.shift();b(e.href,function(t){v(t,e.href,e.media),a[e.href]=!0,d()})}},v=function(e,t,n){var r=e.match(/@media[^\{]+\{([^\{\}]+\{[^\}\{]+\})+/gi),i=r&&r.length||0,t=t.substring(0,t.lastIndexOf("/")),u=function(e){return e.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+t+"$2$3")},a=!i&&n,f=0,l,c,h,p,d;t.length&&(t+="/"),a&&(i=1);for(;f<i;f++){l=0,a?(c=n,o.push(u(e))):(c=r[f].match(/@media ([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,o.push(RegExp.$2&&u(RegExp.$2))),p=c.split(","),d=p.length;for(;l<d;l++)h=p[l],s.push({media:h.match(/(only\s+)?([a-zA-Z]+)(\sand)?/)&&RegExp.$2,rules:o.length-1,minw:h.match(/\(min\-width:[\s]*([\s]*[0-9]+)px[\s]*\)/)&&parseFloat(RegExp.$1),maxw:h.match(/\(max\-width:[\s]*([\s]*[0-9]+)px[\s]*\)/)&&parseFloat(RegExp.$1)})}y()},m,g,y=function(e){var t="clientWidth",n=i[t],a=r.compatMode==="CSS1Compat"&&n||r.body[t]||n,h={},p=r.createDocumentFragment(),d=c[c.length-1],v=(new Date).getTime();if(e&&m&&v-m<f)clearTimeout(g),g=setTimeout(y,f);else{m=v;for(var b in s){var w=s[b];if(!w.minw&&!w.maxw||(!w.minw||w.minw&&a>=w.minw)&&(!w.maxw||w.maxw&&a<=w.maxw))h[w.media]||(h[w.media]=[]),h[w.media].push(o[w.rules])}for(var b in u)u[b]&&u[b].parentNode===l&&l.removeChild(u[b]);for(var b in h){var E=r.createElement("style"),S=h[b].join("\n");E.type="text/css",E.media=b,E.styleSheet?E.styleSheet.cssText=S:E.appendChild(r.createTextNode(S)),p.appendChild(E),u.push(E)}l.insertBefore(p,d.nextSibling)}},b=function(e,t){var n=w();if(!!n){n.open("GET",e,!0),n.onreadystatechange=function(){n.readyState==4&&(n.status==200||n.status==304)&&t(n.responseText)};if(n.readyState==4)return;n.send()}},w=function(){var e=!1,t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new XMLHttpRequest}],n=t.length;while(n--){try{e=t[n]()}catch(r){continue}break}return function(){return e}}();p(),respond.update=p,e.addEventListener?e.addEventListener("resize",n,!1):e.attachEvent&&e.attachEvent("onresize",n)}}(this,Modernizr.mq("only all")),function(e,t,n){function r(e){return!e||e=="loaded"||e=="complete"}function i(){var e=1,t=-1;while(v.length- ++t)if(v[t].s&&!(e=v[t].r))break;e&&u()}function s(e){var n=t.createElement("script"),s;n.src=e.s,n.onreadystatechange=n.onload=function(){!s&&r(n.readyState)&&(s=1,i(),n.onload=n.onreadystatechange=null)},h(function(){s||(s=1,i())},D.errorTimeout),e.e?n.onload():p.parentNode.insertBefore(n,p)}function o(e){var n=t.createElement("link"),r;n.href=e.s,n.rel="stylesheet",n.type="text/css";if(!e.e&&(S||g)){var s=function(e){h(function(){if(!r)try{e.sheet.cssRules.length?(r=1,i()):s(e)}catch(t){t.code==1e3||t.message=="security"||t.message=="denied"?(r=1,h(function(){i()},0)):s(e)}},0)};s(n)}else n.onload=function(){r||(r=1,h(function(){i()},0))},e.e&&n.onload();h(function(){r||(r=1,i())},D.errorTimeout),!e.e&&p.parentNode.insertBefore(n,p)}function u(){var e=v.shift();m=1,e?e.t?h(function(){e.t=="c"?o(e):s(e)},0):(e(),i()):m=0}function a(e,n,s,o,a,f){function l(){!d&&r(c.readyState)&&(g.r=d=1,!m&&i(),c.onload=c.onreadystatechange=null,h(function(){w.removeChild(c)},0))}var c=t.createElement(e),d=0,g={t:s,s:n,e:f};c.src=c.data=n,!y&&(c.style.display="none"),c.width=c.height="0",e!="object"&&(c.type=s),c.onload=c.onreadystatechange=l,e=="img"?c.onerror=l:e=="script"&&(c.onerror=function(){g.e=g.r=1,u()}),v.splice(o,0,g),w.insertBefore(c,y?null:p),h(function(){d||(w.removeChild(c),g.r=g.e=d=1,i())},D.errorTimeout)}function f(e,t,n){var r=t=="c"?N:T;return m=0,t=t||"j",L(e)?a(r,e,t,this.i++,c,n):(v.splice(this.i++,0,e),v.length==1&&u()),this}function l(){var e=D;return e.loader={load:f,i:0},e}var c=t.documentElement,h=e.setTimeout,p=t.getElementsByTagName("script")[0],d={}.toString,v=[],m=0,g="MozAppearance"in c.style,y=g&&!!t.createRange().compareNode,b=g&&!y,w=y?c:p.parentNode,E=e.opera&&d.call(e.opera)=="[object Opera]",S="webkitAppearance"in c.style,x=S&&"async"in t.createElement("script"),T=g?"object":E||x?"img":"script",N=S?"img":T,C=Array.isArray||function(e){return d.call(e)=="[object Array]"},k=function(e){return Object(e)===e},L=function(e){return typeof e=="string"},A=function(e){return d.call(e)=="[object Function]"},O=[],M={},_,D;D=function(e){function t(e){var t=e.split("!"),n=O.length,r=t.pop(),i=t.length,s={url:r,origUrl:r,prefixes:t},o,u;for(u=0;u<i;u++)o=M[t[u]],o&&(s=o(s));for(u=0;u<n;u++)s=O[u](s);return s}function r(e,r,i,s,o){var u=t(e),a=u.autoCallback;if(!u.bypass){r&&(r=A(r)?r:r[e]||r[s]||r[e.split("/").pop().split("?")[0]]);if(u.instead)return u.instead(e,r,i,s,o);i.load(u.url,u.forceCSS||!u.forceJS&&/css$/.test(u.url)?"c":n,u.noexec),(A(r)||A(a))&&i.load(function(){l(),r&&r(u.origUrl,o,s),a&&a(u.origUrl,o,s)})}}function i(e,t){function n(e){if(L(e))r(e,u,t,0,i);else if(k(e))for(a in e)e.hasOwnProperty(a)&&r(e[a],u,t,a,i)}var i=!!e.test,s=i?e.yep:e.nope,o=e.load||e.both,u=e.callback,a;n(s),n(o),e.complete&&t.load(e.complete)}var s,o,u=this.yepnope.loader;if(L(e))r(e,0,u,0);else if(C(e))for(s=0;s<e.length;s++)o=e[s],L(o)?r(o,0,u,0):C(o)?D(o):k(o)&&i(o,u);else k(e)&&i(e,u)},D.addPrefix=function(e,t){M[e]=t},D.addFilter=function(e){O.push(e)},D.errorTimeout=1e4,t.readyState==null&&
t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",_=function(){t.removeEventListener("DOMContentLoaded",_,0),t.readyState="complete"},0)),e.yepnope=l()}(this,this.document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(e){e.fn.lightBox=function(t){function r(){return i(this,n),!1}function i(n,r){e("embed, object, select").css({visibility:"hidden"}),s(),t.imageArray.length=0,t.activeImage=0;if(r.length==1)t.imageArray.push(new Array(n.getAttribute("href"),n.getAttribute("title")));else for(var i=0;i<r.length;i++)t.imageArray.push(new Array(r[i].getAttribute("href"),r[i].getAttribute("title")));while(t.imageArray[t.activeImage][0]!=n.getAttribute("href"))t.activeImage++;o()}function s(){e("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+t.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><img src="'+t.imageBtnClose+'"></a></div></div></div></div>');var n=m();e("#jquery-overlay").css({backgroundColor:t.overlayBgColor,opacity:t.overlayOpacity,width:n[0],height:n[1]}).fadeIn();var r=g();e("#jquery-lightbox").css({top:r[1]+n[3]/10,left:r[0]}).show(),e("#jquery-overlay,#jquery-lightbox").click(function(){v()}),e("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){return v(),!1}),e(window).resize(function(){var t=m();e("#jquery-overlay").css({width:t[0],height:t[1]});var n=g();e("#jquery-lightbox").css({top:n[1]+t[3]/10,left:n[0]})})}function o(){e("#lightbox-loading").show(),t.fixedNavigation?e("#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide():e("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide();var n=new Image;n.onload=function(){e("#lightbox-image").attr("src",t.imageArray[t.activeImage][0]),u(n.width,n.height),n.onload=function(){}},n.src=t.imageArray[t.activeImage][0]}function u(n,r){if(t.maxWidth!=null&&t.maxHeight!=null&&(n>t.maxWidth||r>t.maxHeight)){var i=n>r,s=i?t.maxWidth/n:t.maxHeight/r;n*=s,r*=s}e("#lightbox-image").height(r),e("#lightbox-image").width(n);var o=e("#lightbox-container-image-box").width(),u=e("#lightbox-container-image-box").height(),f=n+t.containerBorderSize*2,l=r+t.containerBorderSize*2,c=o-f,h=u-l;e("#lightbox-container-image-box").animate({width:f,height:l},t.containerResizeSpeed,function(){a()}),c==0&&h==0&&(e.browser.msie?y(250):y(100)),e("#lightbox-container-image-data-box").css({width:n}),e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:r+t.containerBorderSize*2})}function a(){e("#lightbox-loading").hide(),e("#lightbox-image").fadeIn(function(){f(),l()}),d()}function f(){e("#lightbox-container-image-data-box").slideDown("fast"),e("#lightbox-image-details-caption").hide(),t.imageArray[t.activeImage][1]&&e("#lightbox-image-details-caption").html(t.imageArray[t.activeImage][1]).show(),t.imageArray.length>1&&e("#lightbox-image-details-currentNumber").html(t.txtImage+" "+(t.activeImage+1)+" "+t.txtOf+" "+t.imageArray.length).show()}function l(){e("#lightbox-nav").show(),e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({background:"transparent url("+t.imageBlank+") no-repeat"}),t.activeImage!=0&&(t.fixedNavigation?e("#lightbox-nav-btnPrev").css({background:"url("+t.imageBtnPrev+") left 15% no-repeat"}).unbind().bind("click",function(){return t.activeImage=t.activeImage-1,o(),!1}):e("#lightbox-nav-btnPrev").unbind().hover(function(){e(this).css({background:"url("+t.imageBtnPrev+") left 15% no-repeat"})},function(){e(this).css({background:"transparent url("+t.imageBlank+") no-repeat"})}).show().bind("click",function(){return t.activeImage=t.activeImage-1,o(),!1})),t.activeImage!=t.imageArray.length-1&&(t.fixedNavigation?e("#lightbox-nav-btnNext").css({background:"url("+t.imageBtnNext+") right 15% no-repeat"}).unbind().bind("click",function(){return t.activeImage=t.activeImage+1,o(),!1}):e("#lightbox-nav-btnNext").unbind().hover(function(){e(this).css({background:"url("+t.imageBtnNext+") right 15% no-repeat"})},function(){e(this).css({background:"transparent url("+t.imageBlank+") no-repeat"})}).show().bind("click",function(){return t.activeImage=t.activeImage+1,o(),!1})),c()}function c(){e(document).keydown(function(e){p(e)})}function h(){e(document).unbind()}function p(e){e==null?(keycode=event.keyCode,escapeKey=27):(keycode=e.keyCode,escapeKey=e.DOM_VK_ESCAPE),key=String.fromCharCode(keycode).toLowerCase(),(key==t.keyToClose||key=="x"||keycode==escapeKey)&&v(),(key==t.keyToPrev||keycode==37)&&t.activeImage!=0&&(t.activeImage=t.activeImage-1,o(),h()),(key==t.keyToNext||keycode==39)&&t.activeImage!=t.imageArray.length-1&&(t.activeImage=t.activeImage+1,o(),h())}function d(){t.imageArray.length-1>t.activeImage&&(objNext=new Image,objNext.src=t.imageArray[t.activeImage+1][0]),t.activeImage>0&&(objPrev=new Image,objPrev.src=t.imageArray[t.activeImage-1][0])}function v(){e("#jquery-lightbox").remove(),e("#jquery-overlay").fadeOut(function(){e("#jquery-overlay").remove()}),e("embed, object, select").css({visibility:"visible"})}function m(){var e,t;window.innerHeight&&window.scrollMaxY?(e=window.innerWidth+window.scrollMaxX,t=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(e=document.body.scrollWidth,t=document.body.scrollHeight):(e=document.body.offsetWidth,t=document.body.offsetHeight);var n,r;return self.innerHeight?(document.documentElement.clientWidth?n=document.documentElement.clientWidth:n=self.innerWidth,r=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(n=document.documentElement.clientWidth,r=document.documentElement.clientHeight):document.body&&(n=document.body.clientWidth,r=document.body.clientHeight),t<r?pageHeight=r:pageHeight=t,e<n?pageWidth=e:pageWidth=n,arrayPageSize=new Array(pageWidth,pageHeight,n,r),arrayPageSize}function g(){var e,t;return self.pageYOffset?(t=self.pageYOffset,e=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(t=document.documentElement.scrollTop,e=document.documentElement.scrollLeft):document.body&&(t=document.body.scrollTop,e=document.body.scrollLeft),arrayPageScroll=new Array(e,t),arrayPageScroll}function y(e){var t=new Date;n=null;do var n=new Date;while(n-t<e)}t=jQuery.extend({maxWidth:null,maxHeight:null,overlayBgColor:"#000",overlayOpacity:.8,fixedNavigation:!1,imageLoading:"images/lightbox-ico-loading.gif",imageBtnPrev:"images/lightbox-btn-prev.gif",imageBtnNext:"images/lightbox-btn-next.gif",imageBtnClose:"images/lightbox-btn-close.gif",imageBlank:"images/lightbox-blank.gif",containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0},t);var n=this;return this.unbind("click").click(r)}}(jQuery),function(e){e.fn.extend({screw:function(t){var n={loadingHTML:"Loading ... "},r=e.extend(n,t),i=e(this);return this.each(function(){e(window).scroll(function(){t(e(this))});var t=function(t){var i=e(window).height(),s=e(window).width(),o=t.scrollTop(),u=i+o;e(".screw-image").each(function(){var t=e(this).offset(),n=Math.round(Math.random()*1e3);if(u>=t.top&&t.left<=s&&!e(this).hasClass("screw-loaded")&&!e(this).hasClass("screw-loading")){e(this).addClass("screw-loading").html('<div id="screw-loading-'+n+'">'+r.loadingHTML+"</div>");var i=e(this).attr("rel"),o=/&/g;o.test(i)?i+="&screw_rand="+n:i+="?screw_rand="+n,objImage=new Image,objImage.src=i;var a=e(this);objImage.onload=function(){a.append('<img style="display:none" id="screw-content-'+n+'" class="screw-content" src="'+i+'" />'),e("#screw-loading-"+n).fadeOut("slow",function(){e("#screw-content-"+n).fadeIn("slow"),a.removeClass("screw-loading").addClass("screw-loaded")})}}}),e(".screw").each(function(){var t=e(this).offset(),i=e(this),o=Math.round(Math.random()*1e3),a="html";if(u>=t.top&&t.left<=s){e(this).hasClass("screw-xml")?a="xml":e(this).hasClass("screw-json")?a="json":e(this).hasClass("screw-script")&&(a="script");if(!e(this).hasClass("screw-loaded")||e(this).hasClass("screw-repeat")&&!e(this).hasClass("screw-loading"))i.addClass("screw-loading"),r.loadingHTML&&i.html('<div id="screw-loading-'+o+'">'+r.loadingHTML+"</div>"),i.hasClass("screw-replace")?e(this).attr("rel")?e.get(e(this).attr("rel"),{screwrand:Math.round(Math.random()*1e3)},function(e){i.replaceWith(e)},a):e(this).attr("rev")&&i.replaceWith(e(this).attr("rev")):i.hasClass("screw-append")?e(this).attr("rel")?e.get(e(this).attr("rel"),{screwrand:Math.round(Math.random()*1e3)},function(e){i.append('<div style="display:none" id="screw-content-'+o+'" class="screw-content">'+e+"</div>"),n(o)},a):e(this).attr("rev")&&(i.append('<div style="display:none" id="screw-content-'+o+'" class="screw-content">'+e(this).attr("rev")+"</div>"),n(o)):i.hasClass("screw-prepend")?e(this).attr("rel")?e.get(e(this).attr("rel"),{screwrand:Math.round(Math.random()*1e3)},function(e){i.prepend('<div style="display:none" id="screw-content-'+o+'" class="screw-content">'+e+"</div>"),n(o)},a):e(this).attr("rev")&&(i.prepend('<div style="display:none" id="screw-content-'+o+'" class="screw-content">'+e(this).attr("rev")+"</div>"),n(o)):i.hasClass("screw-before")?(e(this).attr("rel")?e.get(e(this).attr("rel"),{screwrand:Math.round(Math.random()*1e3)},function(e){i.before('<div style="display:none" id="screw-content-'+o+'" class="screw-content">'+e+"</div>"),n(o)},a):e(this).attr("rev")&&(i.before('<div style="display:none" id="screw-content-'+o+'" class="screw-content">'+e(this).attr("rev")+"</div>"),n(o)),i.hasClass("screw-repeat")&&t.top<e(window).height()&&t.left<e(window).width()&&(e(this).attr("rel")?e.get(e(this).attr("rel"),{screwrand:Math.round(Math.random()*1e3)},function(e){i.before('<div style="display:none" id="screw-content-'+o+'" class="screw-content">'+e+"</div>"),n(o)},a):e(this).attr("rev")&&(i.before('<div style="display:none" id="screw-content-'+o+'" class="screw-content">'+e(this).attr("rev")+"</div>"),n(o)))):i.hasClass("screw-after")?e(this).attr("rel")?e.get(e(this).attr("rel"),{screwrand:Math.round(Math.random()*1e3)},function(e){i.after('<div style="display:none" id="screw-content-'+o+'" class="screw-content">'+e+"</div>"),n(o)},a):e(this).attr("rev")&&(i.after('<div style="display:none" id="screw-content-'+o+'" class="screw-content">'+e(this).attr("rev")+"</div>"),n(o)):e(this).attr("rel")?e.get(e(this).attr("rel"),{screwrand:Math.round(Math.random()*1e3)},function(e){i.append('<div style="display:none" id="screw-content-'+o+'" class="screw-content">'+e+"</div>"),n(o)},a):e(this).attr("rev")&&(i.append('<div style="display:none" id="screw-content-'+o+'" class="screw-content">'+e(this).attr("rev")+"</div>"),n(o)),i.removeClass("screw-loading").addClass("screw-loaded")}}),e(".screw-remove").each(function(){if(e(this).hasClass("screw-loaded")){var t=e(this).position();(t.top<o||t.left>s)&&e(this).is(":visible")&&e(this).fadeOut("slow")}})},n=function(t){r.loadingHTML?e("#screw-loading-"+t).fadeOut("slow",function(){e("#screw-content-"+t).fadeIn("slow")}):e("#screw-content-"+t).fadeIn("slow")};t(e(window))})}})}(jQuery);var I18n=I18n||{};I18n.defaultLocale="en",I18n.fallbacks=!1,I18n.defaultSeparator=".",I18n.locale=null,I18n.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,I18n.isValidNode=function(e,t,n){return e[t]!==null&&e[t]!==n},I18n.lookup=function(e,t){var t=t||{},n=e,r=this.prepareOptions(I18n.translations),i=r[t.locale||I18n.currentLocale()],t=this.prepareOptions(t),s;if(!i)return;typeof e=="object"&&(e=e.join(this.defaultSeparator)),t.scope&&(e=t.scope.toString()+this.defaultSeparator+e),e=e.split(this.defaultSeparator);while(e.length>0){s=e.shift(),i=i[s];if(!i){I18n.fallbacks&&!t.fallback&&(i=I18n.lookup(n,this.prepareOptions({locale:I18n.defaultLocale,fallback:!0},t)));break}}return!i&&this.isValidNode(t,"defaultValue")&&(i=t.defaultValue),i},I18n.prepareOptions=function(){var e={},t,n=arguments.length;for(var r=0;r<n;r++){t=arguments[r];if(!t)continue;for(var i in t)this.isValidNode(e,i)||(e[i]=t[i])}return e},I18n.interpolate=function(e,t){t=this.prepareOptions(t);var n=e.match(this.PLACEHOLDER),r,i,s;if(!n)return e;for(var o=0;r=n[o];o++)s=r.replace(this.PLACEHOLDER,"$1"),i=t[s],this.isValidNode(t,s)||(i="[missing "+r+" value]"),regex=new RegExp(r.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),e=e.replace(regex,i);return e},I18n.translate=function(e,t){t=this.prepareOptions(t);var n=this.lookup(e,t);try{return typeof n=="object"?typeof t.count=="number"?this.pluralize(t.count,e,t):n:this.interpolate(n,t)}catch(r){return this.missingTranslation(e)}},I18n.localize=function(e,t){switch(e){case"currency":return this.toCurrency(t);case"number":return e=this.lookup("number.format"),this.toNumber(t,e);case"percentage":return this.toPercentage(t);default:return e.match(/^(date|time)/)?this.toTime(e,t):t.toString()}},I18n.parseDate=function(e){var t,n;if(typeof e=="object")return e;t=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2}))?(Z|\+0000)?/);if(t){for(var r=1;r<=6;r++)t[r]=parseInt(t[r],10)||0;t[2]-=1,t[7]?n=new Date(Date.UTC(t[1],t[2],t[3],t[4],t[5],t[6])):n=new Date(t[1],t[2],t[3],t[4],t[5],t[6])}else typeof e=="number"?(n=new Date,n.setTime(e)):e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)?(n=new Date,n.setTime(Date.parse(e))):(n=new Date,n.setTime(Date.parse(e)));return n},I18n.toTime=function(e,t){var n=this.parseDate(t),r=this.lookup(e);return n.toString().match(/invalid/i)?n.toString():r?this.strftime(n,r):n.toString()},I18n.strftime=function(e,t){var n=this.lookup("date");if(!n)return e.toString();n.meridian=n.meridian||["AM","PM"];var r=e.getDay(),i=e.getDate(),s=e.getFullYear(),o=e.getMonth()+1,u=e.getHours(),a=u,f=u>11?1:0,l=e.getSeconds(),c=e.getMinutes(),h=e.getTimezoneOffset(),p=Math.floor(Math.abs(h/60)),d=Math.abs(h)-p*60,v=(h>0?"-":"+")+(p.toString().length<2?"0"+p:p)+(d.toString().length<2?"0"+d:d);a>12?a-=12:a===0&&(a=12);var m=function(e){var t="0"+e.toString();return t.substr(t.length-2)},g=t;return g=g.replace("%a",n.abbr_day_names[r]),g=g.replace("%A",n.day_names[r]),g=g.replace("%b",n.abbr_month_names[o]),g=g.replace("%B",n.month_names[o]),g=g.replace("%d",m(i)),g=g.replace("%e",i),g=g.replace("%-d",i),g=g.replace("%H",m(u)),g=g.replace("%-H",u),g=g.replace("%I",m(a)),g=g.replace("%-I",a),g=g.replace("%m",m(o)),g=g.replace("%-m",o),g=g.replace("%M",m(c)),g=g.replace("%-M",c),g=g.replace("%p",n.meridian[f]),g=g.replace("%S",m(l)),g=g.replace("%-S",l),g=g.replace("%w",r),g=g.replace("%y",m(s)),g=g.replace("%-y",m(s).replace(/^0+/,"")),g=g.replace("%Y",s),g=g.replace("%z",v),g},I18n.toNumber=function(e,t){t=this.prepareOptions(t,this.lookup("number.format"),{precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1});var n=e<0,r=Math.abs(e).toFixed(t.precision).toString(),i=r.split("."),s,o=[],u;e=i[0],s=i[1];while(e.length>0)o.unshift(e.substr(Math.max(0,e.length-3),3)),e=e.substr(0,e.length-3);u=o.join(t.delimiter),t.precision>0&&(u+=t.separator+i[1]),n&&(u="-"+u);if(t.strip_insignificant_zeros){var a={separator:new RegExp(t.separator.replace(/\./,"\\.")+"$"),zeros:/0+$/};u=u.replace(a.zeros,"").replace(a.separator,"")}return u},I18n.toCurrency=function(e,t){return t=this.prepareOptions(t,this.lookup("number.currency.format"),this.lookup("number.format"),{unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."}),e=this.toNumber(e,t),e=t.format.replace("%u",t.unit).replace("%n",e),e},I18n.toHumanSize=function(e,t){var n=1024,r=e,i=0,s,o;while(r>=n&&i<4)r/=n,i+=1;return i===0?(s=this.t("number.human.storage_units.units.byte",{count:r}),o=0):(s=this.t("number.human.storage_units.units."+[null,"kb","mb","gb","tb"][i]),o=r-Math.floor(r)===0?0:1),t=this.prepareOptions(t,{precision:o,format:"%n%u",delimiter:""}),e=this.toNumber(r,t),e=t.format.replace("%u",s).replace("%n",e),e},I18n.toPercentage=function(e,t){return t=this.prepareOptions(t,this.lookup("number.percentage.format"),this.lookup("number.format"),{precision:3,separator:".",delimiter:""}),e=this.toNumber(e,t),e+"%"},I18n.pluralize=function(e,t,n){var r;try{r=this.lookup(t,n)}catch(i){}if(!r)return this.missingTranslation(t);var s;n=this.prepareOptions(n),n.count=e.toString();switch(Math.abs(e)){case 0:s=this.isValidNode(r,"zero")?r.zero:this.isValidNode(r,"none")?r.none:this.isValidNode(r,"other")?r.other:this.missingTranslation(t,"zero");break;case 1:s=this.isValidNode(r,"one")?r.one:this.missingTranslation(t,"one");break;default:s=this.isValidNode(r,"other")?r.other:this.missingTranslation(t,"other")}return this.interpolate(s,n)},I18n.missingTranslation=function(){var e='[missing "'+this.currentLocale(),t=arguments.length;for(var n=0;n<t;n++)e+="."+arguments[n];return e+='" translation]',e},I18n.currentLocale=function(){return I18n.locale||I18n.defaultLocale},I18n.t=I18n.translate,I18n.l=I18n.localize,I18n.p=I18n.pluralize;var I18n=I18n||{};I18n.translations={en:{date:{formats:{"default":"%Y-%m-%d","short":"%b %d","long":"%B %d, %Y"},day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],order:["year","month","day"]},time:{formats:{"default":"%a, %d %b %Y %H:%M:%S %z","short":"%d %b %H:%M","long":"%B %d, %Y %H:%M"},am:"am",pm:"pm",ago:"%{time} ago"},support:{array:{words_connector:", ",two_words_connector:" and ",last_word_connector:", and "}},errors:{format:"%{attribute} %{message}",messages:{inclusion:"is not included in the list",exclusion:"is reserved",invalid:"is invalid",confirmation:"doesn't match confirmation",accepted:"must be accepted",empty:"can't be empty",blank:"can't be blank",too_long:"is too long (maximum is %{count} characters)",too_short:"is too short (minimum is %{count} characters)",wrong_length:"is the wrong length (should be %{count} characters)",not_a_number:"is not a number",not_an_integer:"must be an integer",greater_than:"must be greater than %{count}",greater_than_or_equal_to:"must be greater than or equal to %{count}",equal_to:"must be equal to %{count}",less_than:"must be less than %{count}",less_than_or_equal_to:"must be less than or equal to %{count}",odd:"must be odd",even:"must be even",carrierwave_processing_error:"failed to be processed",carrierwave_integrity_error:"is not of an allowed file type",carrierwave_download_error:"could not be downloaded",extension_white_list_error:"You are not allowed to upload %{extension} files, allowed types: %{allowed_types}",extension_black_list_error:"You are not allowed to upload %{extension} files, prohibited types: %{prohibited_types}",rmagick_processing_error:"Failed to manipulate with rmagick, maybe it is not an image? Original Error: %{e}",mime_types_processing_error:"Failed to process file with MIME::Types, maybe not valid content-type? Original Error: %{e}",mini_magick_processing_error:"Failed to manipulate with MiniMagick, maybe it is not an image? Original Error: %{e}",in_between:"must be in between %{min} and %{max}",expired:"has expired, please request a new one",not_found:"not found",already_confirmed:"was already confirmed, please try signing in",not_locked:"was not locked",not_saved:{one:"1 error prohibited this %{resource} from being saved:",other:"%{count} errors prohibited this %{resource} from being saved:"}}},activerecord:{errors:{messages:{taken:"has already been taken",record_invalid:"Validation failed: %{errors}"},models:{room:{attributes:{name:{taken:"is taken"}}}}},attributes:{contact:{relation_ids:"Contact type"},"relation/custom":{name:"Name"},user:{email:"Email",name:"Name",password:"Password",password_confirmation:"Confirm password",remember_me:"Remember me"},document:{title:"Title"},event:{title:"Title",room:"Room",frequency:"Frequency"},room:{name:"Name"}},models:{event:"event",room:"room"}},number:{format:{separator:".",delimiter:",",precision:3,significant:!1,strip_insignificant_zeros:!1},currency:{format:{format:"%u%n",unit:"$",separator:".",delimiter:",",precision:2,significant:!1,strip_insignificant_zeros:!1}},percentage:{format:{delimiter:""}},precision:{format:{delimiter:""}},human:{format:{delimiter:"",precision:3,significant:!0,strip_insignificant_zeros:!0},storage_units:{format:"%n %u",units:{"byte":{one:"Byte",other:"Bytes"},kb:"KB",mb:"MB",gb:"GB",tb:"TB"}},decimal_units:{format:"%n %u",units:{unit:"",thousand:"Thousand",million:"Million",billion:"Billion",trillion:"Trillion",quadrillion:"Quadrillion"}}}},datetime:{distance_in_words:{half_a_minute:"half a minute",less_than_x_seconds:{one:"less than 1 second",other:"less than %{count} seconds"},x_seconds:{one:"1 second",other:"%{count} seconds"},less_than_x_minutes:{one:"less than a minute",other:"less than %{count} minutes"},x_minutes:{one:"1 minute",other:"%{count} minutes"},about_x_hours:{one:"about 1 hour",other:"about %{count} hours"},x_days:{one:"1 day",other:"%{count} days"},about_x_months:{one:"about 1 month",other:"about %{count} months"},x_months:{one:"1 month",other:"%{count} months"},about_x_years:{one:"about 1 year",other:"about %{count} years"},over_x_years:{one:"over 1 year",other:"over %{count} years"},almost_x_years:{one:"almost 1 year",other:"almost %{count} years"}},prompts:{year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",second:"Seconds"}},helpers:{select:{prompt:"Please select"},submit:{create:"Create %{model}",update:"Update %{model}",submit:"Save %{model}",relation_custom:{create:"Save",update:"Update"}},button:{create:"Create %{model}",update:"Update %{model}",submit:"Save %{model}"}},flash:{actions:{create:{notice:"%{resource_name} was successfully created."},update:{notice:"%{resource_name} was successfully updated."},destroy:{notice:"%{resource_name} was successfully destroyed.",alert:"%{resource_name} could not be destroyed."}}},mailboxer:{message_mailer:{subject_new:"%{subject}",subject_reply:"%{subject}",has_sent_new:{event:"has sent a new message to %{receiver}",group:"has sent a new message to %{receiver}",user:"has sent you a new message"},has_sent_reply:{event:"has sent a reply to %{receiver}",group:"has sent a reply to %{receiver}",user:"has sent you a reply"}},notification_mailer:{subject:"%{subject}"},"delete":"Delete",delete_confirm:"Do you want to move '%{object}' to trash?",form:{body:"Body",recipients:"Recipients",subject:"Subject"},mark_as_read:"Mark as read",reply:"Reply",send:"Send message",sent:"Your message was sent"},devise:{failure:{already_authenticated:"You are already signed in.",unauthenticated:"You need to sign in or sign up before continuing.",unconfirmed:"You have to confirm your account before continuing.",locked:"Your account is locked.",invalid:"Invalid email or password.",invalid_token:"Invalid authentication token.",timeout:"Your session expired, please sign in again to continue.",inactive:"Your account was not activated yet."},sessions:{signed_in:"Signed in successfully.",signed_out:"Signed out successfully."},passwords:{send_instructions:"You will receive an email with instructions about how to reset your password in a few minutes.",updated:"Your password was changed successfully. You are now signed in.",updated_not_active:"Your password was changed successfully.",send_paranoid_instructions:"If your email address exists in our database, you will receive a password recovery link at your email address in a few minutes.",no_token:"You can't access this page without coming from a password reset email. If you do come from a password reset email, please make sure you used the full URL provided.",confirm:"Confirm password",forgot:"Forgot your password?",instructions:"Type the email address bound to your account and we will sent you instructions to change it:",update:"Change your password"},confirmations:{send_instructions:"You will receive an email with instructions about how to confirm your account in a few minutes.",send_paranoid_instructions:"If your email address exists in our database, you will receive an email with instructions about how to confirm your account in a few minutes.",confirmed:"Your account was successfully confirmed. You are now signed in."},registrations:{signed_up:"Welcome! You have signed up successfully.",signed_up_but_unconfirmed:"A message with a confirmation link has been sent to your email address. Please open the link to activate your account.",signed_up_but_inactive:"You have signed up successfully. However, we could not sign you in because your account is not yet activated.",signed_up_but_locked:"You have signed up successfully. However, we could not sign you in because your account is locked.",updated:"You updated your account successfully.",update_needs_confirmation:"You updated your account successfully, but we need to verify your new email address. Please check your email and click on the confirm link to finalize confirming your new email address.",destroyed:"Bye! Your account was successfully cancelled. We hope to see you again soon."},unlocks:{send_instructions:"You will receive an email with instructions about how to unlock your account in a few minutes.",unlocked:"Your account has been unlocked successfully. Please sign in to continue.",send_paranoid_instructions:"If your account exists, you will receive an email with instructions about how to unlock it in a few minutes."},omniauth_callbacks:{success:"Successfully authenticated from %{kind} account.",failure:'Could not authenticate you from %{kind} because "%{reason}".'},mailer:{confirmation_instructions:{subject:"Confirmation instructions"},reset_password_instructions:{subject:"Reset password instructions"},unlock_instructions:{subject:"Unlock Instructions"}},links:{sign_in:"Sign in",sign_up:"Sign up",forgot_password:"Forgot you password?",confirmation_instructions:"Didn't receive confirmation instructions?",unlock_instructions:"Didn't receive unlock instructions?",sign_in_with:"Sign in with %{provider}"}},actor:{name:"Name"},avatar:{crop_image:"Crop the uploaded image",crop_submit:"Crop image",destroy:"Delete avatar",destroy_sure:"Are you sure you wan't to delete the selected avatar?",error:{no_file:"You have to select a file",no_image_file:"The file you uploaded isn't valid, it must be an image file"},list:"You have these avatars","new":"Create a new avatar",new_short:"New avatar",no_avatars:"You haven't any avatar, plesase create a new one.",one:"Avatar",other:"Avatars",original:"Original image",preview:"Preview",profile_change:"Change your avatar",set_default:"Set as default",set_default_sure:"Are you sure you wan't to set this avatar as default?",text:{"new":"... or upload a new one",use:"Use your saved avatars ..."},upload:"Upload"},views:{pagination:{first:"&laquo; First",last:"Last &raquo;",previous:"&lsaquo; Prev",next:"Next &rsaquo;",truncate:"..."}},language_name:"English",action:{send:"Send",accept:"Accept"},account:{cancel:"Cancel account",edit:"Edit account",email:{change:"Change email address"},lang:{change:"Change language"},one:"Account",password:{change:"Change password","new":"New password",retype:"Retype new password"},privacy:"Privacy"},activity:{audience:{hidden:{summary:"Restricted",full:"Shared with contacts of %{audience}"},"public":{summary:"Public",full:"Shared with all the Internet"},show:"Show",visible:{summary:"Restricted",full:"Shared with %{audience}"}},confirm_delete:"Delete activity?","delete":"Delete",last:"Last Activities",like:"I like",like_sentence:{one:"%{likers} likes this",other:"%{likers} like this",more:null},one:"Activity",other:"Activities",privacy:{myself:{contacts:{group:"All members",user:"Your contacts"}},outside:{contacts:{group:"Members of %{receiver}",user:"Contacts of %{receiver}"}}},sending:"Sending",stream:{atom_title:"Activity Stream from %{subject}",title:{follow:"%{author} added %{activity_object} as contact",like:"%{author} likes %{activity_object}","make-friend":"%{author} also added %{activity_object} as contact",post:"%{author} posted %{activity_object}",updated:"%{author} posted %{activity_object}"}},title:"Activities",to_comment:"Comment",unlike:"I do not like anymore",verb:{follow:{User:{title:"%{subject} added %{contact} as contact.",message:"%{name} added you as contact."},Group:{title:"%{subject} added %{contact} as contact.",message:"%{name} added you as contact."},RemoteSubject:{title:"%{subject} added %{contact} as contact.",message:"%{name} added you as contact.",notification:{subject:"%{name} added you as contact.",body:"%{name} added you as contact."}}},like:{User:{title:"%{subject} is a fan of %{contact}.",message:"%{name} is now your fan."},Group:{title:"%{subject} is a fan of %{contact}.",message:"%{name} is now your fan."},RemoteSubject:{title:"%{subject} is a fan of %{contact}.",message:"%{name} is now your fan.",notification:{subject:"%{name} is now your fan.",body:"%{name} is now your fan."}}},join:{one:"%{sender} joined the %{title} %{thing}."},"make-friend":{User:{title:"%{subject} and %{contact} are now connected.",message:"%{name} also added you as contact."},Group:{title:"%{subject} added %{contact} as contact.",message:"%{name} added you as contact."},RemoteSubject:{title:"%{subject} and %{contact} are now connected.",message:"%{name} also added you as contact.",notification:{subject:"%{name} also added you as contact.",body:"%{name} also added you as contact."}}},post:{title:{other_wall:"%{sender} → %{receiver}"},RemoteSubject:{notification:{subject:"%{name} has posted something(%{direct_object}) in your wall",body:"%{name} has posted something(%{direct_object}) in your wall"}}},update:{RemoteSubject:{notification:{subject:"%{name} has updated %{direct_object} in your wall",body:"%{name} has updated something(%{direct_object}) in your wall"}}}}},activity_action:{follow:"Follow",sentence:{follow:{one:"%{followers} follows this",other:"%{followers} follow this"},more:{one:"%{count} more person",other:"%{count} more people"}},unfollow:"Unfollow"},browse:"Browse",button:{cancel:"Cancel",create:"Create",save:"Save",update:"Update"},cheesecake:{changes:{details:"Change details",none:"No changes",save:"Save changes",saving:"Saving..."},form:{editing:"Editing",fields:{color:"Color",name:"Name",permissions:"Permissions",subsector:"Subsector"}},select:{hint:"Select by clicking the portraits"}},comment:{input:"Write a comment...",confirm_delete:"Delete comment?",name:"comment",one:"a comment",title:{one:"Comment",other:"Comments"},view_all:"View all comments"},contact:{addressbook:"Addressbook",all_n:"All contacts (%{count})",confirm_delete:"Delete contact?",current:"Current","delete":"Delete",edit:{title:"Edit contact to %{name}",submit:"Edit contact"},error_count:{one:"1 error prohibited this contact from being saved:",other:"%{count} errors prohibited this contact from being saved:"},follow:"Follow",following:"Following",graph:{one:"Graph",empty:"We're sorry but you don't have any contacts yet. You can try the search box to look for somebody!"},in_common:{one:"1 contact in common",other:"%{count} contacts in common"},"new":{link:"+ Add contact",title:"Add %{name} to your contacts",menu:"Add contact",submit:"Add Contact"},one:"Contact",other:"Contacts",pending:{other:"Pending",all:"All",all_n:"See all pending requests (%{count})"},relation:{one:"Contact type","new":"New type"},reply:{link:"+ Reply contact",title:"Reply contact request to %{name}",submit:"Reply contact"},suggestion:{one:"Suggestion",other:"Suggestions",all:"All"},type:{"new":"+ New type"},unfollow:"Unfollow"},copyright:"2010 Copyright - All rights reserved","delete":{confirm:"Delete %{element}}?"},follower:{follower:{title:"Followers"},following:{title:"Followings"},n:{one:"1 follower",other:"%{count} followers"}},forgot_password:"Forgot you password?",frontpage:{collaborate:{"default":"Collaborate",sentence1:"Organize your projects and activities",sentence2:"Participate in conferences and events",sentence3:"Create your own group and conferences"},elements:{comments:"Comments",conferences:"Conferences",networks:"Social Networks",organizers:"Organizers"
,participants:"Participants",groups:"Groups",tags:"Tags"},main_title:"Social Stream is a core for building social network websites.",meet:{"default":"Meet",sentence1:"Meet interesting people and groups",sentence2:"Find last activity of your contacts"},register:"Register now!",share:{"default":"Share",sentence1:"Your proyects and activities",sentence2:"Posts, photos, audio and videos"},stats:"%{users} users and %{groups} groups registered"},group:{one:"Group",other:"Groups",all:"All groups",all_n:"All groups (%{count})",by:"By groups",destroy:{one:"Destroy group",explanation:"All the activities, information and contacts of this group will be destroyed!",go_ahead:"Yes, I am sure. Destroy all!",last_confirm:"This is your last chance. Are you really sure?"},form:{title:"Group"},input:"What is the name of the group?",last:"Last groups",my:"My groups","new":{action:"New group",name:"Name",description:"Description",participants:"Participants"},cloud:"Group tag cloud",most:{followed:"Most followed",liked:"Most liked"},tags:"Tags",title:{one:"Group",other:"Groups"}},help:"Help",home:"Home",inbox:{one:"Inbox"},invitation:{"e-mails":"E-mail addresses",error:"Your request was unprocessable. Make sure you wrote correct e-mail addresses.",invited:"%{sender} has invited you to %{site}!",join:"Invite other people to join %{site}!",join_me:"Join me at %{site}!",one:"Invitation",other:"Invitations",toolbar:"Invite",success:"Your invitations have successfully been sent",text:"Write your own message"},like:{n:{one:"1 fan",other:"%{count} fans"}},location:{message:"You are here > %{location}",base:"You are here",separator:" > "},menu:{options:"Menu Options",information:"Information",wall:"Wall"},message:{answer:"Write your answer",inbox:"Inbox",look:"Take a look at this conversation","new":"New Message",one:"Message",other:"Messages",participants:"Participants",send:"Send a message",sentbox:"Sentbox",trash:"Trash"},notification:{all_text:"Read the whole text at %{url}",confirm:"Confirm %{sender} as contact?","default":"You have a new notification",destroy_sure:"Do you want to delete this notification?",fan:"%{sender} is now %{whose} fan.",follow:{group:"%{sender} added %{who} as contact.",user:"%{sender} added %{who} as contact."},hello:"Hi %{receiver},",like:{group:"%{sender} likes %{whose} %{thing}.",user:"%{sender} likes %{whose} %{thing}."},look:"Take a look at %{sender}'s wall",makefriend:{group:"%{sender} also added %{who} as contact.",user:"%{sender} also added %{who} as contact."},one:"Notification",other:"Notifications",post:{group:"%{title} -- by %{sender} in %{whose} wall",user:"%{title} -- by %{sender} in %{whose} wall"},read:"Mark as read",read_all:"Mark all as read",unread:"Mark as unread",update:{group:"%{sender} updated %{thing} in %{whose} wall.",user:"%{sender} updated %{thing} in %{whose} wall."},visit:"Visit %{url} and check all your notifications.",watch:"Watch it at %{url}",watch_it:"Watch it!",who:{group:"%{name}",user:"you"},whose:{group:"%{receiver}'s",user:"your"}},post:{confirm_delete:"Delete post?",form:{title:"Post"},input:"What are you doing?",name:"post",one:"a post",title:{one:"Post",other:"Posts"}},preposition:{and:"and","true":"on"},profile:{one:"Profile",age:"Age",is_on:"is on",must_be_signed_id:"You must be signed in",group:{about:"About us",birthday:"Anniversary",experience:"Area of expertise",info:"Group information",tags:"Group tags"},user:{about:"About me",birthday:"Birthday",experience:"Experience",info:"Personal information",tags:"User tags"},actualcity:"Actual City",address:"Address",contact:"Contact information",country:"Country",email:"E-mail",empty:"These fields are empty. Please, update them.",fax:"Fax",mobile:"Mobile",organization:"Organization",phone:"Phone",profile:"Edit profile",tags:{"default":"social, stream,",other:"Tags"},website:"Website",update:{error:"Please, check the format of your profile:",success:"Your profile has been updated"}},"public":{other:"Everybody"},permission:{description:{"default":{brief:{create:{activity:"Post to your wall"},follow:{nil:"Follow their activity"},read:{activity:"Read your wall"},represent:{nil:"Administrate"},notify:{nil:"Notify"}},detailed:{create:{activity:{positive:"They WILL BE ABLE to post new activities to your wall",negative:"They WILL NOT BE ABLE to post new activities to your wall"}},follow:{nil:{positive:"Activities of the contacts at %{relation} WILL APPEAR in your home wall",negative:"Activities of the contacts at %{relation} WILL APPEAR in your home wall"}},read:{activity:{positive:"They WILL BE ABLE to read posts in your wall, except those shared with specific contacts",negative:"They WILL NOT BE ABLE to read posts in your wall, except those marked as public"}},represent:{nil:{positive:"They WILL BE ABLE to change session and act as %{subject}",negative:"They WILL NOT BE ABLE to change session and act as %{subject}"}},notify:{nil:{positive:"Activities WILL BE notified to contacts at %{name}",negative:"Activities WILL NOT BE notified to contacts at %{name}"}}}}},of_relation:{choose:"2. Permissions in <strong>%{name}</strong> sphere"}},privacy:{intro:"Contacts at <strong>%{relation}</strong> level are only allowed to:",rule:{add:"Add",title:"Privacy rules",saved:"Privacy rules saved"}},relation_custom:{choose:"1. Choose sphere",confirm_delete:"Delete this sphere?","delete":"Delete",edit:"Change name","new":"+ New sphere",title:"Privacy & context"},relation_public:{name:"Public"},representation:{notice:"Your session has changed. Now you are acting on behalf of %{subject}. Use the top-right menu to return to your session","switch":"Switch session"},required:"(*) These fields are required",search:{all_results:"Search all %{subject} (%{count})",at_least:"Write at least two characters",global:{name:"Global search",first_result:{more:"Showing the first %{count} results.",one:"Showing the first result."},query:"See more results for %{query} >"},name:"Search",no_subject_found:"No %{subject} was found.",nothing:"Nothing found",searching:"Searching: %{query}",show_all:"All",write:"Write your query ...",wrong:"There seems to be a problem with the search engine"},settings:{api_key:{briefing:"Manage your API key",confirm:"Are you sure?",empty:"Empty Token",explanation:"This is your API key",name:"API Key",regenerate:"Regenerate API key"},cancel_account:{briefing:"Lets you cancel your account"},email_change:{briefing:"Change your email"},lang_change:{briefing:"Change your language",name:"Change your language"},error:"Some errors raised when saving your changes","for":"Settings for",main:"Settings",manage:{name:"Admin Contacs",briefing:"Settings for contacts",explanation:"Change contacts permissions"},notifications:{briefing:"Settings about notifications behaviour and mail alerts",name:"Notifications",by_email:{name:"Send me an email when I receive a notification",always:"Always",never:"Never"}},one:"Settings",password_change:{briefing:"Change your password"},success:"Your settings where correctly changed"},share:"Share",sign_in:"Sign in",sign_out:"Sign out",sign_up:"Sign up",site:{name:"Social Stream"},subject:{this_is_you:"This is you!"},sure:"Are you sure?",unknown:"Unknown",user:{all:"All users",all_n:"All users (%{count})",by:"By Users",one:"User",other:"Users",title:{one:"User",other:"Users"}},welcome:"Welcome to %{site}!",lang:{browser:"Auto-detect browser language",none:"Language independent content"},audio:{confirm_delete:"Delete audio?",title:{one:"Audio",other:"Audios"},mine:"My audios",name:"audio",not_mine:"Audios",one:"an audio",processing:"Processing audio clip. Please wait..."},details:{msg:"See details..."},document:{actions:{"delete":"Delete",details:"Details",download:"Download",edit:"Edit"},all:"All files",confirm_delete:"Delete file?",form:{title:"File"},info:{date:{created_at:"Created at",updated_at:"Updated at"},description:{title:"Description"},file:{title:"Upload"},title:{title:"Title"}},mine:"My files",name:"file",not_mine:"Files",one:"a file",simple_all:"All",title:{one:"File",other:"Files"}},picture:{confirm_delete:"Delete picture?",mine:"My pictures",name:"picture",not_mine:"Pictures",one:"a picture",title:{one:"Picture",other:"Pictures"}},repository:{title:"Files",order:{by:"Order by",last_modified:"Last modified",most_popular:"Most popular"}},resource:{all:"All Resources",confirm_delete:"Delete resource?",title:"Resources",mine:"My resources",not_mine:"Resources"},video:{confirm_delete:"Delete video?",mine:"My videos",name:"video",not_mine:"Videos",one:"a video",processing:"Processing video. Please, wait...",title:{one:"Video",other:"Videos"}},scheduler:{frequency:{one_off:{form:{message:"Event does not have recurrence",option:"one-off"}},daily:{description:{one:"Every day",other:"Every %{count} days"},form:{option:"daily"}},weekly:{description:{one:"Every %{week_days}",other:"Every %{week_days} on %{count} weeks"},form:{every_week:"Every %{form_field} week(s) on the following days:",option:"weekly"}},monthly:{description:{one:"The %{week_day_order} %{week_day} of the month",other:"The %{week_day_order} %{week_day} of every %{count} months",week_day_order:{1:"first",2:"second",3:"third","-1":"last"}},form:{option:"monthly",week_day:"The %{order_field} %{week_field} of every %{interval_field} month(s)",week_day_order_option:{1:"first",2:"second",3:"third","-1":"last"}}}}},boxy:{close_text:"[close]"},event:{activity_action:{follow:"Follow",sentence:{one:"%{followers} follows this",other:"%{followers} follow this"},unfollow:"Unfollow"},calendar:"Calendar",confirm_delete:"Delete event?",name:"event","new":{title:"New event"},one:"an event",poster:{update:"Upload poster"},title:{one:"Event",other:"Events"},wall_post:"Published an event: %{title}"},room:{confirm_delete:"Delete room?","delete":"Delete",settings:{title:"Rooms",description:"Rooms available for event celebration"},watermark:{name:"New room"}},linkser:{title:"Linkser"},link:{confirm_delete:"Delete link?",errors:{loading:"Error loading",only_webs:"Only webpages are supported"},form:{title:"Link"},input:"Write the web address",name:"link",one:"a link",title:"Links"},chat:{connecting:"Chat Connecting",reconnecting:"Chat Reconnecting",disconnected:"Chat Disconnected",unableconnect:"Chat Out of Service",title:"Chat",password:"Password",zerousers:"No users connected",search:"Search contacts",zerocontacts:"No contacts found",status:{choose:"Choose status",available:"Available",away:"Away",dnd:"Busy",offline:"Offline"},settings:{title:"Enable and configure Social Stream Chat",checkbox:"Enable or disable Social Stream Chat",update:"Update Settings"},notify:{offline:"You are offline",guestOffline:"{{name}} is offline"},videochat:{disconnected:"Videochat disconnected",disconnecting:"Videochat disconnecting...",negotiating:"Negotiating...",connectingWait:"Connecting...",connecting:"Connecting to the server...",waiting:"Waiting for response...",establishing:"Establishing...",connnected:"Videochat connected.",unable:"Unable to init videochat.",serverIssue:"Server Error: Invalid response",call:"{{name}} wants to start a video call",rejected:"{{name}} has rejected your call",rejectedBusy:"{{name}} is busy",accept:"Accept",deny:"Deny",clientIssue:"{{name}}'s client not support videochat",guestOffline:"Unable to connect. {{name}} is offline",offline:"Unable to connect. You are offline",cancel:"{{name}} cancel the videocall",requirements:"You don't have the minimum requirements to run videocall application. Please upgrade to the latest version of Flash."},muc:{group:"{{group}} group",join:"{{nick}} joined in the room.",leave:"{{nick}} has left the room.",occupants:"Occupants",joining:"Joining...",joinError:"You can't join in the room \n {{errorMsg}}",offline:"You are offline"},game:{call:"{{name}} wants to play a {{game}} game",accept:"Accept",deny:"Deny",offline:"Unable to connect. You are offline",guestOffline:"Unable to connect. {{name}} is offline",unable:"Unable to init game.",rejected:"{{name}} has rejected your invitation",rejectedBusy:"{{name}} is busy",cancel:"{{name}} cancel the invitation",finish:"{{name}} close the game",waiting:"Waiting for response...",unknown:"Unknown response",clientIssue:"{{name}}'s client not support games"}},hello:"Hello world"},es:{actor:{name:"Nombre"},avatar:{crop_image:"Recorta la imagen",crop_submit:"Recortar",destroy:"Borrar avatar",destroy_sure:"¿Borrar el avatar seleccionado?",error:{no_file:"Tienes que seleccionar un fichero",no_image_file:"El fichero no es válido, tiene que ser una imagen"},list:"Tienes estos avatars","new":"Crear un nuevo avatar",new_short:"Nuevo avatar",no_avatars:"No tienes ningún avatar, ¡crea uno!",one:"Avatar",other:"Avatares",original:"Imagen original",preview:"Vista previa",profile_change:"Cambia tu avatar",set_default:"Seleccionar",set_default_sure:"¿Seleccionar este avatar?",text:{"new":"... o sube uno nuevo",use:"Usa uno de tus avatares..."},upload:"Subir"},language_name:"Español",action:{send:"Enviar",accept:"Aceptar"},account:{cancel:"Cancelar lar cuenta",edit:"Editar cuenta",email:{change:"Cambiar dirección de correo"},lang:{change:"Cambiar idioma"},one:"Cuenta",password:{change:"Cambiar contraseña","new":"Nueva contraseña",retype:"Repetir nueva contraseña"},privacy:"Privacidad"},activerecord:{attributes:{contact:{relation_ids:"El tipo de contacto"},"relation/custom":{name:"Nombre"},user:{email:"Correo",name:"Nombre",password:"Contraseña",password_confirmation:"Confirmar contraseña",remember_me:"Recuérdame"},document:{title:"Título"},event:{title:"Título",room:"Espacio",frequency:"Repetición"},room:{name:"Nombre"}},errors:{models:{room:{attributes:{name:{taken:"está repetido"}}}}},models:{event:"evento",room:"espacio"}},activity:{audience:{hidden:{summary:"Restringido",full:"Compartido con contactos de %{audience}"},"public":{summary:"Público",full:"Accesible por toda Internet"},show:"Mostrar",visible:{summary:"Restringido",full:"Compartido con %{audience}"}},confirm_delete:"¿Borrar actividad?","delete":"Borrar",last:"Últimas actividades",like:"Me gusta",like_sentence:{one:"A %{likers} le gusta esto",other:"A %{likers} les gusta esto"},one:"Actividad",other:"Actividades",privacy:{myself:{contacts:{group:"Todos los integrantes",user:"Tus contactos"}},outside:{contacts:{group:"Integrantes de %{receiver}",user:"Contactos de %{receiver}"}}},sending:"Enviando",stream:{atom_title:"Actividades de %{subject}",title:{follow:"%{author} añadió a %{activity_object} como contacto",unfollow:"%{author} eliminó a %{activity_object} como contacto",like:"A %{author} le gusta %{activity_object}","make-friend":"%{author} también añadió a %{activity_object} como contacto",post:"%{author} publicó %{activity_object}",updated:"%{author} actualizó %{activity_object}"}},title:"Actividades",to_comment:"Comentar",unlike:"Ya no me gusta",verb:{follow:{User:{title:"%{subject} añadió %{contact} como contacto.",message:"%{name} te añadió como contacto."},Group:{title:"%{subject} se unió al grupo %{contact}.",message:"%{name} te añadió como contacto."}},like:{User:{title:"%{subject} es fan de %{contact}.",message:"%{name} es tu fan."},Group:{title:"%{subject} es fan de %{contact}.",message:"%{name} es tu fan."}},"make-friend":{User:{title:"%{subject} y %{contact} ahora están conectados.",message:"%{name} también te añadió como su contacto."},Group:{title:"%{subject} añadió a %{contact}.",message:"%{name} te añadió."}},post:{title:{other_wall:"%{sender} → %{receiver}"}}}},activity_action:{follow:"Seguir",sentence:{follow:{one:"%{count} sigue esto",other:"%{count} siguen esto"},more:{one:"%{count} persona más",other:"%{count} personas más"}},unfollow:"Dejar de seguir"},browse:"Descubrir",button:{cancel:"Cancelar",create:"Crear",save:"Guardar",update:"Actualizar"},cheesecake:{changes:{details:"Cambios detallados",none:"Sin cambios",save:"Guardar cambios",saving:"Guardando..."},form:{editing:"Editando",fields:{color:"Color",name:"Nombre",permissions:"Permisos",subsector:"Subsector"}},select:{hint:"Selecciona haciendo click en los retratos"}},comment:{input:"Comentar...",confirm_delete:"¿Borrar commentario?",name:"comentario",one:"un comentario",view_all:"Ver todos los comentarios",title:{one:"Comentario",other:"Comentarios"}},contact:{addressbook:"Libreta de direcciones",all_n:"Todos los contactos (%{count})",confirm_delete:"¿Borrar contacto?",current:"Actuales","delete":"Borrar",edit:{title:"Editar contacto con %{name}",submit:"Editar contacto"},error_count:{one:"1 error impidió que se guardara este contacto:",other:"%{count} errores impidieron que se guardara este contacto"},follow:"Seguir",following:"Siguiendo",graph:{one:"Gráfico",empty:"Lo sentimos pero aún no tienes contactos, pero ¡puedes probar a buscar en la caja de búsqueda!"},in_common:{one:"1 contacto en común",other:"%{count} contactos en común"},"new":{link:"+ Añadir contacto",title:"Añadir a %{name} como contacto",menu:"Añadir contacto",submit:"Añadir"},one:"Contacto",other:"Contactos",pending:{other:"Pendientes",all:"Todos",all_n:"Ver todas los contactos pendientes (%{count})"},relation:{one:"Tipo de contacto","new":"Nuevo tipo"},reply:{link:"+ Responder contacto",title:"Responder contacto con %{name}",submit:"Responder contacto"},suggestion:{one:"Sugerencia",other:"Sugerencias",all:"Todas"},type:{"new":"+ Nuevo tipo"},unfollow:"Dejar de seguir"},copyright:"2011 Copyright - Derechos reservados","delete":{confirm:"¿Borrar %{element}}?"},devise:{links:{sign_in:"Entrar",sign_up:"Registrarse",forgot_password:"¿Olvidaste tu contraseña?",confirmation_instructions:"¿No recibiste instrucciones de confirmación?",unlock_instructions:"¿No recibiste instrucciones de desbloqueo?",sign_in_with:"Entrar con %{provider}"},passwords:{confirm:"Confirmar contraseña",forgot:"¿Olvidaste tu contraseña?",instructions:"Introduce el correo electrónico y te mandaremos instrucciones para cambiarlo",update:"Cambiar contraseña"}},follower:{follower:{title:"Seguidores"},following:{title:"Siguiendo"}},n:{one:"1 seguidor/a",other:"%{count} seguidores"},forgot_password:"¿Olvidaste tu contraseña?",frontpage:{collaborate:{"default":"Colabora",sentence1:"Organice sus proyectos y actividades",sentence2:"Participe en grupos y conferencias",sentence3:"Cree sus propios grupos y conferencias"},elements:{comments:"Comentarios",conferences:"Conferencias",networks:"Redes sociales",organizers:"Organizadores",participants:"Participantes",groups:"Grupos",tags:"Etiquetas"},main_title:"Social Stream es un núcleo para construir webs con características de red social",meet:{"default":"Encuentra",sentence1:"Descubre grupos y gente interesante",sentence2:"Encuentra la última actividad de tus contactos"},register:"¡Regístrate ahora!",share:{"default":"Comparte",sentence1:"Tus proyectos y actividades",sentence2:"Comentarios, fotos, audio y vídeo"},stats:"%{users} personas and %{groups} grupos registrados"},group:{one:"Grupo",other:"Grupos",all:"Todos los grupos",all_n:"Todos los grupos (%{count})",by:"Por grupos",destroy:{one:"Destruir grupo",explanation:"¡Todas las actividades, información y contactos de este grupo serán destruídos!",go_ahead:"Sí, estoy seguro/a. ¡Destruirlo todo!",last_confirm:"Es tu última oportunidad. ¿Realmente estás seguro/a?"},form:{title:"Grupo"},input:"¿Cuál es el nombre del grupo?",last:"Últimos grupos",my:"Mis grupos","new":{action:"Nuevo grupo",name:"Nombre",description:"Descripción",participants:"Participantes"},cloud:"Nube de etiquetas de grupos",most:{followed:"Más seguidos",liked:"Más populares"},tags:"Etiquetas",title:{one:"Grupo",other:"Grupos"}},help:"Ayuda",helpers:{submit:{relation_custom:{create:"Guardar",update:"Guardar"},create:"Crear %{model}",submit:"Guardar %{model}",update:"Actualizar %{model}"},select:{prompt:"Por favor seleccione"}},home:"Inicio",inbox:{one:"Entrada"},invitation:{"e-mails":"Correo electrónico",error:"No se pudo atender a la petición. Asegurate de haber escrito una dirección de correo correcta",invited:"%{sender} te ha invitado a %{site}",join:"¡Invita a otras personas a unirse a %{site}!",join_me:"¡Únete a mi en %{site}!",one:"Invitación",other:"Invitaciones",toolbar:"Invitar",success:"Se han enviado tus invitaciones",text:"Escribe tu mensaje"},like:{n:{one:"1 fan",other:"%{count} fans"}},location:{message:"Estás aquí > %{location}",base:"Estás aquí",separator:" > "},mailboxer:{"delete":"Borrar",delete_confirm:"¿Quieres enviar '%{object}' a la papelera?",form:{body:"Mensaje",recipients:"Para",subject:"Asunto"},mark_as_read:"Marcar como leido",message_mailer:{has_sent_new:{event:"ha mandado un nuevo mensaje a %{receiver}",group:"ha mandado un nuevo mensaje a %{receiver}",user:"te ha mandado un nuevo mensaje"},has_sent_reply:{event:"ha mandado una respuesta a %{receiver}",group:"ha mandado una respuesta a %{receiver}",user:"te ha mandado una respuesta"},subject_new:"%{subject}",subject_reply:"%{subject}"},notification_mailer:{subject:"%{subject}"},reply:"Contestar",send:"Enviar mensaje",sent:"Tu mensaje fue enviado"},menu:{options:"Opciones",information:"Información",wall:"Muro"},message:{answer:"Responder",inbox:"Entrada",look:"Échale un vistazo a esta conversación","new":"Nuevo mensaje",one:"Mensaje",other:"Mensajes",participants:"Participantes",send:"Enviar un mensaje",sentbox:"Salida",trash:"Papelera"},notification:{all_text:"Lee el texto entero en %{url}",confirm:"¿Confirmar contacto con %{sender}?","default":"Tienes una nueva notificación",destroy_sure:"¿Borrar notificación?",fan:"%{sender} es ahora fan %{whose}.",follow:{group:"%{sender} añadió a %{who} como contacto.",user:"%{sender} te añadió como contacto."},hello:"Hola %{receiver},",like:{group:"A %{sender} le gusta el %{thing} %{whose}.",user:"A %{sender} le gusta tu %{thing}."},look:"Echa un vistazo al muro de %{sender}",makefriend:{group:"%{sender} también añadió a %{who} como contacto.",user:"%{sender} también te añadió como contacto."},one:"Notificación",other:"Notificaciones",post:{group:"%{title} -- por %{sender} en el muro %{whose}",user:"%{title} -- por %{sender} en tu muro"},read:"Marcar como leída",read_all:"Marcar todas como leídas",unread:"Marcar como no leídas",update:{group:"%{sender} actualizó %{thing} en el muro %{whose}.",user:"%{sender} actualizó %{thing} en tu muro."},visit:"Visita %{url} y comprueba todas tus notificaciones.",watch:"Échale un vistazo en %{url}",watch_it:"¡Échale un vistazo!",who:{group:"%{name}",user:"tú"},whose:{group:"de %{receiver}",user:"tuyo"}},post:{confirm_delete:"¿Borrar texto?",form:{title:"Texto"},input:"¿Qué quieres compartir?",name:"publicación",one:"una publicación",title:{one:"Texto",other:"Textos"}},preposition:{and:"y"},profile:{one:"Perfil",age:"Edad",is_on:"esta en",must_be_signed_id:"Debes identificarte",group:{about:"Sobre nosotros/as",birthday:"Aniversario",experience:"Temas que se trabajan",info:"Información sobre el grupo",tags:"Etiquetas del grupo"},user:{about:"Sobre mí",birthday:"Cumpleaños",experience:"Intereses",info:"Información personal",tags:"Etiquetas"},actualcity:"Ciudad actual",address:"Dirección",contact:"Información de contacto",country:"País",email:"Correo electrónico",empty:"Estos campos están vacíos. ¡Actualízalos!",fax:"Fax",mobile:"Móvil",organization:"Organización",phone:"Teléfono",profile:"Editar perfil",tags:{"default":"social, stream,",other:"Etiquetas"},website:"Sitio web",update:{error:"Por favor, comprueba el formato de tu perfil:",success:"Tu perfil se ha actualizado"}},"public":{other:"Todo el mundo"},permission:{description:{"default":{brief:{create:{activity:"Publicar en vuestro muro"},follow:{nil:"Seguir su actividad"},read:{activity:"Leer vuestro muro"},represent:{nil:"Administrar"},notify:{nil:"Notificar"}},detailed:{create:{activity:{positive:"PODRÁN publicar actividades en vuestro muro",negative:"NO PODRÁN publicar actividades en vuestro muro"}},follow:{nil:{positive:"Las actividades de los contactos en %{relation} APARECERÁN en vuestra página de inicio",negative:"Las actividades de los contactos en %{relation} NO APARECERÁN en vuestra página de inicio"}},read:{activity:{positive:"PODRÁN leer las publicaciones que aparezcan en vuestro muro, salvo las que compartas solo ciertas personas",negative:"NO PODRÁN leer las publicaciones que aparezcan en vuestro muro, salvo las que marques como públicas"}},represent:{nil:{positive:"PODRÁN cambiar sesión para actuar en nombre de %{name}",negative:"NO PODRÁN cambiar sesión para actuar en nombre de %{name}"}},notify:{nil:{positive:"Las actividades SE NOTIFICARÁN a los contactos en %{relation}",negative:"Las actividades NO SE NOTIFICARÁN a los contactos en %{relation}"}}}},user:{brief:{create:{activity:"Publicar en tu muro"},read:{activity:"Leer tu muro"}},detailed:{create:{activity:{positive:"PODRÁN publicar actividades en tu muro",negative:"NO PODRÁN publicar actividades en tu muro"}},follow:{nil:{positive:"Las actividades de los contactos en %{relation} APARECERÁN en tu página de inicio",negative:"Las actividades de los contactos en %{relation} NO APARECERÁN en tu página de inicio"}},read:{activity:{positive:"PODRÁN leer las publicaciones que aparezcan en tu muro, salvo las que compartas solo con ciertas personas",negative:"NO PODRÁN leer las publicaciones que aparezcan en tu muro, salvo las que marques como públicas"}}}}},of_relation:{choose:"2. Permisos para <strong>%{name}</strong>"}},privacy:{intro:"Los contactos en <strong>%{relation}</strong>:",rule:{add:"Añadir",title:"Reglas de privacidad",saved:"Reglas de privacidad guardadas"}},relation_custom:{choose:"1. Elegir tipo de relación",confirm_delete:"¿Borrar este tipo de relación?","delete":"Borrar",edit:"Cambiar nombre","new":"+ Nuevo tipo",title:"Privacidad y contexto"},relation_public:{name:"Público"},representation:{notice:"Tu sesión ha cambiado. Ahora actúas en nombre de %{subject}. Para regresar a tu sessión, utiliza el menú de arriba a la derecha","switch":"Cambiar sessión"},required:"(*) Estos campos son obligatorios",search:{all_subject_results:"Ver todos %{subject} (%{count})",at_least:"Escribe al menos 2 letras",global:{name:"Búsqueda global",first_result:{more:"Mostrando los primeros %{count} resultados.",one:"Mostrando el primer resultado"},query:"Más resultados para %{query} >"},name:"Buscar",no_subject_found:"No se encontró a %{subject}.",nothing:"No se ha econtrado nada.",searching:"Buscando: %{query}",show_all:"Todos",write:"Escribe tu búsqueda...",wrong:"Parece que hay un problema con el motor de búsqueda"},settings:{api_key:{briefing:"Gestiona tu clave API",confirm:"¿Estás seguro?",empty:"Token vacío",explanation:"Ésta es tu clave API",name:"Clave API",regenerate:"Regenerar clave API"},cancel_account:{briefing:"Te permite cancelar tu cuenta"},email_change:{briefing:"Cambia tu email"},lang_change:{briefing:"Cambia tu idioma",name:"Cambia tu idioma"},error:"Hubo errores al guardar los cambios","for":"Ajustes para",main:"Ajustes",manage:{name:"Administrar contactos",briefing:"Ajustes de contactos",explanation:"Cambiar los permisos de contactos"},notifications:{briefing:"Ajustes sobre notificaciones y alertas por correo",name:"Notificaciones",by_email:{name:"Mandarme un correo cuando me llega una notificación",always:"Siempre",never:"Nunca"}},one:"Ajustes",password_change:{briefing:"Cambia tu contraseña"},success:"Ajustes guardados con éxito"},share:"Compartir",sign_in:"Ingresar",sign_out:"Salir",sign_up:"Registrarse",site:{name:"Social Stream"},subject:{this_is_you:"¡Eres tú!"},sure:"¿Confirmar?",time:{ago:"hace %{time}",am:"am",formats:{"default":"%A, %d de %B de %Y %H:%M:%S %z","long":"%d de %B de %Y %H:%M","short":"%d de %b %H:%M"},pm:"pm"},unknown:"Desconocido",user:{all:"Todos los usuarios",all_n:"Todos los usuarios (%{count})",by:"Por usuarios",one:"Usuario",other:"Usuarios",title:{one:"Usuario",other:"Usuarios"}},welcome:"¡Bienvenid@ a %{site}!",lang:{browser:"Autodetectar el idioma del navegador",none:"Contenido independiente del idioma"},date:{abbr_day_names:["dom","lun","mar","mié","jue","vie","sáb"],abbr_month_names:[null,"ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],day_names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],formats:{"default":"%d/%m/%Y","long":"%d de %B de %Y","short":"%d de %b"},month_names:[null,"enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],order:["day","month","year"]},datetime:{distance_in_words:{about_x_hours:{one:"alrededor de 1 hora",other:"alrededor de %{count} horas"},about_x_months:{one:"alrededor de 1 mes",other:"alrededor de %{count} meses"},about_x_years:{one:"alrededor de 1 año",other:"alrededor de %{count} años"},almost_x_years:{one:"casi 1 año",other:"casi %{count} años"},half_a_minute:"medio minuto",less_than_x_minutes:{one:"menos de 1 minuto",other:"menos de %{count} minutos"},less_than_x_seconds:{one:"menos de 1 segundo",other:"menos de %{count} segundos"},over_x_years:{one:"más de 1 año",other:"más de %{count} años"},x_days:{one:"1 día",other:"%{count} días"},x_minutes:{one:"1 minuto",other:"%{count} minutos"},x_months:{one:"1 mes",other:"%{count} meses"},x_seconds:{one:"1 segundo",other:"%{count} segundos"}},prompts:{day:"Día",hour:"Hora",minute:"Minutos",month:"Mes",second:"Segundos",year:"Año"}},errors:{format:"%{attribute} %{message}",messages:{accepted:"debe ser aceptado",blank:"no puede estar en blanco",confirmation:"no coincide con la confirmación",empty:"no puede estar vacío",equal_to:"debe ser igual a %{count}",even:"debe ser par",exclusion:"está reservado",greater_than:"debe ser mayor que %{count}",greater_than_or_equal_to:"debe ser mayor que o igual a %{count}",inclusion:"no está incluido en la lista",invalid:"no es válido",less_than:"debe ser menor que %{count}",less_than_or_equal_to:"debe ser menor que o igual a %{count}",not_a_number:"no es un número",not_an_integer:"debe ser un entero",odd:"debe ser impar",record_invalid:"La validación falló: %{errors}",taken:"ya está en uso",too_long:"es demasiado largo (%{count} caracteres máximo)",too_short:"es demasiado corto (%{count} caracteres mínimo)",wrong_length:"no tiene la longitud correcta (%{count} caracteres exactos)"},template:{body:"Se encontraron problemas con los siguientes campos:",header:{one:"No se pudo guardar este/a %{model} porque se encontró 1 error",other:"No se pudo guardar este/a %{model} porque se encontraron %{count} errores"}}},number:{currency:{format:{delimiter:".",format:"%n %u",precision:2,separator:",",significant:!1,strip_insignificant_zeros:!1,unit:"€"}},format:{delimiter:".",precision:3,separator:",",significant:!1,strip_insignificant_zeros:!1},human:{decimal_units:{format:"%n %u",units:{billion:"mil millones",million:"millón",quadrillion:"mil billones",thousand:"mil",trillion:"billón",unit:""}},format:{delimiter:"",precision:1,significant:!0,strip_insignificant_zeros:!0},storage_units:{format:"%n %u",units:{"byte":{one:"Byte",other:"Bytes"},gb:"GB",kb:"KB",mb:"MB",tb:"TB"}}},percentage:{format:{delimiter:""}},precision:{format:{delimiter:""}}},support:{array:{last_word_connector:", y ",two_words_connector:" y ",words_connector:", "}},audio:{confirm_delete:"¿Borrar audios?",mine:"Mis audios",name:"archivo de audio",not_mine:"Audios",one:"un archivo de audio",processing:"Procesando fichero de audio. Espere, por favor...",title:{one:"Audio",other:"Audios"}},details:{msg:"Ver detalles..."},document:{actions:{"delete":"Borrar",details:"Detalles",download:"Descargar",edit:"Editar"},all:"Todos los ficheros",confirm_delete:"¿Borrar fichero?",form:{title:"Fichero"},info:{date:{created_at:"Creado",updated_at:"Última modificación"},description:{title:"Descripción"},file:{title:"Subir"},title:{title:"Título"}},mine:"Mis ficheros",name:"fichero",not_mine:"Ficheros",one:"un fichero",simple_all:"Todos",title:{one:"Fichero",other:"Ficheros"}},picture:{confirm_delete:"¿Borrar imagen?",mine:"Mis imágenes",name:"imagen",not_mine:"Imágenes",one:"una imagen",title:{one:"Imagen",other:"Imágenes"}},repository:{title:"Ficheros",order:{by:"Ordenar por",last_modified:"Última modificación",most_popular:"Popularidad"}},resource:{all:"Todos los recursos",confirm_delete:"¿Borrar recursos?",title:"Recursos",mine:"Mis recursos",not_mine:"Recursos"},video:{confirm_delete:"¿Borrar vídeo?",mine:"Mis vídeos",name:"vídeo",not_mine:"Vídeos",one:"un vídeo",processing:"Procesando vídeo. Espere, por favor...",title:{one:"Vídeo",other:"Vídeos"}},scheduler:{frequency:{one_off:{form:{message:"La actividad no se volverá a repetir",option:"ninguna"}},daily:{description:{one:"Todos los días",other:"Cada %{count} días"},form:{option:"diaria"}},weekly:{description:{one:"Todos los %{week_days}",other:"Los %{week_days} de cada %{count} semanas"},form:{every_week:"Cada %{form_field} semana(s) en los siguientes días:",option:"semanal"
}},monthly:{description:{one:"El %{week_day_order} %{week_day} del mes",other:"El %{week_day_order} %{week_day} de cada %{count} meses",week_day_order:{1:"primer",2:"segundo",3:"tercer","-1":"último"}},form:{option:"mensual",week_day:"El %{order_field} %{week_field} de cada %{interval_field} mes(es)",week_day_order_option:{1:"primer",2:"segundo",3:"tercer","-1":"último"}}}}},boxy:{close_text:"[cerrar]"},event:{activity_action:{follow:"Me lo apunto",sentence:{follow:{one:"%{followers} se ha apuntado esto",other:"%{followers} se han apuntado esto"}},unfollow:"Desapuntar"},calendar:"Calendario",confirm_delete:"¿Borrar evento?",name:"evento","new":{title:"Nuevo evento"},one:"un evento",poster:{update:"Subir cartel"},title:{one:"Evento",other:"Eventos"},wall_post:"Publicó un evento: %{title}"},room:{confirm_delete:"¿Borrar espacio?","delete":"Borrar",settings:{title:"Espacios",description:"Salas disponibles para la realización de eventos"},watermark:{name:"Nuevo espacio"}},linkser:{title:"Linkser"},link:{confirm_delete:"¿Borrar enlace?",errors:{loading:"Error cargando",only_webs:"Solo puedes compartir págnas web"},form:{title:"Enlace"},input:"Escribe una dirección",name:"enlace",one:"una enlace",title:"Enlaces"},chat:{connecting:"Chat Conectando",reconnecting:"Chat Reconectando",disconnected:"Chat Desconectado",unableconnect:"Chat Fuera de servicio",title:"Chat",password:"Contraseña",zerousers:"No hay contactos conectados",search:"Buscar contactos",zerocontacts:"No se encontró ningún contacto",status:{choose:"Establecer estado",available:"Disponible",away:"Ausente",dnd:"No molestar",offline:"Desconectado"},settings:{title:"Activación y configuración del chat de Social Stream",checkbox:"Activar o desactivar chat",update:"Guardar configuración"},notify:{offline:"Estás desconectado",guestOffline:"{{name}} está desconectado"},videochat:{disconnected:"Videochat desconectado",disconnecting:"Videochat desconectando...",negotiating:"Negociando...",connectingWait:"Conectando...",connecting:"Conectando con el servidor...",waiting:"Esperando respuesta...",establishing:"Estableciendo conexión...",connnected:"Videochat conectado",unable:"Imposible iniciar videochat",serverIssue:"Error del servidor: Respuesta inválida",call:"{{name}} quiere iniciar una videollamada",rejected:"{{name}} ha rechazado tu llamada",rejectedBusy:"{{name}} está ocupado",accept:"Aceptar",deny:"Rechazar",clientIssue:"El cliente de {{name}} no soporta videochat",guestOffline:"Imposible conectar. {{name}} está desconectado",offline:"Imposible conectar. Estás desconectado",cancel:"{{name}} canceló la videollamada",requirements:"No tienes los requisitos minimos para iniciar la aplicación de videoconferencia. Por favor, actualiza a la última versión de Flash."},muc:{group:"Grupo {{group}}",join:"{{nick}} ha entrado en la sala.",leave:"{{nick}} se ha ido de la sala.",occupants:"Miembros",joining:"Accediendo...",joinError:"No se pudo acceder a la sala.  \n {{errorMsg}}",offline:"Estás desconectado"},game:{call:"{{name}} quiere iniciar una partida de {{game}}",accept:"Aceptar",deny:"Rechazar",offline:"Imposible conectar. Estás desconectado",guestOffline:"Imposible conectar. {{name}} está desconectado",unable:"Imposible iniciar partida.",rejected:"{{name}} ha rechazado tu invitación",rejectedBusy:"{{name}} está ocupado",cancel:"{{name}} canceló la partida",finish:"{{name}} ha cerrado el juego",waiting:"Esperando respuesta...",unknown:"Respuesta desconocida",clientIssue:"El cliente de {{name}} no tiene juegos"}}},pt:{language_name:"Português",actor:{name:"Nome"},action:{send:"Enviar",accept:"Aceitar"},account:{cancel:"Cancelar a conta",edit:"Editar a conta",email:{change:"Mudar endereço de email"},lang:{change:"Mudar idioma"},one:"Conta",password:{change:"Mudar senha","new":"Nova senha",retype:"Repetir nova senha"},privacy:"Privacidade"},activerecord:{attributes:{contact:{relation_ids:"Tipo de contato"},"relation/custom":{name:"Nome"},user:{email:"Email",name:"Nome",password:"Senha",password_confirmation:"Confirmar senha",remember_me:"Lembrar-me"}}},activity:{audience:{hidden:{summary:"Restrito",full:"Compartilhado com contatos de %{audience}"},"public":{summary:"Público",full:"Acessível por toda Internet"},visible:{summary:"Restrito",full:"Compartilhado com %{audience}"}},confirm_delete:"Apagar atividade?","delete":"Apagar",last:"Últimas Atividades",like:"Curtir",one:"Atividade",other:"Atividades",privacy:{myself:{contacts:{group:"Todos os integrantes",user:"Seus contatos"}},outside:{contacts:{group:"Membros de %{receiver}",user:"Contatos de %{receiver}"}}},sending:"Enviando",title:"Atividades",to_comment:"Comentário",unlike:"Curtir (desfazer)",verb:{follow:{User:{title:"%{subject} adicionou %{contact} como contato.",message:"%{name} adicionou você como contato."},Group:{title:"%{subject} adicionou %{contact} como contato.",message:"%{name} adicionou você como contato."}},like:{User:{title:"%{subject} é fã de %{contact}.",message:"%{name} agora é seu fã."},Group:{title:"%{subject} é fã de %{contact}.",message:"%{name} agora é seu fã."}},"make-friend":{User:{title:"%{subject} e %{contact} estão agora conectados.",message:"%{name} também adicionou você como contato."},Group:{title:"%{subject} adicionou %{contact} como contato.",message:"%{name} adicionou você como contato."}},post:{title:{other_wall:"%{sender} → %{receiver}"}}}},browse:"Browse",button:{cancel:"Cancelar",create:"Criar",save:"Salvar",update:"Atualizar"},cheesecake:{changes:{details:"Alterar detalhes",none:"Sem alterações",save:"Salvar alterações",saving:"Salvando..."},form:{editing:"Editando",fields:{color:"Cor",name:"Nome",permissions:"Permissões",subsector:"Segmento"}},select:{hint:"Selecione clicando nos retratos"}},comment:{input:"Escreva um comentário...",confirm_delete:"Excluir comentário?",name:"comentário",one:"um comentário",view_all:"Veja todos comentários"},contact:{addressbook:"Catálogo de endereços",all_n:"Todos os contatos (%{count})",confirm_delete:"Excluir contato?",current:"Atual","delete":"Excluir",edit:{title:"Editar contato com %{name}",submit:"Editar contato"},error_count:{one:"1 erro impediu que este contato fosse salvo:",other:"%{count} erros impediram que este contato fosse salvo:"},graph:{one:"Gráfico",empty:"Lamentamos, mas você não tem nenhum contato ainda. Você pode tentar a caixa de pesquisa para procurar alguém!"},in_common:{one:"1 contato em comum",other:"%{count} contatos em comum"},"new":{link:"+ Adicionar contato",title:"Adicionar %{name} aos seus contatos",menu:"Adicionar contato",submit:"Adicionar"},one:"Contato",other:"Contatos",pending:{other:"Pendente",all:"Todos",all_n:"Veja todos os contatos pendentes (%{count})"},relation:{one:"Tipo de contato","new":"Novo tipo"},reply:{link:"+ Responder contato",title:"Responder pedido de contato para %{name}",submit:"Responder contato"},suggestion:{one:"Sugestão",other:"Sugestões",all:"Todas"},type:{"new":"+ Novo tipo"}},copyright:"2010 Copyright - todos direitos reservados","delete":{confirm:"Apagar %{element}}?"},devise:{links:{sign_in:"Entrar",sign_up:"Registrar",forgot_password:"Esqueceu sua senha?",confirmation_instructions:"Não recebeu instruções de confirmação?",unlock_instructions:"Não recebeu instruções para desbloquear?",sign_in_with:"Entrar com %{provider}"},passwords:{confirm:"Confirmar senha",forgot:"Esqueceu sua senha?",instructions:"Digite o endereço de e-mail vinculado a sua conta e nós lhe enviaremos instruções para alterá-la:",update:"Mude sua senha"}},follower:{n:{one:"1 seguidor",other:"%{count} seguidores"}},forgot_password:"Esqueceu sua senha?",frontpage:{collaborate:{"default":"Colaborar",sentence1:"Organize seus projetos e atividades",sentence2:"Participar de congressos e eventos",sentence3:"Crie seu próprio grupo e conferências"},elements:{comments:"Comentários",conferences:"Conferências",networks:"Redes Sociais",organizers:"Organizadores",participants:"Participantes",groups:"Grupos",tags:"Tags"},main_title:"Social Stream é a base para a construção de sites de rede social.",meet:{"default":"Encontrar",sentence1:"Descubra grupos e pessoas interessantes",sentence2:"Encontre a última atividade dos seus contatos"},register:"Registre agora!",share:{"default":"Compartilhar",sentence1:"Seus projetos e atividades",sentence2:"Comentários, fotos, audio e vídeos"},stats:"%{users} usuários e %{groups} grupos registrados"},group:{one:"Grupo",other:"Grupos",all:"Todos os grupos",all_n:"Todos os grupos (%{count})",by:"Por grupos",destroy:{one:"Excluir grupo",explanation:"Todas as atividades, informações e contatos deste grupo serão excluídos!",go_ahead:"Sim, tenho certeza. Excluir tudo!",last_confirm:"Esta é sua última chance. Você realmente tem certeza?"},form:{title:"Grupo"},input:"Qual o nome do grupo?",last:"Últimos grupos",my:"Meus grupos","new":{action:"Novo grupo",name:"Nome",description:"Descrição",participants:"Participantes"},cloud:"Nuvem de tags de grupos",most:{followed:"Mais seguidos",liked:"Mais populares"},tags:"Tags"},help:"Ajuda",helpers:{submit:{relation_custom:{create:"Salvar",update:"Atualizar"},create:"Criar %{model}",submit:"Salvar %{model}",update:"Atualizar %{model}"},select:{prompt:"Por favor selecione"}},home:"Página inicial",inbox:{one:"Entrada"},invitation:{"e-mails":"Correio eletrônico",error:"Sua solicitação não foi processada. Certifique-se de que você escreveu os endereços de correio eletrônico corretamente.",invited:"%{sender} convidou você para %{site}!",join:"Convide outras pessoas para se juntar ao %{site}!",join_me:"Junte-se a mim no %{site}!",one:"Convite",other:"Convites",toolbar:"Convidar",success:"Seus convites foram enviados com sucesso",text:"Escreva sua mensagem"},like:{n:{one:"1 fã",other:"%{count} fãs"}},location:{message:"Você está aqui > %{location}",base:"Você está aqui",separator:" > "},mailboxer:{"delete":"Excluir",delete_confirm:"Você quer mover '%{object}' para o lixo?",form:{body:"Mensagem",recipients:"Para",subject:"Assunto"},mark_as_read:"Marcar como lido",message_mailer:{has_sent_new:{event:"enviou uma nova mensagem para %{receiver}",group:"enviou uma nova mensagem para %{receiver}",user:"enviou-lhe uma nova mensagem"},has_sent_reply:{event:"enviou uma resposta para %{receiver}",group:"enviou uma resposta para %{receiver}",user:"enviou-lhe uma resposta"},subject_new:"%{subject}",subject_reply:"%{subject}"},notification_mailer:{subject:"%{subject}"},reply:"Responder",send:"Enviar mensagem",sent:"Sua mensagem foi enviada"},menu:{options:"Opções",information:"Informação",wall:"Mural"},message:{answer:"Escreva sua resposta",inbox:"Entrada",look:"Dê uma olhada nesta conversa","new":"Nova mensagem",one:"Mensagem",other:"Mensagens",participants:"Participantes",send:"Enviar uma mensagem",sentbox:"Enviadas",trash:"Lixeira"},notification:{all_text:"Leia o texto todo em %{url}",confirm:"Confirmar %{sender} como contato?","default":"Você tem uma nova notificação",destroy_sure:"Você deseja excluir esta notificação?",fan:"%{sender} é agora %{whose} fã.",follow:{group:"%{sender} adicionado %{who} como contato.",user:"%{sender} adicionado %{who} como contato."},hello:"Olá %{receiver},",like:{group:"%{sender} curte %{whose} %{thing}.",user:"%{sender} curte %{whose} %{thing}."},look:"Dê uma olhada no mural de %{sender}",makefriend:{group:"%{sender} também adicionou %{who} como contato.",user:"%{sender} também adicionou %{who} como contato."},one:"Notificação",other:"Notificações",post:{group:"%{title} -- por %{sender} no mural %{whose}",user:"%{title} -- por %{sender} no seu mural"},read:"Marcar como lida",read_all:"Marcar todas como lidas",unread:"Marcar como não lida",update:{group:"%{sender} atualizou %{thing} no mural %{whose}.",user:"%{sender} atualizou %{thing} no seu mural."},visit:"Visite %{url} e confira todas as suas notificações.",watch:"Dê uma olhada em %{url}",watch_it:"Confira!",who:{group:"%{name}",user:"você"},whose:{group:"%{receiver}'s",user:"seu"}},post:{confirm_delete:"Excluir postagem?",form:{title:"Postagem"},input:"O que você está fazendo?",name:"postagem",one:"uma postagem",title:"Postagens"},preposition:{and:"e","true":"em"},profile:{one:"Perfil",age:"Idade",is_on:"está em",must_be_signed_id:"Você precisa efetuar login",group:{about:"Sobre nós",birthday:"Anniversary",experience:"Área de especialização",info:"Informação sobre o grupo",tags:"Tags do grupo"},user:{about:"Sobre mim",birthday:"Aniversário",experience:"Interesses",info:"Informação pessoal",tags:"Tags do usuário"},actualcity:"Cidade atual",address:"Enderesso",contact:"Informção de contato",country:"País",email:"E-mail",empty:"Estes campos estão vazios. Por favor, atualize-os.",fax:"Fax",mobile:"Celular",organization:"Organização",phone:"Telefone",profile:"Editar perfil",tags:{"default":"social, stream,",other:"Tags"},website:"Website",update:{error:"Por favor, verifique o formato do seu perfil",success:"Seu perfil foi atualizado"}},"public":{other:"Todos"},permission:{description:{"default":{brief:{create:{activity:"Publicar em seu mural"},follow:{nil:"Seguir atividade deles"},read:{activity:"Ler seu mural"},represent:{nil:"Administrar"},notify:{nil:"Notificar"}},detailed:{create:{activity:{positive:"SERÃO CAPAZES DE postar novas atividades em seu mural",negative:"NÃO SERÃO CAPAZES DE postar novas atividades em seu mural"}},follow:{nil:{positive:"As atividades dos contatos em %{relation} IRÃO APARECER em seu mural",negative:"As atividades dos contatos em %{relation} NÃO IRÃO APARECER em seu mural"}},read:{activity:{positive:"SERÃO CAPAZES de ler as mensagens em seu mural, exceto aquelas compartilhadas com contatos específicos",negative:"NÃO SERÃO CAPAZES de ler as mensagens em seu mural, exceto aquelas compartilhadas com contatos específicos"}},represent:{nil:{positive:"SERÃO CAPAZES de mudar de sessão e agir como %{subject}",negative:"NÃO SERÃO CAPAZES de mudar de sessão e agir como %{subject}"}},notify:{nil:{positive:"As atividades SERÃO notificados para contatos em %{name}",negative:"As atividades NÃO SERÃO notificados para contatos em %{name}"}}}}},of_relation:{choose:"2. Permissões para <strong>%{name}</strong>"}},privacy:{intro:"Os contatos em <strong>%{relation}</strong>:",rule:{add:"Adicionar",title:"Regras de privacidade",saved:"Regras de privacidade salvas"}},relation_custom:{choose:"1. Escolha o tipo de relação",confirm_delete:"Excluir esse relação?","delete":"Excluir",edit:"Mudar nome","new":"+ Nova relação",title:"Privacidade & contexto"},relation_public:{name:"Publico"},representation:{notice:"Sua sessão foi alterada. Agora você está agindo em nome de %{subject}. Use o menu superior direito para retornar à sua sessão","switch":"Alterne sessão"},required:"(*) Estes campos são obrigatórios",search:{all_results:"Pesquisar todos os %{subject} (%{count})",at_least:"Escrever pelo menos dois caracteres",global:{name:"Pesquisa global",first_result:{more:"Mostrando os primeiros %{count} resultados.",one:"Mostrando o primeiro resultado."},query:"Veja mais resultados para %{query} >"},name:"Search",no_subject_found:"Nenhum %{subject} foi encontrado.",nothing:"Nada foi encontrado",searching:"Pesquisando: %{query}",show_all:"Todos",write:"Escreva sua pesquisa ...",wrong:"Parece haver um problema com o mecanismo de pesquisa"},settings:{api_key:{briefing:"Gerenciar a sua chave da API",confirm:"Você tem certeza?",empty:"Token vazio",explanation:"Esta é sua chave da API",name:"Chave da API",regenerate:"Regerar chave da API"},cancel_account:{briefing:"Permite que você cancele sua conta"},email_change:{briefing:"Mude o seu e-mail"},lang_change:{briefing:"Alterar o idioma",name:"Alterar o idioma"},error:"Alguns erros gerados ao salvar suas alterações","for":"Configurações para",main:"Configurações",manage:{name:"Administrar Contatos",briefing:"Configuração para contatos",explanation:"Mudar as permissões dos contatos"},notifications:{briefing:"Configurações de notificações alertas de email",name:"Notificaões",by_email:{name:"Envie-me um email quando eu receber uma notificação",always:"Sempre",never:"Nunca"}},one:"Configurações",password_change:{briefing:"Mude sua senha"},success:"Suas configurações foram alteradas corretamente"},share:"Compartilhar",sign_in:"Entrar",sign_out:"Sair",sign_up:"Cadastrar-se",site:{name:"Social Stream"},subject:{this_is_you:"Este é você!"},sure:"Você tem certeza?",time:{ago:"%{time} atrás",am:"",formats:{"default":"%A, %d de %B de %Y, %H:%M h","long":"%A, %d de %B de %Y, %H:%M h","short":"%d/%m, %H:%M h"},pm:""},unknown:"Desconhecido",user:{by:"Por usuários",one:"Usuário",other:"Usuários",all:"Todos os usuários",all_n:"Todos os usuários (%{count})"},welcome:"Bem-vindo ao %{site}!",lang:{browser:"Auto-detecção do idioma do navegador",none:"Conteúdo independente da linguagem"},date:{abbr_day_names:["dom","seg","ter","qua","qui","sex","sáb"],abbr_month_names:[null,"jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],day_names:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],formats:{"default":"%d/%m/%Y","long":"%d de %B de %Y","short":"%d de %b"},month_names:[null,"janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],order:["dia","mês","ano"]},datetime:{distance_in_words:{about_x_hours:{one:"aproximadamente 1 hora",other:"aproximadamente %{count} horas"},about_x_months:{one:"aproximadamente 1 mês",other:"aproximadamente %{count} meses"},about_x_years:{one:"aproximadamente 1 ano",other:"aproximadamente %{count} anos"},almost_x_years:{one:"quase 1 ano",other:"quase %{count} anos"},half_a_minute:"meio minuto",less_than_x_minutes:{one:"menos de 1 minuto",other:"menos de %{count} minutos"},less_than_x_seconds:{one:"menos de 1 segundo",other:"menos de %{count} segundos"},over_x_years:{one:"mais de 1 ano",other:"mais de %{count} anos"},x_days:{one:"1 dia",other:"%{count} dias"},x_minutes:{one:"1 minuto",other:"%{count} minutos"},x_months:{one:"1 mês",other:"%{count} meses"},x_seconds:{one:"1 segundo",other:"%{count} segundos"}},prompts:{day:"Dia",hour:"Hora",minute:"Minuto",month:"Mês",second:"Segundo",year:"Ano"}},errors:{format:"%{attribute} %{message}",messages:{accepted:"deve ser aceito",blank:"não pode ficar em branco",confirmation:"não está de acordo com a confirmação",empty:"não pode ficar vazio",equal_to:"deve ser igual a %{count}",even:"deve ser par",exclusion:"não está disponível",greater_than:"deve ser maior que %{count}",greater_than_or_equal_to:"deve ser maior ou igual a %{count}",inclusion:"não está incluído na lista",invalid:"não é válido",less_than:"deve ser menor que %{count}",less_than_or_equal_to:"deve ser menor ou igual a %{count}",not_a_number:"não é um número",not_an_integer:"não é um número inteiro",odd:"deve ser ímpar",record_invalid:"A validação falhou: %{errors}",taken:"já está em uso",too_long:"é muito longo (máximo: %{count} caracteres)",too_short:"é muito curto (mínimo: %{count} caracteres)",wrong_length:"não possui o tamanho esperado (%{count} caracteres)"},template:{body:"Por favor, verifique o(s) seguinte(s) campo(s):",header:{one:"Não foi possível gravar %{model}: 1 erro",other:"Não foi possível gravar %{model}: %{count} erros."}}},number:{currency:{format:{delimiter:".",format:"%u %n",precision:2,separator:",",significant:!1,strip_insignificant_zeros:!1,unit:"R$"}},format:{delimiter:".",precision:3,separator:",",significant:!1,strip_insignificant_zeros:!1},human:{decimal_units:{format:"%n %u",units:{billion:"bilhão",million:"milhão",quadrillion:"quatrilhão",thousand:"mil",trillion:"trilhão",unit:""}},format:{delimiter:"",precision:2,significant:!0,strip_insignificant_zeros:!0},storage_units:{format:"%n %u",units:{"byte":{one:"Byte",other:"Bytes"},gb:"GB",kb:"KB",mb:"MB",tb:"TB"}}},percentage:{format:{delimiter:""}},precision:{format:{delimiter:""}}},support:{array:{last_word_connector:", e ",two_words_connector:" e",words_connector:", "}}},zh:{language_name:"中文",actor:{name:"姓名"},action:{send:"送出",accept:"接收"},account:{cancel:"取消帐号",edit:"编辑帐号",email:{change:"更改邮箱地址"},lang:{change:"切换语言"},one:"帐号",password:{change:"修改密码","new":"新密码",retype:"再次输入新密码"},privacy:"私隐"},activerecord:{attributes:{contact:{relation_ids:"联系方式"},"relation/custom":{name:"姓名"},user:{email:"邮箱",name:"姓名",password:"密码",password_confirmation:"确定密码",remember_me:"记住我"}}},activity:{audience:{hidden:{summary:"禁止",full:"连接分享 %{audience}"},"public":{summary:"公开",full:"分享给网络"},show:"展示",visible:{summary:"禁止",full:"分享 %{audience}"}},confirm_delete:"刪除活动?","delete":"删除",last:"次前活动",like:"我喜爱",like_sentence:{one:"%{likers} 喜欢这个",other:"%{likers} 喜欢这个",more:null},one:"一个活动",other:"很多活动",privacy:{myself:{contacts:{group:"所有会员",user:"发送给"}},outside:{contacts:{group:"会员的 %{receiver}",user:"联系的 %{receiver}"}}},sending:"传送中",stream:{atom_title:"%{subject}的活动流",title:{follow:"%{author}已加了%{activity_object}為关连",like:"%{author}喜欢%{activity_object}","make-friend":"%{author}还加了%{activity_object}为关连",post:"%{author}发布了%{activity_object}",updated:"%{author}更新了%{activity_object}"}},title:"活动",to_comment:"评论",unlike:"我不再喜欢了",verb:{follow:{User:{title:"%{subject} 已加 %{contact} 作为联络.",message:"%{name} 已加您作为联系人."},Group:{title:"%{subject} 已加 %{contact} 作为联络.",message:"%{name} 已加您作为联络."}},like:{User:{title:"%{subject} 已成为粉丝 %{contact}.",message:"%{name} 已成为你的粉丝."},Group:{title:"%{subject} 已成为粉丝 %{contact}.",message:"%{name} 已成为你的粉丝."}},"make-friend":{User:{title:"%{subject} 和 %{contact} 现已連结.",message:"%{姓名} 已加您作为联系人."},Group:{title:"%{subject} 已加 %{contact} 联络.",message:"%{name} 已加您作为联系人."}},post:{title:{other_wall:"%{sender} → %{receiver}"}}}},activity_action:{follow:"关注",sentence:{follow:{one:"%{followers} 关注这个",other:"%{followers} 关注这个"},more:{one:"%{count} 一个人",other:"%{count} 再多些人"}},unfollow:"不再关注"},browse:"浏览",button:{cancel:"取消",create:"创建",save:"保存",update:"更新"},cheesecake:{changes:{details:"更改详情",none:"沒有更改",save:"保存更改",saving:"保存中..."},form:{editing:"编辑中...",fields:{color:"颜色",name:"姓名",permissions:"权限",subsector:"界别分组"}},select:{hint:"点击图片以便选择"}},comment:{input:"请填写评论...",confirm_delete:"删除评论?",name:"评论",one:"一篇评论",title:{one:"评论",other:"所有评论"},view_all:"查看所有评论 "},contact:{addressbook:"我的通讯录",all_n:"所有联系(%{count})",confirm_delete:"刪除联系?",current:"近期","delete":"刪除",edit:{title:"编辑联络 %{name}",submit:"编辑联络"},error_count:{one:"一个错误导致不能保存这个联络 :",other:"%{count} 有一些错误导致不能保存这个联络:"},follow:"关注",following:"关注中",graph:{one:"图片",empty:"对不起, 您沒有任何联系人. 您可以通过查找功能去查找可能认识的朋友!"},in_common:{one:"一个共同联系人",other:"%{count} 共同联系人"},"new":{link:"+ 加入联络",title:"加入 %{name} 到您的联系人列表",menu:"加入联络",submit:"加入联络"},one:"联络",other:"联系",pending:{other:"暂缓",all:"所有",all_n:"查看所有暂缓申请 (%{count})"},relation:{one:"联络类别","new":"新类别"},reply:{link:"+ 回复联系人",title:"回复联络申请至 %{name}",submit:"回复"},suggestion:{one:"建议",other:"建议",all:"所有"},type:{"new":"+ 新类别"},unfollow:"不再关注"},copyright:"2010 版权 - 版权所有","delete":{confirm:"刪除 %{element}}?"},devise:{links:{sign_in:"登录",sign_up:"注册",forgot_password:"忘了您的密码?",confirmation_instructions:"还没收到激活指引吗?",unlock_instructions:"还没收到解锁指引吗?",sign_in_with:"以 %{provider} 登录"},passwords:{confirm:"确认密码",forgot:"忘了?",instructions:"请输入你的帐号关联的邮箱, 以便我们给您发送更改指示:",update:"更改您的密码"}},follower:{follower:{title:"粉丝"},following:{title:"关注"},n:{one:"一个粉丝",other:"%{count} 粉丝"}},forgot_password:"忘了您的密码吗?",frontpage:{collaborate:{"default":"合作",sentence1:"组织您的习作和活动",sentence2:"参与会议和活动",sentence3:"创建您的群组和会议"},elements:{comments:"评论",conferences:"发布会",networks:"社交网络",organizers:"主办单位",participants:"参加者",groups:"群组",tags:"标记"},main_title:"社交视频互动是我们建立社交网的核心.",meet:{"default":"认识",sentence1:"认识有趣的人和群组",sentence2:" 寻找于你相关的最新活动"},register:"请注册!",share:{"default":"分享",sentence1:" 您的习作和活动",sentence2:"近况, 照片, 音频 和 视频"},stats:"%{users} 用户 和 %{groups} 已注册的群组"},group:{one:"群组",other:"群组",all:"所有群组",all_n:"所有群组 (%{count})",by:"被群组",destroy:{one:"删除群组",explanation:"所有和这个群组相关的活动的资料和联系会被删除!",go_ahead:"是, 我肯定. 删除所有東西!",last_confirm:"这是您最后机会. 您肯定吗?"},form:{title:"群组"},input:"这个群组叫什么名称?",last:"最後的群组",my:"我的群组","new":{action:"新群组",name:"名称",description:"描述",participants:"参与者"},cloud:"群组标记云",most:{followed:"最多人关注",liked:"最受欢迎"},tags:"标记",title:{one:"群组",other:"群组们"}},help:"帮助",helpers:{submit:{relation_custom:{create:"保存",update:"更新"}}},home:"主页",inbox:{one:"收件箱"},invitation:{"e-mails":"电子邮箱",error:"您的申请未能被处理. 请确定您的邮箱地址是否正确无误.",invited:"%{sender} 已邀请您到 %{site}!",join:"邀请其他人加入 %{site}!",join_me:"跟我一起在 %{site}!",one:"邀请",other:"邀请",toolbar:"邀请",success:"您的邀请已成功发送",text:"写上您的讯息"},like:{n:{one:"一个粉丝",other:"%{count} 粉丝们"}},location:{message:"您在此 > %{location}",base:"您在此",separator:" > "},mailboxer:{"delete":"刪除",delete_confirm:"您要把 '%{object}' 移除到垃圾桶?",form:{body:"主体",recipients:"收件人",subject:"主题"},mark_as_read:"标记已读",message_mailer:{has_sent_new:{event:"己发送新讯息 %{receiver}",group:"己发送新讯息 %{receiver}",user:"己给您发送新讯息"},has_sent_reply:{event:"已给您回复 %{receiver}",group:"已给您回复 %{receiver}",user:"已给您回复"},subject_new:"%{subject}",subject_reply:"%{subject}"},notification_mailer:{subject:"%{subject}"},reply:"回复",send:"发送讯息",sent:"您的讯息已发送"},menu:{options:"菜單选择",information:"个人资料",wall:"最新發佈"},message:{answer:"写上答案",inbox:"收件箱",look:"请留意这个对话","new":"新讯息",one:"讯息",other:"讯息",participants:"参与者",send:"发送讯息",sentbox:"寄件备份",trash:"垃圾桶"},notification:{all_text:"在 %{url} 阅读所有內容",confirm:"确定 %{sender} 作为联络?","default":"您有新通知",destroy_sure:"您是否想删除这个通知?",fan:"%{sender} 现在是 %{whose} 粉丝.",follow:{chamber:"%{sender} 已加入 %{name}.",group:"%{sender} 已加到 %{who} 作为联络.",user:"%{sender} 已加到 %{who} 作为联络."},hello:"您好 %{receiver},",join:{one:"%{sender}參加了%{thing}%{title}."},like:{group:"%{sender} 喜欢 %{whose} %{thing}.",user:"%{sender} 喜欢 %{whose} %{thing}."},look:"请看看这个 %{sender} 的最新发布",makefriend:{group:"%{sender} 另加至 %{who} 作为联络.",user:"%{sender} 另加至 %{who} 作为联络."},one:"通知",other:"通知",post:{group:"%{title} -- %{sender} 發佈給 %{whose} ",user:"%{title} -- %{sender} 發佈給 %{whose} "},read:"标记已读",read_all:"标记全部已读",unread:"标记未读",update:{group:"%{sender} 在 %{whose} 的最新发布已更新 %{thing} ",user:"%{sender} 在 %{whose} 的最新发布已更新 %{thing}"},visit:"浏览 %{url} 和检查您的所有通知.",watch:"在这里 %{url}查看这里",watch_it:"查看这里!",who:{group:"%{name}",user:"您"},whose:{group:"%{receiver} 的",user:"您的"}},post:{confirm_delete:"删除近況吗?",form:{title:"近況"},input:"您有什么近況?",name:"近況",one:"一条近況",title:{one:"近況",other:"近況"}},preposition:{and:"和","true":"在上"},profile:{one:"个人背景资料",age:"年齡",is_on:"有效",must_be_signed_id:"您必须持有有效证件",group:{about:"关于我们",birthday:"周年",experience:"经验范畴",info:"群组资料",tags:"群组标记"},user:{about:"关于我",birthday:"生日",experience:"经验",info:"个人资料",tags:"标记"},actualcity:"上课城市",address:"地址",contact:"联络资料",country:"国家",email:"邮箱",empty:"这些空格未填上. 请更新.",fax:"传真",mobile:"手机",organization:"组织",phone:"电话",profile:"编辑个人背景资料",tags:{"default":"社交, 视频,",other:"标记"},website:"网站",update:{error:"请重组您的个人背景资料:",success:"您的个人背景资料已更新"}},"public":{other:"大家"},permission:{description:{"default":{brief:{create:{activity:"贴到您的最新发布"},follow:{nil:"关注他们的活动"},read:{activity:"阅读您的最新发布"},represent:{nil:"管理"},notify:{nil:"通知"}},detailed:{create:{activity:{positive:"他们将会在您的最新发布标贴新的活动",negative:"他们不能在您的最新发布标贴新的活动"}},follow:{nil:{positive:"已有联系的活动 %{relation} 将出现在您主页的最新发布上",negative:"已有联系的活动 %{relation} 将不会出现在您主页的最新发布上"}},read:{activity:{positive:"他们能夠阅读在您的最新发布的內容, 除了那些有特別联系的分享",negative:"他们能夠阅读在您的最新发布的內容, 除了那些被标识为公开"}},represent:{nil:{positive:"他们将更改环节及作为 %{subject}",negative:"他们不能更改环节及作为 %{subject}"}},notify:{nil:{positive:"活动将会通知 %{name} 的联系",negative:"活动将不会通知 %{name} 的联系"}}}}},of_relation:{choose:"2. <strong>%{name}</strong>圈內的权限"}},privacy:{intro:"拥有 <strong>%{relation}</strong>级别的联系只容许作出以下行为:",rule:{add:"加上",title:"私隐规则",saved:"私隐规则己保存"}},relation_custom:{choose:"1. 选择圈子",confirm_delete:"删除这个圈子?","delete":"刪除",edit:"更改名称","new":"+ 新圈子",title:"私隐和內容"},relation_public:{name:"公众"},representation:{notice:"您的环节已更改. 现在您以%{subject}的身份行动. 请使用右上角菜单回到您的环节","switch":"转换环节"},required:"(*) 以上空格必須填写",search:{all_results:"查找所有 %{subject} (%{count})",at_least:"写下最少两个字符",global:{name:"全球搜查",first_result:{more:"展示首回 %{count} 结果.",one:"首回结果展示中."},query:"查看更多结果 %{query} >"},name:"搜索",no_subject_found:"沒有搜索到关于 %{subject} 的结果.",nothing:"沒有查询到任何结果",searching:"查找中: %{query}",show_all:"所有",write:"写下您的问题 ...",wrong:"搜查器发生了问题"},settings:{api_key:{briefing:"管理您的API钥匙",confirm:"您肯定吗?",empty:"沒有",explanation:"这是您的的 API 钥匙",name:"API 钥匙",regenerate:"重新获取 API 钥匙"},cancel_account:{briefing:"让您注销帐号"},email_change:{briefing:"更改您的邮箱"},lang_change:{briefing:"更改您的语言",name:"更改您的语言"},error:"当您保存更改时, 出现一些错误","for":"为....设定",main:"设定",manage:{name:"行政联络",briefing:"联系设定",explanation:"更改联系允许"},notifications:{briefing:"关于通知行为和邮件提示的设定",name:"通知",by_email:{name:"当我收到通知时发邮件给我",always:"经常",never:"永不"}},one:"设定",password_change:{briefing:"更改密码"},success:"您的设定已成功更改"},share:"Share",sign_in:"登录",sign_out:"退出",sign_up:"注册",site:{name:"Gocess.com"},subject:{this_is_you:"这是您!"},sure:"您肯定吗?",time:{ago:"%{time} 之前"},unknown:"不明",user:{all:"所有用户",all_n:"所有用户 (%{count})",by:"被用户",one:"用户",other:"用户们",title:{one:"用户",other:"用户们"}},welcome:"欢迎来到 %{site}!",lang:{browser:"自动搜查浏览器语言",none:"语言自主內容"}}},function(e){e.Jcrop=function(t,n){function B(e){return""+parseInt(e)+"px"}function j(e){return""+parseInt(e)+"%"}function F(e){return s.baseClass+"-"+e}function I(t){var n=e(t).offset();return[n.left,n.top]}function q(e){return[e.pageX-C[0],e.pageY-C[1]]}function R(e){e!=L&&(P.setCursor(e),L=e)}function U(e,t){C=I(u),P.setCursor(e=="move"?e:e+"-resize");if(e=="move")return P.activateHandlers(W(t),Q);var n=_.getFixed(),r=X(e),i=_.getCorner(X(r));_.setPressed(_.getCorner(r)),_.setCurrent(i),P.activateHandlers(z(e,n),Q)}function z(e,t){return function(n){if(!s.aspectRatio)switch(e){case"e":n[1]=t.y2;break;case"w":n[1]=t.y2;break;case"n":n[0]=t.x2;break;case"s":n[0]=t.x2}else switch(e){case"e":n[1]=t.y+1;break;case"w":n[1]=t.y+1;break;case"n":n[0]=t.x+1;break;case"s":n[0]=t.x+1}_.setCurrent(n),D.update()}}function W(e){var t=e;return H.watchKeys(),function(e){_.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,D.update()}}function X(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function V(e){return function(t){return s.disabled?!1:e=="move"&&!s.allowMove?!1:(k=!0,U(e,q(t)),t.stopPropagation(),t.preventDefault(),!1)}}function J(e,t,n){var r=e.width(),i=e.height();r>t&&t>0&&(r=t,i=t/e.width()*e.height()),i>n&&n>0&&(i=n,r=n/e.height()*e.width()),x=e.width()/r,T=e.height()/i,e.width(r).height(i)}function K(e){return{x:parseInt(e.x*x),y:parseInt(e.y*T),x2:parseInt(e.x2*x),y2:parseInt(e.y2*T),w:parseInt(e.w*x),h:parseInt(e.h*T)}}function Q(e){var t=_.getFixed();t.w>s.minSelect[0]&&t.h>s.minSelect[1]?(D.enableHandles(),D.done()):D.release(),P.setCursor(s.allowSelect?"crosshair":"default")}function G(e){if(s.disabled)return!1;if(!s.allowSelect)return!1;k=!0,C=I(u),D.disableHandles(),R("crosshair");var t=q(e);return _.setPressed(t),P.activateHandlers(Y,Q),H.watchKeys(),D.update(),e.stopPropagation(),e.preventDefault(),!1}function Y(e){_.setCurrent(e),D.update()}function Z(){var t=e("<div></div>").addClass(F("tracker"));return e.browser.msie&&t.css({opacity:0,backgroundColor:"white"}),t}function et(e){function b(){window.setTimeout(y,f)}var t=e[0]/x,n=e[1]/T,r=e[2]/x,i=e[3]/T;if(O)return;var o=_.flipCoords(t,n,r,i),u=_.getFixed(),a=initcr=[u.x,u.y,u.x2,u.y2],f=s.animationDelay,l=a[0],c=a[1],r=a[2],i=a[3],h=o[0]-initcr[0],p=o[1]-initcr[1],d=o[2]-initcr[2],v=o[3]-initcr[3],m=0,g=s.swingSpeed;D.animMode(!0);var y=function(){return function(){m+=(100-m)/g,a[0]=l+m/100*h,a[1]=c+m/100*p,a[2]=r+m/100*d,a[3]=i+m/100*v,m<100?b():D.done(),m>=99.8&&(m=100),nt(a)}}();b()}function tt(e){nt([e[0]/x,e[1]/T,e[2]/x,e[3]/T])}function nt(e){_.setPressed([e[0],e[1]]),_.setCurrent([e[2],e[3]]),D.update()}function rt(t){typeof t!="object"&&(t={}),s=e.extend(s,t),typeof s.onChange!="function"&&(s.onChange=function(){}),typeof s.onSelect!="function"&&(s.onSelect=function(){})}function it(){return K(_.getFixed())}function st(){return _.getFixed()}function ot(e){rt(e),ct()}function ut(){s.disabled=!0,D.disableHandles(),D.setCursor("default"),P.setCursor("default")}function at(){s.disabled=!1,ct()}function ft(){D.done(),P.activateHandlers(null,null)}function lt(){l.remove(),o.show()}function ct(e){s.allowResize?e?D.enableOnly():D.enableHandles():D.disableHandles(),P.setCursor(s.allowSelect?"crosshair":"default"),D.setCursor(s.allowMove?"move":"default"),l.css("backgroundColor",s.bgColor),"setSelect"in s&&(tt(n.setSelect),D.done(),delete s.setSelect),"trueSize"in s&&(x=s.trueSize[0]/a,T=s.trueSize[1]/f),y=s.maxSize[0]||0,b=s.maxSize[1]||0,E=s.minSize[0]||0,S=s.minSize[1]||0,"outerImage"in s&&(u.attr("src",s.outerImage),delete s.outerImage),D.refresh()}var t=t,n=n;typeof t!="object"&&(t=e(t)[0]),typeof n!="object"&&(n={}),"trackDocument"in n||(n.trackDocument=e.browser.msie?!1
:!0,e.browser.msie&&e.browser.version.split(".")[0]=="8"&&(n.trackDocument=!0)),"keySupport"in n||(n.keySupport=e.browser.msie?!1:!0);var r={trackDocument:!1,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,borderOpacity:.4,handleOpacity:.5,handlePad:5,handleSize:9,handleOffset:5,edgeMargin:14,aspectRatio:0,keySupport:!0,cornerHandles:!0,sideHandles:!0,drawBorders:!0,dragEdges:!0,boxWidth:0,boxHeight:0,boundary:8,animationDelay:20,swingSpeed:3,allowSelect:!0,allowMove:!0,allowResize:!0,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){}},s=r;rt(n);var o=e(t),u=o.clone().removeAttr("id").css({position:"absolute"});u.width(o.width()),u.height(o.height()),o.after(u).hide(),J(u,s.boxWidth,s.boxHeight);var a=u.width(),f=u.height(),l=e("<div />").width(a).height(f).addClass(F("holder")).css({position:"relative",backgroundColor:s.bgColor}).insertAfter(o).append(u);s.addClass&&l.addClass(s.addClass);var c=e("<img />").attr("src",u.attr("src")).css("position","absolute").width(a).height(f),p=e("<div />").width(j(100)).height(j(100)).css({zIndex:310,position:"absolute",overflow:"hidden"}).append(c),d=e("<div />").width(j(100)).height(j(100)).css("zIndex",320),v=e("<div />").css({position:"absolute",zIndex:300}).insertBefore(u).append(p,d),m=s.boundary,g=Z().width(a+m*2).height(f+m*2).css({position:"absolute",top:B(-m),left:B(-m),zIndex:290}).mousedown(G),y,b,E,S,x,T,N=!0,C=I(u),k,L,A,O,M,_=function(){function u(i){var i=m(i);n=e=i[0],r=t=i[1]}function l(e){var e=m(e);i=e[0]-n,o=e[1]-r,n=e[0],r=e[1]}function c(){return[i,o]}function p(i){var s=i[0],o=i[1];0>e+s&&(s-=s+e),0>t+o&&(o-=o+t),f<r+o&&(o+=f-(r+o)),a<n+s&&(s+=a-(n+s)),e+=s,n+=s,t+=o,r+=o}function d(e){var t=v();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function v(){if(!s.aspectRatio)return N();var i=s.aspectRatio,o=s.minSize[0]/x,u=s.minSize[1]/T,l=s.maxSize[0]/x,c=s.maxSize[1]/T,p=n-e,d=r-t,v=Math.abs(p),m=Math.abs(d),y=v/m,b,E;return l==0&&(l=a*10),c==0&&(c=f*10),y<i?(E=r,w=m*i,b=p<0?e-w:w+e,b<0?(b=0,h=Math.abs((b-e)/i),E=d<0?t-h:h+t):b>a&&(b=a,h=Math.abs((b-e)/i),E=d<0?t-h:h+t)):(b=n,h=v/i,E=d<0?t-h:t+h,E<0?(E=0,w=Math.abs((E-t)*i),b=p<0?e-w:w+e):E>f&&(E=f,w=Math.abs(E-t)*i,b=p<0?e-w:w+e)),b>e?(b-e<o?b=e+o:b-e>l&&(b=e+l),E>t?E=t+(b-e)/i:E=t-(b-e)/i):b<e&&(e-b<o?b=e-o:e-b>l&&(b=e-l),E>t?E=t+(e-b)/i:E=t-(e-b)/i),b<0?(e-=b,b=0):b>a&&(e-=b-a,b=a),E<0?(t-=E,E=0):E>f&&(t-=E-f,E=f),last=C(g(e,t,b,E))}function m(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>a&&(e[0]=a),e[1]>f&&(e[1]=f),[e[0],e[1]]}function g(e,t,n,r){var i=e,s=n,o=t,u=r;return n<e&&(i=n,s=e),r<t&&(o=r,u=t),[Math.round(i),Math.round(o),Math.round(s),Math.round(u)]}function N(){var i=n-e,s=r-t;y&&Math.abs(i)>y&&(n=i>0?e+y:e-y),b&&Math.abs(s)>b&&(r=s>0?t+b:t-b),S&&Math.abs(s)<S&&(r=s>0?t+S:t-S),E&&Math.abs(i)<E&&(n=i>0?e+E:e-E),e<0&&(n-=e,e-=e),t<0&&(r-=t,t-=t),n<0&&(e-=n,n-=n),r<0&&(t-=r,r-=r);if(n>a){var o=n-a;e-=o,n-=o}if(r>f){var o=r-f;t-=o,r-=o}if(e>a){var o=e-f;r-=o,t-=o}if(t>f){var o=t-f;r-=o,t-=o}return C(g(e,t,n,r))}function C(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var e=0,t=0,n=0,r=0,i,o;return{flipCoords:g,setPressed:u,setCurrent:l,getOffset:c,moveOffset:p,getCorner:d,getFixed:v}}(),D=function(){function g(t){var n=e("<div />").css({position:"absolute",opacity:s.borderOpacity}).addClass(F(t));return p.append(n),n}function y(t,n){var r=e("<div />").mousedown(V(t)).css({cursor:t+"-resize",position:"absolute",zIndex:n});return d.append(r),r}function b(e){return y(e,a++).css({top:B(-m+1),left:B(-m+1),opacity:s.handleOpacity}).addClass(F("handle"))}function w(e){var t=s.handleSize,n=m,r=t,i=t,o=n,u=n;switch(e){case"n":case"s":i=j(100);break;case"e":case"w":r=j(100)}return y(e,a++).width(i).height(r).css({top:B(-o+1),left:B(-u+1)})}function E(e){for(i in e)l[e[i]]=b(e[i])}function S(e){var t=Math.round(e.h/2-m),n=Math.round(e.w/2-m),r=west=-m+1,i=e.w-m,s=e.h-m,o,u;"e"in l&&l.e.css({top:B(t),left:B(i)})&&l.w.css({top:B(t)})&&l.s.css({top:B(s),left:B(n)})&&l.n.css({left:B(n)}),"ne"in l&&l.ne.css({left:B(i)})&&l.se.css({top:B(s),left:B(i)})&&l.sw.css({top:B(s)}),"b"in l&&l.b.css({top:B(s)})&&l.r.css({left:B(i)})}function x(e,t){c.css({top:B(-t),left:B(-e)}),v.css({top:B(t),left:B(e)})}function T(e,t){v.width(e).height(t)}function N(){var e=_.getFixed();_.setPressed([e.x,e.y]),_.setCurrent([e.x2,e.y2]),C()}function C(){if(o)return k()}function k(){var e=_.getFixed();T(e.w,e.h),x(e.x,e.y),s.drawBorders&&f.right.css({left:B(e.w-1)})&&f.bottom.css({top:B(e.h-1)}),h&&S(e),o||L(),s.onChange(K(e))}function L(){v.show(),u.css("opacity",s.bgOpacity),o=!0}function A(){P(),v.hide(),u.css("opacity",1),o=!1}function M(){h&&(S(_.getFixed()),d.show())}function D(){h=!0;if(s.allowResize)return S(_.getFixed()),d.show(),!0}function P(){h=!1,d.hide()}function H(e){(O=e)?P():D()}function I(){H(!1),N()}var t,n,r,o,a=370,f={},l={},h=!1,m=s.handleOffset;s.drawBorders&&(f={top:g("hline").css("top",e.browser.msie?B(-1):B(0)),bottom:g("hline"),left:g("vline"),right:g("vline")}),s.dragEdges&&(l.t=w("n"),l.b=w("s"),l.r=w("e"),l.l=w("w")),s.sideHandles&&E(["n","s","e","w"]),s.cornerHandles&&E(["sw","nw","ne","se"]);var q=Z().mousedown(V("move")).css({cursor:"move",position:"absolute",zIndex:360});return p.append(q),P(),{updateVisible:C,update:k,release:A,refresh:N,setCursor:function(e){q.css("cursor",e)},enableHandles:D,enableOnly:function(){h=!0},showHandles:M,disableHandles:P,animMode:H,done:I}}(),P=function(){function i(){g.css({zIndex:450}),r&&e(document).mousemove(a).mouseup(f)}function o(){g.css({zIndex:290}),r&&e(document).unbind("mousemove",a).unbind("mouseup",f)}function a(e){t(q(e))}function f(e){return e.preventDefault(),e.stopPropagation(),k&&(k=!1,n(q(e)),s.onSelect(K(_.getFixed())),o(),t=function(){},n=function(){}),!1}function l(e,r){return k=!0,t=e,n=r,i(),!1}function c(e){g.css("cursor",e)}var t=function(){},n=function(){},r=s.trackDocument;return r||g.mousemove(a).mouseup(f).mouseout(f),u.before(g),{activateHandlers:l,setCursor:c}}(),H=function(){function r(){s.keySupport&&(t.show(),t.focus())}function i(e){t.hide()}function o(e,t,n){s.allowMove&&(_.moveOffset([t,n]),D.updateVisible()),e.preventDefault(),e.stopPropagation()}function a(e){if(e.ctrlKey)return!0;M=e.shiftKey?!0:!1;var t=M?10:1;switch(e.keyCode){case 37:o(e,-t,0);break;case 39:o(e,t,0);break;case 38:o(e,0,-t);break;case 40:o(e,0,t);break;case 27:D.release();break;case 9:return!0}return nothing(e)}var t=e('<input type="radio" />').css({position:"absolute",left:"-30px"}).keypress(a).blur(i),n=e("<div />").css({position:"absolute",overflow:"hidden"}).append(t);return s.keySupport&&n.insertBefore(u),{watchKeys:r}}();d.hide(),ct(!0);var ht={animateTo:et,setSelect:tt,setOptions:ot,tellSelect:it,tellScaled:st,disable:ut,enable:at,cancel:ft,focus:H.watchKeys,getBounds:function(){return[a*x,f*T]},getWidgetSize:function(){return[a,f]},release:D.release,destroy:lt};return o.data("Jcrop",ht),ht},e.fn.Jcrop=function(t){function n(n){var r=t.useImg||n.src,i=new Image;i.onload=function(){e.Jcrop(n,t)},i.src=r}return typeof t!="object"&&(t={}),this.each(function(){if(e(this).data("Jcrop")){if(t=="api")return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else n(this)}),this}}(jQuery),function(e){function t(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.ajaxSubmit=function(n){function g(){function v(){var t=c.attr("target"),n=c.attr("action");r.setAttribute("target",s),r.getAttribute("method")!="POST"&&r.setAttribute("method","POST"),r.getAttribute("action")!=i.url&&r.setAttribute("action",i.url),i.skipEncodingOverride||c.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),i.timeout&&setTimeout(function(){h=!0,b()},i.timeout);var o=[];try{if(i.extraData)for(var f in i.extraData)o.push(e('<input type="hidden" name="'+f+'" value="'+i.extraData[f]+'" />').appendTo(r)[0]);u.appendTo("body"),a.attachEvent?a.attachEvent("onload",b):a.addEventListener("load",b,!1),r.submit()}finally{r.setAttribute("action",n),t?r.setAttribute("target",t):c.removeAttr("target"),e(o).remove()}}function b(){if(f.aborted)return;var n=a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document;if(!n||n.location.href==i.iframeSrc)if(!h)return;a.detachEvent?a.detachEvent("onload",b):a.removeEventListener("load",b,!1);var r=!0;try{if(h)throw"timeout";var s=i.dataType=="xml"||n.XMLDocument||e.isXMLDoc(n);t("isXml="+s);if(!s&&window.opera&&(n.body==null||n.body.innerHTML=="")&&--y){t("requeing onLoad callback, DOM not available"),setTimeout(b,250);return}f.responseText=n.body?n.body.innerHTML:n.documentElement?n.documentElement.innerHTML:null,f.responseXML=n.XMLDocument?n.XMLDocument:n,f.getResponseHeader=function(e){var t={"content-type":i.dataType};return t[e]};var o=/(json|script)/.test(i.dataType);if(o||i.textarea){var c=n.getElementsByTagName("textarea")[0];if(c)f.responseText=c.value;else if(o){var p=n.getElementsByTagName("pre")[0],d=n.getElementsByTagName("body")[0];p?f.responseText=p.textContent:d&&(f.responseText=d.innerHTML)}}else i.dataType=="xml"&&!f.responseXML&&f.responseText!=null&&(f.responseXML=w(f.responseText));m=S(f,i.dataType,i)}catch(v){t("error caught:",v),r=!1,f.error=v,i.error&&i.error.call(i.context,f,"error",v),l&&e.event.trigger("ajaxError",[f,i,v])}f.aborted&&(t("upload aborted"),r=!1),r&&(i.success&&i.success.call(i.context,m,"success",f),l&&e.event.trigger("ajaxSuccess",[f,i])),l&&e.event.trigger("ajaxComplete",[f,i]),l&&!--e.active&&e.event.trigger("ajaxStop"),i.complete&&i.complete.call(i.context,f,r?"success":"error"),setTimeout(function(){u.removeData("form-plugin-onload"),u.remove(),f.responseXML=null},100)}var r=c[0];if(e(":input[name=submit],:input[id=submit]",r).length){alert('Error: Form elements must not have name or id of "submit".');return}var i=e.extend(!0,{},e.ajaxSettings,n);i.context=i.context||i;var s="jqFormIO"+(new Date).getTime(),o="_"+s,u=e('<iframe id="'+s+'" name="'+s+'" src="'+i.iframeSrc+'" />'),a=u[0];u.css({position:"absolute",top:"-1000px",left:"-1000px"});var f={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){t("aborting upload...");var n="aborted";this.aborted=1,u.attr("src",i.iframeSrc),f.error=n,i.error&&i.error.call(i.context,f,"error",n),l&&e.event.trigger("ajaxError",[f,i,n]),i.complete&&i.complete.call(i.context,f,"error")}},l=i.global;l&&!(e.active++)&&e.event.trigger("ajaxStart"),l&&e.event.trigger("ajaxSend",[f,i]);if(i.beforeSend&&i.beforeSend.call(i.context,f,i)===!1){i.global&&e.active--;return}if(f.aborted)return;var h=0,p=r.clk;if(p){var d=p.name;d&&!p.disabled&&(i.extraData=i.extraData||{},i.extraData[d]=p.value,p.type=="image"&&(i.extraData[d+".x"]=r.clk_x,i.extraData[d+".y"]=r.clk_y))}i.forceSync?v():setTimeout(v,10);var m,g,y=50,w=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},E=e.parseJSON||function(e){return window.eval("("+e+")")},S=function(t,n,r){var i=t.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;return s&&o.documentElement.nodeName==="parsererror"&&e.error&&e.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,n)),typeof o=="string"&&(n==="json"||!n&&i.indexOf("json")>=0?o=E(o):(n==="script"||!n&&i.indexOf("javascript")>=0)&&e.globalEval(o)),o}}if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;typeof n=="function"&&(n={success:n});var r=this.attr("action"),i=typeof r=="string"?e.trim(r):"";i&&(i=(i.match(/^([^#]+)/)||[])[1]),i=i||window.location.href||"",n=e.extend(!0,{url:i,success:e.ajaxSettings.success,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},n);var s={};this.trigger("form-pre-serialize",[this,n,s]);if(s.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(n.beforeSerialize&&n.beforeSerialize(this,n)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var o,u,a=this.formToArray(n.semantic);if(n.data){n.extraData=n.data;for(o in n.data)if(n.data[o]instanceof Array)for(var f in n.data[o])a.push({name:o,value:n.data[o][f]});else u=n.data[o],u=e.isFunction(u)?u():u,a.push({name:o,value:u})}if(n.beforeSubmit&&n.beforeSubmit(a,this,n)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[a,this,n,s]);if(s.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var l=e.param(a);n.type.toUpperCase()=="GET"?(n.url+=(n.url.indexOf("?")>=0?"&":"?")+l,n.data=null):n.data=l;var c=this,h=[];n.resetForm&&h.push(function(){c.resetForm()}),n.clearForm&&h.push(function(){c.clearForm()});if(!n.dataType&&n.target){var p=n.success||function(){};h.push(function(t){var r=n.replaceTarget?"replaceWith":"html";e(n.target)[r](t).each(p,arguments)})}else n.success&&h.push(n.success);n.success=function(e,t,r){var i=n.context||n;for(var s=0,o=h.length;s<o;s++)h[s].apply(i,[e,t,r||c,c])};var d=e("input:file",this).length>0,v="multipart/form-data",m=c.attr("enctype")==v||c.attr("encoding")==v;return n.iframe!==!1&&(d||n.iframe||m)?n.closeKeepAlive?e.get(n.closeKeepAlive,g):g():e.ajax(n),this.trigger("form-submit-notify",[this,n]),this},e.fn.ajaxForm=function(n){if(this.length===0){var r={s:this.selector,c:this.context};return!e.isReady&&r.s?(t("DOM not ready, queuing ajaxForm"),e(function(){e(r.s,r.c).ajaxForm(n)}),this):(t("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(t){t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(n))}).bind("click.form-plugin",function(t){var n=t.target,r=e(n);if(!r.is(":submit,input:image")){var i=r.closest(":submit");if(i.length==0)return;n=i[0]}var s=this;s.clk=n;if(n.type=="image")if(t.offsetX!=undefined)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if(typeof e.fn.offset=="function"){var o=r.offset();s.clk_x=t.pageX-o.left,s.clk_y=t.pageY-o.top}else s.clk_x=t.pageX-n.offsetLeft,s.clk_y=t.pageY-n.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)})},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t){var n=[];if(this.length===0)return n;var r=this[0],i=t?r.getElementsByTagName("*"):r.elements;if(!i)return n;var s,o,u,a,f,l,c;for(s=0,l=i.length;s<l;s++){f=i[s],u=f.name;if(!u)continue;if(t&&r.clk&&f.type=="image"){!f.disabled&&r.clk==f&&(n.push({name:u,value:e(f).val()}),n.push({name:u+".x",value:r.clk_x},{name:u+".y",value:r.clk_y}));continue}a=e.fieldValue(f,!0);if(a&&a.constructor==Array)for(o=0,c=a.length;o<c;o++)n.push({name:u,value:a[o]});else a!==null&&typeof a!="undefined"&&n.push({name:u,value:a})}if(!t&&r.clk){var h=e(r.clk),p=h[0];u=p.name,u&&!p.disabled&&p.type=="image"&&(n.push({name:u,value:h.val()}),n.push({name:u+".x",value:r.clk_x},{name:u+".y",value:r.clk_y}))}return n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(!r)return;var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var s=0,o=i.length;s<o;s++)n.push({name:r,value:i[s]});else i!==null&&typeof i!="undefined"&&n.push({name:this.name,value:i})}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r],o=e.fieldValue(s,t);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length)continue;o.constructor==Array?e.merge(n,o):n.push(o)}return n},e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();n===undefined&&(n=!0);if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1))return null;if(s=="select"){var o=t.selectedIndex;if(o<0)return null;var u=[],a=t.options,f=i=="select-one",l=f?o+1:a.length;for(var c=f?o:0;c<l;c++){var h=a[c];if(h.selected){var p=h.value;p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value);if(f)return p;u.push(p)}}return u}return e(t).val()},e.fn.clearForm=function(){return this.each(function(){e("input,select,textarea",this).clearFields()})},e.fn.clearFields=e.fn.clearInputs=function(){return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();e=="text"||e=="password"||t=="textarea"?this.value="":e=="checkbox"||e=="radio"?this.checked=!1:t=="select"&&(this.selectedIndex=-1)})},e.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return e===undefined&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio")this.checked=t;else if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");t&&r[0]&&r[0].type=="select-one"&&r.find("option").selected(!1),this.selected=t}})}}(jQuery),function(e){"use strict";var t="file_upload",n="undefined",r="function",i,s,o=function(e,t){var n=0,r=[];t&&(t.length?r=t:r[t-1]=null),this.complete=function(){n+=1,n===r.length&&(e(r),n=0,r=[])},this.push=function(e){r.push(e)},this.getList=function(){return r}},u=function(){var e=[];this.push=function(t){e.push(t),e.length===1&&t()},this.next=function(){e.shift(),e.length&&e[0]()}};i=function(i){var s=this,a,f,l={namespace:t,uploadFormFilter:function(e){return!0},fileInputFilter:function(e){return!0},cssClass:t,dragDropSupport:!0,dropZone:i,url:function(e){return e.attr("action")},method:function(e){return e.attr("method")},fieldName:function(e){return e.attr("name")},formData:function(e){return e.serializeArray()},requestHeaders:null,multipart:!0,multiFileRequest:!1,withCredentials:!1,forceIframeUpload:!1,sequentialUploads:!1,maxChunkSize:null,maxFileReaderSize:5e7},c={},h={},p=/^http(s)?:\/\//,d,v=new o(function(e){typeof l.onLoadAll===r&&l.onLoadAll(e)}),m=new u,g=function(){v.complete(),m.next()},y=function(){return typeof XMLHttpRequest!==n&&typeof XMLHttpRequestUpload!==n&&typeof File!==n&&(!l.multipart||typeof FormData!==n||typeof FileReader!==n&&typeof XMLHttpRequest.prototype.sendAsBinary===r)},b=function(){l.dragDropSupport&&(typeof l.onDocumentDragEnter===r&&(c["dragenter."+l.namespace]=function(e){l.onDocumentDragEnter(e)}),typeof l.onDocumentDragLeave===r&&(c["dragleave."+l.namespace]=function(e){l.onDocumentDragLeave(e)}),c["dragover."+l.namespace]=s.onDocumentDragOver,c["drop."+l.namespace]=s.onDocumentDrop,e(document).bind(c),typeof l.onDragEnter===r&&(h["dragenter."+l.namespace]=function(e){l.onDragEnter(e)}),typeof l.onDragLeave===r&&(h["dragleave."+l.namespace]=function(e){l.onDragLeave(e)}),h["dragover."+l.namespace]=s.onDragOver,h["drop."+l.namespace]=s.onDrop,l.dropZone.bind(h)),f.bind("change."+l.namespace,s.onChange)},w=function(){e.each(c,function(t,n){e(document).unbind(t,n)}),e.each(h,function(e,t){l.dropZone.unbind(e,t)}),f.unbind("change."+l.namespace)},E=function(e){return typeof e.uploadedBytes!==n},S=function(e,t,i){var s;return typeof document.createEvent===r&&typeof ProgressEvent!==n?(s=document.createEvent("ProgressEvent"),s.initProgressEvent("progress",!1,!1,e,t,i)):s={lengthComputable:!0,loaded:t,total:i},s},x=function(e,t,r){var i,s;if(typeof r.progressTotal===n)if(e[t])s=e[t].size,r.progressTotal=s?s:1;else{s=0;for(i=0;i<e.length;i+=1)s+=e[i].size;r.progressTotal=s}return r.progressTotal},T=function(t,n,i,s,o){var u,a,f=0,l=0;t.lengthComputable&&typeof o.onProgressAll===r&&(o.progressLoaded=parseInt(t.loaded/t.total*x(n,i,o),10),a=v.getList(),e.each(a,function(e,t){f+=t[3].progressLoaded||0,l+=x(t[0],t[1],t[3])}),u=S(!0,f,l),o.onProgressAll(u,a))},N=function(e,t,n,i,s){var o;if(E(s)){s.uploadedBytes+=s.chunkSize,o=S(!0,s.uploadedBytes,t[n].size),typeof s.onProgress===r&&s.onProgress(o,t,n,i,s),T(o,t,n,i,s);if(s.uploadedBytes<t[n].size){typeof s.resumeUpload===r?s.resumeUpload(e,t,n,i,s,function(){q(e,t,n,i,s,!0)}):q(e,t,n,i,s,!0);return}}s.progressLoaded=x(t,n,s),typeof s.onLoad===r&&s.onLoad(e,t,n,i,s),g()},C=function(e,t,n,i,s){var o=e;E(s)&&e.lengthComputable&&(o=S(!0,s.uploadedBytes+parseInt(e.loaded/e.total*s.chunkSize,10),t[n].size)),typeof s.onProgress===r&&s.onProgress(o,t,n,i,s),T(o,t,n,i,s)},k=function(e,t,n,i){n.upload&&(n.upload.onprogress=function(r){C(r,e,t,n,i)}),n.onload=function(r){N(r,e,t,n,i)},n.onabort=function(s){i.progressTotal=i.progressLoaded,typeof i.onAbort===r&&i.onAbort(s,e,t,n,i),g()},n.onerror=function(s){i.progressTotal=i.progressLoaded,typeof i.onError===r&&i.onError(s,e,t,n,i),g()}},L=function(e){return typeof e.url===r?e.url(e.uploadForm||a):e.url},A=function(e){return typeof e.method===r?e.method(e.uploadForm||a):e.method},O=function(e){return typeof e.fieldName===r?e.fieldName(e.fileInput||f):e.fieldName},M=function(t){var n;return typeof t.formData===r?t.formData(t.uploadForm||a):e.isArray(t.formData)?t.formData:t.formData?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_=function(t){if(p.test(t)){var n=location.host,r=location.protocol.length+2,i=t.indexOf(n,r),s=i+n.length;return i!==r&&i!==t.indexOf("@",r)+1||t.length!==s&&e.inArray(t.charAt(s),["/","?","#"])===-1?!1:!0}return!0},D=function(t,n,r,i){var s=t[n],o=L(i),u=_(o);r.open(A(i),o,!0);if(u){r.setRequestHeader("X-Requested-With","XMLHttpRequest");if(!i.multipart||E(i))r.setRequestHeader("X-File-Name",s.name),r.setRequestHeader("X-File-Type",s.type),r.setRequestHeader("X-File-Size",s.size),E(i)?i.multipart||r.setRequestHeader("Content-Type","application/octet-stream"):r.setRequestHeader("Content-Type",s.type)}else i.withCredentials&&(r.withCredentials=!0);e.isArray(i.requestHeaders)?e.each(i.requestHeaders,function(e,t){r.setRequestHeader(t.name,t.value)}):i.requestHeaders&&e.each(i.requestHeaders,function(e,t){r.setRequestHeader(e,t)})},P=function(t,n,r){var i=new FormData,s;e.each(M(r),function(e,t){i.append(t.name,t.value)});for(s=0;s<t.length;s+=1)i.append(O(r),t[s]);n.send(i)},H=function(e,t){e.reader=new FileReader,e.reader.onload=t,e.reader.readAsBinaryString(e)},B=function(e){return unescape(encodeURIComponent(e))},j=function(t,n,r,i){var s="--",o="\r\n",u="",a=[];return e.each(i,function(e,n){u+=s+t+o+'Content-Disposition: form-data; name="'+B(n.name)+'"'+o+o+B(n.value)+o}),e.each(n,function(e,n){u+=s+t+o+'Content-Disposition: form-data; name="'+B(r)+'"; filename="'+B(n.name)+'"'+o+"Content-Type: "+B(n.type)+o+o,a.push(u),a.push(n.reader.result),delete n.reader,u=o}),u+=s+t+s+o,a.push(u),a.join("")},F=function(e,t,n){var r="----MultiPartFormBoundary"+(new Date).getTime(),i,s;t.setRequestHeader("Content-Type","multipart/form-data; boundary="+r),i=new o(function(){t.sendAsBinary(j(r,e,O(n),M(n)))},e.length);for(s=0;s<e.length;s+=1)H(e[s],i.complete)},I=function(e,t){var n,i=t.uploadedBytes,s=t.maxChunkSize;return e&&typeof e.slice===r&&(i||s&&s<e.size)?(t.uploadedBytes=i=i||0,n=e.slice(i,s||e.size-i),t.chunkSize=n.size,n):e},q=function(t,i,s,o,u,a){var f;f=function(){if(!a&&typeof u.onSend===r&&u.onSend(t,i,s,o,u)===!1){g();return}var f=I(i[s],u),l;k(i,s,o,u),D(i,s,o,u),u.multipart?(l=typeof s=="number"?[f]:i,typeof FormData!==n?P(l,o,u):typeof FileReader!==n&&typeof o.sendAsBinary===r?F(l,o,u):e.error("Browser does not support multipart/form-data XHR file uploads")):o.upload?o.send(f):e.error("Browser does not support XHR file uploads")};if(!a){v.push(Array.prototype.slice.call(arguments,1));if(u.sequentialUploads){m.push(f);return}}f()},R=function(t,n,i,s,o){var u=new XMLHttpRequest,a=e.extend({},l);a.fileInput=i,a.uploadForm=s,typeof a.initUpload===r?a.initUpload(t,n,o,u,a,function(){q(t,n,o,u,a)}):q(t,n,o,u,a)},U=function(t,r,i,s,o){var u=0,a;typeof i===n?e.each(r,function(e,t){u+=t.size?t.size:1}):u=r[i].size?r[i].size:1,a=S(!0,u,u),o.progressLoaded=u,T(a,r,i,s,o)},z=function(t,n,r){var i=M(r);n.find(":input").not(":disabled").attr("disabled",!0).addClass(r.namespace+"_disabled"),e.each(i,function(t,i){e('<input type="hidden"/>').attr("name",i.name).val(i.value).addClass(r.namespace+"_form_data").appendTo(n)}),t.attr("name",O(r)).appendTo(n)},W=function(e,t,n){e.detach(),t.find("."+n.namespace+"_disabled").removeAttr("disabled").removeClass(n.namespace+"_disabled"),t.find("."+n.namespace+"_form_data").remove()},X=function(t,n,i,s,o,u,a){var f;f=function(){if(typeof u.onSend===r&&u.onSend(t,n,a,o,u)===!1){g();return}var f=s.attr("action"),l=s.attr("method"),c=s.attr("target");o.unbind("abort").bind("abort",function(e){o.readyState=0,o.unbind("load").attr("src","javascript".concat(":false;")),U(e,n,a,o,u),typeof u.onAbort===r&&u.onAbort(e,n,a,o,u),g()}).unbind("load").bind("load",function(t){o.readyState=4,U(t,n,a,o,u),typeof u.onLoad===r&&u.onLoad(t,n,a,o,u),e('<iframe src="javascript:false;" style="display:none;"></iframe>').appendTo(s).remove(),g()}),s.attr("action",L(u)).attr("method",A(u)).attr("target",o.attr("name")),z(i,s,u),o.readyState=2,s.get(0).submit(),W(i,s,u),s.attr("action",f).attr("method",l).attr("target",c)},v.push([n,a,o,u]),u.sequentialUploads?m.push(f):f()},V=function(t,n,i,s){if(!(t&&n&&i)){e.error("Iframe based File Upload requires a file input change event");return}var o=e('<iframe src="javascript:false;" style="display:none;" name="iframe_'+l.namespace+"_"+(new Date).getTime()+'"></iframe>'),u=e.extend({},l),a=t.target&&t.target.files;a=a?Array.prototype.slice.call(a,0):[{name:n.val(),type:null,size:null}],s=a.length===1?0:s,u.fileInput=n,u.uploadForm=i,o.readyState=0,o.abort=function(){o.trigger("abort")},o.bind("load",function(){o.unbind("load"),typeof u.initUpload===r?u.initUpload(t,a,s,o,u,function(){X(t,a,n,i,o,u,s)}):X(t,a,n,i,o,u,s)}).appendTo(i)},J=function(e){var t=0,r=0,i;if(l.multipart&&typeof FormData===n){for(i=0;i<e.length;i+=1){t=e[i].size;if(t>l.maxFileReaderSize)return!1;r+=t}if(l.multiFileRequest&&r>l.maxFileReaderSize)return!1}return!0},K=function(e,t,n,r){if(!J(t)){V(e,n,r);return}var i;t=Array.prototype.slice.call(t,0);if(l.multiFileRequest&&l.multipart&&t.length)R(e,t,n,r);else for(i=0;i<t.length;i+=1)R(e,t,n,r,i)},Q=function(){a=(i.is("form")?i:i.find("form")).filter(l.uploadFormFilter)},G=function(){f=(a.length?a:i).find("input:file").filter(l.fileInputFilter)},Y=function(t){var n=t.clone(!0);e("<form/>").append(n).get(0).reset(),t.after(n).detach(),G()};this.onDocumentDragOver=function(e){if(typeof l.onDocumentDragOver===r&&l.onDocumentDragOver(e)===!1)return!1;e.preventDefault()},this.onDocumentDrop=function(e){if(typeof l.onDocumentDrop===r&&l.onDocumentDrop(e)===!1)return!1;e.preventDefault()},this.onDragOver=function(e){if(typeof l.onDragOver===r&&l.onDragOver(e)===!1)return!1;var t=e.originalEvent.dataTransfer;t&&t.files&&(t.dropEffect=t.effectAllowed="copy",e.preventDefault())},this.onDrop=function(e){if(typeof l.onDrop===r&&l.onDrop(e)===!1)return!1;var t=e.originalEvent.dataTransfer;t&&t.files&&y()&&K(e,t.files),e.preventDefault()},this.onChange=function(n){if(typeof l.onChange===r&&l.onChange(n)===!1)return!1;var i=e(n.target),s=e(n.target.form);s.length===1?(i.data(t+"_form",s),Y(i)):s=i.data(t+"_form"),!l.forceIframeUpload&&n.target.files&&y()?K(n,n.target.files,i,s):V(n,i,s)},this.init=function(t){t&&(e.extend(l,t),d=t),Q(),G();if(i.data(l.namespace)){e.error('FileUpload with namespace "'+l.namespace+'" already assigned to this element');return}i.data(l.namespace,s).addClass(l.cssClass),l.dropZone.not(i).addClass(l.cssClass),b(),typeof l.init===r&&l.init()},this.options=function(t){var r,s,o,u;if(typeof t===n)return e.extend({},l);d&&e.extend(d,t),w(),e.each(t,function(t,n){switch(t){case"namespace":e.error("The FileUpload namespace cannot be updated.");return;case"uploadFormFilter":o=!0,u=!0;break;case"fileInputFilter":u=!0;break;case"cssClass":r=l.cssClass;break;case"dropZone":s=l.dropZone}l[t]=n}),o&&Q(),u&&G(),typeof r!==n?(i.removeClass(r).addClass(l.cssClass),(s?s:l.dropZone).not(i).removeClass(r),l.dropZone.not(i).addClass(l.cssClass)):s&&(s.not(i).removeClass(l.cssClass),l.dropZone.not(i).addClass(l.cssClass)),b()},this.option=function(e,t){var r;if(typeof t===n)return l[e];r={},r[e]=t,s.options(r)},this.destroy=function(){typeof l.destroy===r&&l.destroy(),w(),i.removeData(l.namespace).removeClass(l.cssClass),l.dropZone.not(i).removeClass(l.cssClass)},this.upload=function(e){typeof e.length===n&&(e=[e]),K(null,e)}},s={init:function(t){return this.each(function(){(new i(e(this))).init(t)})},option:function(r,i,s){s=s?s:t;var o=e(this).data(s);if(o){if(!r)return o.options();if(typeof r=="string"&&typeof i===n)return o.option(r)}else e.error('No FileUpload with namespace "'+s+'" assigned to this element');return this.each(function(){var t=e(this).data(s);t?typeof r=="string"?t.option(r,i):t.options(r):e.error('No FileUpload with namespace "'+s+'" assigned to this element')})},destroy:function(n){return n=n?n:t,this.each(function(){var t=e(this).data(n);t?t.destroy():e.error('No FileUpload with namespace "'+n+'" assigned to this element')})},upload:function(n,r){return r=r?r:t,this.each(function(){var t=e(this).data(r);t?t.upload(n):e.error('No FileUpload with namespace "'+r+'" assigned to this element')})}},e.fn.fileUpload=function(t){if(s[t])return s[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return s.init.apply(this,arguments);e.error('Method "'+t+'" does not exist on jQuery.fileUpload')}}(jQuery),function(e){"use strict";var t="undefined",n="function",r,i,s=function(e){var t=0,n=[];this.complete=function(){t+=1,t===n.length+1&&(e(n),t=0,n=[])},this.push=function(e){n.push(e)},this.getList=function(){return n}};r=function(r,i){var o=this,u,a,f=new s(function(e){o.hideProgressBarAll(function(){o.resetProgressBarAll(),typeof o.onCompleteAll===n&&o.onCompleteAll(e)})}),l=function(e){return typeof e.uploadTable===n?e.uploadTable(e):e.uploadTable},c=function(e){return typeof e.downloadTable===n?e.downloadTable(e):e.downloadTable};this.requestHeaders={Accept:"application/json, text/javascript, */*; q=0.01"},this.dropZone=r,this.imageTypes=/^image\/(gif|jpeg|png)$/,this.previewMaxWidth=this.previewMaxHeight=80,this.previewLoadDelay=100,this.previewAsCanvas=!0,this.previewSelector=".file_upload_preview",this.progressSelector=".file_upload_progress div",this.cancelSelector=".file_upload_cancel button",this.cssClassSmall="file_upload_small",this.cssClassLarge="file_upload_large",this.cssClassHighlight="file_upload_highlight",this.dropEffect="highlight",this.uploadTable=this.downloadTable=null,this.buildUploadRow=this.buildDownloadRow=null,this.progressAllNode=null,this.loadImage=function(e,r,i,s,o,u){var a,f,l,c;if(o&&!o.test(e.type))return null;f=function(e){var t=document.createElement("canvas"),r=Math.min((i||e.width)/e.width,(s||e.height)/e.height);return r>1&&(r=1),e.width=parseInt(e.width*r,10),e.height=parseInt(e.height*r,10),u||typeof t.getContext!==n?e:(t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height),t)},a=document.createElement("img"),l=typeof URL!==t?URL:typeof webkitURL!==t?webkitURL:null,l&&typeof l.createObjectURL===n?(a.onload=function(){l.revokeObjectURL(this.src),r(f(a))},a.src=l.createObjectURL(e)):typeof FileReader!==t&&typeof FileReader.prototype.readAsDataURL===n?(a.onload=function(){r(f(a))},c=new FileReader,c.onload=function(e){a.src=e.target.result},c.readAsDataURL(e)):r(null)},this.addNode=function(e,t,r){e&&e.length&&t&&t.length?t.css("display","none").appendTo(e).fadeIn(function(){if(typeof r===n)try{r()}catch(e){throw t.stop(),e}}):typeof r===n&&r()},this.removeNode=function(e,t){e&&e.length?e.fadeOut(function(){e.remove();if(typeof t===n)try{t()}catch(r){throw e.stop(),r}}):typeof t===n&&t()},this.replaceNode=function(e,t,r){e&&t?e.fadeOut(function(){t.css("display","none"),e.replaceWith(t),t.fadeIn(function(){if(typeof r===n)try{r()}catch(i){throw e.stop(),t.stop(),i}})}):typeof r===n&&r()},this.resetProgressBarAll=function(){o.progressbarAll&&o.progressbarAll.progressbar("value",0)},this.hideProgressBarAll=function(t){o.progressbarAll&&!e(l(o)).find(o.progressSelector+":visible:first").length?o.progressbarAll.fadeOut(t):typeof t===n&&t()},this
.onAbort=function(e,t,n,r,i){i.removeNode(i.uploadRow,i.hideProgressBarAll)},this.cancelUpload=function(e,t,n,r,i){var s=r.readyState;r.abort(),(typeof s!="number"||s<2)&&i.onAbort(e,t,n,r,i)},this.initProgressBar=function(t,r){return!t||!t.length?null:typeof t.progressbar===n?t.progressbar({value:r}):(t.addClass("progressbar").append(e("<div/>").css("width",r+"%")).progressbar=function(t,n){return this.each(function(){t==="destroy"?e(this).removeClass("progressbar").empty():e(this).children().css("width",n+"%")})},t)},this.destroyProgressBar=function(e){return!e||!e.length?null:e.progressbar("destroy")},this.initUploadProgress=function(e,t){!e.upload&&t.progressbar&&t.progressbar.progressbar("value",100)},this.initUploadProgressAll=function(){o.progressbarAll&&o.progressbarAll.is(":hidden")&&o.progressbarAll.fadeIn()},this.onSend=function(e,t,n,r,i){i.initUploadProgress(r,i)},this.onProgress=function(e,t,n,r,i){i.progressbar&&e.lengthComputable&&i.progressbar.progressbar("value",parseInt(e.loaded/e.total*100,10))},this.onProgressAll=function(e,t){o.progressbarAll&&e.lengthComputable&&o.progressbarAll.progressbar("value",parseInt(e.loaded/e.total*100,10))},this.onLoadAll=function(e){f.complete()},this.initProgressBarAll=function(){o.progressbarAll||(o.progressbarAll=o.initProgressBar(typeof o.progressAllNode===n?o.progressAllNode(o):o.progressAllNode,0))},this.destroyProgressBarAll=function(){o.destroyProgressBar(o.progressbarAll)},this.loadPreviewImage=function(t,n,r){n=n||0,r.uploadRow.find(r.previewSelector).each(function(){var i=e(this),s=t[n];setTimeout(function(){r.loadImage(s,function(t){r.addNode(i,e(t))},r.previewMaxWidth,r.previewMaxHeight,r.imageTypes,!r.previewAsCanvas)},r.previewLoadDelay),n+=1})},this.initUploadRow=function(e,t,r,i,s){var o=s.uploadRow=typeof s.buildUploadRow===n?s.buildUploadRow(t,r,s):null;o&&(s.progressbar=s.initProgressBar(o.find(s.progressSelector),0),o.find(s.cancelSelector).click(function(e){s.cancelUpload(e,t,r,i,s),e.preventDefault()}),s.loadPreviewImage(t,r,s))},this.initUpload=function(e,t,r,i,s,o){s.initUploadRow(e,t,r,i,s),s.addNode(l(s),s.uploadRow,function(){typeof s.beforeSend===n?s.beforeSend(e,t,r,i,s,o):o()}),s.initUploadProgressAll()},this.parseResponse=function(n,r){return typeof n.responseText!==t?e.parseJSON(n.responseText):e.parseJSON(n.contents().text())},this.initDownloadRow=function(e,t,r,i,s){var o,u;try{o=s.response=s.parseResponse(i,s)}catch(a){if(typeof s.onError!==n)throw a;s.originalEvent=e,s.onError(a,t,r,i,s)}u=s.downloadRow=typeof s.buildDownloadRow===n?s.buildDownloadRow(o,s):null},this.onLoad=function(e,t,r,i,s){var o=l(s),u=c(s),a=function(){typeof s.onComplete===n&&s.onComplete(e,t,r,i,s),f.complete()};f.push(Array.prototype.slice.call(arguments,1)),s.initDownloadRow(e,t,r,i,s),o&&(!u||o.get(0)===u.get(0))?s.replaceNode(s.uploadRow,s.downloadRow,a):s.removeNode(s.uploadRow,function(){s.addNode(u,s.downloadRow,a)})},this.dropZoneEnlarge=function(){a||(typeof o.dropZone.switchClass===n?o.dropZone.switchClass(o.cssClassSmall,o.cssClassLarge):(o.dropZone.addClass(o.cssClassLarge),o.dropZone.removeClass(o.cssClassSmall)),a=!0)},this.dropZoneReduce=function(){typeof o.dropZone.switchClass===n?o.dropZone.switchClass(o.cssClassLarge,o.cssClassSmall):(o.dropZone.addClass(o.cssClassSmall),o.dropZone.removeClass(o.cssClassLarge)),a=!1},this.onDocumentDragEnter=function(e){o.dropZoneEnlarge()},this.onDocumentDragOver=function(e){u&&clearTimeout(u),u=setTimeout(function(){o.dropZoneReduce()},200)},this.onDragEnter=this.onDragLeave=function(e){o.dropZone.toggleClass(o.cssClassHighlight)},this.onDrop=function(e){u&&clearTimeout(u),o.dropEffect&&typeof o.dropZone.effect===n?o.dropZone.effect(o.dropEffect,function(){o.dropZone.removeClass(o.cssClassHighlight),o.dropZoneReduce()}):(o.dropZone.removeClass(o.cssClassHighlight),o.dropZoneReduce())},this.init=function(){o.initProgressBarAll(),typeof o.initExtended===n&&o.initExtended()},this.destroy=function(){typeof o.destroyExtended===n&&o.destroyExtended(),o.destroyProgressBarAll()},e.extend(this,i)},i={init:function(t){return this.each(function(){e(this).fileUpload(new r(e(this),t))})},option:function(n,r,i){return!n||typeof n=="string"&&typeof r===t?e(this).fileUpload("option",n,r,i):this.each(function(){e(this).fileUpload("option",n,r,i)})},destroy:function(t){return this.each(function(){e(this).fileUpload("destroy",t)})},upload:function(t,n){return this.each(function(){e(this).fileUpload("upload",t,n)})}},e.fn.fileUploadUI=function(t){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return i.init.apply(this,arguments);e.error('Method "'+t+'" does not exist on jQuery.fileUploadUI')}}(jQuery),$(document).ready(function(){$(".boxgrid.captionfull").hover(function(){$(".cover",this).stop().animate({top:"61px"},{queue:!1,duration:160})},function(){$(".cover",this).stop().animate({top:"104px"},{queue:!1,duration:160})})});var Kinetic={};Kinetic.GlobalObject={stages:[],idCounter:0,isAnimating:!1,frame:{time:0,timeDiff:0,lastTime:0},extend:function(e,t){for(var n in t.prototype)t.prototype.hasOwnProperty(n)&&(e.prototype[n]=t.prototype[n])},_isaCanvasAnimating:function(){for(var e=0;e<this.stages.length;e++)if(this.stages[e].isAnimating)return!0;return!1},_runFrames:function(){for(var e=0;e<this.stages.length;e++)this.stages[e].isAnimating&&this.stages[e].onFrameFunc(this.frame)},_updateFrameObject:function(){var e=new Date,t=e.getTime();this.frame.lastTime===0?this.frame.lastTime=t:(this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff)},_animationLoop:function(){if(this.isAnimating){this._updateFrameObject(),this._runFrames();var e=this;requestAnimFrame(function(){e._animationLoop()})}},_handleAnimation:function(){var e=this;!this.isAnimating&&this._isaCanvasAnimating()?(this.isAnimating=!0,e._animationLoop()):this.isAnimating&&!this._isaCanvasAnimating()&&(this.isAnimating=!1)}},window.requestAnimFrame=function(e){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),Kinetic.Node=function(e){this.visible=!0,this.isListening=!0,this.name=undefined,this.alpha=1,this.x=0,this.y=0,this.scale={x:1,y:1},this.rotation=0,this.centerOffset={x:0,y:0},this.eventListeners={},this.drag={x:!1,y:!1,moving:!1};if(e)for(var t in e)t==="draggable"?this.draggable(e[t]):t==="draggableX"?this.draggableX(e[t]):t==="draggableY"?this.draggableY(e[t]):t==="listen"?this.listen(e[t]):this[t]=e[t]},Kinetic.Node.prototype={on:function(e,t){var n=e.split(" ");for(var r=0;r<n.length;r++){var i=n[r],s=i.indexOf("touch")===-1?"on"+i:i,o=s.split("."),u=o[0],a=o.length>1?o[1]:"";this.eventListeners[u]||(this.eventListeners[u]=[]),this.eventListeners[u].push({name:a,handler:t})}},off:function(e){var t=e.split(" ");for(var n=0;n<t.length;n++){var r=t[n],i=r.indexOf("touch")===-1?"on"+r:r,s=i.split("."),o=s[0];if(this.eventListeners[o]&&s.length>1){var u=s[1];for(var a=0;a<this.eventListeners[o].length;a++)if(this.eventListeners[o][a].name===u){this.eventListeners[o].splice(a,1),this.eventListeners[o].length===0&&(this.eventListeners[o]=undefined);break}}else this.eventListeners[o]=undefined}},show:function(){this.visible=!0},hide:function(){this.visible=!1},getZIndex:function(){return this.index},setScale:function(e,t){t?(this.scale.x=e,this.scale.y=t):(this.scale.x=e,this.scale.y=e)},getScale:function(){return this.scale},setPosition:function(e,t){this.x=e,this.y=t},getPosition:function(){return{x:this.x,y:this.y}},getAbsolutePosition:function(){var e=this.x,t=this.y,n=this.getParent();while(n.className!=="Stage")e+=n.x,t+=n.y,n=n.parent;return{x:e,y:t}},move:function(e,t){this.x+=e,this.y+=t},setRotation:function(e){this.rotation=e},getRotation:function(){return this.rotation},rotate:function(e){this.rotation+=e},listen:function(e){this.isListening=e},moveToTop:function(){var e=this.index;this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices()},moveUp:function(){var e=this.index;this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices()},moveDown:function(){var e=this.index;e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices())},moveToBottom:function(){var e=this.index;this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices()},setZIndex:function(e){var t=this.index;this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices()},setAlpha:function(e){this.alpha=e},getAlpha:function(){return this.alpha},getAbsoluteAlpha:function(){var e=1,t=this;while(t.className!=="Stage")e*=t.alpha,t=t.parent;return e},_initDrag:function(){var e=this;this.on("mousedown.initdrag touchstart.initdrag",function(t){var n=e.getStage(),r=n.getUserPosition();r&&(n.nodeDragging=e,n.nodeDragging.offset={},n.nodeDragging.offset.x=r.x-e.x,n.nodeDragging.offset.y=r.y-e.y)})},_dragCleanup:function(){!this.drag.x&&!this.drag.y&&(this.off("mousedown.initdrag"),this.off("touchstart.initdrag"))},draggable:function(e){if(e){var t=!this.drag.x&&!this.drag.y;this.drag.x=!0,this.drag.y=!0,t&&this._initDrag()}else this.drag.x=!1,this.drag.y=!1,this._dragCleanup()},draggableX:function(e){if(e){var t=!this.drag.x&&!this.drag.y;this.drag.x=!0,t&&this._initDrag()}else this.drag.x=!1,this._dragCleanup()},draggableY:function(e){if(e){var t=!this.drag.x&&!this.drag.y;this.drag.y=!0,t&&this._initDrag()}else this.drag.y=!1,this._dragCleanup()},isDragging:function(){return this.drag.moving},_handleEvents:function(e,t){function n(r){var i=r.eventListeners;if(i[e]){var s=i[e];for(var o=0;o<s.length;o++)s[o].handler.apply(r,[t])}r.parent.className!=="Stage"&&n(r.parent)}n(this)},moveTo:function(e){var t=this.parent;t.children.splice(this.index,1),t._setChildrenIndices(),e.children.push(this),this.index=e.children.length-1,this.parent=e,e._setChildrenIndices(),this.name&&(t.childrenNames[this.name]=undefined,e.childrenNames[this.name]=this)},getParent:function(){return this.parent},getLayer:function(){return this.className==="Layer"?this:this.getParent().getLayer()},getStage:function(){return this.getParent().getStage()},getName:function(){return this.name}},Kinetic.Container=function(){this.children=[],this.childrenNames={}},Kinetic.Container.prototype={_setChildrenIndices:function(){if(this.className==="Stage"){var e=this.container.childNodes,t=e[0],n=e[1];this.container.innerHTML="",this.container.appendChild(t),this.container.appendChild(n)}for(var r=0;r<this.children.length;r++)this.children[r].index=r,this.className==="Stage"&&this.container.appendChild(this.children[r].canvas)},_drawChildren:function(){var e=this.children;for(var t=0;t<e.length;t++){var n=e[t];n.className==="Shape"?n._draw(n.getLayer()):n._draw()}},getChildren:function(){return this.children},getChild:function(e){return this.childrenNames[e]},_add:function(e){e.name&&(this.childrenNames[e.name]=e),e.id=Kinetic.GlobalObject.idCounter++,e.index=this.children.length,e.parent=this,this.children.push(e)},_remove:function(e){e.name!==undefined&&(this.childrenNames[e.name]=undefined),this.children.splice(e.index,1),this._setChildrenIndices(),e=undefined}},Kinetic.Stage=function(e,t,n){this.className="Stage",this.container=typeof e=="string"?document.getElementById(e):e,this.width=t,this.height=n,this.scale={x:1,y:1},this.dblClickWindow=400,this.targetShape=undefined,this.clickStart=!1,this.mousePos=undefined,this.mouseDown=!1,this.mouseUp=!1,this.touchPos=undefined,this.touchStart=!1,this.touchEnd=!1,this.bufferLayer=new Kinetic.Layer,this.backstageLayer=new Kinetic.Layer,this.bufferLayer.parent=this,this.backstageLayer.parent=this;var r=this.backstageLayer;this._stripLayer(r),this.bufferLayer.getCanvas().style.display="none",this.backstageLayer.getCanvas().style.display="none",this.bufferLayer.canvas.width=this.width,this.bufferLayer.canvas.height=this.height,this.container.appendChild(this.bufferLayer.canvas),this.backstageLayer.canvas.width=this.width,this.backstageLayer.canvas.height=this.height,this.container.appendChild(this.backstageLayer.canvas),this._listen(),this._prepareDrag();var i=Kinetic.GlobalObject.stages;i.push(this),this.id=Kinetic.GlobalObject.idCounter++,this.isAnimating=!1,this.onFrameFunc=undefined,Kinetic.Container.apply(this,[])},Kinetic.Stage.prototype={onFrame:function(e){this.onFrameFunc=e},start:function(){this.isAnimating=!0,Kinetic.GlobalObject._handleAnimation()},stop:function(){this.isAnimating=!1,Kinetic.GlobalObject._handleAnimation()},draw:function(){this._drawChildren()},_stripLayer:function(e){e.context.stroke=function(){},e.context.fill=function(){},e.context.fillRect=function(t,n,r,i){e.context.rect(t,n,r,i)},e.context.strokeRect=function(t,n,r,i){e.context.rect(t,n,r,i)},e.context.drawImage=function(){},e.context.fillText=function(){},e.context.strokeText=function(){}},_endDrag:function(e){this.nodeDragging&&this.nodeDragging.drag.moving&&(this.nodeDragging.drag.moving=!1,this.nodeDragging._handleEvents("ondragend",e)),this.nodeDragging=undefined},_prepareDrag:function(){var e=this;this.on("mousemove touchmove",function(t){if(e.nodeDragging){var n=e.getUserPosition();e.nodeDragging.drag.x&&(e.nodeDragging.x=n.x-e.nodeDragging.offset.x),e.nodeDragging.drag.y&&(e.nodeDragging.y=n.y-e.nodeDragging.offset.y),e.nodeDragging.getLayer().draw(),e.nodeDragging.drag.moving||(e.nodeDragging.drag.moving=!0,e.nodeDragging._handleEvents("ondragstart",t)),e.nodeDragging._handleEvents("ondragmove",t)}},!1),this.on("mouseup touchend mouseout",function(t){e._endDrag(t)})},setSize:function(e,t){var n=this.children;for(var r=0;r<n.length;r++){var i=n[r];i.getCanvas().width=e,i.getCanvas().height=t,i.draw()}this.width=e,this.height=t,this.bufferLayer.getCanvas().width=e,this.bufferLayer.getCanvas().height=t,this.backstageLayer.getCanvas().width=e,this.backstageLayer.getCanvas().height=t},setScale:function(e,t){function o(e){for(var t=0;t<e.length;t++){var i=e[t];i.x*=s.scale.x/n,i.y*=s.scale.y/r,i.children&&o(i.children)}}var n=this.scale.x,r=this.scale.y;t?(this.scale.x=e,this.scale.y=t):(this.scale.x=e,this.scale.y=e);var i=this.children,s=this;o(i)},getScale:function(){return this.scale},clear:function(){var e=this.children;for(var t=0;t<e.length;t++)e[t].clear()},toDataURL:function(e){function i(s){var o=r[s].getCanvas().toDataURL(),u=new Image;u.onload=function(){n.drawImage(this,0,0),s++,s<r.length?i(s):e(t.getCanvas().toDataURL())},u.src=o}var t=this.bufferLayer,n=t.getContext(),r=this.children;t.clear(),i(0)},remove:function(e){this.container.removeChild(e.canvas),this._remove(e)},on:function(e,t){var n=e.split(" ");for(var r=0;r<n.length;r++){var i=n[r];this.container.addEventListener(i,t,!1)}},add:function(e){e.name&&(this.childrenNames[e.name]=e),e.canvas.width=this.width,e.canvas.height=this.height,this._add(e),e.draw(),this.container.appendChild(e.canvas)},_handleEvent:function(e){function s(s){s._draw(t);var o=r.getUserPosition(),u=s.eventListeners;r.targetShape&&s.id===r.targetShape.id&&(i=!0);if(s.visible&&o!==undefined&&n.isPointInPath(o.x,o.y)){if(r.mouseDown)return r.mouseDown=!1,r.clickStart=!0,s._handleEvents("onmousedown",e),!0;if(r.mouseUp)return r.mouseUp=!1,s._handleEvents("onmouseup",e),r.clickStart&&(r.nodeDragging&&!r.nodeDragging.drag.moving||!r.nodeDragging)&&(s._handleEvents("onclick",e),s.inDoubleClickWindow&&s._handleEvents("ondblclick",e),s.inDoubleClickWindow=!0,setTimeout(function(){s.inDoubleClickWindow=!1},r.dblClickWindow)),!0;if(r.touchStart){r.touchStart=!1,s._handleEvents("touchstart",e);if(u.ondbltap&&s.inDoubleClickWindow){var a=u.ondbltap;for(var f=0;f<a.length;f++)a[f].handler.apply(s,[e])}return s.inDoubleClickWindow=!0,setTimeout(function(){s.inDoubleClickWindow=!1},r.dblClickWindow),!0}if(r.touchEnd)return r.touchEnd=!1,s._handleEvents("touchend",e),!0;if(u.touchmove)return s._handleEvents("touchmove",e),!0;if(!r.targetShape||!i&&s.id!==r.targetShape.id){if(r.targetShape){var l=r.targetShape.eventListeners;l&&r.targetShape._handleEvents("onmouseout",e)}return r.targetShape=s,s._handleEvents("onmouseover",e),!0}return s._handleEvents("onmousemove",e),!0}return r.targetShape&&r.targetShape.id===s.id?(r.targetShape=undefined,s._handleEvents("onmouseout",e),!0):!1}function o(e){var t=e.children;for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.className==="Shape"){var i=s(r);if(i)return!0}else o(r)}return!1}e||(e=window.event),this._setMousePosition(e),this._setTouchPosition(e);var t=this.backstageLayer,n=t.getContext(),r=this;t.clear();var i=!1;for(var u=this.children.length-1;u>=0;u--){var a=this.children[u];a.visible&&u>=0&&a.isListening&&o(a)&&(u=-1)}},_listen:function(){var e=this;this.container.addEventListener("mousedown",function(t){e.mouseDown=!0,e._handleEvent(t)},!1),this.container.addEventListener("mousemove",function(t){e.mouseUp=!1,e.mouseDown=!1,e._handleEvent(t)},!1),this.container.addEventListener("mouseup",function(t){e.mouseUp=!0,e.mouseDown=!1,e._handleEvent(t),e.clickStart=!1},!1),this.container.addEventListener("mouseover",function(t){e._handleEvent(t)},!1),this.container.addEventListener("mouseout",function(t){e.mousePos=undefined},!1),this.container.addEventListener("touchstart",function(t){t.preventDefault(),e.touchStart=!0,e._handleEvent(t)},!1),this.container.addEventListener("touchmove",function(t){t.preventDefault(),e._handleEvent(t)},!1),this.container.addEventListener("touchend",function(t){t.preventDefault(),e.touchEnd=!0,e._handleEvent(t)},!1)},getMousePosition:function(e){return this.mousePos},getTouchPosition:function(e){return this.touchPos},getUserPosition:function(e){return this.getTouchPosition()||this.getMousePosition()},_setMousePosition:function(e){var t=e.clientX-this._getContainerPosition().left+window.pageXOffset,n=e.clientY-this._getContainerPosition().top+window.pageYOffset;this.mousePos={x:t,y:n}},_setTouchPosition:function(e){if(e.touches!==undefined&&e.touches.length===1){var t=e.touches[0],n=t.clientX-this._getContainerPosition().left+window.pageXOffset,r=t.clientY-this._getContainerPosition().top+window.pageYOffset;this.touchPos={x:n,y:r}}},_getContainerPosition:function(){var e=this.container,t=0,n=0;while(e&&e.tagName!=="BODY")t+=e.offsetTop,n+=e.offsetLeft,e=e.offsetParent;return{top:t,left:n}},getContainer:function(){return this.container},getStage:function(){return this},getTargetShape:function(){return this.targetShape}},Kinetic.GlobalObject.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Layer=function(e){this.className="Layer",this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.style.position="absolute",Kinetic.Container.apply(this,[]),Kinetic.Node.apply(this,[e])},Kinetic.Layer.prototype={draw:function(){this._draw()},_draw:function(){this.clear(),this.visible&&this._drawChildren()},clear:function(){var e=this.getContext(),t=this.getCanvas();e.clearRect(0,0,t.width,t.height)},getCanvas:function(){return this.canvas},getContext:function(){return this.context},add:function(e){this._add(e)},remove:function(e){this._remove(e)}},Kinetic.GlobalObject.extend(Kinetic.Layer,Kinetic.Container),Kinetic.GlobalObject.extend(Kinetic.Layer,Kinetic.Node),Kinetic.Group=function(e){this.className="Group",Kinetic.Container.apply(this,[]),Kinetic.Node.apply(this,[e])},Kinetic.Group.prototype={_draw:function(){this.visible&&this._drawChildren()},add:function(e){this._add(e)},remove:function(e){this._remove(e)}},Kinetic.GlobalObject.extend(Kinetic.Group,Kinetic.Container),Kinetic.GlobalObject.extend(Kinetic.Group,Kinetic.Node),Kinetic.Shape=function(e){this.className="Shape",this.drawFunc=e.drawFunc,this.fill=e.fill,this.stroke=e.stroke,this.strokeWidth=e.strokeWidth,Kinetic.Node.apply(this,[e])},Kinetic.Shape.prototype={getContext:function(){return this.tempLayer.getContext()},getCanvas:function(){return this.tempLayer.getCanvas()},_draw:function(e){if(this.visible){var t=e.getStage(),n=e.getContext(),r=[];r.unshift(this);var i=this.parent;while(i.className!=="Stage")r.unshift(i),i=i.parent;for(var s=0;s<r.length;s++){var o=r[s];n.save(),(o.x!==0||o.y!==0)&&n.translate(o.x,o.y),(o.centerOffset.x!==0||o.centerOffset.y!==0)&&n.translate(o.centerOffset.x,o.centerOffset.y),o.rotation!==0&&n.rotate(o.rotation),(o.scale.x!==1||o.scale.y!==1)&&n.scale(o.scale.x,o.scale.y),(o.centerOffset.x!==0||o.centerOffset.y!==0)&&n.translate(-1*o.centerOffset.x,-1*o.centerOffset.y),o.getAbsoluteAlpha()!==1&&(n.globalAlpha=o.getAbsoluteAlpha())}n.save(),t&&(t.scale.x!==1||t.scale.y!==1)&&n.scale(t.scale.x,t.scale.y),this.tempLayer=e,this.drawFunc.call(this);for(var u=0;u<r.length;u++)n.restore();n.restore()}}},Kinetic.GlobalObject.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Geometry=function(e){this.fill=e.fill,this.stroke=e.stroke,this.strokeWidth=e.strokeWidth,Kinetic.Shape.apply(this,[e])},Kinetic.Geometry.prototype={_fillStroke:function(){var e=this.getContext();this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.lineWidth=this.strokeWidth===undefined?1:this.strokeWidth,e.strokeStyle=this.stroke,e.stroke())},setFill:function(e){this.fill=e},getFill:function(){return this.fill},setStroke:function(e){this.stroke=e},getStroke:function(){return this.stroke},setStrokeWidth:function(e){this.strokeWidth=e},getStrokeWidth:function(){return this.strokeWidth}},Kinetic.GlobalObject.extend(Kinetic.Geometry,Kinetic.Shape),Kinetic.Rect=function(e){this.width=e.width,this.height=e.height,e.drawFunc=function(){var e=this.getCanvas(),t=this.getContext();t.beginPath(),t.rect(0,0,this.width,this.height),t.closePath(),this._fillStroke()},Kinetic.Geometry.apply(this,[e])},Kinetic.Rect.prototype={setWidth:function(e){this.width=e},getWidth:function(){return this.width},setHeight:function(e){this.height=e},getHeight:function(){return this.height},setSize:function(e,t){this.width=e,this.height=t}},Kinetic.GlobalObject.extend(Kinetic.Rect,Kinetic.Geometry),Kinetic.Circle=function(e){this.radius=e.radius,e.drawFunc=function(){var e=this.getCanvas(),t=this.getContext();t.beginPath(),t.arc(0,0,this.radius,0,Math.PI*2,!0),t.closePath(),this._fillStroke()},Kinetic.Geometry.apply(this,[e])},Kinetic.Circle.prototype={setRadius:function(e){this.radius=e},getRadius:function(){return this.radius}},Kinetic.GlobalObject.extend(Kinetic.Circle,Kinetic.Geometry),Kinetic.Image=function(e){this.image=e.image,this.width=e.width!==undefined?e.width:e.image.width,this.height=e.height!==undefined?e.height:e.image.height,e.drawFunc=function(){var e=this.getCanvas(),t=this.getContext();t.beginPath(),t.rect(0,0,this.width,this.height),t.closePath(),this._fillStroke(),t.drawImage(this.image,0,0,this.width,this.height)},Kinetic.Geometry.apply(this,[e])},Kinetic.Image.prototype={setImage:function(e){this.image=e},getImage:function(e){return this.image},setWidth:function(e){this.width=e},getWidth:function(){return this.width},setHeight:function(e){this.height=e},getHeight:function(){return this.height},setSize:function(e,t){this.width=e,this.height=t}},Kinetic.GlobalObject.extend(Kinetic.Image,Kinetic.Geometry),Kinetic.Polygon=function(e){this.points=e.points,e.drawFunc=function(){var e=this.getContext();e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y);for(var t=1;t<this.points.length;t++)e.lineTo(this.points[t].x,this.points[t].y);e.closePath(),this._fillStroke()},Kinetic.Geometry.apply(this,[e])},Kinetic.GlobalObject.extend(Kinetic.Polygon,Kinetic.Geometry),Kinetic.RegularPolygon=function(e){this.points=e.points,this.radius=e.radius,this.sides=e.sides,e.drawFunc=function(){var t=this.getContext();t.beginPath(),t.moveTo(0,0-this.radius);for(var n=1;n<e.sides;n++){var r=this.radius*Math.sin(n*2*Math.PI/this.sides),i=-1*this.radius*Math.cos(n*2*Math.PI/this.sides);t.lineTo(r,i)}t.closePath(),this._fillStroke()},Kinetic.Geometry.apply(this,[e])},Kinetic.RegularPolygon.prototype={setPoints:function(e){this.points=e},getPoints:function(){return this.points},setRadius:function(e){this.radius=e},getRadius:function(){return this.radius},setSides:function(e){this.sides=e},getSides:function(){return this.sides}},Kinetic.GlobalObject.extend(Kinetic.RegularPolygon,Kinetic.Geometry),Kinetic.Star=function(e){this.points=e.points,this.outerRadius=e.outerRadius,this.innerRadius=e.innerRadius,e.drawFunc=function(){var t=this.getContext();t.beginPath(),t.moveTo(0,0-this.outerRadius);for(var n=1;n<e.points*2;n++){var r=n%2===0?this.outerRadius:this.innerRadius,i=r*Math.sin(n*Math.PI/this.points),s=-1*r*Math.cos(n*Math.PI/this.points);t.lineTo(i,s)}t.closePath(),this._fillStroke()},Kinetic.Geometry.apply(this,[e])},Kinetic.Star.prototype={setPoints:function(e){this.points=e},getPoints:function(){return this.points},setOuterRadius:function(e){this.outerRadius=e},getOuterRadius:function(){return this.outerRadius},setInnerRadius:function(e){this.innerRadius=e},getInnerRadius:function(){return this.innerRadius}},Kinetic.GlobalObject.extend(Kinetic.Star,Kinetic.Geometry);var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.Actor=function(e){if(!e)throw"No arguments passed to the function";this.id=e.id,this.name=e.name,this.grid=e.grid,this.extraInfo=e.extraInfo?e.extraInfo:undefined,this.opacity=this.grid.maxOpacity||1,this._focused=!1,this._selected=!1,this._hidden=!0,this._filtered=!1,this.fading="none",this.parents=[],e.parent&&this.parents.push(e.parent);var t=this,n=t.getDiv();n.addEventListener("mouseover",function(){var e;t.focus();if(!t.isOrphan())for(var n in t.parents)e=t.parents[n].parent,e.focus(),e.colorHandler("mouseover"),t.parents[n].colorHandler("mouseover")},!1),n.addEventListener("mouseout",function(){var e;t.unfocus();if(!t.isOrphan())for(var n in t.parents)e=t.parents[n].parent,e.unfocus(),e.colorHandler("mouseout"),t.parents[n].colorHandler("mouseout")},!1),n.addEventListener("click",function(){var e;t.isSelected()?t.unselect():(t.select(),t.unfocus())},!1)},socialCheesecake.Actor.prototype.getParentsIds=function(){var e=this.parents,t=[];for(var n in e)t.push(e[n].id);return t},socialCheesecake.Actor.prototype.addClass=function(e){var t=this.getDiv(),n="",r=new RegExp("(^|\\s)"+e+"($|\\s)");t.getAttribute("class")?(n=t.getAttribute("class"),n.match(r)||(n=n.concat(" "+e),t.setAttribute("class",n))):(n=e,t.setAttribute("class",n))},socialCheesecake.Actor.prototype.removeClass=function(e){var t=this.getDiv(),n="",r=new RegExp("(^|\\s)"+e+"($|\\s)");t.getAttribute("class")&&(n=t.getAttribute("class"),n.match(r)&&(r=new RegExp("(^|\\s)"+e),n=t.getAttribute("class").replace(r,""),t.setAttribute("class",n)))},socialCheesecake.Actor.prototype.isSelected=function(){return this._selected},socialCheesecake.Actor.prototype.select=function(){this._selected=!0,this.addClass("selected")},socialCheesecake.Actor.prototype.unselect=function(){this._selected=!1,this.removeClass("selected")},socialCheesecake.Actor.prototype.focus=function(){this._focused=!0,this.addClass("focused")},socialCheesecake.Actor.prototype.unfocus=function(){this._focused=!1,this.removeClass("focused")},socialCheesecake.Actor.prototype.isFocused=function(){var e=this,t=this.getCheesecake().grid.divIdPrefix;return this._focused},socialCheesecake.Actor.prototype.isOrphan=function(){var e=this,t=!1;return e.parents.length<1&&(t=!0),t},socialCheesecake.Actor.prototype.hide=function(){var e=this.getDiv(),t=" display: none;";this._hidden=!0,e.getAttribute("style")&&(e.getAttribute("style").match(/display\s*:\s*[a-z]*;/)?t=e.getAttribute("style").replace(/display\s*:\s*[a-z]*;/,"display: none;"):t=e.getAttribute("style").concat("display: none;")),e.setAttribute("style",t),this.fading="none"},socialCheesecake.Actor.prototype.show=function(){var e=this.getDiv(),t=" display: inline;";if(this.isFiltered())return;this._hidden=!1,e.getAttribute("style")&&(e.getAttribute("style").match(/display\s*:\s*[a-z]*;/)?t=e.getAttribute("style").replace(/display\s*:\s*[a-z]*;/,"display: inline;"):t=e.getAttribute("style").concat("display: inline;")),e.setAttribute("style",t)},socialCheesecake.Actor.prototype.isHidden=function(){return this._hidden},socialCheesecake.Actor.prototype.isFiltered=function(){return this._filtered},socialCheesecake.Actor.prototype.isVisible=function(){return!this.isHidden()&&!this.isFiltered()},socialCheesecake.Actor.prototype.filter=function(){this._filtered=!0,this.fadeOut(100,!0)},socialCheesecake.Actor.prototype.unfilter=function(){this._filtered=!1},socialCheesecake.Actor.prototype.setDivOpacity=function(e){e=e>1?1:e,e=e<0?0:e;var t=this,n=this.getDiv();this.opacity=e;var r="opacity: "+this.opacity+";";n.getAttribute("style")&&(r=n.getAttribute("style").replace(/opacity\s*:\s*[a-zA-Z0-9.]*;/g,""),r=r.concat("opacity: "+this.opacity+";")),n.setAttribute("style",r)},socialCheesecake.Actor.prototype.fade=function(e,t){var n=this,e=e?e:300,r=this.grid.minOpacity,i=this.grid.maxOpacity,s=(i-r)*1e3/(60*e),o=0;this.fading=="out"?(o=-1,s>this.opacity-r&&(s=this.opacity-r)):this.fading=="in"&&(o=1,s>i-this.opacity&&(s=i-this.opacity));var u=this.opacity+o*s;u=Math.round(u*1e3)/1e3,n.setDivOpacity(u),this.fading=="out"&&u>r||this.fading=="in"&&u<i?requestAnimFrame(function(){n.fade(e,t)}):(this.fading="none",t&&u<=r&&n.hide())},socialCheesecake.Actor.prototype.fadeOut=function(e,t){var n=this.grid.maxOpacity;this.fading="out",this.setDivOpacity(n),this.fade(e,t)},socialCheesecake.Actor.prototype.fadeIn=function(e,t){var n=this,r=this.grid.minOpacity;if(n.isFiltered())return;n.fading="in",n.setDivOpacity(r),t&&n.show(),n.fade(e,t)},socialCheesecake.Actor.prototype.getCheesecake=function(){return this.grid.parent},socialCheesecake.Actor.prototype.getDiv=function(){var e=this.grid.divIdPrefix,t=this.id,n=document.getElementById(e+t);return n}})();var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.Cheesecake=function(e){var t=e.sectors,n=this;n.center={x:e.center.x,y:e.center.y},n.rMax=e.rMax,n.sectors=[],n.highlightedSector=null,n.auxiliarSectors=[],n.stage=new Kinetic.Stage(e.container.id,e.container.width,e.container.height),n.stage.add(new Kinetic.Layer({name:"main"})),n.grid=new socialCheesecake.Grid({parent:this,grid_id:e.grid.id,divIdPrefix:e.grid.divIdPrefix||"actor_",maxOpacity:e.grid.maxOpacity||1,minOpacity:e.grid.minOpacity||0}),n.matchActorsNumber=e.match,n.matchActorsNumber==null&&(n.matchActorsNumber=!0),n._initialState={},n._changes={};if(e.text)for(var r in e.text)socialCheesecake.text[r]=e.text[r];if(e.colors)for(var i in e.colors)for(var s in e.colors[i])socialCheesecake.colors[i][s]=e.colors[i][s];if(e.callbacks)for(var i in e.callbacks)socialCheesecake.eventCallbackHandlers[i]=e.callbacks[i];n.syncSectorFocusCallbacks=n.syncSectorFocusCallbacks||!1;if(t.length<16){var o=new socialCheesecake.Sector({parent:n,center:n.center,label:"+",rOut:e.rMax,color:socialCheesecake.colors.extraSector.background,subsectors:[{name:"New Subsector 1"}],auxiliar:!0,type:"extraSector"});n.sectors[t.length]=o}var u=Math.min(t.length,16);for(var a=0;a<u;a++){var f={parent:n,center:n.center,id:t[a].id,label:t[a].name,rOut:e.rMax,subsectors:t[a].subsectors,type:"normalSector"};n.sectors[a]=new socialCheesecake.Sector(f)}n.calculatePortions(),n._setInitialState(),n.draw()},socialCheesecake.Cheesecake.prototype.draw=function(){var e=this.sectors;this.addToLayer(e),this.stage.draw()},socialCheesecake.Cheesecake.prototype.disable=function(){var e=this.stage.getChildren();for(var t in e)e[t].listen(!1)},socialCheesecake.Cheesecake.prototype.enable=function(){var e=this.stage.getChildren();for(var t in e)e[t].listen(!0)},socialCheesecake.Cheesecake.prototype.focusAndBlurCheesecake=function(e){var t=this,n,r=socialCheesecake.eventCallbackHandlers.onSectorFocusBegin;for(var i in t.sectors)t.sectors[i]===e&&(n=i);if(n==null)throw"sector doesn't belong to this cheesecake";t.clearLayer(),t.setHighlightedSector(e),t.disable();var s={parent:t,center:t.center,phi:e.phi+e.delta,delta:2*Math.PI-e.delta,rOut:t.rMax,color:socialCheesecake.colors.greySector.background,auxiliar:!0,type:"greySector"},o=new socialCheesecake.Sector(s);t.auxiliarSectors.push(o);var u=this.getAuxiliarClone(n);t.addToLayer(o),t.addToLayer(u);var a=function(){o.changeProperty("label","GO BACK"),t.enable()},f=function(){o.resizeDelta({delta:3*Math.PI/2,anchor:"M",callback:a})},l=function(){var e=t.grid;e.hideAll(),e.show(t.sectors[n].actors),u.splitUp()},c=function(){var e=function(){u.resizeDelta({anchor:"M",callback:l})};r?t.syncSectorFocusCallbacks?r(t,e):(r(t),e()):e()};o.rotateTo({destination:5*Math.PI/4,callback:f,anchor:"M"}),u.rotateTo
({destination:Math.PI/4,callback:c,anchor:"M"})},socialCheesecake.Cheesecake.prototype.recoverCheesecake=function(){var e=this,t=this.highlightedSector,n=this.stage.getChild("main"),r=n.getChildren();e.removeFromLayer(e.auxiliarSectors),e.auxiliarSectors=[],n.clear(),e.draw(),t&&(t.color=t.originalAttr.color,t.fan(!1),t.unfocus(),this.setHighlightedSector(null))},socialCheesecake.Cheesecake.prototype.unfocusAndUnblurCheesecake=function(){var e=this,t=this.auxiliarSectors,n=socialCheesecake.eventCallbackHandlers.onSectorUnfocusEnd,r=socialCheesecake.eventCallbackHandlers.onSectorUnfocusBegin,i,s,o,u,a=function(){for(var r in t)if(t[r].simulate!=null){var s={phi:t[r].phi,delta:t[r].delta,rOut:t[r].rOut};i=e.getAuxiliarClone(t[r].simulate,s)}else u=t[r];dummyNewDelta=e.sectors[i.simulate].delta,dummyNewPhi=e.sectors[i.simulate].phi,i.putTogether(),i.resizeDelta({anchor:"M",delta:dummyNewDelta,callback:function(){n&&n(e),e.grid.showAll(),i.rotateTo({destination:dummyNewPhi})}}),u.resizeDelta({anchor:"M",delta:2*Math.PI-dummyNewDelta,callback:function(){u.rotateTo({destination:dummyNewPhi+dummyNewDelta,callback:function(){e.recoverCheesecake()}})}})};r?e.syncSectorFocusCallbacks?r(e,a):(r(e),a()):a()},socialCheesecake.Cheesecake.prototype.addNewSector=function(){var e=this,t=this.sectors,n=this.getInitialState().sectors.length;console.log(n);var r,i={parent:e,center:e.center,id:n,label:"New Sector",rOut:e.rMax,subsectors:[{name:"New Subsector 1"}]};t.push(t[t.length-1]),r=new socialCheesecake.Sector(i),e.sectors[t.length-2]=r,e.calculatePortions()},socialCheesecake.Cheesecake.prototype.addNewSubsector=function(e){var t=this,n=this.getFocusedSector();if(n==null)return;if(e>n.subsectors.length){console.log("Cannot add new subsector in position "+e+".This sector only has "+n.subsectors.length+" subsectors");return}n.turnExtraIntoNewSubsector(e)},socialCheesecake.Cheesecake.prototype.updateActorMembership=function(e){var t=this._changes,n=this.grid;t.actors=t.actors||[];var r=t.actors,i=!1,s=e.id,o=e.getParentsIds(),u=e.name,a=e.extraInfo,f=socialCheesecake.eventCallbackHandlers.onChange;for(var l in r)r[l].id==s&&(i=!0,r[l].subsectors=o);i||r.push({id:s,subsectors:o,name:u,extraInfo:a,justAdded:!1}),f&&f(this)},socialCheesecake.Cheesecake.prototype.updateSectorChanges=function(e){var t=this._changes;t.sectors=t.sectors||[];var n=t.sectors,r=!1;for(var i in n)n[i].id==e.id&&(r=!0,n[i].subsectors=e.getSubsectorsIds(),n[i].name=e.label);r||n.push({id:e.id,subsectors:e.getSubsectorsIds(),name:e.label})},socialCheesecake.Cheesecake.prototype.calculatePortions=function(){var e=this.sectors,t=this.matchActorsNumber,n=Math.PI/8,r=Math.PI/8,i=5*Math.PI/4-n/2,s=[],o=[],u=e.length,a=0,f=2*Math.PI,l;e[e.length-1].auxiliar&&(e[e.length-1].phi=i,e[e.length-1].delta=n,e[e.length-1].originalAttr.phi=e[e.length-1].phi,e[e.length-1].originalAttr.delta=e[e.length-1].delta,i+=n,u=e.length-1,f-=n),t?l=f-u*r:l=0;for(var c=0;c<u;c++)s[c]=e[c].actors.length,a+=s[c],o[c]=r,t||(o[c]=f/u);for(var c=0;c<u;c++)a!=0?o[c]+=s[c]/a*l:o[c]=f/u,e[c].phi=i,e[c].delta=o[c],e[c].originalAttr.phi=e[c].phi,e[c].originalAttr.delta=e[c].delta,i+=e[c].delta},socialCheesecake.Cheesecake.prototype.addToLayer=function(e,t){var t=t||this.stage.getChild("main");if(e instanceof Array)for(var n in e)t.add(e[n].getRegion());else t.add(e.getRegion())},socialCheesecake.Cheesecake.prototype.removeFromLayer=function(e,t){var t=t||this.stage.getChild("main");if(e instanceof Array)for(var n in e)try{t.remove(e[n].getRegion())}catch(r){}else t.remove(e.getRegion())},socialCheesecake.Cheesecake.prototype.drawLayer=function(e,t){var e=e||this.stage.getChild("main");t=t!=null?t:!0;if(t){var n=e.getContext();n.restore(),n.save()}e.draw()},socialCheesecake.Cheesecake.prototype.clearLayer=function(e){var e=e||this.stage.getChild("main"),t=e.getChildren();for(var n=t.length-1;n>=0;n--)e.remove(t[n]);e.clear()},socialCheesecake.Cheesecake.prototype.setHighlightedSector=function(e){var t=socialCheesecake.eventCallbackHandlers.onSectorHighlight;this.highlightedSector!=e&&(this.highlightedSector=e,t&&t(this))},socialCheesecake.Cheesecake.prototype.getAuxiliarClone=function(e,t){var n=null,r=this,i=null,s=r.auxiliarSectors,o={},t=t||{};for(var u in s)s[u].simulate!=null&&(n=s[u]);if(e!=null){i=r.sectors[e],o={phi:t.phi||i.phi,delta:t.delta||i.delta,rOut:t.rOut||i.rOut,label:t.label||i.label,borderColor:t.borderColor||socialCheesecake.colors[i.type].border,color:t.color||i.color,fontColor:t.fontColor||socialCheesecake.colors[i.type].font,simulate:e,auxiliar:!0,type:"dummySector"},n||(n=new socialCheesecake.Sector({center:r.center,parent:r}),this.auxiliarSectors.push(n));for(var a in o)n[a]=o[a]}return n},socialCheesecake.Cheesecake.prototype.getFocusedSector=function(){var e=this.getAuxiliarClone(),t=this.sectors,n=null;return e&&(n=t[e.simulate]),n},socialCheesecake.Cheesecake.prototype.getSectorById=function(e){var t=this.sectors,n;for(var r in t)if(t[r].id==e){n=t[r];break}return n},socialCheesecake.Cheesecake.prototype.getSubsectorById=function(e){var t=this.sectors,n,r;for(var i in t){n=t[i].subsectors;for(var s in n)if(n[s].id==e){r=n[s];break}}return r},socialCheesecake.Cheesecake.prototype.getChanges=function(){return this._changes},socialCheesecake.Cheesecake.prototype.getInitialState=function(){return this._initialState},socialCheesecake.Cheesecake.prototype.filter=function(e){console.log("search");var t=this.grid,n=this.highlightedSector;socialCheesecake.SearchEngine.filter(e,t.actors),n?t.fadeIn(n.actors,100,!0):t.fadeIn(t.actors,100,!0)},socialCheesecake.Cheesecake.prototype._setInitialState=function(){var e=this._initialState,t=this.grid.actors,n=this.sectors;e.actors=[];for(var r in t)e.actors.push({id:t[r].id,subsectors:t[r].getParentsIds(),name:t[r].name,extraInfo:t[r].extraInfo});e.sectors=[];for(var i in n)n[i].type=="normalSector"&&e.sectors.push({id:n[i].id,name:n[i].label,subsectors:n[i].getSubsectorsIds()})}})();var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.colors={normalSector:{background:"#FEEEBD",border:"#D19405",font:"#D19405",click:"#FFE481",mouseover:"#FFE481",mouseup:"#FEEEBD",mouseout:"#FEEEBD"},extraSector:{background:"#FFBABA",border:"#BD1823",font:"#BD1823",click:"#FF5964",mouseover:"#FF5964",mouseup:"#FFBABA",mouseout:"#FFBABA"},greySector:{background:"#f5f5f5",click:"#f5f5f5",mouseover:"#f5f5f5",mouseout:"#f5f5f5",mouseup:"#f5f5f5",font:"#666",border:"#666"}},socialCheesecake.colors.normalSubsector=socialCheesecake.colors.normalSector,socialCheesecake.colors.extraSubsector=socialCheesecake.colors.extraSector,socialCheesecake.colors.greySubsector=socialCheesecake.colors.greySector})();var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.eventCallbackHandlers={normalSector:{mouseover:function(e){var t=e.getCheesecake();document.body.style.cursor="pointer",t.grid.focus(e.actors),e.focus(),t.highlightedSector!=null?t.highlightedSector.fan(!1,function(){e.fan(!0)}):e.fan(!0),t.setHighlightedSector(e)},mouseout:function(e){var t=e.getCheesecake();document.body.style.cursor="default",t.grid.unfocusAll(),e.unfocus(),t.setHighlightedSector(null),e.fan(!1)},click:function(e){var t=e.getCheesecake();t.focusAndBlurCheesecake(e),t.grid.unfocus(e.actors)}},extraSector:{mouseover:function(e){var t=e.getCheesecake();document.body.style.cursor="pointer",e.focus()},mouseout:function(e){var t=e.getCheesecake();document.body.style.cursor="default",e.unfocus()},click:function(e){var t=e.getCheesecake();t.focusAndBlurCheesecake(e),t.addNewSector()}},greySector:{mouseout:function(){document.body.style.cursor="default"},click:function(e){e.changeProperty("label",""),e.getCheesecake().unfocusAndUnblurCheesecake()},mouseup:function(){return},mouseover:function(){document.body.style.cursor="pointer"}},normalSubsector:{mouseover:function(e){var t=e.getCheesecake();document.body.style.cursor="pointer",t.grid.focus(e.actors),t.setHighlightedSector(e)},mouseout:function(e){var t=e.getCheesecake();document.body.style.cursor="default",t.grid.unfocus(e.actors),t.setHighlightedSector(e.parent)},click:function(e){var t=e.getCheesecake(),n=t.grid.getSelectedActors();n.length>0&&e.changeMembership(n)},mouseup:function(){return}},extraSubsector:{mouseover:function(e){e.resizeWidth({width:(e.originalAttr.rOut-e.originalAttr.rIn)*1.5,anchor:"m",step:1})},mouseout:function(e){e.resizeWidth({width:e.originalAttr.rOut-e.originalAttr.rIn,anchor:e.rIn==0?"rin":"m",step:1,priority:!0})},click:function(e){e.parent.turnExtraIntoNewSubsector(e.simulate)},mouseup:function(){return}},onSectorHighlight:null,onSubsectorAddedBegin:null,onSubsectorAddedEnd:null,onSectorFocusBegin:null,onSectorFocusEnd:null,onSectorUnfocusBegin:null,onSectorUnfocusEnd:null,onChange:null}})();var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.Grid=function(e){if(!e)throw"No arguments passed to the function";this.actors=[],this.orphans=[],this.parent=e.parent,this.id=e.grid_id,this.divIdPrefix=e.divIdPrefix,this.maxOpacity=e.maxOpacity,this.minOpacity=e.minOpacity},socialCheesecake.Grid.prototype.addActor=function(e,t){var n=this.actors,r=this.orphans,i=null,s=!1;for(var o in n)if(n[o].id==e.id){s=!0,i=n[o];var u=!1;for(var a in i.parents)i.parents[a]==t&&(u=!0);u||i.parents.push(t)}if(!s){var f=!1;for(var o in r)r[o].id==e.id&&(f=!0,i=r[o],r.splice(o,1),i.removeClass("orphan"),i.parents.push(t));f||(e.parent=t,e.grid=this,i=new socialCheesecake.Actor(e)),n.push(i)}return i},socialCheesecake.Grid.prototype.removeActor=function(e){var t=this.actors,n=this.orphans;for(var r in t)t[r].id==e.id&&e.isOrphan()&&(t.splice(r,1),n.push(e),e.addClass("orphan"))},socialCheesecake.Grid.prototype.getActor=function(e){var t=this.actors;for(var n in t)if(this.actors[n].id==e)return this.actors[n];return null},socialCheesecake.Grid.prototype.getSelectedActors=function(){var e=this.actors,t=this.orphans,n=[];for(var r in e)e[r].isSelected()&&n.push(e[r]);for(var r in t)t[r].isSelected()&&n.push(t[r]);return n},socialCheesecake.Grid.prototype.select=function(e){var t;if(e instanceof Array)for(var n in e)t=e[n],t&&(t instanceof socialCheesecake.Actor||(t=this.getActor(t)),t.select());else t=e,e instanceof socialCheesecake.Actor||(t=this.getActor(e)),t.select()},socialCheesecake.Grid.prototype.selectAll=function(){this.select(this.actors)},socialCheesecake.Grid.prototype.unselect=function(e){var t;if(e instanceof Array)for(var n in e)t=e[n],t&&(t instanceof socialCheesecake.Actor||(t=this.getActor(t)),t.unselect());else t=e,e instanceof socialCheesecake.Actor||(t=this.getActor(e)),t.unselect()},socialCheesecake.Grid.prototype.unselectAll=function(){this.unselect(this.actors)},socialCheesecake.Grid.prototype.focus=function(e){var t;if(e instanceof Array)for(var n in e)t=e[n],t&&(t instanceof socialCheesecake.Actor||(t=this.getActor(t)),t.focus());else t=e,e instanceof socialCheesecake.Actor||(t=this.getActor(e)),t.focus()},socialCheesecake.Grid.prototype.focusAll=function(){this.focus(this.actors)},socialCheesecake.Grid.prototype.hide=function(e,t){var n;if(e instanceof Array)for(var r in e)n=e[r],n&&(n instanceof socialCheesecake.Actor||(n=this.getActor(n)),(!n.isSelected()||t)&&n.hide());else e instanceof socialCheesecake.Actor?n=e:n=this.getActor(e),n.hide()},socialCheesecake.Grid.prototype.hideAll=function(){this.hide(this.actors)},socialCheesecake.Grid.prototype.show=function(e,t){var n;if(e instanceof Array)for(var r=0;r<e.length;r++)n=e[r],n instanceof socialCheesecake.Actor||(n=this.getActor(n)),(!n.isSelected()||t)&&n.show();else e instanceof socialCheesecake.Actor?n=e:n=this.getActor(e),(!n.isSelected()||t)&&n.show()},socialCheesecake.Grid.prototype.showAll=function(){this.show(this.actors)},socialCheesecake.Grid.prototype.unfocus=function(e){var t;if(e instanceof Array)for(var n in e)t=e[n],t instanceof socialCheesecake.Actor||(t=this.getActor(t)),t.unfocus();else t=e,e instanceof socialCheesecake.Actor||(t=this.getActor(e)),t.unfocus()},socialCheesecake.Grid.prototype.unfocusAll=function(){this.unfocus(this.actors)},socialCheesecake.Grid.prototype.fadeOut=function(e,t,n,r){var i;if(e instanceof Array)for(var s in e)i=e[s],i&&(i instanceof socialCheesecake.Actor||(i=this.getActor(i)),(!i.isSelected()||r)&&i.fadeOut(t,n));else e instanceof socialCheesecake.Actor?i=e:i=this.getActor(e),(!i.isSelected()||r)&&i.fadeOut(t,n)},socialCheesecake.Grid.prototype.fadeOutAll=function(e,t){this.fadeOut(this.actors,e,t)},socialCheesecake.Grid.prototype.fadeIn=function(e,t,n,r){var i;if(e instanceof Array)for(var s=0;s<e.length;s++)i=e[s],i instanceof socialCheesecake.Actor||(i=this.getActor(i)),(!i.isSelected()||r)&&i.fadeIn(t,n);else e instanceof socialCheesecake.Actor?i=e:i=this.getActor(e),(!i.isSelected()||r)&&i.fadeIn(t,n)},socialCheesecake.Grid.prototype.fadeInAll=function(e,t){this.fadeIn(this.actors,e,t)}})();var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.SearchEngine={filter:function(e,t){var t=t,n=new RegExp(e.toLowerCase());for(var r in t){var i=t[r];i.name.toLowerCase().match(n)?i.unfilter():i.filter()}}}})();var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.Sector=function(e){var t={center:{x:0,y:0},rIn:0,rOut:300,delta:Math.PI/2,phi:0,label:"",color:socialCheesecake.colors.normalSector.background,auxiliar:!1,type:"normalSector"};e||(e=t);for(var n in t)if(!(n in e)||e[n]===undefined)e[n]=t[n];e.phi%=2*Math.PI;while(e.phi<0)e.phi+=2*Math.PI;if(e.delta<=0||e.delta>2*Math.PI)throw"Delta must be greater than 0 and less than 2*pi";e.id!=undefined&&(this.id=e.id),this.x=e.center.x,this.y=e.center.y,this.rOut=e.rOut,this.rIn=e.rIn,this.phi=e.phi,this.delta=e.delta,this.label=e.label,this.color=e.color,e.fontColor&&(this.fontColor=e.fontColor),e.borderColor&&(this.borderColor=e.borderColor),e.mouseover&&(this.mouseover=e.mouseover),e.mouseup&&(this.mouseup=e.mouseup),e.mouseout&&(this.mouseout=e.mouseout),e.click&&(this.click=e.click),this.subsectors=[],this.extraSubsectors=[],this.actors=[],e.parent!=null&&(this.parent=e.parent),e.simulate!=null&&(this.simulate=e.simulate),this.auxiliar=e.auxiliar,this.type=e.type;if(e.subsectors!=null)for(var r in e.subsectors){var i=new socialCheesecake.Subsector({id:e.subsectors[r].id,label:e.subsectors[r].name,parent:this,x:this.x,y:this.y,phi:null,delta:null,rIn:null,rOut:null,actors:e.subsectors[r].actors,color:socialCheesecake.colors.normalSector.background});this.subsectors.push(i)}this.originalAttr={x:this.x,y:this.y,phi:this.phi,delta:this.delta,rIn:this.rIn,rOut:this.rOut,color:this.color,label:this.label,simulate:this.simulate,subsectors:this.subsectors,auxiliar:this.auxiliar,type:this.type},this._region=null},socialCheesecake.Sector.newSubsectorIdRoot="new_",socialCheesecake.Sector.prototype._draw=function(e){var t=this.x,n=this.y,r=this.phi,i=this.delta,s=this.rIn,o=this.rOut,u=this.color||socialCheesecake.colors[l].background,a=this.label,f=this.actors,l=this.type,c=this.fontColor||socialCheesecake.colors[l].font,h=.7*(o-s)+s,p=h;e.restore(),e.save(),e.beginPath(),e.arc(t,n,o,-r,-(r+i),!0),e.lineTo(t+s*Math.cos(-r-i),n+s*Math.sin(-r-i)),e.arc(t,n,s,-(r+i),-r,!1),e.closePath(),e.fillStyle=u,e.fill(),e.lineWidth=2,e.strokeStyle=this.borderColor||socialCheesecake.colors[l].border,e.stroke(),this.auxiliar&&a=="+"?socialCheesecake.text.addPlusCharacter(e,t,n,.5*(o-s)+s,r,i,c):this.parent.auxiliar&&this.parent.label=="+"?socialCheesecake.text.writeCurvedText(a,e,t,n,h,r,i,c,"newStyle"):socialCheesecake.text.writeCurvedText(a,e,t,n,h,r,i,c),this.auxiliar||(p-=socialCheesecake.text.getTextHeight(a),socialCheesecake.text.writeCurvedText("("+f.length+")",e,t,n,p,r,i,c))},socialCheesecake.Sector.prototype.getRegion=function(){if(this._region==null){var e=this;e._region=new Kinetic.Geometry({drawFunc:function(){var t=this.getContext();e._draw(t)},name:e.label}),e._region.on("mouseover",function(){e.eventHandler("mouseover")}),e._region.on("mouseout",function(){e.eventHandler("mouseout")}),e._region.on("click",function(){e.eventHandler("click")}),e._region.on("mouseup",function(){e.eventHandler("mouseup")})}return this._region},socialCheesecake.Sector.prototype.getLayer=function(){return this.getRegion().getParent()?this.getRegion().getLayer():undefined},socialCheesecake.Sector.prototype.eventHandler=function(e){this.colorHandler(e),this.callbackHandler(e)},socialCheesecake.Sector.prototype.colorHandler=function(e){var t=this,n=t.type;t[e]!=null&&t[e].color!=null?t.changeColor(t[e].color):socialCheesecake.colors[n]&&socialCheesecake.colors[n][e]&&t.changeColor(socialCheesecake.colors[n][e])},socialCheesecake.Sector.prototype.callbackHandler=function(e){var t=this,n=t.type;t[e]!=null&&t[e].callback!=null?t[e].callback(t):socialCheesecake.eventCallbackHandlers[n]&&socialCheesecake.eventCallbackHandlers[n][e]&&socialCheesecake.eventCallbackHandlers[n][e](t)},socialCheesecake.Sector.prototype.getCheesecake=function(){return this.parent},socialCheesecake.Sector.prototype.getIndex=function(){var e=this,t=e.getCheesecake(),n=null;for(var r in t.sectors)t.sectors[r]===e&&(n=r);return n},socialCheesecake.Sector.prototype.turnExtraIntoNewSubsector=function(e){var t=this,n=this.getCheesecake(),r=this.extraSubsectors.concat(this.subsectors),i=[],s=[],o=1.5,u="m",a=socialCheesecake.eventCallbackHandlers.onSubsectorAddedBegin,f=socialCheesecake.eventCallbackHandlers.onSubsectorAddedEnd;if(this.subsectors.length>=4){console.log("Reached subsectors limit. No new subsectors will be added");return}for(var l in r){var c={label:r[l].label,x:r[l].x,y:r[l].y,rIn:r[l].rIn,rOut:r[l].rOut,phi:r[l].phi,delta:r[l].delta,type:r[l].type,auxiliar:!0,parent:r[l].parent,color:r[l].color};l<this.extraSubsectors.length?s.push(new socialCheesecake.Subsector(c)):i.push(new socialCheesecake.Subsector(c))}n.disable(),n.addToLayer(i.concat(s)),n.removeFromLayer(r),this.addNewSubsector(e),a!=null&&a(t.subsectors[e]);var h=this.subsectors;this.extraSubsectors=[];var p=t.extraSubsectors,d=this.getCheesecake().getAuxiliarClone();d.calculateSubportions(),d.label="",d.color=socialCheesecake.colors.normalSector.background;for(var l in s)l!=e&&s[l].resizeWidth({width:0,anchor:"m",step:o});var v=function(){for(var t=0;t<i.length;t++)i[t].changeMediumRadius({radius:t<e?h[t].getMediumRadius():h[t+1].getMediumRadius(),step:o});s[e].type="normalSubsector",s[e].color=h[e].color,s[e].label="",e==0?u="rin":e==s.length-1&&(u="rout"),s[e].resizeWidth({width:u=="m"||p.length==0?h[e].getWidth():p[e].getWidth()+h[e].getWidth(),anchor:u,step:o,callback:m})},m=function(){s[e].label=h[e].label,s[e].changeMediumRadius({radius:h[e].getMediumRadius(),step:o,callback:h.length>=4?g:function(){return}});if(h.length<4){t.createExtraSubsectors(),d.calculateSubportions(),p=t.extraSubsectors;var r={label:"+",x:p[e].x,y:p[e].y,phi:s[e].phi,delta:s[e].delta,type:"extraSubsector",auxiliar:!0,parent:s[e].parent,color:p[e].color};s.push(new socialCheesecake.Subsector(r)),s.push(new socialCheesecake.Subsector(r));var i=!1;for(var u=0;u<s.length;u++)u!=e&&(s[u].rIn=u<e?p[u].getMediumRadius():p[u-1].getMediumRadius(),s[u].rOut=s[u].rIn,n.addToLayer(s[u]),s[u].resizeWidth({width:u<e?p[u].getWidth():p[u-1].getWidth(),anchor:"m",step:o,callback:function(){if(i)return;return i=!0,g}()}))}},g=function(){n.removeFromLayer(i.concat(s)),n.addToLayer(h),p&&n.addToLayer(p),n.drawLayer(),n.enable(),f!=null&&f(t.subsectors[e])};for(var l=0;l<i.length;l++)i[l].resizeWidth({width:l<e?h[l].getWidth():h[l+1].getWidth(),anchor:"m",step:o,callback:l==0?v:function(){return}})},socialCheesecake.Sector.prototype.splitUp=function(){var e=this.getCheesecake(),t=socialCheesecake.eventCallbackHandlers.onSectorFocusEnd,n=this.simulate!=null?e.sectors[this.simulate]:this,r=n.subsectors;r.length<4&&n.createExtraSubsectors(),this.calculateSubportions(),e.addToLayer(r.concat(n.extraSubsectors)),e.drawLayer(),t&&t(e)},socialCheesecake.Sector.prototype.putTogether=function(){var e=this.getCheesecake(),t=null,n=this.simulate!=null?e.sectors[this.simulate]:this,r=n.subsectors,i=n.extraSubsectors;e.removeFromLayer(r.concat(i)),n.extraSubsectors=[]},socialCheesecake.Sector.prototype.createExtraSubsectors=function(){var e=this.getCheesecake(),t=this,n=this.subsectors,r=this.extraSubsectors||[],i={x:e.center.x,y:e.center.y,label:"+",parent:t,auxiliar:!0,color:socialCheesecake.colors.extraSector.background,type:"extraSubsector"};r.splice(0,r.length);for(var s=0;s<n.length+1;s++){i.simulate=s;var o=new socialCheesecake.Subsector(i);r.push(o)}},socialCheesecake.Sector.prototype.calculateSubportions=function(){var e=this.getCheesecake(),t=this.simulate!=null?e.sectors[this.simulate]:this,n=t.subsectors,r=t.extraSubsectors,i=this.phi,s=this.delta,o=this.rOut,u=this.rIn,a=r.length==n.length+1?(o-u)*.06:0,f=(o-u-r.length*a)/n.length;for(var l in n)u+=a,n[l].rIn=u,n[l].originalAttr.rIn=n[l].rIn,n[l].rOut=u+f,n[l].originalAttr.rOut=n[l].rOut,n[l].phi=i,n[l].originalAttr.phi=n[l].phi,n[l].delta=s,n[l].originalAttr.delta=n[l].delta,u+=f;u=this.rIn;for(var l in r)r[l].rIn=u,r[l].originalAttr.rIn=r[l].rIn,r[l].rOut=u+a,r[l].originalAttr.rOut=r[l].rOut,r[l].delta=s,r[l].originalAttr.delta=r[l].delta,r[l].phi=i,r[l].originalAttr.phi=r[l].phi,u+=a+f},socialCheesecake.Sector.prototype.changeColor=function(e){this.changeProperty("color",e)},socialCheesecake.Sector.prototype.changeLabel=function(e){this.changeProperty("label",e)},socialCheesecake.Sector.prototype.changeProperty=function(e,t){var n=this,r=n.getCheesecake(),i=n.getLayer();n[e]=t,n.type=="normalSector"&&e=="label"&&r.updateSectorChanges(n),i&&r.drawLayer(i)},socialCheesecake.Sector.prototype.resizeDelta=function(e){if(!e)throw"No arguments passed to the function";var t=this,n=t.delta,r=t.phi,i=.05,s=Math.PI/2,o=1,u=!0,a=0;e.step&&(i=e.step),e.delta&&(s=e.delta);if(e.anchor){if(e.anchor.toLowerCase()=="b"||e.anchor=="beginning")o=0;if(e.anchor.toLowerCase()=="m"||e.anchor=="middle")o=.5;if(e.anchor.toLowerCase()=="e"||e.anchor=="end")o=1}n>s?(n-s<i&&(i=n-s),n-=i,r+=o*i,a=-1):n<s&&(s-n<i&&(i=s-n),n+=i,r-=o*i,a=1),e.priority&&(t.growDelta=a),t.growDelta!=null&&a!=t.growDelta?u=!1:(u=!0,t.growDelta=a),t.delta=n,t.phi=r,t.getCheesecake().drawLayer(t.getLayer()),u&&Math.round(n*1e3)!=Math.round(s*1e3)?requestAnimFrame(function(){t.resizeDelta(e)}):(t.growDelta=null,e.callback&&e.callback())},socialCheesecake.Sector.prototype.resizeWidth=function(e){var t=this,n=this.rIn,r=this.rOut,i=r-n,s=.05,o=i,u=1,a=0,f=!0;e.step&&(s=e.step),e.width!=null&&(o=e.width);if(o<0)throw"Width must be greater than or equal to zero";if(e.anchor){if(e.anchor.toLowerCase()=="i"||e.anchor=="in"||e.anchor.toLowerCase()=="rin")u=1;if(e.anchor.toLowerCase()=="m"||e.anchor=="middle")u=.5;if(e.anchor.toLowerCase()=="o"||e.anchor=="out"||e.anchor.toLowerCase()=="rout")u=0}i>o?(i-o<s&&(s=i-o),a=-1):i<o&&(o-i<s&&(s=o-i),a=1),e.priority&&(t.grow=a),t.grow!=null&&a!=t.grow?f=!1:(f=!0,t.grow=a),r+=a*u*s,n-=a*(1-u)*s,i=r-n,n<0&&(r+=this.rIn-n,n=0),i<=0&&t.getCheesecake().removeFromLayer(t),t.rOut=r,t.rIn=n,t.getCheesecake().drawLayer(t.getLayer()),f&&Math.round(i*1e3)!=Math.round(o*1e3)?requestAnimFrame(function(){t.resizeWidth(e)}):(t.grow=null,e.callback&&e.callback())},socialCheesecake.Sector.prototype.changeMediumRadius=function(e){var t=this,n=this.rIn,r=this.rOut,i=this.getMediumRadius();e.radius-this.getWidth()/2<0&&(e.radius=this.getWidth()/2);var s=e.radius||i,o=e.step||.05;s>i?(s-i<o&&(o=s-i),n+=o,r+=o):(i-s<o&&(o=i-s),n-=o,r-=o),this.rIn=Math.round(n*1e3)/1e3,this.rOut=Math.round(r*1e3)/1e3,i=this.getMediumRadius(),t.getCheesecake().drawLayer(t.getLayer()),Math.round(i*1e3)!=Math.round(s*1e3)?requestAnimFrame(function(){t.changeMediumRadius(e)}):e.callback&&e.callback()},socialCheesecake.Sector.prototype.focus=function(){var e=this;e.changeProperty("rOut",e.originalAttr.rOut*1.05)},socialCheesecake.Sector.prototype.unfocus=function(){var e=this;e.changeProperty("rOut",e.originalAttr.rOut)},socialCheesecake.Sector.prototype.fan=function(e,t){var n=this,r=Math.PI/5;if(e&&n.delta>=r)return;e?(n.getRegion().moveToTop(),n.resizeDelta({anchor:"m",delta:r,callback:t})):n.resizeDelta({anchor:"m",delta:n.originalAttr.delta,priority:!0,callback:t})},socialCheesecake.Sector.prototype.rotateTo=function(e){var t=this,n=this.phi%(2*Math.PI),r=this.delta,i=.05,s=0;if(!e)throw"No arguments passed to the function";e.step&&(i=e.step);if(e.destination==null)throw"destination must be defined";if(e.anchor){if(e.anchor.toLowerCase()=="b"||e.anchor=="beginning")s=0;if(e.anchor.toLowerCase()=="m"||e.anchor=="middle")s=.5;if(e.anchor.toLowerCase()=="e"||e.anchor=="end")s=1}var o=(e.destination-s*r)%(2*Math.PI);while(o<0)o+=2*Math.PI;while(n<0)n+=2*Math.PI;var u=0;o>n?u=1:o<n&&(u=-1),Math.round((2*Math.PI-Math.abs(o-n))*1e3)/1e3>=Math.round(Math.abs(o-n)*1e3)/1e3?(Math.abs(o-n)<i&&(i=Math.abs(o-n)),n+=u*i):(2*Math.PI-Math.abs(o-n)<i&&(i=2*Math.PI-Math.abs(o-n)),o-=u*2*Math.PI,n-=u*i),t.phi=n,t.getCheesecake().drawLayer(t.getLayer()),Math.abs(n-o)>.001?(t.phi=n%(2*Math.PI),requestAnimFrame(function(){t.rotateTo({destination:e.destination,step:i,callback:e.callback,anchor:e.anchor})})):e.callback&&e.callback()},socialCheesecake.Sector.prototype.addNewSubsector=function(e){var t=this.subsectors,n={parent:this,x:this.x,y:this.y,delta:this.delta,phi:this.phi,id:socialCheesecake.Sector.newSubsectorIdRoot+"S"+this.getIndex()+"s"+e};for(var r=t.length;r>=0;r--)r>e&&(t[r]=t[r-1]),r==e&&(n.label="New Subsector "+r,t[r]=new socialCheesecake.Subsector(n));return this.getCheesecake().updateSectorChanges(this),t[e]},socialCheesecake.Sector.prototype.addActor=function(e,t){var n=this.actors,r,i=!1;for(var s in n)if(n[s].id==e.id){i=!0,r=n[s];var o=!1;for(var u in r.parents)r.parents[u]==t&&(o=!0);o||r.parents.push(t)}return i||(this==t?r=this.parent.addActor(e,t):r=this.parent.grid.addActor(e,t),n.push(r)),r},socialCheesecake.Sector.prototype.removeActor=function(e){var t=this.actors,n,r=!1,i=this.getCheesecake().grid;for(var s in t)if(t[s].id==e.id){n=e.parents;for(var o in n)for(var u in this.subsectors)if(n[o]===this.subsectors[u]){r=!0;break}r||(t.splice(s,1),i.removeActor(e))}},socialCheesecake.Sector.prototype.getWidth=function(){return this.rOut-this.rIn},socialCheesecake.Sector.prototype.getMediumRadius=function(){return(this.rOut+this.rIn)/2},socialCheesecake.Sector.prototype.getSubsectorsIds=function(){var e=[];for(var t in this.subsectors)e.push(this.subsectors[t].id);return e},socialCheesecake.Sector.prototype.listen=function(e){var t=this.getRegion(),n=this;e===undefined&&(e=!0),e?(t.on("mouseover",function(){n.eventHandler("mouseover")}),t.on("mouseout",function(){n.eventHandler("mouseout")}),t.on("click",function(){n.eventHandler("click")}),t.on("mouseup",function(){n.eventHandler("mouseup")})):(t.off("mouseover"),t.off("mouseout"),t.off("click"),t.off("mouseup"))}})();var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.Subsector=function(e){this.id=null,e.id!=undefined&&(this.id=e.id),e.parent!=null&&(this.parent=e.parent),this.label="",e.label!=null&&(this.label=e.label),this.x=e.x,this.y=e.y,this.rOut=e.rOut,this.rIn=e.rIn,this.phi=e.phi,this.delta=e.delta,this.actors=[],this.auxiliar=e.auxiliar?e.auxiliar:!1,this.type=e.type?e.type:"normalSubsector",e.simulate!=null&&(this.simulate=e.simulate),this.color=e.color||socialCheesecake.colors.normalSubsector.background,e.fontColor&&(this.fontColor=e.fontColor),e.borderColor&&(this.borderColor=e.borderColor),e.click!=null&&(this.click=e.click),e.mouseup!=null&&(this.mouseup=e.mouseup),e.mouseover!=null&&(this.mouseover=e.mouseover),e.mouseout!=null&&(this.mouseout=e.mouseout);var t=this.getCheesecake().grid;if(e.actors)for(var n in e.actors){var r={id:e.actors[n][0],name:e.actors[n][1],extraInfo:e.actors[n][2]};this.addActor(r,this)}this.originalAttr={x:this.x,y:this.y,phi:this.phi,delta:this.delta,rIn:this.rIn,rOut:this.rOut,color:this.color,fontColor:this.fontColor,borderColor:this.borderColor,label:this.label,auxiliar:this.auxiliar,type:this.type,simulate:this.simulate}},socialCheesecake.Subsector.prototype=new socialCheesecake.Sector({id:this.id,parent:this.parent,center:{x:this.x,y:this.y},label:this.label,rIn:this.rIn,rOut:this.rOut,phi:this.phi,delta:this.delta,auxiliar:this.auxiliar,color:this.color,fontColor:this.fontColor,borderColor:this.borderColor,type:this.type,simulate:this.simulate,mouseover:this.mouseover,mouseout:this.mouseout,mouseup:this.mouseup,click:this.click}),socialCheesecake.Subsector.prototype.getCheesecake=function(){var e=this;return e.parent.parent},socialCheesecake.Subsector.prototype.getIndex=function(){var e=this,t=e.parent,n=null;for(var r in t.subsectors)t.subsectors[r]===e&&(n=r);return n},socialCheesecake.Subsector.prototype.removeActor=function(e){var t=this.actors,n;for(var r in t)if(t[r].id==e.id){n=e.parents;for(var i in n)n[i]===this&&n.splice(i,1);t.splice(r,1),this.parent.removeActor(e)}},socialCheesecake.Subsector.prototype.changeMembership=function(e){var t=this.actors,n,r=!1;for(var i in e){for(var s in t)if(t[s].id==e[i].id){r=!0,this.removeActor(e[i]);break}r||(n={id:e[i].id},this.addActor(n,this)),this.getCheesecake().updateActorMembership(e[i]),r=!1}this.getCheesecake().calculatePortions()}})();var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.text={style:"bold 14px sans-serif",newStyle:"bold 14px sans-serif",addPlusCharacter:function(e,t,n,r,i,s,o,u){e.font=u&&socialCheesecake.text[u]?socialCheesecake.text[u]:socialCheesecake.text.style,e.fillStyle=o||"#000",e.textAlign="center",e.textBaseline="middle",text="+",e.translate(t,n),e.rotate(-s/2-i-Math.PI/2),e.fillText(text[0],0,r),e.restore(),e.save()},writeCurvedText:function(e,t,n,r,i,s,o,u,a){t.font=a&&socialCheesecake.text[a]?socialCheesecake.text[a]:socialCheesecake.text.style,t.fillStyle=u||"#000",t.textBaseline="middle";var f=Math.tan(t.measureText(e).width/(e.length*i)),l=null,c=e;while(f*(e.length+4)>o){if(l==e){console.log("WARNING: Infinite loop detected and stopped. Text '"+c+"' failed to be "+"correctly truncated. Proccesed serveral times as '"+e+"' and will be returned as '"+words[0].substring(0,o/f-7)+"'. Space too small to even be able to truncate."),e=words[0].substring(0,o/f-7);break}l=e,words=e.split(" "),words.length>1?(words.splice(words.length-1,1),e=words.join(" ")+"..."):e=words[0].substring(0,o/f-7)+"...",f=Math.tan(t.measureText(e).width/(e.length*i))}t.translate(n,r);var h=0;s+o/2>=Math.PI&&s+o/2<Math.PI*2?(h=-1,t.rotate(-(o-f*e.length)/2-s-Math.PI/2)):(h=1,t.rotate((o-f*e.length)/2+Math.PI/2-o-s));for(var p=0;p<e.length;p++){t.fillText(e[p],0,-(h*i));var d=Math.tan(t.measureText(e[p]).width/i);t.rotate(h*d)}t.restore(),t.save()},writeCenterText:function(e,t,n,r){t.fillText(e,n-t.measureText(e).width/2,r)},getTextHeight:function(e,t){var t=t||socialCheesecake.text.style,n=document.createElement("div"),r=0;return n.setAttribute("id","getTextHeight"),n.setAttribute("display","none"),n.setAttribute("style","font: "+t),n.innerHTML=e,document.body.appendChild(n),r=parseInt(window.getComputedStyle(n).fontSize),document.body.removeChild(n),r}}})();var SocialStream=SocialStream||{};(function(e){e.extend(e.fn,{livequery:function(t,n,r){var i=this,s;return e.isFunction(t)&&(r=n,n=t,t=undefined),e.each(e.livequery.queries,function(e,o){if(i.selector==o.selector&&i.context==o.context&&t==o.type&&(!n||n.$lqguid==o.fn.$lqguid)&&(!r||r.$lqguid==o.fn2.$lqguid))return(s=o)&&!1}),s=s||new e.livequery(this.selector,this.context,t,n,r),s.stopped=!1,s.run(),this},expire:function(t,n,r){var i=this;return e.isFunction(t)&&(r=n,n=t,t=undefined),e.each(e.livequery.queries,function(s,o){i.selector==o.selector&&i.context==o.context&&(!t||t==o.type)&&(!n||n.$lqguid==o.fn.$lqguid)&&(!r||r.$lqguid==o.fn2.$lqguid)&&!this.stopped&&e.livequery.stop(o.id)}),this}}),e.livequery=function(t,n,r,i,s){return this.selector=t,this.context=n||document,this.type=r,this.fn=i,this.fn2=s,this.elements=[],this.stopped=!1,this.id=e.livequery.queries.push(this)-1,i.$lqguid=i.$lqguid||e.livequery.guid++,s&&(s.$lqguid=s.$lqguid||e.livequery.guid++),this},e.livequery.prototype={stop:function(){var e=this;this.type?this.elements.unbind(this.type,this.fn):this.fn2&&this.elements.each(function(t,n){e.fn2.apply(n)}),this.elements=[],this.stopped=!0},run:function(){if(this.stopped)return;var t=this,n=this.elements,r=e(this.selector,this.context),i=r.not(n);this.elements=r,this.type?(i.bind(this.type,this.fn),n.length>0&&e.each(n,function(n,i){e.inArray(i,r)<0&&e.event.remove(i,t.type,t.fn)})):(i.each(function(){t.fn.apply(this)}),this.fn2&&n.length>0&&e.each(n,function(n,i){e.inArray(i,r)<0&&t.fn2.apply(i)}))}},e.extend(e.livequery,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(
){if(e.livequery.running&&e.livequery.queue.length){var t=e.livequery.queue.length;while(t--)e.livequery.queries[e.livequery.queue.shift()].run()}},pause:function(){e.livequery.running=!1},play:function(){e.livequery.running=!0,e.livequery.run()},registerPlugin:function(){e.each(arguments,function(t,n){if(!e.fn[n])return;var r=e.fn[n];e.fn[n]=function(){var t=r.apply(this,arguments);return e.livequery.run(),t}})},run:function(t){t!=undefined?e.inArray(t,e.livequery.queue)<0&&e.livequery.queue.push(t):e.each(e.livequery.queries,function(t){e.inArray(t,e.livequery.queue)<0&&e.livequery.queue.push(t)}),e.livequery.timeout&&clearTimeout(e.livequery.timeout),e.livequery.timeout=setTimeout(e.livequery.checkQueue,20)},stop:function(t){t!=undefined?e.livequery.queries[t].stop():e.each(e.livequery.queries,function(t){e.livequery.queries[t].stop()})}}),e.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove"),e(function(){e.livequery.play()});var t=e.prototype.init;e.prototype.init=function(e,n){var r=t.apply(this,arguments);return e&&e.selector&&(r.context=e.context,r.selector=e.selector),typeof e=="string"&&(r.context=n||document,r.selector=e),r},e.prototype.init.prototype=e.prototype})(jQuery),function(e){function t(e,t){return typeof e=="function"?e.call(t):e}function n(t,n){this.$element=e(t),this.options=n,this.enabled=!0,this.fixTitle()}n.prototype={show:function(){var n=this.getTitle();if(n&&this.enabled){var r=this.tip();r.find(".tipsy-inner")[this.options.html?"html":"text"](n),r[0].className="tipsy",r.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var i=this;function s(){i.hoverTooltip=!0}function o(){if(i.hoverState=="in")return;i.hoverTooltip=!1;if(i.options.trigger!="manual"){var e=i.options.trigger=="hover"?"mouseleave.tipsy":"blur.tipsy";i.$element.trigger(e)}}this.options.hoverable&&r.hover(s,o);var u=e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),a=r[0].offsetWidth,f=r[0].offsetHeight,l=t(this.options.gravity,this.$element[0]),c;switch(l.charAt(0)){case"n":c={top:u.top+u.height+this.options.offset,left:u.left+u.width/2-a/2};break;case"s":c={top:u.top-f-this.options.offset,left:u.left+u.width/2-a/2};break;case"e":c={top:u.top+u.height/2-f/2,left:u.left-a-this.options.offset};break;case"w":c={top:u.top+u.height/2-f/2,left:u.left+u.width+this.options.offset}}l.length==2&&(l.charAt(1)=="w"?c.left=u.left+u.width/2-15:c.left=u.left+u.width/2-a+15),r.css(c).addClass("tipsy-"+l),r.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+l.charAt(0),this.options.className&&r.addClass(t(this.options.className,this.$element[0])),this.options.fade?r.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):r.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.tip().remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("original-title")!="string")&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,n=this.options;this.fixTitle();var e,n=this.options;return typeof n.title=="string"?e=t.attr(n.title=="title"?"original-title":n.title):typeof n.title=="function"&&(e=n.title.call(t[0])),e=(""+e).replace(/(^\s*|\s*$)/,""),e||n.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){function i(r){var i=e.data(r,"tipsy");return i||(i=new n(r,e.fn.tipsy.elementOptions(r,t)),e.data(r,"tipsy",i)),i}function s(){var e=i(this);e.hoverState="in",t.delayIn==0?e.show():(e.fixTitle(),setTimeout(function(){e.hoverState=="in"&&e.show()},t.delayIn))}function o(){var e=i(this);e.hoverState="out",t.delayOut==0?e.hide():setTimeout(function(){e.hoverState=="out"&&!e.hoverTooltip&&e.hide()},t.delayOut)}if(t===!0)return this.data("tipsy");if(typeof t=="string"){var r=this.data("tipsy");return r&&r[t](),this}t=e.extend({},e.fn.tipsy.defaults,t),t.hoverable&&(t.delayOut=t.delayOut||200),t.live||this.each(function(){i(this)});if(t.trigger!="manual"){var u=t.live?"live":"bind",a=t.trigger=="hover"?"mouseenter.tipsy":"focus.tipsy",f=t.trigger=="hover"?"mouseleave.tipsy":"blur.tipsy";this[u](a,s)[u](f,o)}return this},e.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,hoverable:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"},e.fn.tipsy.autoBounds=function(t,n){return function(){var r={ns:n[0],ew:n.length>1?n[1]:!1},i=e(document).scrollTop()+t,s=e(document).scrollLeft()+t,o=e(this);return o.offset().top<i&&(r.ns="n"),o.offset().left<s&&(r.ew="w"),e(window).width()+e(document).scrollLeft()-o.offset().left<t&&(r.ew="e"),e(window).height()+e(document).scrollTop()-o.offset().top<t&&(r.ns="s"),r.ns+(r.ew?r.ew:"")}}}(jQuery),function(e,t,n){var r="watermark",i="watermarkClass",s="watermarkFocus",o="watermarkSubmit",u="watermarkMaxLength",a="watermarkPassword",f="watermarkText",l=/\r/g,c=/^(button|checkbox|hidden|image|radio|range|reset|submit)$/i,h="input:data("+r+"),textarea:data("+r+")",p=":watermarkable",d=["Page_ClientValidate"],v=!1,m="placeholder"in document.createElement("input");e.watermark=e.watermark||{version:"3.1.4",runOnce:!0,options:{className:"watermark",useNative:!0,hideBeforeUnload:!0},hide:function(t){e(t).filter(h).each(function(){e.watermark._hide(e(this))})},_hide:function(e,n){var r=e[0],s=(r.value||"").replace(l,""),o=e.data(f)||"",c=e.data(u)||0,h=e.data(i);if(o.length&&s==o){r.value="";if(e.data(a)&&(e.attr("type")||"")==="text"){var p=e.data(a)||[],d=e.parent()||[];p.length&&d.length&&(d[0].removeChild(e[0]),d[0].appendChild(p[0]),e=p)}c&&(e.attr("maxLength",c),e.removeData(u)),n&&(e.attr("autocomplete","off"),t.setTimeout(function(){e.select()},1))}h&&e.removeClass(h)},show:function(t){e(t).filter(h).each(function(){e.watermark._show(e(this))})},_show:function(t){var n=t[0],r=(n.value||"").replace(l,""),o=t.data(f)||"",c=t.attr("type")||"",h=t.data(i);if(r.length!=0&&r!=o||!!t.data(s))e.watermark._hide(t);else{v=!0;if(t.data(a)&&c==="password"){var p=t.data(a)||[],d=t.parent()||[];p.length&&d.length&&(d[0].removeChild(t[0]),d[0].appendChild(p[0]),t=p,t.attr("maxLength",o.length),n=t[0])}if(c==="text"||c==="search"){var m=t.attr("maxLength")||0;m>0&&o.length>m&&(t.data(u,m),t.attr("maxLength",o.length))}h&&t.addClass(h),n.value=o}},hideAll:function(){v&&(e.watermark.hide(p),v=!1)},showAll:function(){e.watermark.show(p)}},e.fn.watermark=e.fn.watermark||function(n,u){if(!this.length)return this;var c=!1,h=typeof n=="string";return h&&(n=n.replace(l,"")),typeof u=="object"?(c=typeof u.className=="string",u=e.extend({},e.watermark.options,u)):typeof u=="string"?(c=!0,u=e.extend({},e.watermark.options,{className:u})):u=e.watermark.options,typeof u.useNative!="function"&&(u.useNative=u.useNative?function(){return!0}:function(){return!1}),this.each(function(){var d=e(this);if(!d.is(p))return;if(d.data(r)){if(h||c)e.watermark._hide(d),h&&d.data(f,n),c&&d.data(i,u.className)}else{if(m&&u.useNative.call(this,d)&&(d.attr("tagName")||"")!=="TEXTAREA"){h&&d.attr("placeholder",n);return}d.data(f,h?n:""),d.data(i,u.className),d.data(r,1);if((d.attr("type")||"")==="password"){var v=d.wrap("<span>").parent(),g=e(v.html().replace(/type=["']?password["']?/i,'type="text"'));g.data(f,d.data(f)),g.data(i,d.data(i)),g.data(r,1),g.attr("maxLength",n.length),g.focus(function(){e.watermark._hide(g,!0)}).bind("dragenter",function(){e.watermark._hide(g)}).bind("dragend",function(){t.setTimeout(function(){g.blur()},1)}),d.blur(function(){e.watermark._show(d)}).bind("dragleave",function(){e.watermark._show(d)}),g.data(a,d),d.data(a,g)}else d.focus(function(){d.data(s,1),e.watermark._hide(d,!0)}).blur(function(){d.data(s,0),e.watermark._show(d)}).bind("dragenter",function(){e.watermark._hide(d)}).bind("dragleave",function(){e.watermark._show(d)}).bind("dragend",function(){t.setTimeout(function(){e.watermark._show(d)},1)}).bind("drop",function(e){var t=d[0],n=e.originalEvent.dataTransfer.getData("Text");(t.value||"").replace(l,"").replace(n,"")===d.data(f)&&(t.value=n),d.focus()});if(this.form){var y=this.form,b=e(y);b.data(o)||(b.submit(e.watermark.hideAll),y.submit?(b.data(o,y.submit),y.submit=function(t,n){return function(){var r=n.data(o);e.watermark.hideAll(),r.apply?r.apply(t,Array.prototype.slice.call(arguments)):r()}}(y,b)):(b.data(o,1),y.submit=function(t){return function(){e.watermark.hideAll(),delete t.submit,t.submit()}}(y)))}}e.watermark._show(d)})},e.watermark.runOnce&&(e.watermark.runOnce=!1,e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},watermarkable:function(e){var t,n=e.nodeName;return n==="TEXTAREA"?!0:n!=="INPUT"?!1:(t=e.getAttribute("type"),!t||!c.test(t))}}),function(t){e.fn.val=function(){var i=Array.prototype.slice.call(arguments);if(!this.length)return i.length?this:n;if(!i.length){if(this.data(r)){var s=(this[0].value||"").replace(l,"");return s===(this.data(f)||"")?"":s}return t.apply(this)}return t.apply(this,i),e.watermark.show(this),this}}(e.fn.val),d.length&&e(function(){var n,r,i;for(n=d.length-1;n>=0;n--)r=d[n],i=t[r],typeof i=="function"&&(t[r]=function(t){return function(){return e.watermark.hideAll(),t.apply(null,Array.prototype.slice.call(arguments))}}(i))}),e(t).bind("beforeunload",function(){e.watermark.options.hideBeforeUnload&&e.watermark.hideAll()}))}(jQuery,window),SocialStream.Timeline=function(e,t,n){var r=[],i=[],s=function(e){r.push(e)},o=function(e){i.push(e)},u=function(){t.each(r,function(e,t){t()})},a=function(e){t.each(i,function(t,n){n(e)})},f=function(e){var r=".activity_audience",i=".activity_audience_summary";e!=n&&(r="#"+e+" "+r,i="#"+e+" "+i),t(r).hide(),t(i).tipsy({html:!0,hoverable:!0,opacity:.95,title:function(){return t(this).siblings(".activity_audience").html()}})},l=function(){t("#wall .activity_comments").each(function(){var e=t(this).children(".subactivity");e.size()>3&&(t(this).prepend("<div class='hide_show_comments'><a href='#' onclick='SocialStream.Timeline.showAllComments(\""+t(this).attr("id")+"\"); return false;'>"+I18n.t("comment.view_all")+"("+e.size()+")</a></div><div class='space_comments'></div>"),e.slice(0,e.size()-2).hide(),t(this).children(".space_comments").slice(0,e.size()-2).hide())})},c=function(e){t("#"+e).children().show(),t("#"+e).children(".hide_show_comments").hide()};return s(f),s(l),o(f),{addInitCallback:s,init:u,addCreateCallback:o,create:a,initPrivacyTooltips:f,showAllComments:c}}(SocialStream,jQuery),SocialStream.Wall=function(e,t,n){var r=[],i=function(e){r.push(e)},s=function(){t.each(r,function(e,t){t()})},o=function(){t("#wrapper_activities_header form").hide(),t("#new_post").show(),t("#select_post").addClass("selected")},u=function(){t("#masterSubmitButton").click(function(){t("#wrapper_activities_header form:visible").submit()})},a=function(){t("#input_activities").watermark(I18n.t("post.input"),"#666")},f=function(){t(".activity_form_selector").click(function(){t(".activity_form_selector").removeClass("selected"),t(this).addClass("selected"),t("#wrapper_activities_header form").hide(),t("#"+this.id.replace(/^select/,"new")).show()})},l=function(e){t("#security_chzn .chzn-choices").css("background-image","url(/assets/btn/"+e+".png)")},c=function(){var e="100px";chosen=t("#security").security_chosen(),t("#security").change(function(){t(this).children("option:selected").each(function(e,n){if(n.value==relation_public){if(public_selected==0){public_selected=!0;for(id in relation_options)id==relation_public_pos?t("#securitychzn_o_"+relation_public_pos).click():chosen.result_deselect(id);chosen.results_update_field()}else t("#security").children("option:selected").size()>1&&(public_selected=!1,chosen.result_deselect(relation_public_pos),chosen.results_update_field());l("public")}else l("restricted")}),t("#securities .search-choice a").click(function(){t("#security").children("option:selected").size()==0&&t("#securities input").css("width",e)})}),t("#securities input").blur(function(){t("#security").children("option:selected").size()==0&&t("#securities input").css("width",e)}),t("#securities input.default").css("width",e)},h=function(){t("#wrapper_activities_header form").submit(function(){t(this).find("input[type=text]").each(function(){t(this).blur().attr("readonly",!0)}),t("#masterSubmitButton").val(I18n.t("activity.sending")+"...").attr("disabled",!0),t(".liveAdded").remove();var e=t(this);return t("#security option:selected").each(function(){e.append(t("<input/>").addClass("liveAdded").attr("type","hidden").attr("name",e.attr("id").split("_")[1]+"[relation_ids][]").val(t(this).attr("value")))}),!0}),t(".new_comment").submit(function(){return t(this).find("input[type=text]").each(function(){t(this).blur().attr("readonly",!0)}),t(this).find(".submitActivity").each(function(){t(this).val(I18n.t("activity.sending")+"...").attr("disabled",!0)}),!0})},p=function(){t(".submitActivity").val(I18n.t("share")).removeAttr("disabled"),t("#masterSubmitButton").val(I18n.t("share")).removeAttr("disabled"),t("#wrapper_activities_header form").find("input[type=text]").each(function(){t(this).removeAttr("readonly").val("").blur()}),t(".input_new_comments").each(function(){t(this).removeAttr("readonly").val("")})};return i(o),i(u),i(a),i(f),i(c),i(h),e.Timeline.addCreateCallback(p),{addInitCallback:i,init:s,activateAntiRebounds:h,unblockForms:p}}(SocialStream,jQuery),$("#carousel_ul li:first").before($("#carousel_ul li:last")),$("#right_scroll img").livequery("click",function(){var e=$("#carousel_ul li").outerWidth()+10,t=parseInt($("#carousel_ul").css("left"))-e;$("#carousel_ul:not(:animated)").animate({left:t},500,function(){$("#carousel_ul li:last").after($("#carousel_ul li:first")),$("#carousel_ul").css({left:"-210px"})})}),$("#left_scroll img").livequery("click",function(){var e=$("#carousel_ul li").outerWidth()+10,t=parseInt($("#carousel_ul").css("left"))+e;$("#carousel_ul:not(:animated)").animate({left:t},500,function(){$("#carousel_ul li:first").before($("#carousel_ul li:last")),$("#carousel_ul").css({left:"-210px"})})}),function(){var e,t,n,r,i,s=function(e,t){return function(){return e.apply(t,arguments)}};i=typeof exports!="undefined"&&exports!==null?exports:this,e=jQuery,e.fn.extend({security_chosen:function(n,r){var i;return e(this).each(function(s){e(this).hasClass("chzn-done")||(i=new t(this,n,r))}),i}}),t=function(){function t(t){this.set_default_values(),this.form_field=t,this.form_field_jq=e(this.form_field),this.is_multiple=this.form_field.multiple,this.default_text_default=this.form_field.multiple?"Select Some Options":"Select an Option",this.set_up_html(),this.register_observers(),this.form_field_jq.addClass("chzn-done")}return t.prototype.set_default_values=function(){return this.click_test_action=s(function(e){return this.test_active_click(e)},this),this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.choices=0},t.prototype.set_up_html=function(){var t,n,i,s;return this.container_id=this.form_field.id+"_chzn",this.f_width=this.form_field_jq.width(),this.default_text=this.form_field_jq.attr("title")?this.form_field_jq.attr("title"):this.default_text_default,t=e("<div />",{id:this.container_id,"class":"chzn-container"}),this.is_multiple?t.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):t.html('<a href="javascript:void(0)" class="chzn-single"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(t),this.container=e("#"+this.container_id),this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.find("div.chzn-drop").first(),n=this.container.height(),i=this.f_width-r(this.dropdown),this.dropdown.css({width:i+"px",top:n+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),s=i-r(this.search_container)-r(this.search_field),this.search_field.css({width:s+"px"})),this.results_build(),this.set_tab_index()},t.prototype.register_observers=function(){return this.container.click(s(function(e){return this.container_click(e)},this)),this.container.mouseenter(s(function(e){return this.mouse_enter(e)},this)),this.container.mouseleave(s(function(e){return this.mouse_leave(e)},this)),this.search_results.click(s(function(e){return this.search_results_click(e)},this)),this.search_results.mouseover(s(function(e){return this.search_results_mouseover(e)},this)),this.search_results.mouseout(s(function(e){return this.search_results_mouseout(e)},this)),this.form_field_jq.bind("liszt:updated",s(function(e){return this.results_update_field(e)},this)),this.search_field.blur(s(function(e){return this.input_blur(e)},this)),this.search_field.keyup(s(function(e){return this.keyup_checker(e)},this)),this.search_field.keydown(s(function(e){return this.keydown_checker(e)},this)),this.is_multiple?(this.search_choices.click(s(function(e){return this.choices_click(e)},this)),this.search_field.focus(s(function(e){return this.input_focus(e)},this))):this.selected_item.focus(s(function(e){return this.activate_field(e)},this))},t.prototype.container_click=function(t){return t&&t.type==="click"&&t.stopPropagation(),this.pending_destroy_click?this.pending_destroy_click=!1:(this.active_field?!this.is_multiple&&t&&(e(t.target)===this.selected_item||e(t.target).parents("a.chzn-single").length)&&(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).click(this.click_test_action),this.results_show()),this.activate_field())},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(e){if(!this.active_field)return setTimeout(s(function(){return this.container_click()},this),50)},t.prototype.input_blur=function(e){if(!this.mouse_on_container)return this.active_field=!1,setTimeout(s(function(){return this.blur_test()},this),100)},t.prototype.blur_test=function(e){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()},t.prototype.close_field=function(){e(document).unbind("click",this.click_test_action),this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1)),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default()},t.prototype.activate_field=function(){return!this.is_multiple&&!this.active_field&&(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1)),this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},t.prototype.test_active_click=function(t){return e(t.target).parents("#"+this.container.id).length?this.active_field=!0:this.close_field()},t.prototype.results_build=function(){var e,t,r,i,s,o;r=new Date,this.parsing=!0,this.results_data=n.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||this.selected_item.find("span").text(this.default_text),e="",o=this.results_data;for(i=0,s=o.length;i<s;i++)t=o[i],t.group?e+=this.result_add_group(t):t.empty||(e+=this.result_add_option(t),t.selected&&this.is_multiple?this.choice_build(t):t.selected&&!this.is_multiple&&this.selected_item.find("span").text(t.text));return this.show_search_field_default(),this.search_field_scale(),this.search_results.html(e),this.parsing=!1},t.prototype.result_add_group=function(t){return t.disabled?"":(t.dom_id=this.form_field.id+"chzn_g_"+t.array_index,'<li id="'+t.dom_id+'" class="group-result">'+e("<div />").text(t.label).html()+"</li>")},t.prototype.result_add_option=function(t){var n;return t.disabled?"":(t.dom_id=this.form_field.id+"chzn_o_"+t.array_index,n=t.selected&&this.is_multiple?[]:["active-result"],t.selected&&n.push("result-selected"),t.group_array_index!=null&&n.push("group-option"),'<li id="'+t.dom_id+'" class="'+n.join(" ")+'">'+e("<div />").text(t.text).html()+"</li>")},t.prototype.results_update_field=function(){return this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},t.prototype.result_do_highlight=function(e){var t,n,r,i,s;if(e.length){this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),r=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),i=r+s,n=this.result_highlight.position().top+this.search_results.scrollTop(),t=n+this.result_highlight.outerHeight();if(t>=i)return this.search_results.scrollTop(t-r>0?t-r:0);if(n<s)return this.search_results.scrollTop(n)}},t.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_show=function(){var e;return this.is_multiple||(this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected)),e=this.is_multiple?this.container.height():this.container.height()-1,this.dropdown.css({top:e+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},t.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},t.prototype.set_tab_index=function(e){var t;if(this.form_field_jq.attr("tabindex"))return t=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.is_multiple?this.search_field.attr("tabindex",t):(this.selected_item.attr("tabindex",t),this.search_field.attr("tabindex",-1))},t.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},t.prototype.search_results_click=function(t){var n;n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first();if(n.length)return this.result_highlight=n,this.result_select()},t.prototype.search_results_mouseover=function(t){var n;n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first();if(n)return this.result_do_highlight(n)},t.prototype.search_results_mouseout=function(t){if(e(t.target).hasClass("active-result"))return this.result_clear_highlight()},t.prototype.choices_click=function(t){t.preventDefault();if(this.active_field&&!e(t.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()},t.prototype.choice_build=function(t){var n,r;return n=this.form_field.id+"_chzn_c_"+t.array_index,this.choices+=1,this.search_container.before('<li class="search-choice" id="'+n+'"><span>'+t.text+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+t.array_index+'"></a></li>'),r=e("#"+n).find("a").first(),r.click(s(function(e){return this.choice_destroy_link_click(e)},this))},t.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),this.pending_destroy_click=!0,this.choice_destroy(e(t.target))},t.prototype.choice_destroy=function(e){return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),this.result_deselect(e.attr("rel")),e.parents("li").first().remove()},t.prototype.result_select=function(){var e,t,n,r;if(this.result_highlight)return e=this.result_highlight,t=e.attr("id"),this.result_clear_highlight(),e.addClass("result-selected"),this.is_multiple?this.result_deactivate(e):this.result_single_selected=e,r=t.substr(t.lastIndexOf("_")+1),n=this.results_data[r],n.selected=!0,this.form_field.options[n.options_index].selected=!0,this.is_multiple?this.choice_build(n):this.selected_item.find("span").first().text(n.text),this.results_hide(),this.search_field.val(""),this.form_field_jq.trigger("change"),this.search_field_scale()},t.prototype.result_activate=function(e){return e.addClass("active-result").show()},t.prototype.result_deactivate=function(e){return e.removeClass("active-result").hide()},t.prototype.result_deselect=function(t){var n,r;return r=this.results_data[t],r.selected=!1,this.form_field.options[r.options_index].selected=!1,n=e("#"+this.form_field.id+"chzn_o_"+t),n.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change"),this.search_field_scale()},t.prototype.results_search=function(e){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g;f=new Date,this.no_results_clear(),u=0,a=this.search_field.val()===this.default_text?"":e.trim(this.search_field.val()),s=new RegExp("^"+a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),h=new RegExp(a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),g=this.results_data;for(p=0,v=g.length;p<v;p++){n=g[p];if(!n.disabled&&!n.empty)if(n.group)e("#"+n.dom_id).hide();else if(!this.is_multiple||!n.selected){t=!1,o=n.dom_id;if(s.test(n.text))t=!0,u+=1;else if(n.text.indexOf(" ")>=0||n.text.indexOf("[")===0){i=n.text.replace(/\[|\]/g,"").split(" ");if(i.length)for(d=0,m=i.length;d<m;d++)r=i[d],s.test(r)&&(t=!0,u+=1)}t?(a.length?(l=n.text.search(h),c=n.text.substr(0,l+a.length)+"</em>"+n.text.substr(l+a.length),c=c.substr(0,l)+"<em>"+c.substr(l)):c=n.text,e("#"+o).html!==c&&e("#"+o).html(c),this.result_activate(e("#"+o)),n.group_array_index!=null&&e("#"+this.results_data[n.group_array_index].dom_id).show()):(this.result_highlight&&o===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(e("#"+o)))}}return u<1&&a.length?this.no_results(a):this.winnow_results_set_highlight()},t.prototype.winnow_results_clear=function(){var t,n,r,i,s;this.search_field.val(""),n=this.search_results.find("li"),s=[];for(r=0,i=n.length;r<i;r++)t=n[r],t=e(t),s.push(t.hasClass("group-result")?t.show():!this.is_multiple||!t.hasClass("result-selected")?this.result_activate(t):void 0);return s},t.prototype.winnow_results_set_highlight=function(){var e;if(!this.result_highlight){e=this.search_results.find(".active-result").first();if(e)return this.result_do_highlight(e)}},t.prototype.no_results=function(t){var n;return n=e('<li class="no-results">No results match "<span></span>"</li>'),n.find("span").first().text(t),this.search_results.append(n)},t.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},t.prototype.keydown_arrow=function(){var t,n;this.result_highlight?this.results_showing&&(n=this.result_highlight.nextAll("li.active-result").first(),n&&this.result_do_highlight(n)):(t=this.search_results.find("li.active-result").first(),t&&this.result_do_highlight(e(t)));if(!this.results_showing)return this.results_show()},t.prototype.keyup_arrow=function(){var e;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight)return e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())},t.prototype.keydown_backstroke=function(){return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(this.pending_backstroke=this.search_container.siblings("li.search-choice").last(),this.pending_backstroke.addClass("search-choice-focus"))},t.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},t.prototype.keyup_checker=function(e){var t,n;t=(n=e.which)!=null?n:e.keyCode,this.search_field_scale();switch(t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:e.preventDefault();if(this.results_showing)return this.result_select();break;case 27:if(this.results_showing)return this.results_hide();break;case 9:case 38:case 40:case 16:break;default:return this.results_search()}},t.prototype.keydown_checker=function(e){var t,n;t=(n=e.which)!=null?n:e.keyCode,this.search_field_scale(),t!==8&&this.pending_backstroke&&this.clear_backstroke();switch(t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},t.prototype.search_field_scale=function(){var t,n,r,i,s,o,u,a,f;if(this.is_multiple){r=0,u=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(a=0,f=o.length;a<f;a++)i=o[a],s+=i+":"+this.search_field.css(i)+";";return n=e("<div />",{style:s}),n.text(this.search_field.val()),e("body").append(n),u=n.width()+25,n.remove(),u>this.f_width-10&&(u=this.f_width-10),this.search_field.css({width:u+"px"}),t=this.container.height(),this.dropdown.css({top:t+"px"})}},t}(),r=function(e){var t;return t=e.outerWidth()-e.width()},i.get_side_border_padding=r,n=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return e.nodeName==="OPTGROUP"?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,n,r,i,s,o;t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:e.label,children:0,disabled:e.disabled}),s=e.childNodes,o=[];for(r=0,i=s.length;r<i;r++)n=s[r],o.push(this.add_option(n,t,e.disabled));return o},e.prototype.add_option=function(e,t,n){if(e.nodeName==="OPTION")return e.text!==""?(t!=null&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,selected:e.selected,disabled:n===!0?n:e.disabled,group_array_index:t})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},e}(),n.select_to_array=function(e){var t,r,i,s,o;r=new n,o=e.childNodes;for(i=0,s=o.length;i<s;i++)t=o[i],r.add_node(t);return r.parsed},i.SelectParser=n}.call(this),window.requestAnimFrame=function(e){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),function(e){"$:nomunge";function A(e){return typeof e=="string"}function O(e){return typeof e=="object"}function M(){var e=a.call(arguments),t=e.shift();return function(
){return t.apply(this,e.concat(a.call(arguments)))}}function _(){return f.href.replace(/^[^#]*#?/,"")}function D(e){var t=e.nodeName;return t?n[t.toLowerCase()]:""}function P(t,n,r,i){var s;return A(r)||O(r)?I(n,r,i,t):O(n)?e.param(n):A(n)?F(n,r,t):(s=t?_():f.search,F(s,n,t))}function H(){var t,n,r,i=a.call(arguments),s=i.shift();if(A(i[1])||O(i[1]))t=i.shift();return n=i.shift(),r=i.shift(),this.each(function(){var i=e(this),o=t||D(this),u=o&&i.attr(o)||"";u=P(s,u,n,r),i.attr(o,u)})}function B(){var t=a.call(arguments),n=t.shift(),r=t.shift(),i=P(n);return e.isFunction(t[0])?i=t.shift()(i):e.isArray(t[0])&&e.each(t.shift(),function(e,t){delete i[t]}),P(n,r,i,t.shift())}function j(){var t,n=a.call(arguments),r=n.shift();return A(n[0])&&(t=n.shift()),this.each(function(){var i=e(this),s=t||D(this),o=s&&i.attr(s)||"";o=B.apply(this,[r,o].concat(n)),i.attr(s,o)})}function F(t,n,i){var u,a,f,l={},c={"null":null,"true":s,"false":o},h=decodeURIComponent,p=i?/^.*[#]/:/^.*[?]|#.*$/g;t=t.replace(p,"").replace(/\+/g," ").split("&");while(t.length)u=t.shift().split("="),a=h(u[0]),u.length===2?(f=h(u[1]),n&&(f&&!isNaN(f)?f=Number(f):f==="undefined"?f=r:c[f]!==r&&(f=c[f])),e.isArray(l[a])?l[a].push(f):l[a]!==r?l[a]=[l[a],f]:l[a]=f):a&&(l[a]=n?r:"");return l}function I(t,n,r,i){var s,o=i?/^([^#]*)[#]?(.*)$/:/^([^#?]*)[?]?([^#]*)(#?.*)/,u=t.match(o),a=F(u[2],0,i),f=u[3]||"";return A(n)&&(n=F(n,0,i)),r===2?s=n:r===1?s=e.extend({},n,a):s=e.extend({},a,n),s=e.param(s),u[1]+(i?"#":s||!u[1]?"?":"")+s+f}function q(){var t,n=e.browser,r={};return r[S]=r[E]=function(e){return e},n.msie&&n.version<8&&(r[S]=function(e,n){var r=t.document;e!==n&&(r.open(),r.close(),r.location.hash="#"+e)},r[E]=function(){return t.document.location.hash.replace(/^#/,"")},t=e("<iframe/>").hide().appendTo("body").get(0).contentWindow,r[S](_())),r}var t,n={},r,i=this,s=!0,o=!1,u="onhashchange"in i,a=Array.prototype.slice,f=document.location,l,c,h,p,d,v,m,g,y="urlInternal",b="urlExternal",w="queryString",E="fragment",S="update",x="passQueryString",T="passFragment",N="fragmentChange",C="hashchange."+N,k,L;e.urlTagAttrList=l=function(t){return e.extend(n,t)},l({a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"}),e.urlInternalHost=c=function(e){e=e?"(?:"+e+"\\.)?":"";var t=new RegExp("^"+e+"(.*)","i"),n="^"+f.protocol+"//"+f.hostname.replace(t,e+"$1")+(f.port?":"+f.port:"")+"/";return h(n)},e.urlInternalRegExp=h=function(e){return e&&(t=A(e)?new RegExp(e,"i"):e),t},c("www"),e.isUrlInternal=p=function(e){return e?t.test(e)?s:/^https?:\/\//i.test(e)?o:/^(?:#|[a-z\d.-]+:)/i.test(e)?r:s:r},e.isUrlExternal=d=function(e){var t=p(e);return typeof t=="boolean"?!t:t},v=function(e,t){return this.filter(":"+e+(t?"("+t+")":""))},e.fn[y]=M(v,y),e.fn[b]=M(v,b),m=function(t,n,r,i){var s=i[3]||D(n);return s?!!t(e(n).attr(s)):o},e.expr[":"][y]=M(m,p),e.expr[":"][b]=M(m,d),e[w]=M(P,0),e[E]=M(P,1),e.fn[w]=M(H,0),e.fn[E]=M(H,1),e[x]=M(B,0),e[T]=M(B,1),e.fn[x]=M(j,0),e.fn[T]=M(j,1),e.setFragment=g=function(e,t){var n=O(e)?P(s,e):(e||"").replace(/^#/,"");n=e?I("#"+_(),"#"+n,t,1):"#",f.href=f.href.replace(/#.*$/,"")+n},e[N]=function(t){function n(){var t=e.Event(N);t[E]=_(),e(document).trigger(t)}t===s&&(t=100),u&&e(i).unbind(C),k&&clearTimeout(k),k=null,typeof t=="number"&&(u?e(i).bind(C,n):(L=_(),e.isFunction(q)&&(q=q()),function r(){var e=_(),i=q[E](L);e!==L?(q[S](e,i),L=e,n()):i!==L&&g(i,2),k=setTimeout(r,t<0?0:t)}()))}}(jQuery),$(function(){$("#search_field").live("click",function(){this.value=="Search by name"&&(this.value="")}),$("#search_field").keypress(function(e){e.keyCode=="13"&&($("#list_users_ajax").html("<div id='ajax_loader_icon'><img src='../images/loader.gif'></div>"),$.getScript(window.location.pathname+"?search="+this.value+""))}),$("#search_button").click(function(){e=$.Event("keypress"),e.keyCode=13,$("#search_field").trigger(e)}),$(".pagination a").live("click",function(){return $("#list_users_ajax").html("<div id='ajax_loader_icon'><img src='../images/loader.gif'></div>"),$.setFragment({page:$.queryString(this.href).page}),$.setFragment({letter:$.queryString(this.href).letter}),$.setFragment({search:$.queryString(this.href).search}),$.setFragment({tag:$.queryString(this.href).tag}),$.getScript(this.href),!1}),$(".user_letter_link").live("click",function(){return $("#list_users_ajax").html("<div id='ajax_loader_icon'><img src='../images/loader.gif'></div>"),$.setFragment({letter:$.queryString(this.href).letter}),$.getScript(this.href),!1}),$("#wordcloud a").live("click",function(){return $("#list_users_ajax").html("<div id='ajax_loader_icon'><img src='../images/loader.gif'></div>"),$.setFragment({tag:$.queryString(this.href).tag}),$.getScript(this.href),!1})}),function(e){function n(e){return typeof e=="object"?e:{top:e,left:e}}var t=e.scrollTo=function(t,n,r){e(window).scrollTo(t,n,r)};t.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1},t.window=function(t){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!n)return t;var r=(t.contentWindow||t).document||t.ownerDocument||t;return e.browser.safari||r.compatMode=="BackCompat"?r.body:r.documentElement})},e.fn.scrollTo=function(r,i,s){return typeof i=="object"&&(s=i,i=0),typeof s=="function"&&(s={onAfter:s}),r=="max"&&(r=9e9),s=e.extend({},t.defaults,s),i=i||s.speed||s.duration,s.queue=s.queue&&s.axis.length>1,s.queue&&(i/=2),s.offset=n(s.offset),s.over=n(s.over),this._scrollable().each(function(){function h(e){u.animate(l,i,s.easing,e&&function(){e.call(this,r,s)})}var o=this,u=e(o),a=r,f,l={},c=u.is("html,body");switch(typeof a){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(a)){a=n(a);break}a=e(a,this);case"object":if(a.is||a.style)f=(a=e(a)).offset()}e.each(s.axis.split(""),function(e,n){var r=n=="x"?"Left":"Top",i=r.toLowerCase(),p="scroll"+r,d=o[p],v=t.max(o,n);if(f)l[p]=f[i]+(c?0:d-u.offset()[i]),s.margin&&(l[p]-=parseInt(a.css("margin"+r))||0,l[p]-=parseInt(a.css("border"+r+"Width"))||0),l[p]+=s.offset[i]||0,s.over[i]&&(l[p]+=a[n=="x"?"width":"height"]()*s.over[i]);else{var m=a[i];l[p]=m.slice&&m.slice(-1)=="%"?parseFloat(m)/100*v:m}/^\d+$/.test(l[p])&&(l[p]=l[p]<=0?0:Math.min(l[p],v)),!e&&s.queue&&(d!=l[p]&&h(s.onAfterFirst),delete l[p])}),h(s.onAfter)}).end()},t.max=function(t,n){var r=n=="x"?"Width":"Height",i="scroll"+r;if(!e(t).is("html,body"))return t[i]-e(t)[r.toLowerCase()]();var s="client"+r,o=t.ownerDocument.documentElement,u=t.ownerDocument.body;return Math.max(o[i],u[i])-Math.min(o[s],u[s])}}(jQuery),function(e){e.extend(e.fn,{validate:function(t){if(!this.length){t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var n=e.data(this[0],"validator");return n?n:(n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){n.cancelSubmit=!0}),n.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){n.submitButton=this}),this.submit(function(t){function r(){if(n.settings.submitHandler){if(n.submitButton)var t=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(n.submitButton.value).appendTo(n.currentForm);return n.settings.submitHandler.call(n,n.currentForm),n.submitButton&&t.remove(),!1}return!0}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,r()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):r():(n.focusInvalid(),!1)})),n)},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,n=e(this[0].form).validate();return this.each(function(){t&=n.element(this)}),t},removeAttrs:function(t){var n={},r=this;return e.each(t.split(/\s/),function(e,t){n[t]=r.attr(t),r.removeAttr(t)}),n},rules:function(t,n){var r=this[0];if(t){var i=e.data(r.form,"validator").settings,s=i.rules,o=e.validator.staticRules(r);switch(t){case"add":e.extend(o,e.validator.normalizeRule(n)),s[r.name]=o,n.messages&&(i.messages[r.name]=e.extend(i.messages[r.name],n.messages));break;case"remove":if(!n)return delete s[r.name],o;var u={};return e.each(n.split(/\s/),function(e,t){u[t]=o[t],delete o[t]}),u}}var a=e.validator.normalizeRules(e.extend({},e.validator.metadataRules(r),e.validator.classRules(r),e.validator.attributeRules(r),e.validator.staticRules(r)),r);if(a.required){var f=a.required;delete a.required,a=e.extend({required:f},a)}return a}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+t.value)},filled:function(t){return!!e.trim(""+t.value)},unchecked:function(e){return!e.checked}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return arguments.length==1?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!=Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!=Array&&(n=[n]),e.each(n,function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),n)}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e){!this.checkable(e)&&(e.name in this.submitted||!this.optional(e))&&this.element(e)},onkeyup:function(e){(e.name in this.submitted||e==this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,r){t.type==="radio"?this.findByName(t.name).addClass(n).removeClass(r):e(t).addClass(n).removeClass(r)},unhighlight:function(t,n,r){t.type==="radio"?this.findByName(t.name).removeClass(n).addClass(r):e(t).removeClass(n).addClass(r)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function r(t){var n=e.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,"");n.settings[r]&&n.settings[r].call(n,this[0])}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var t=this.groups={};e.each(this.settings.groups,function(n,r){e.each(r.split(/\s/),function(e,r){t[r]=n})});var n=this.settings.rules;e.each(n,function(t,r){n[t]=e.validator.normalizeRule(r)}),e(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",r).validateDelegate(":radio, :checkbox, select, option","click",r),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.clean(t),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var n=this.check(t);return n?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var n in t)this.errorList.push({message:t[n],element:this.findByName(n)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var n in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&e.grep(this.errorList,function(e){return e.element.name==t.name}).length==1&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!t.objectLength(e(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){return e(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},check:function(t){t=this.clean(t),this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]);var n=e(t).rules(),r=!1;for(var i in n){var s={method:i,parameters:n[i]};try{var o=e.validator.methods[i].call(this,t.value.replace(/\r/g,""),t,s.parameters);if(o=="dependency-mismatch"){r=!0;continue}r=!1;if(o=="pending"){this.toHide=this.toHide.not(this.errorsFor(t));return}if(!o)return this.formatAndAdd(t,s),!1}catch(u){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+s.method+"' method",u),u}}if(r)return;return this.objectLength(n)&&this.successList.push(t),!0},customMetaMessage:function(t,n){if(!e.metadata)return;var r=this.settings.meta?e(t).metadata()[this.settings.meta]:e(t).metadata();return r&&r.messages&&r.messages[n]},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor==String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==undefined)return arguments[e];return undefined},defaultMessage:function(t,n){return this.findDefined(this.customMessage(t.name,n),this.customMetaMessage(t,n),!this.settings.ignoreTitle&&t.title||undefined,e.validator.messages[n],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t.method),r=/\$?\{(\d+)\}/g;typeof n=="function"?n=n.call(this,t.parameters,e):r.test(n)&&(n=jQuery.format(n.replace(r,"{$1}"),t.parameters)),this.errorList.push({message:n,element:e}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){for(var e=0;this.errorList[e];e++){var t=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(var e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(var e=0,n=this.validElements();n[e];e++)this.settings.unhighlight.call(this,n[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,n){var r=this.errorsFor(t);r.length?(r.removeClass().addClass(this.settings.errorClass),r.attr("generated")&&r.html(n)):(r=e("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(r=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(r).length||(this.settings.errorPlacement?this.settings.errorPlacement(r,e(t)):r.insertAfter(t))),!n&&this.settings.success&&(r.text(""),typeof this.settings.success=="string"?r.addClass(this.settings.success):this.settings.success(r)),this.toShow=this.toShow.add(r)},errorsFor:function(t){var n=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")==n})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){var n=this.currentForm;return e(document.getElementsByName(t)).map(function(e,r){return r.form==n&&r.name==t&&r||null})},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e,t){return e},string:function(t,n){return!!e(t,n.form).length},"function":function(e,t){return e(t)}},optional:function(t){return!e.validator.methods.required.call(this,e.trim(t.value),t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],n&&this.pendingRequest==0&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&this.pendingRequest==0&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor==String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},r=e(t).attr("class");return r&&e.each(r.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])}),n},attributeRules:function(t){var n={},r=e(t);for(var i in e.validator.methods){var s=r.attr(i);s&&(n[i]=s)}return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},metadataRules:function(t){if(!e.metadata)return{};var n=e.data(t.form,"validator").settings.meta;return n?e(t).metadata()[n]:e(t).metadata()},staticRules:function(t){var n={},r=e.data(t.form,"validator");return r.settings.rules&&(n=e.validator.normalizeRule(r.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,function(r,i){if(i===!1){delete t[r];return}if(i.param||i.depends){var s=!0;switch(typeof i.depends){case"string":s=!!e(i.depends,n.form).length;break;case"function":s=i.depends.call(n,n)}s?t[r]=i.param!==undefined?i.param:!0:delete t[r]}}),e.each(t,function(r,i){t[r]=e.isFunction(i)?i(n):i}),e.each(["minlength","maxlength","min","max"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if(typeof t=="string"){var n={};e.each(t.split(/\s/),function(){n[this]=!0}),t=n}return t},addMethod:function(t,n,r){e.validator.methods[t]=n,e.validator.messages[t]=r!=undefined?r:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,r){if(!this.depend(r,n))return"dependency-mismatch";switch(n.nodeName.toLowerCase()){case"select":var i=e(n).val();return i&&i.length>0;case"input":if(this.checkable(n))return this.getLength(t,n)>0;default:return e.trim(t).length>0}},remote:function(t,n,r){if(this.optional(n))return"dependency-mismatch";var i=this.previousValue(n);this.settings.messages[n.name]||(this.settings.messages[n.name]={}),i.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=i.message,r=typeof r=="string"&&{url:r}||r;if(this.pending[n.name])return"pending";if(i.old===t)return i.valid;i.old=t;var s=this;this.startRequest(n);var o={};return o[n.name]=t,e.ajax(e.extend(!0,{url:r,mode:"abort",port:"validate"+n.name,dataType:"json",data:o,success:function(r){s.settings.messages[n.name].remote=i.originalMessage;var o=r===!0;if(o){var u=s.formSubmitted;s.prepareElement(n),s.formSubmitted=u,s.successList.push(n),s.showErrors()}else{var a={},f=r||s.defaultMessage(n,"remote");a[n.name]=i.message=e.isFunction(f)?f(t):f,s.showErrors(a)}i.valid=o,s.stopRequest(n,o)}},r)),"pending"},minlength:function(t,n,r){return this.optional(n)||this.getLength(e.trim(t),n)>=r},maxlength:function(t,n,r){return this.optional(n)||this.getLength(e.trim(t),n)<=r},rangelength:function(t,n,r){var i=this.getLength(e.trim(t),n);return this.optional(n)||i>=r[0]&&i<=r[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9-]+/.test(e))return!1;var n=0,r=0,i=!1;e=e.replace(/\D/g,"");for(var s=e.length-1;s>=0;s--){var o=e.charAt(s),r=parseInt(o,10);i&&(r*=2)>9&&(r-=9),n+=r,i=!i}return n%10==0},accept:function(e,t,n){return n=typeof n=="string"?n.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(new RegExp(".("+n+")$","i"))},equalTo:function(t,n,r){var i=e(r).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(n).valid()});return t==i.val()}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,n,r){var i=e.port;e.mode=="abort"&&(t[i]&&t[i].abort(),t[i]=r)});else{var n=e.ajax;e.ajax=function(r){var i=("mode"in r?r:e.ajaxSettings).mode,s=("port"in r?r:e.ajaxSettings).port;return i=="abort"?(t[s]&&t[s].abort(),t[s]=n.apply(this,arguments)):n.apply(this,arguments)}}}(jQuery),function(e){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&e.each({focus:"focusin",blur:"focusout"},function(t,n){function r(t){return t=e.event.fix(t),t.type=n,e.event.handle.call(this,t)}e.event.special[n]={setup:function(){this.addEventListener(t,r,!0)},teardown:function(){this.removeEventListener(t,r,!0)},handler:function(t){return arguments[0]=e.event.fix(t),arguments[0].type=n,e.event.handle.apply(this,arguments)}}}),e.extend(e.fn,{validateDelegate:function(t,n,r){return this.bind(n,function(n){var i=e(n.target);if(i.is(t))return r.apply(i,arguments)})}})}(jQuery),function(e){function t(t){var n=this,r=t.target,i=e.data(r,C),s=X[i],o=s.popupName,u=z[o];if(!n.disabled&&e(r).attr(O)!=O){var l={editor:n,button:r,buttonName:i,popup:u,popupName:o,command:s.command,useCSS:n.options.useCSS};if(s.buttonClick&&s.buttonClick(t,l)===!1)return!1;if(i=="source")E(n)?(delete n.range,n.$area.hide(),n.$frame.show(),r.title=s.title):(n.$frame.hide(),n.$area.show(),r.title="Show Rich Text"),setTimeout(function(){m(n)},100);else if(!E(n)){if(o){var c=e(u);if(o=="url"){if(i=="link"&&y(n)==="")return b(n,"A selection is required when inserting a link.",r),!1;c.children(":button").unbind(A).bind(A,function(){var t=c.find(":text"),r=e.trim(t.val());r!==""&&a(n,l.command,r,null,l.button),t.val("http://"),p(),f(n)})}else o=="pastetext"&&c.children(":button").unbind(A).bind(A,function(){var e=c.find("textarea"),t=e.val().replace(/\n/g,"<br />");t!==""&&a(n,l.command,t,null,l.button),e.val(""),p(),f(n)});if(r!==e.data(u,N))return w(n,u,r),!1;return}if(i=="print")n.$frame[0].contentWindow.print();else if(!a(n,l.command,l.value,l.useCSS,r))return!1}f(n)}}function n(t){t=e(t.target).closest("div"),t.css(T,t.data(C)?"#FFF":"#FFC")}function r(t){e(t.target).closest("div").css(T,"transparent")}function i(t){var n=t.data.popup,r=t.target;if(n!==z.msg&&!e(n).hasClass(F)){var i=e.data(n,N),s=e.data(i,C),o=X[s],u=o.command,l,c=this.options.useCSS;s=="font"?l=r.style.fontFamily.replace(/"/g,""):s=="size"?(r.tagName=="DIV"&&(r=r.children[0]),l=r.innerHTML):s=="style"?l="<"+r.tagName+">":s=="color"?l=h(r.style.backgroundColor):s=="highlight"&&(l=h(r.style.backgroundColor),q?u="backcolor":c=!0),n={editor:this,button:i,buttonName:s,popup:n,popupName:o.popupName,command:u,value:l,useCSS:c};if(!o.popupClick||o.popupClick(t,n)!==!1){if(n.command&&!a(this,n.command,n.value,n.useCSS,i))return!1;p(),f(this)}}}function s(e){for(var t=1,n=0,r=0;r<e.length;++r)t=(t+e.charCodeAt(r))%65521,n=(n+t)%65521;return n<<16|t}function o(t,i,s,o,u){if(z[t])return z[t];var a=e(M).hide().addClass(H).appendTo("body");return o?a.html(o):t=="color"?(i=i.colors.split(" "),i.length<10&&a.width("auto"),e.each(i,function(t,n){e(M).appendTo(a).css(T,"#"+n)}),s=j):t=="font"?e.each(i.fonts.split(","),function(t,n){e(M).appendTo(a).css("fontFamily",n).html(n)}):t=="size"?e.each(i.sizes.split(","),function(t,n){e(M).appendTo(a).html("<font size="+n+">"+n+"</font>")}):t=="style"?e.each(i.styles,function(t,n){e(M).appendTo(a).html(n[1]+n[0]+n[1].replace("<","</"))}):t=="url"?(a.html('Enter URL:<br><input type=text value="http://" size=35><br><input type=button value="Submit">'),s=F):t=="pastetext"&&(a.html("Paste your content here and click submit.<br /><textarea cols=40 rows=3></textarea><br /><input type=button value=Submit>"),s=F),!s&&!o&&(s=B),a.addClass(s),q&&a.attr(_,"on").find("div,font,p,h1,h2,h3,h4,h5,h6").attr(_,"on"),(a.hasClass(B)||u===!0)&&a.children().hover(n,r),z[t]=a[0],a[0]}function u(e,t){t?(e.$area.attr(O,O),e.disabled=!0):(e.$area.removeAttr(O),delete e.disabled);try{q?e.doc.body.contentEditable=!t:e.doc.designMode=t?"off":"on"}catch(n){}m(e)}function a(e,t,n,r,i){g(e);if(!q){if(r===undefined||r===null)r=e.options.useCSS;e.doc.execCommand("styleWithCSS",0,r.toString())}r=!0;var s;if(q&&t.toLowerCase()=="inserthtml")l(e).pasteHTML(n);else{try{r=e.doc.execCommand(t,0,n||null)}catch(o){s=o.description,r=!1}r||("cutcopypaste".indexOf(t)>-1?b(e,"For security reasons, your browser does not support the "+t+" command. Try using the keyboard shortcut or context menu instead.",i):b(e,s?s:"Error executing the "+t+" command.",i))}return m(e),r}function f(e){setTimeout(function(){E(e)?e.$area.focus():e.$frame[0].contentWindow.focus(),m(e)},0)}function l(e){return q?c(e).createRange():c(e).getRangeAt(0)}function c(e){return q?e.doc.selection:e.$frame[0].contentWindow.getSelection()}function h(e){var t=/rgba?\((\d+), (\d+), (\d+)/.exec(e),n=e.split("");if(t)for(e=(t[1]<<16|t[2]<<8|t[3]).toString(16);e.length<6;)e="0"+e;return"#"+(e.length==6?e:n[1]+n[1]+n[2]+n[2]+n[3]+n[3])}function p(){e.each(z,function(t,n){e(n).hide().unbind(A).removeData(N)})}function d(){var t=e("link[href$='jquery.cleditor.css']").attr("href");return t.substr(0,t.length-19)+"images/"}function v(t){var n=t.$main,r=t.options;t.$frame&&t.$frame.remove();var i=t.$frame=e('<iframe frameborder="0" src="javascript:true;">').hide().appendTo(n),s=i[0].contentWindow,o=t.doc=s.document,a=e(o);o.open(),o.write(r.docType+"<html>"+(r.docCSSFile===""?"":'<head><link rel="stylesheet" type="text/css" href="'+r.docCSSFile+'" /></head>')+'<body style="'+r.bodyStyle+'"></body></html>'),o.close(),q&&a.click(function(){f(t)}),S(t),q&&(a.bind("beforedeactivate beforeactivate selectionchange keypress",function(e){if(e.type=="beforedeactivate")t.inactive=!0;else if(e.type=="beforeactivate")!t.inactive&&t.range&&t.range.length>1&&t.range.shift(),delete t.inactive;else if(!t.inactive){t.range||(t.range=[]);for(t.range.unshift(l(t));t.range.length>2;)t.range.pop()}}),i.focus(function(){g(t)})),(e.browser.mozilla?a:e(s)).blur(function(){x(t,!0)}),a.click(p).bind("keyup mouseup",function(){m(t)}),U?t.$area.show():i.show(),e(function(){var e=t.$toolbar,s=e.children("div:last"),o=n.width();s=s.offset().top+s.outerHeight()-e.offset().top+1,e.height(s),s=(/%/.test(""+r.height)?n.height():parseInt(r.height))-s,i.width(o).height(s),t.$area.width(o).height(R?s-2:s),u(t,t.disabled),m(t)})}function m(t){!U&&e.browser.webkit&&!t.focused&&(t.$frame[0].contentWindow.focus(),window.focus(),t.focused=!0);var n=t.doc;q&&(n=l(t));var r=E(t);e.each(t.$toolbar.find("."+D),function(i,s){var o=e(s),u=e.cleditor
.buttons[e.data(s,C)],a=u.command,f=!0;if(t.disabled)f=!1;else if(u.getEnabled)f=u.getEnabled({editor:t,button:s,buttonName:u.name,popup:z[u.popupName],popupName:u.popupName,command:u.command,useCSS:t.options.useCSS}),f===undefined&&(f=!0);else if((r||U)&&u.name!="source"||q&&(a=="undo"||a=="redo"))f=!1;else if(a&&a!="print"){q&&a=="hilitecolor"&&(a="backcolor");if(!q||a!="inserthtml")try{f=n.queryCommandEnabled(a)}catch(l){f=!1}}f?(o.removeClass(P),o.removeAttr(O)):(o.addClass(P),o.attr(O,O))})}function g(e){q&&e.range&&e.range[0].select()}function y(e){return g(e),q?l(e).text:c(e).toString()}function b(e,t,n){var r=o("msg",e.options,I);r.innerHTML=t,w(e,r,n)}function w(t,n,r){var s,o,u=e(n);if(r){var a=e(r);s=a.offset(),o=--s.left,s=s.top+a.height()}else a=t.$toolbar,s=a.offset(),o=Math.floor((a.width()-u.width())/2)+s.left,s=s.top+a.height()-2;p(),u.css({left:o,top:s}).show(),r&&(e.data(n,N,r),u.bind(A,{popup:n},e.proxy(i,t))),setTimeout(function(){u.find(":text,textarea").eq(0).focus().select()},100)}function E(e){return e.$area.is(":visible")}function S(t,n){var r=t.$area.val(),i=t.options,o=i.updateFrame,u=e(t.doc.body);if(o){var a=s(r);if(n&&t.areaChecksum==a)return;t.areaChecksum=a}r=o?o(r):r,r=r.replace(/<(?=\/?script)/ig,"&lt;"),i.updateTextArea&&(t.frameChecksum=s(r)),r!=u.html()&&(u.html(r),e(t).triggerHandler(k))}function x(t,n){var r=e(t.doc.body).html(),i=t.options,o=i.updateTextArea,u=t.$area;if(o){var a=s(r);if(n&&t.frameChecksum==a)return;t.frameChecksum=a}r=o?o(r):r,i.updateFrame&&(t.areaChecksum=s(r)),r!=u.val()&&(u.val(r),e(t).triggerHandler(k))}e.cleditor={defaultOptions:{width:500,height:250,controls:"bold italic underline strikethrough subscript superscript | font size style | color highlight removeformat | bullets numbering | outdent indent | alignleft center alignright justify | undo redo | rule image link unlink | cut copy paste pastetext | print source",colors:"FFF FCC FC9 FF9 FFC 9F9 9FF CFF CCF FCF CCC F66 F96 FF6 FF3 6F9 3FF 6FF 99F F9F BBB F00 F90 FC6 FF0 3F3 6CC 3CF 66C C6C 999 C00 F60 FC3 FC0 3C0 0CC 36F 63F C3C 666 900 C60 C93 990 090 399 33F 60C 939 333 600 930 963 660 060 366 009 339 636 000 300 630 633 330 030 033 006 309 303",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Narrow,Garamond,Georgia,Impact,Sans Serif,Serif,Tahoma,Trebuchet MS,Verdana",sizes:"1,2,3,4,5,6,7",styles:[["Paragraph","<p>"],["Header 1","<h1>"],["Header 2","<h2>"],["Header 3","<h3>"],["Header 4","<h4>"],["Header 5","<h5>"],["Header 6","<h6>"]],useCSS:!1,docType:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">',docCSSFile:"",bodyStyle:"margin:4px; font:10pt Arial,Verdana; cursor:text"},buttons:{init:"bold,,|italic,,|underline,,|strikethrough,,|subscript,,|superscript,,|font,,fontname,|size,Font Size,fontsize,|style,,formatblock,|color,Font Color,forecolor,|highlight,Text Highlight Color,hilitecolor,color|removeformat,Remove Formatting,|bullets,,insertunorderedlist|numbering,,insertorderedlist|outdent,,|indent,,|alignleft,Align Text Left,justifyleft|center,,justifycenter|alignright,Align Text Right,justifyright|justify,,justifyfull|undo,,|redo,,|rule,Insert Horizontal Rule,inserthorizontalrule|image,Insert Image,insertimage,url|link,Insert Hyperlink,createlink,url|unlink,Remove Hyperlink,|cut,,|copy,,|paste,,|pastetext,Paste as Text,inserthtml,|print,,|source,Show Source"},imagesPath:function(){return d()}},e.fn.cleditor=function(t){var n=e([]);return this.each(function(r,i){if(i.tagName=="TEXTAREA"){var s=e.data(i,L);s||(s=new cleditor(i,t)),n=n.add(s)}}),n};var T="backgroundColor",N="button",C="buttonName",k="change",L="cleditor",A="click",O="disabled",M="<div>",_="unselectable",D="cleditorButton",P="cleditorDisabled",H="cleditorPopup",B="cleditorList",j="cleditorColor",F="cleditorPrompt",I="cleditorMsg",q=e.browser.msie,R=/msie\s6/i.test(navigator.userAgent),U=/iphone|ipad|ipod/i.test(navigator.userAgent),z={},W,X=e.cleditor.buttons;e.each(X.init.split("|"),function(e,t){var n=t.split(","),r=n[0];X[r]={stripIndex:e,name:r,title:n[1]===""?r.charAt(0).toUpperCase()+r.substr(1):n[1],command:n[2]===""?r:n[2],popupName:n[3]===""?r:n[3]}}),delete X.init,cleditor=function(i,s){var u=this;u.options=s=e.extend({},e.cleditor.defaultOptions,s);var a=u.$area=e(i).hide().data(L,u).blur(function(){S(u,!0)}),f=u.$main=e(M).addClass("cleditorMain").width(s.width).height(s.height),l=u.$toolbar=e(M).addClass("cleditorToolbar").appendTo(f),c=e(M).addClass("cleditorGroup").appendTo(l);e.each(s.controls.split(" "),function(i,a){if(a==="")return!0;if(a=="|")e(M).addClass("cleditorDivider").appendTo(c),c=e(M).addClass("cleditorGroup").appendTo(l);else{var f=X[a],h=e(M).data(C,f.name).addClass(D).attr("title",f.title).bind(A,e.proxy(t,u)).appendTo(c).hover(n,r),p={};f.css?p=f.css:f.image&&(p.backgroundImage="url("+d()+f.image+")"),f.stripIndex&&(p.backgroundPosition=f.stripIndex*-24),h.css(p),q&&h.attr(_,"on"),f.popupName&&o(f.popupName,s,f.popupClass,f.popupContent,f.popupHover)}}),f.insertBefore(a).append(a),W||(e(document).click(function(t){t=e(t.target),t.add(t.parents()).is("."+F)||p()}),W=!0),/auto|%/.test(""+s.width+s.height)&&e(window).resize(function(){v(u)}),v(u)};var V=cleditor.prototype;e.each([["clear",function(e){e.$area.val(""),S(e)}],["disable",u],["execCommand",a],["focus",f],["hidePopups",p],["sourceMode",E,!0],["refresh",v],["select",function(e){setTimeout(function(){E(e)?e.$area.select():a(e,"selectall")},0)}],["selectedHTML",function(t){g(t),t=l(t);if(q)return t.htmlText;var n=e("<layer>")[0];return n.appendChild(t.cloneContents()),n.innerHTML},!0],["selectedText",y,!0],["showMessage",b],["updateFrame",S],["updateTextArea",x]],function(e,t){V[t[0]]=function(){for(var e=[this],n=0;n<arguments.length;n++)e.push(arguments[n]);return e=t[1].apply(this,e),t[2]?e:this}}),V.change=function(t){var n=e(this);return t?n.bind(k,t):n.trigger(k)}}(jQuery),function(e){e.fn.jQCloud=function(t,n){var r=this,i=function(){var i=function(e,t){var n=function(e,t){return Math.abs(2*e.offsetLeft+e.offsetWidth-2*t.offsetLeft-t.offsetWidth)<e.offsetWidth+t.offsetWidth&&Math.abs(2*e.offsetTop+e.offsetHeight-2*t.offsetTop-t.offsetHeight)<e.offsetHeight+t.offsetHeight?!0:!1},r=0;for(r=0;r<t.length;r++)if(n(e,t[r]))return!0;return!1};t.sort(function(e,t){return e.weight<t.weight?1:e.weight>t.weight?-1:0});var s=2,o=[],u=r.width()/r.height(),a=r.width()/2,f=r.height()/2;e.each(t,function(n,l){var c=6.28*Math.random(),h=0,p=Math.round((l.weight-t[t.length-1].weight)/(t[0].weight-t[t.length-1].weight)*9)+1,d=l.url!==undefined?"<a href='"+l.url+"'>"+l.text+"</a></span>":l.text;r.append("<span id='word_"+n+"' class='w"+p+"' title='"+(l.title||"")+"'>"+d+"</span>");var v=e("#word_"+n).width(),m=e("#word_"+n).height(),g=a-v/2,y=f-m/2;e("#word_"+n).css("position","absolute"),e("#word_"+n).css("left",g+"px"),e("#word_"+n).css("top",y+"px");while(i(document.getElementById("word_"+n),o))h+=s,c+=(n%2===0?1:-1)*s,g=a+(h*Math.cos(c)-v/2)*u,y=f+h*Math.sin(c)-m/2,e("#word_"+n).css("left",g+"px"),e("#word_"+n).css("top",y+"px");o.push(document.getElementById("word_"+n))}),typeof n=="function"&&n.call(this)};return setTimeout(function(){i()},100),this}}(jQuery),function(e,t){e.fn.fcbkcomplete=function(t){return this.queue(function(){function n(){r(),a(0)}function r(){x=e('<ul class="holder"></ul>'),S.attachto?typeof S.attachto=="object"?S.attachto.append(x):e(S.attachto).append(x):O.after(x),N=e('<div class="facebook-auto">').append('<div class="default">'+S.complete_text+"</div>"),N.hover(function(){A=0},function(){A=1}),T=e('<ul id="'+M+'_feed"></ul>'),x.after(N.prepend(T)),T.css("width",N.width()),s()}function s(){name=O.attr("name"),S.bricket&&name.indexOf("[]")==-1&&(name+="[]");var t=e("<"+O.get(0).tagName+' name="'+name+'" id="'+M+'" multiple="multiple" class="hidden">');e.each(O.children("option"),function(n,r){r=e(r),t.data(r.val(),r.text());if(r.hasClass("selected")){var i=o(r.text(),r.val(),!0,r.hasClass("locked"));t.append('<option value="'+r.val()+'" selected="selected" id="opt_'+i+'"class="selected">'+r.text()+"</option>")}}),O.after(t),O.remove(),O=t,e(O).bind("addItem",function(e,t){o(t.title,t.value,0,0,0)}),e(O).bind("removeItem",function(e,t){var n=x.children("li[rel="+t.value+"]");n.length&&u(n)}),e(O).bind("destroy",function(e,t){x.remove(),N.remove(),O.show()})}function o(t,n,r,i,s){if(!m())return!1;var o="bit-box"+(i?" locked":""),f=H(),l=document.createTextNode(E(t)),c=e('<a class="closebutton" href="#"></a>'),h=e('<li class="'+o+'" rel="'+n+'" id="pt_'+f+'"></li>').prepend(l).append(c);x.append(h),c.click(function(){return u(e(this).parent("li")),!1});if(!r){e("#"+M+"_annoninput").remove(),a(s);var p=e('<option value="'+E(n,1)+'" id="opt_'+f+'" class="selected" selected="selected">'+E(t)+"</option>");O.append(p),S.onselect&&y(S.onselect,p),O.change()}return x.children("li.bit-box.deleted").removeClass("deleted"),T.hide(),f}function u(t){if(!t.hasClass("locked")){t.fadeOut("fast");var n=t.attr("id");if(S.onremove){var r=n?e("#o"+n+""):O.children("option[value="+t.attr("rel")+"]");y(S.onremove,r)}n?e("#o"+n+"").remove():O.children('option[value="'+t.attr("rel")+'"]').remove(),t.remove(),O.change(),L=0}}function a(t){var n=e('<li class="bit-input" id="'+M+'_annoninput">'),r=e('<input type="text" class="maininput" size="1" autocomplete="off">'),i=0;x.append(n.append(r)),r.focus(function(){m()&&N.fadeIn("fast")}),r.blur(function(){A?N.fadeOut("fast"):r.focus()}),x.click(function(){r.focus(),T.length&&r.val().length?T.show():(T.hide(),N.children(".default").show())}),r.keypress(function(e){if(e.keyCode==P.enter)return!1;r.attr("size",r.val().length+1)}),r.keyup(function(t){var n=w(r.val(),1);if(t.keyCode==P.backspace&&n.length==0){T.hide();if(!x.children("li.bit-box:last").hasClass("locked")){if(x.children("li.bit-box.deleted").length==0)return x.children("li.bit-box:last").addClass("deleted"),!1;if(L)return;L=1,x.children("li.bit-box.deleted").fadeOut("fast",function(){return u(e(this)),!1})}}if(t.keyCode!=P.downarrow&&t.keyCode!=P.uparrow&&t.keyCode!=P.leftarrow&&t.keyCode!=P.rightarrow&&n.length!=0){C=0;if(S.json_url&&m())if(S.cache&&D.get(n))f(n),p();else{i++;var s=i;setTimeout(function(){if(s!=i)return;e.getJSON(S.json_url,{tag:E(n)},function(e){f(n,e),D.set(n,1),p()})},S.delay)}else f(n),p();N.children(".default").hide(),T.show()}}),t&&setTimeout(function(){r.focus(),N.children(".default").show()},1)}function f(t,n){T.html(""),!S.cache&&n!=null&&B.clear(),g(t),n!=null&&n.length&&e.each(n,function(e,t){B.set(w(t.key),w(t.value))});var r=S.maxshownitems<B.length()?S.maxshownitems:B.length(),i="";e.each(B.search(t),function(e,n){if(!S.filter_selected||!O.children("option[value="+n.key+"]").hasClass("selected"))i+='<li rel="'+n.key+'">'+E(l(n.value,t))+"</li>",C++,r--}),T.append(i),S.firstselected&&(k=T.children("li:visible:first"),k.addClass("auto-focus")),C>S.height?T.css({height:S.height*24+"px",overflow:"auto"}):T.css("height","auto"),m()&&N.is(":hidden")&&N.show()}function l(e,t){if(S.filter_case)try{var n=new RegExp("(.*)("+t+")(.*)",S.filter_case?"g":"gi"),e=e.replace(n,"$1<em>$2</em>$3")}catch(r){}else try{var n=new RegExp("(.*)("+t.toLowerCase()+")(.*)","gi"),e=e.replace(n,"$1<em>$2</em>$3")}catch(r){}return e}function c(){T.children("li").mouseover(function(){T.children("li").removeClass("auto-focus"),k=e(this),k.addClass("auto-focus")}),T.children("li").mouseout(function(){e(this).removeClass("auto-focus"),k=null})}function h(){T.unbind("mouseover").unbind("mouseout").mousemove(function(){c(),T.unbind("mousemove")})}function p(){var t=e("#"+M+"_annoninput").children(".maininput");c(),T.children("li").unbind("mousedown").mousedown(function(){var t=e(this);o(t.text(),t.attr("rel"),0,0,1),T.hide(),N.hide()}),t.unbind("keydown"),t.keydown(function(t){t.keyCode!=P.backspace&&x.children("li.bit-box.deleted").removeClass("deleted");if(!(t.keyCode!=P.enter&&t.keyCode!=P.tab||!b())){var n=k;return o(n.text(),n.attr("rel"),0,0,1),v(t)}if((t.keyCode==P.enter||t.keyCode==P.tab)&&!b()){if(S.newel){var r=w(e(this).val());return o(r,r,0,0,1),v(t)}if(S.addontab&&S.newel){k=T.children("li:visible:first");var n=k;return o(n.text(),n.attr("rel"),0,0,1),v(t)}}t.keyCode==P.downarrow&&d("first"),t.keyCode==P.uparrow&&d("last")})}function d(e){h();if(k==null||k.length==0)k=T.children("li:visible:"+e),T.get(0).scrollTop=e=="first"?0:parseInt(k.get(0).scrollHeight,10)*(parseInt(T.children("li:visible").length,10)-Math.round(S.height/2));else{k.removeClass("auto-focus"),k=e=="first"?k.nextAll("li:visible:first"):k.prevAll("li:visible:first");var t=parseInt(k.prevAll("li:visible").length,10),n=parseInt(k.nextAll("li:visible").length,10);((e=="first"?t:n)>Math.round(S.height/2)||(e=="first"?t:n)<=Math.round(S.height/2))&&typeof k.get(0)!="undefined"&&(T.get(0).scrollTop=parseInt(k.get(0).scrollHeight,10)*(t-Math.round(S.height/2)))}T.children("li").removeClass("auto-focus"),k.addClass("auto-focus")}function v(e){return N.hide(),e.preventDefault(),k=null,!1}function m(){return S.maxitems!=0&&x.children("li.bit-box").length<S.maxitems}function g(t){if(S.newel&&m()){T.children("li[fckb=1]").remove();if(t.length==0)return;var n=e('<li rel="'+t+'" fckb="1"">').html(E(t));T.prepend(n),C++}return}function y(e,t){var n={};for(i=0;i<t.get(0).attributes.length;i++)t.get(0).attributes[i].nodeValue!=null&&(n["_"+t.get(0).attributes[i].nodeName]=t.get(0).attributes[i].nodeValue);return e.call(e,n)}function b(){return k==null||k.length==0?!1:!0}function w(e,t){if(typeof t!="undefined"){for(i=0;i<e.length;i++){var n=e.charCodeAt(i);if(P.exclamation<=n&&n<=P.slash||P.colon<=n&&n<=P.at||P.squarebricket_left<=n&&n<=P.apostrof)e=e.replace(e[i],escape(e[i]))}e=e.replace(/(\{|\}|\*)/i,"\\$1")}return e.replace(/script(.*)/g,"")}function E(e,t){return e=e.replace("\\",""),typeof t!="undefined"?e:unescape(e)}var S=e.extend({json_url:null,cache:!1,height:"10",newel:!1,addontab:!1,firstselected:!1,filter_case:!1,filter_selected:!1,complete_text:"Start to type...",maxshownitems:30,maxitems:10,onselect:null,onremove:null,attachto:null,delay:350,bricket:!0},t),x=null,T=null,N=null,C=0,k=null,L=0,A=1,O=e(this),M=O.attr("id"),_=e("<div></div>").after(O),D={set:function(e,t){_.data(e,t)},get:function(e){return _.data(e)}},P={enter:13,tab:9,backspace:8,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,exclamation:33,slash:47,colon:58,at:64,squarebricket_left:91,apostrof:96},H=function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",t="";for(var n=0;n<32;n++){var r=Math.floor(Math.random()*e.length);t+=e.substring(r,r+1)}return t},B={search:function(t,n){var r=new Array,i=new RegExp(t,S.filter_case?"g":"gi");return e.each(O.data(),function(e,t){typeof t.search=="function"&&t.search(i)!=-1&&r.push({key:e,value:t})}),r},set:function(e,t){O.data(e,t)},get:function(e){return O.data(e)},clear:function(){O.removeData()},length:function(){var e=0;for(var t in this)this.hasOwnProperty(t)&&++e;return e}};return n(),this})}}(jQuery),$(function(){jQuery.validator.addMethod("emails",function(e,t){return this.optional(t)||/^((, *)*((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)+$/i.test(e)}," Please enter valid email addresses."),$(".invitation_form").validate({errorClass:"validation_error"})}),function(e){function t(e,t,n){var r=parseInt(e.css("top"),10);if(t=="left"){var i="-"+this.image_wrapper_height+"px";e.css("top",this.image_wrapper_height+"px")}else{var i=this.image_wrapper_height+"px";e.css("top","-"+this.image_wrapper_height+"px")}return n&&(n.css("bottom","-"+n[0].offsetHeight+"px"),n.animate({bottom:0},this.settings.animation_speed*2)),this.current_description&&this.current_description.animate({bottom:"-"+this.current_description[0].offsetHeight+"px"},this.settings.animation_speed*2),{old_image:{top:i},new_image:{top:r}}}function n(e,t,n){var r=parseInt(e.css("left"),10);if(t=="left"){var i="-"+this.image_wrapper_width+"px";e.css("left",this.image_wrapper_width+"px")}else{var i=this.image_wrapper_width+"px";e.css("left","-"+this.image_wrapper_width+"px")}return n&&(n.css("bottom","-"+n[0].offsetHeight+"px"),n.animate({bottom:0},this.settings.animation_speed*2)),this.current_description&&this.current_description.animate({bottom:"-"+this.current_description[0].offsetHeight+"px"},this.settings.animation_speed*2),{old_image:{left:i},new_image:{left:r}}}function r(e,t,n){var r=e.width(),i=e.height(),s=parseInt(e.css("left"),10),o=parseInt(e.css("top"),10);return e.css({width:0,height:0,top:this.image_wrapper_height/2,left:this.image_wrapper_width/2}),{old_image:{width:0,height:0,top:this.image_wrapper_height/2,left:this.image_wrapper_width/2},new_image:{width:r,height:i,top:o,left:s}}}function i(e,t,n){return e.css("opacity",0),{old_image:{opacity:0},new_image:{opacity:1}}}function s(e,t,n){return e.css("opacity",0),{old_image:{opacity:0},new_image:{opacity:1},speed:0}}function o(e,t){this.init(e,t)}function u(e,t){this.init(e,t)}e.fn.adGallery=function(t){var n={loader_image:"loader.gif",start_at_index:0,description_wrapper:!1,thumb_opacity:.7,animate_first_image:!1,animation_speed:400,width:!1,height:!1,display_next_and_prev:!0,display_back_and_forward:!0,scroll_jump:0,slideshow:{enable:!0,autostart:!1,speed:5e3,start_label:"Start",stop_label:"Stop",stop_on_scroll:!0,countdown_prefix:"(",countdown_sufix:")",onStart:!1,onStop:!1},effect:"slide-hori",enable_keyboard_move:!0,cycle:!0,callbacks:{init:!1,afterImageVisible:!1,beforeImageVisible:!1}},r=e.extend(!1,n,t);t&&t.slideshow&&(r.slideshow=e.extend(!1,n.slideshow,t.slideshow)),r.slideshow.enable||(r.slideshow.autostart=!1);var i=[];return e(this).each(function(){var e=new o(this,r);i[i.length]=e}),i},o.prototype={wrapper:!1,image_wrapper:!1,gallery_info:!1,nav:!1,loader:!1,preloads:!1,thumbs_wrapper:!1,scroll_back:!1,scroll_forward:!1,next_link:!1,prev_link:!1,slideshow:!1,image_wrapper_width:0,image_wrapper_height:0,current_index:0,current_image:!1,current_description:!1,nav_display_width:0,settings:!1,images:!1,in_transition:!1,animations:!1,init:function(t,n){var r=this;this.wrapper=e(t),this.settings=n,this.setupElements(),this.setupAnimations(),this.settings.width?(this.image_wrapper_width=this.settings.width,this.image_wrapper.width(this.settings.width),this.wrapper.width(this.settings.width)):this.image_wrapper_width=this.image_wrapper.width(),this.settings.height?(this.image_wrapper_height=this.settings.height,this.image_wrapper.height(this.settings.height)):this.image_wrapper_height=this.image_wrapper.height(),this.nav_display_width=this.nav.width(),this.current_index=0,this.current_image=!1,this.current_description=!1,this.in_transition=!1,this.findImages(),this.settings.display_next_and_prev&&this.initNextAndPrev();var i=function(e){return r.nextImage(e)};this.slideshow=new u(i,this.settings.slideshow),this.controls.append(this.slideshow.create()),this.settings.slideshow.enable?this.slideshow.enable():this.slideshow.disable(),this.settings.display_back_and_forward&&this.initBackAndForward(),this.settings.enable_keyboard_move&&this.initKeyEvents();var s=parseInt(this.settings.start_at_index,10);window.location.hash&&window.location.hash.indexOf("#ad-image")===0&&(s=window.location.hash.replace(/[^0-9]+/g,""),s*1!=s&&(s=this.settings.start_at_index)),this.loading(!0),this.showImage(s,function(){r.settings.slideshow.autostart&&(r.preloadImage(s+1),r.slideshow.start())}),this.fireCallback(this.settings.callbacks.init)},setupAnimations:function(){this.animations={"slide-vert":t,"slide-hori":n,resize:r,fade:i,none:s}},setupElements:function(){this.controls=this.wrapper.find(".ad-controls"),this.gallery_info=e('<p class="ad-info"></p>'),this.controls.append(this.gallery_info),this.image_wrapper=this.wrapper.find(".ad-image-wrapper"),this.image_wrapper.empty(),this.nav=this.wrapper.find(".ad-nav"),this.thumbs_wrapper=this.nav.find(".ad-thumbs"),this.preloads=e('<div class="ad-preloads"></div>'),this.loader=e('<img class="ad-loader" src="'+this.settings.loader_image+'">'),this.image_wrapper.append(this.loader),this.loader.hide(),e(document.body).append(this.preloads)},loading:function(e){e?this.loader.show():this.loader.hide()},addAnimation:function(t,n){e.isFunction(n)&&(this.animations[t]=n)},findImages:function(){var t=this;this.images=[];var n=0,r=0,i=this.thumbs_wrapper.find("a"),s=i.length;this.settings.thumb_opacity<1&&i.find("img").css("opacity",this.settings.thumb_opacity),i.each(function(i){var s=e(this),o=s.attr("href"),u=s.find("img");t.isImageLoaded(u[0])?(n+=u[0].parentNode.parentNode.offsetWidth,r++):u.load(function(){n+=this.parentNode.parentNode.offsetWidth,r++}),s.addClass("ad-thumb"+i),s.click(function(){return t.showImage(i),t.slideshow.stop(),!1}).hover(function(){!e(this).is(".ad-active")&&t.settings.thumb_opacity<1&&e(this).find("img").fadeTo(300,1),t.preloadImage(i)},function(){!e(this).is(".ad-active")&&t.settings.thumb_opacity<1&&e(this).find("img").fadeTo(300,t.settings.thumb_opacity)});var s=!1;u.data("ad-link")?s=u.data("ad-link"):u.attr("longdesc")&&u.attr("longdesc").length&&(s=u.attr("longdesc"));var a=!1;u.data("ad-desc")?a=u.data("ad-desc"):u.attr("alt")&&u.attr("alt").length&&(a=u.attr("alt"));var f=!1;u.data("ad-title")?f=u.data("ad-title"):u.attr("title")&&u.attr("title").length&&(f=u.attr("title")),t.images[i]={thumb:u.attr("src"),image:o,error:!1,preloaded:!1,desc:a,title:f,size:!1,link:s}});var o=setInterval(function(){if(s==r){n-=100;var e=t.nav.find(".ad-thumb-list");e.css("width",n+"px");var i=1,u=e.height();while(i<201){e.css("width",n+i+"px");if(u!=e.height())break;u=e.height(),i++}clearInterval(o)}},100)},initKeyEvents:function(){var t=this;e(document).keydown(function(e){e.keyCode==39?(t.nextImage(),t.slideshow.stop()):e.keyCode==37&&(t.prevImage(),t.slideshow.stop())})},initNextAndPrev:function(){this.next_link=e('<div class="ad-next"><div class="ad-next-image"></div></div>'),this.prev_link=e('<div class="ad-prev"><div class="ad-prev-image"></div></div>'),this.image_wrapper.append(this.next_link),this.image_wrapper.append(this.prev_link);var t=this;this.prev_link.add(this.next_link).mouseover(function(n){e(this).css("height",t.image_wrapper_height),e(this).find("div").show()}).mouseout(function(t){e(this).find("div").hide()}).click(function(){e(this).is(".ad-next")?(t.nextImage(),t.slideshow.stop()):(t.prevImage(),t.slideshow.stop())}).find("div").css("opacity",.7)},initBackAndForward:function(){var t=this;this.scroll_forward=e('<div class="ad-forward"></div>'),this.scroll_back=e('<div class="ad-back"></div>'),this.nav.append(this.scroll_forward),this.nav.prepend(this.scroll_back);var n=0,r=!1;e(this.scroll_back).add(this.scroll_forward).click(function(){var n=t.nav_display_width-50;if(t.settings.scroll_jump>0)var n=t.settings.scroll_jump;if(e(this).is(".ad-forward"))var r=t.thumbs_wrapper.scrollLeft()+n;else var r=t.thumbs_wrapper.scrollLeft()-n;return t.settings.slideshow.stop_on_scroll&&t.slideshow.stop(),t.thumbs_wrapper.animate({scrollLeft:r+"px"}),!1}).css("opacity",.6).hover(function(){var i="left";e(this).is(".ad-forward")&&(i="right"),r=setInterval(function(){n++,n>30&&t.settings.slideshow.stop_on_scroll&&t.slideshow.stop();var e=t.thumbs_wrapper.scrollLeft()+1;i=="left"&&(e=t.thumbs_wrapper.scrollLeft()-1),t.thumbs_wrapper.scrollLeft(e)},10),e(this).css("opacity",1)},function(){n=0,clearInterval(r),e(this).css("opacity",.6)})},_afterShow:function(){this.gallery_info.html(this.current_index+1+" / "+this.images.length),this.settings.cycle||(this.prev_link.show().css("height",this.image_wrapper_height),this.next_link.show().css("height",this.image_wrapper_height),this.current_index==this.images.length-1&&this.next_link.hide(),this.current_index==0&&this.prev_link.hide()),this.fireCallback(this.settings.callbacks.afterImageVisible)},_getContainedImageSize:function(e,t){if(t>this.image_wrapper_height){var n=e/t;t=this.image_wrapper_height,e=this.image_wrapper_height*n}if(e>this.image_wrapper_width){var n=t/e;e=this.image_wrapper_width,t=this.image_wrapper_width*n}return{width:e,height:t}},_centerImage:function(e,t,n){e.css("top","0px");if(n<this.image_wrapper_height){var r=this.image_wrapper_height-n;e.css("top",r/2+"px")}e.css("left","0px");if(t<this.image_wrapper_width){var r=this.image_wrapper_width-t;e.css("left",r/2+"px")}},_getDescription:function(t){var n=!1;if(t.desc.length||t.title.length){var r="";t.title.length&&(r='<strong class="ad-description-title">'+t.title+"</strong>");var n="";t.desc.length&&(n="<span>"+t.desc+"</span>"),n=e('<p class="ad-image-description">'+r+n+"</p>")}return n},showImage:function(e,t){if(this.images[e]&&!this.in_transition){var n=this,r=this.images[e];this.in_transition=!0,r.preloaded?this._showWhenLoaded(e,t):(this.loading(!0),this.preloadImage(e,function(){n.loading(!1),n._showWhenLoaded(e,t)}))}},_showWhenLoaded:function(t,n){if(this.images[t]){var r=this,i=this.images[t],s=e(document.createElement("div")).addClass("ad-image"),o=e(new Image).attr("src",i.image);if(i.link){var u=e('<a href="'+i.link+'" target="_blank"></a>');u.append(o),s.append(u)}else s.append(o);this.image_wrapper.prepend(s);var a=this._getContainedImageSize(i.size.width,i.size.height);o.attr("width",a.width),o.attr("height",a.height),s.css({width:a.width+"px",height:a.height+"px"}),this._centerImage(s,a.width,a.height);var f=this._getDescription(i,s);if(f)if(!this.settings.description_wrapper){s.append(f);var l=a.width-parseInt(f.css("padding-left"),10)-parseInt(f.css("padding-right"),10);f.css("width",l+"px")}else this.settings.description_wrapper.append(f);this.highLightThumb(this.nav.find(".ad-thumb"+t));var c="right";this.current_index<t&&(c="left"),this.fireCallback(this.settings.callbacks.beforeImageVisible);if(this.current_image||this.settings.animate_first_image){var h=this.settings.animation_speed,p="swing",d=this.animations[this.settings.effect].call(this,s,c,f);typeof d.speed!="undefined"&&(h=d.speed),typeof d.easing!="undefined"&&(p=d.easing);if(this.current_image){var v=this.current_image,m=this.current_description;v.animate(d.old_image,h,p,function(){v.remove(),m&&m.remove()})}s.animate(d.new_image,h,p,function(){r.current_index=t,r.current_image=s,r.current_description=f,r.in_transition=!1,r._afterShow(),r.fireCallback(n)})}else this.current_index=t,this.current_image=s,r.current_description=f,this.in_transition=!1,r._afterShow(),this.fireCallback(n)}},nextIndex:function(){if(this.current_index==this.images.length-1){if(!this.settings.cycle)return!1;var e=0}else var e=this.current_index+1;return e},nextImage:function(e){var t=this.nextIndex();return t===!1?!1:(this.preloadImage(t+1),this.showImage(t,e),!0)},prevIndex:function(){if(this.current_index==0){if(!this.settings.cycle)return!1;var e=this.images.length-1}else var e=this.current_index-1;return e},prevImage:function(e){var t=this.prevIndex();return t===!1?!1:(this.preloadImage(t-1),this.showImage(t,e),!0)},preloadAll:function(){function n(){t<e.images.length&&(t++,e.preloadImage(t,n))}var e=this,t=0;e.preloadImage(t,n)},preloadImage:function(t,n){if(this.images[t]){var r=this.images[t];if(!this.images[t].preloaded){var i=e(new Image);i.attr("src",r.image);if(!this.isImageLoaded(i[0])){this.preloads.append(i);var s=this;i.load(function(){r.preloaded=!0,r.size={width:this.width,height:this.height},s.fireCallback(n)}).error(function(){r.error=!0,r.preloaded=!1,r.size=!1})}else r.preloaded=!0,r.size={width:i[0].width,height:i[0].height},this.fireCallback(n)}else this.fireCallback(n)}},isImageLoaded:function(e){return typeof e.complete!="undefined"&&!e.complete?!1:typeof e.naturalWidth!="undefined"&&e.naturalWidth==0?!1:!0},highLightThumb:function(e){this.thumbs_wrapper.find(".ad-active").removeClass("ad-active"),e.addClass("ad-active"),this.settings.thumb_opacity<1&&(this.thumbs_wrapper.find("a:not(.ad-active) img").fadeTo(300,this.settings.thumb_opacity),e.find("img").fadeTo(300,1));var t=e[0].parentNode.offsetLeft;t-=this.nav_display_width/2-e[0].offsetWidth/2,this.thumbs_wrapper.animate({scrollLeft:t+"px"})},fireCallback:function(t){e.isFunction(t)&&t.call(this)}},u.prototype={start_link:!1,stop_link:!1,countdown:!1,controls:!1,settings:!1,nextimage_callback:!1,enabled:!1,running:!1,countdown_interval:!1,init:function(e,t){var n=this;this.nextimage_callback=e,this.settings=t},create:function(){this.start_link=e('<span class="ad-slideshow-start">'+this.settings.start_label+"</span>"),this.stop_link=e('<span class="ad-slideshow-stop">'+this.settings.stop_label+"</span>"),this.countdown=e('<span class="ad-slideshow-countdown"></span>'),this.controls=e('<div class="ad-slideshow-controls"></div>'),this.controls.append(this.start_link).append(this.stop_link).append(this.countdown),this.countdown.hide();var t=this;return this.start_link.click(function(){t.start()}),this.stop_link.click(function(){t.stop()}),e(document).keydown(function(e){e.keyCode==83&&(t.running?t.stop():t.start())}),this.controls},disable:function(){this.enabled=!1,this.stop(),this.controls.hide()},enable:function(){this.enabled=!0,this.controls.show()},toggle:function(){this.enabled?this.disable():this.enable()},start:function(){if(this.running||!this.enabled)return!1;var e=this;return this.running=!0,this.controls.addClass("ad-slideshow-running"),this._next(),this.fireCallback(this.settings.onStart),!0},stop:function(){return this.running?(this.running=!1,this.countdown.hide(),this.controls.removeClass("ad-slideshow-running"),clearInterval(this.countdown_interval),this.fireCallback(this.settings.onStop),!0):!1},_next:function(){var e=this,t=this.settings.countdown_prefix,n=this.settings.countdown_sufix;clearInterval(e.countdown_interval),this.countdown.show().html(t+this.settings.speed/1e3+n);var r=0;this.countdown_interval=setInterval(function(){r+=1e3;if(r>=e.settings.speed){var i=function(){e.running&&e._next(),r=0};e.nextimage_callback(i)||e.stop(),r=0}var s=parseInt(e.countdown.text().replace(/[^0-9]/g,""),10);s--,s>0&&e.countdown.html(t+s+n)},1e3)},fireCallback:function(t){e.isFunction(t)&&t.call(this)}}}(jQuery),eval(function(e,t,n,r,i,s){i=function(e){return(e<t?"":i(parseInt(e/t)))+((e%=t)>35?String.fromCharCode(e+29):e.toString(36))};if(!"".replace(/^/,String)){while(n--)s[i(n)]=r[n]||i(n);r=[function(e){return s[e]}],i=function(){return"\\w+"},n=1}while(n--)r[n]&&(e=e.replace(new RegExp("\\b"+i(n)+"\\b","g"),r[n]));return e}("(8($){$.3n.3o=8(b){5 c={2s:'Z.3p',1W:0,1X:q,11:0.7,2t:q,1b:3q,v:q,x:q,2u:B,2v:B,1Y:0,t:{1c:B,1Z:q,1d:3r,2w:'3s',2x:'3t',20:B,2y:'(',2z:')',2A:q,2B:q},2C:'21-2D',2E:B,1z:B,1A:{1e:q,2F:q,2G:q}};5 d=$.2H(q,c,b);4(b&&b.t){d.t=$.2H(q,c.t,b.t)};4(!d.t.1c){d.t.1Z=q};5 e=[];$(3).2I(8(){5 a=1B 22(3,d);e[e.J]=a});w e};8 2J(a,b,c){5 d=12(a.u('Q'),10);4(b=='C'){5 e='-'+3.D+'z';a.u('Q',3.D+'z')}y{5 e=3.D+'z';a.u('Q','-'+3.D+'z')};4(c){c.u('1f','-'+c[0].1C+'z');c.13({1f:0},3.r.1b*2)};4(3.R){3.R.13({1f:'-'+3.R[0].1C+'z'},3.r.1b*2)};w{1g:{Q:e},1h:{Q:d}}};8 2K(a,b,c){5 d=12(a.u('C'),10);4(b=='C'){5 e='-'+3.K+'z';a.u('C',3.K+'z')}y{5 e=3.K+'z';a.u('C','-'+3.K+'z')};4(c){c.u('1f','-'+c[0].1C+'z');c.13({1f:0},3.r.1b*2)};4(3.R){3.R.13({1f:'-'+3.R[0].1C+'z'},3.r.1b*2)};w{1g:{C:e},1h:{C:d}}};8 2L(a,b,c){5 d=a.v();5 e=a.x();5 f=12(a.u('C'),10);5 g=12(a.u('Q'),10);a.u({v:0,x:0,Q:3.D/2,C:3.K/2});w{1g:{v:0,x:0,Q:3.D/2,C:3.K/2},1h:{v:d,x:e,Q:g,C:f}}};8 2M(a,b,c){a.u('S',0);w{1g:{S:0},1h:{S:1}}};8 2N(a,b,c){a.u('S',0);w{1g:{S:0},1h:{S:1},1d:0}};8 22(a,b){3.1e(a,b)};22.2O={17:q,T:q,1D:q,V:q,Z:q,1r:q,N:q,1E:q,1F:q,1i:q,1j:q,t:q,K:0,D:0,O:0,18:q,R:q,1G:0,r:q,G:q,1k:q,1H:q,1e:8(b,c){5 d=3;3.17=$(b);3.r=c;3.2P();3.2Q();4(3.r.v){3.K=3.r.v;3.T.v(3.r.v);3.17.v(3.r.v)}y{3.K=3.T.v()};4(3.r.x){3.D=3.r.x;3.T.x(3.r.x)}y{3.D=3.T.x()};3.1G=3.V.v();3.O=0;3.18=q;3.R=q;3.1k=q;3.2R();4(3.r.2u){3.2S()};5 e=8(a){w d.1I(a)};3.t=1B 23(e,3.r.t);3.L.F(3.t.2T());4(3.r.t.1c){3.t.1c()}y{3.t.24()};4(3.r.2v){3.2U()};4(3.r.2E){3.2V()};5 f=12(3.r.1W,10);4(25.26.27&&25.26.27.3u('#s-W')===0){f=25.26.27.2W(/[^0-9]+/g,'');4((f*1)!=f){f=3.r.1W}};3.1J(B);3.1s(f,8(){4(d.r.t.1Z){d.14(f+1);d.t.1t()}});3.P(3.r.1A.1e)},2Q:8(){3.1H={'21-3v':2J,'21-2D':2K,'3w':2L,'3x':2M,'3y':2N}},2P:8(){3.L=3.17.E('.s-L');3.1D=$('<p H=\"s-3z\"></p>');3.L.F(3.1D);3.T=3.17.E('.s-W-17');3.T.3A();3.V=3.17.E('.s-V');3.N=3.V.E('.s-3B');3.1r=$('<A H=\"s-1r\"></A>');3.Z=$('<19 H=\"s-Z\" 1K=\"'+3.r.2s+'\">');3.T.F(3.Z);3.Z.15();$(1L.3C).F(3.1r)},1J:8(a){4(a){3.Z.1l()}y{3.Z.15()}},3D:8(a,b){4($.28(b)){3.1H[a]=b}},2R:8(){5 f=3;3.G=[];5 g=0;5 h=0;5 j=3.N.E('a');5 k=j.J;4(3.r.11<1){j.E('19').u('S',3.r.11)};j.2I(8(i){5 a=$(3);5 b=a.I('2X');5 c=a.E('19');4(!f.29(c[0])){c.2Y(8(){g+=3.1u.1u.2a;h++})}y{g+=c[0].1u.1u.2a;h++};a.1M('s-1N'+i);a.1v(8(){f.1s(i);f.t.M();w q}).2Z(8(){4(!$(3).1w('.s-1m')&&f.r.11<1){$(3).E('19').1O(1P,1)};f.14(i)},8(){4(!$(3).1w('.s-1m')&&f.r.11<1){$(3).E('19').1O(1P,f.r.11)}});5 a=q;4(c.1n('s-1x')){a=c.1n('s-1x')}y 4(c.I('2b')&&c.I('2b').J){a=c.I('2b')};5 d=q;4(c.1n('s-1o')){d=c.1n('s-1o')}y 4(c.I('2c')&&c.I('2c').J){d=c.I('2c')};5 e=q;4(c.1n('s-U')){e=c.1n('s-U')}y 4(c.I('U')&&c.I('U').J){e=c.I('U')};f.G[i]={1N:c.I('1K'),W:b,2d:q,1p:q,1o:d,U:e,1q:q,1x:a}});5 l=2e(8(){4(k==h){f.V.E('.s-1N-3E').u('v',g+'z');1Q(l)}},3F)},2V:8(){5 a=3;$(1L).31(8(e){4(e.2f==39){a.1I();a.t.M()}y 4(e.2f==37){a.2g();a.t.M()}})},2S:8(){3.1i=$('<A H=\"s-2h\"><A H=\"s-2h-W\"></A></A>');3.1j=$('<A H=\"s-32\"><A H=\"s-32-W\"></A></A>');3.T.F(3.1i);3.T.F(3.1j);5 a=3;3.1j.33(3.1i).3G(8(e){$(3).u('x',a.D);$(3).E('A').1l()}).3H(8(e){$(3).E('A').15()}).1v(8(){4($(3).1w('.s-2h')){a.1I();a.t.M()}y{a.2g();a.t.M()}}).E('A').u('S',0.7)},2U:8(){5 c=3;3.1F=$('<A H=\"s-2i\"></A>');3.1E=$('<A H=\"s-3I\"></A>');3.V.F(3.1F);3.V.34(3.1E);5 d=0;5 e=q;$(3.1E).33(3.1F).1v(8(){5 a=c.1G-3J;4(c.r.1Y>0){5 a=c.r.1Y};4($(3).1w('.s-2i')){5 b=c.N.1a()+a}y{5 b=c.N.1a()-a};4(c.r.t.20){c.t.M()};c.N.13({1a:b+'z'});w q}).u('S',0.6).2Z(8(){5 b='C';4($(3).1w('.s-2i')){b='2j'};e=2e(8(){d++;4(d>30&&c.r.t.20){c.t.M()};5 a=c.N.1a()+1;4(b=='C'){a=c.N.1a()-1};c.N.1a(a)},10);$(3).u('S',1)},8(){d=0;1Q(e);$(3).u('S',0.6)})},2k:8(){3.1D.2l((3.O+1)+' / '+3.G.J);4(!3.r.1z){3.1j.1l().u('x',3.D);3.1i.1l().u('x',3.D);4(3.O==(3.G.J-1)){3.1i.15()};4(3.O==0){3.1j.15()}};3.P(3.r.1A.2F)},35:8(a,b){4(b>3.D){5 c=a/b;b=3.D;a=3.D*c};4(a>3.K){5 c=b/a;a=3.K;b=3.K*c};w{v:a,x:b}},36:8(a,b,c){a.u('Q','38');4(c<3.D){5 d=3.D-c;a.u('Q',(d/2)+'z')};a.u('C','38');4(b<3.K){5 d=3.K-b;a.u('C',(d/2)+'z')}},3a:8(a){5 b=q;4(a.1o.J||a.U.J){5 c='';4(a.U.J){c='<3b H=\"s-3c-U\">'+a.U+'</3b>'};5 b='';4(a.1o.J){b='<16>'+a.1o+'</16>'};b=$('<p H=\"s-W-3c\">'+c+b+'</p>')};w b},1s:8(a,b){4(3.G[a]&&!3.1k){5 c=3;5 d=3.G[a];3.1k=B;4(!d.1p){3.1J(B);3.14(a,8(){c.1J(q);c.2m(a,b)})}y{3.2m(a,b)}}},2m:8(a,b){4(3.G[a]){5 c=3;5 d=3.G[a];5 e=$(1L.3K('A')).1M('s-W');5 f=$(1B 3d()).I('1K',d.W);4(d.1x){5 g=$('<a 2X=\"'+d.1x+'\" 3L=\"3M\"></a>');g.F(f);e.F(g)}y{e.F(f)}3.T.34(e);5 h=3.35(d.1q.v,d.1q.x);f.I('v',h.v);f.I('x',h.x);e.u({v:h.v+'z',x:h.x+'z'});3.36(e,h.v,h.x);5 i=3.3a(d,e);4(i){4(!3.r.1X){e.F(i);5 j=h.v-12(i.u('3e-C'),10)-12(i.u('3e-2j'),10);i.u('v',j+'z')}y{3.r.1X.F(i)}};3.3f(3.V.E('.s-1N'+a));5 k='2j';4(3.O<a){k='C'};3.P(3.r.1A.2G);4(3.18||3.r.2t){5 l=3.r.1b;5 m='3N';5 n=3.1H[3.r.2C].2n(3,e,k,i);4(1R n.1d!='1S'){l=n.1d};4(1R n.3g!='1S'){m=n.3g};4(3.18){5 o=3.18;5 p=3.R;o.13(n.1g,l,m,8(){o.3h();4(p)p.3h()})};e.13(n.1h,l,m,8(){c.O=a;c.18=e;c.R=i;c.1k=q;c.2k();c.P(b)})}y{3.O=a;3.18=e;c.R=i;3.1k=q;c.2k();3.P(b)}}},3i:8(){4(3.O==(3.G.J-1)){4(!3.r.1z){w q};5 a=0}y{5 a=3.O+1};w a},1I:8(a){5 b=3.3i();4(b===q)w q;3.14(b+1);3.1s(b,a);w B},3j:8(){4(3.O==0){4(!3.r.1z){w q};5 a=3.G.J-1}y{5 a=3.O-1};w a},2g:8(a){5 b=3.3j();4(b===q)w q;3.14(b-1);3.1s(b,a);w B},3O:8(){5 a=3;5 i=0;8 2o(){4(i<a.G.J){i++;a.14(i,2o)}};a.14(i,2o)},14:8(a,b){4(3.G[a]){5 c=3.G[a];4(!3.G[a].1p){5 d=$(1B 3d());d.I('1K',c.W);4(!3.29(d[0])){3.1r.F(d);5 e=3;d.2Y(8(){c.1p=B;c.1q={v:3.v,x:3.x};e.P(b)}).2d(8(){c.2d=B;c.1p=q;c.1q=q})}y{c.1p=B;c.1q={v:d[0].v,x:d[0].x};3.P(b)}}y{3.P(b)}}},29:8(a){4(1R a.3k!='1S'&&!a.3k){w q};4(1R a.3l!='1S'&&a.3l==0){w q};w B},3f:8(a){3.N.E('.s-1m').3m('s-1m');a.1M('s-1m');4(3.r.11<1){3.N.E('a:3P(.s-1m) 19').1O(1P,3.r.11);a.E('19').1O(1P,1)};5 b=a[0].1u.3Q;b-=(3.1G/2)-(a[0].2a/2);3.N.13({1a:b+'z'})},P:8(a){4($.28(a)){a.2n(3)}}};8 23(a,b){3.1e(a,b)};23.2O={1T:q,1U:q,X:q,L:q,r:q,2p:q,1y:q,Y:q,1V:q,1e:8(a,b){5 c=3;3.2p=a;3.r=b},2T:8(){3.1T=$('<16 H=\"s-t-1t\">'+3.r.2w+'</16>');3.1U=$('<16 H=\"s-t-M\">'+3.r.2x+'</16>');3.X=$('<16 H=\"s-t-X\"></16>');3.L=$('<A H=\"s-t-L\"></A>');3.L.F(3.1T).F(3.1U).F(3.X);3.X.15();5 a=3;3.1T.1v(8(){a.1t()});3.1U.1v(8(){a.M()});$(1L).31(8(e){4(e.2f==3R){4(a.Y){a.M()}y{a.1t()}}});w 3.L},24:8(){3.1y=q;3.M();3.L.15()},1c:8(){3.1y=B;3.L.1l()},3S:8(){4(3.1y){3.24()}y{3.1c()}},1t:8(){4(3.Y||!3.1y)w q;5 a=3;3.Y=B;3.L.1M('s-t-Y');3.2q();3.P(3.r.2A);w B},M:8(){4(!3.Y)w q;3.Y=q;3.X.15();3.L.3m('s-t-Y');1Q(3.1V);3.P(3.r.2B);w B},2q:8(){5 c=3;5 d=3.r.2y;5 e=3.r.2z;1Q(c.1V);3.X.1l().2l(d+(3.r.1d/2r)+e);5 f=0;3.1V=2e(8(){f+=2r;4(f>=c.r.1d){5 a=8(){4(c.Y){c.2q()};f=0};4(!c.2p(a)){c.M()};f=0};5 b=12(c.X.3T().2W(/[^0-9]/g,''),10);b--;4(b>0){c.X.2l(d+b+e)}},2r)},P:8(a){4($.28(a)){a.2n(3)}}}})(3U);"
,62,243,"|||this|if|var|||function||||||||||||||||||false|settings|ad|slideshow|css|width|return|height|else|px|div|true|left|image_wrapper_height|find|append|images|class|attr|length|image_wrapper_width|controls|stop|thumbs_wrapper|current_index|fireCallback|top|current_description|opacity|image_wrapper|title|nav|image|countdown|running|loader||thumb_opacity|parseInt|animate|preloadImage|hide|span|wrapper|current_image|img|scrollLeft|animation_speed|enable|speed|init|bottom|old_image|new_image|next_link|prev_link|in_transition|show|active|data|desc|preloaded|size|preloads|showImage|start|parentNode|click|is|link|enabled|cycle|callbacks|new|offsetHeight|gallery_info|scroll_back|scroll_forward|nav_display_width|animations|nextImage|loading|src|document|addClass|thumb|fadeTo|300|clearInterval|typeof|undefined|start_link|stop_link|countdown_interval|start_at_index|description_wrapper|scroll_jump|autostart|stop_on_scroll|slide|AdGallery|AdGallerySlideshow|disable|window|location|hash|isFunction|isImageLoaded|offsetWidth|longdesc|alt|error|setInterval|keyCode|prevImage|next|forward|right|_afterShow|html|_showWhenLoaded|call|preloadNext|nextimage_callback|_next|1000|loader_image|animate_first_image|display_next_and_prev|display_back_and_forward|start_label|stop_label|countdown_prefix|countdown_sufix|onStart|onStop|effect|hori|enable_keyboard_move|afterImageVisible|beforeImageVisible|extend|each|VerticalSlideAnimation|HorizontalSlideAnimation|ResizeAnimation|FadeAnimation|NoneAnimation|prototype|setupElements|setupAnimations|findImages|initNextAndPrev|create|initBackAndForward|initKeyEvents|replace|href|load|hover||keydown|prev|add|prepend|_getContainedImageSize|_centerImage||0px||_getDescription|strong|description|Image|padding|highLightThumb|easing|remove|nextIndex|prevIndex|complete|naturalWidth|removeClass|fn|adGallery|gif|400|5000|Start|Stop|indexOf|vert|resize|fade|none|info|empty|thumbs|body|addAnimation|list|100|mouseover|mouseout|back|50|createElement|target|_blank|swing|preloadAll|not|offsetLeft|83|toggle|text|jQuery".split("|"),0,{})),function(e){e.fn.hoverIntent=function(t,n){var r={sensitivity:7,interval:100,timeout:0};r=e.extend(r,n?{over:t,out:n}:t);var i,s,o,u,a=function(e){i=e.pageX,s=e.pageY},f=function(t,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if(Math.abs(o-i)+Math.abs(u-s)<r.sensitivity)return e(n).unbind("mousemove",a),n.hoverIntent_s=1,r.over.apply(n,[t]);o=i,u=s,n.hoverIntent_t=setTimeout(function(){f(t,n)},r.interval)},l=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,r.out.apply(t,[e])},c=function(t){var n=(t.type=="mouseover"?t.fromElement:t.toElement)||t.relatedTarget;while(n&&n!=this)try{n=n.parentNode}catch(t){n=this}if(n==this)return!1;var i=jQuery.extend({},t),s=this;s.hoverIntent_t&&(s.hoverIntent_t=clearTimeout(s.hoverIntent_t)),t.type=="mouseover"?(o=i.pageX,u=i.pageY,e(s).bind("mousemove",a),s.hoverIntent_s!=1&&(s.hoverIntent_t=setTimeout(function(){f(i,s)},r.interval))):(e(s).unbind("mousemove",a),s.hoverIntent_s==1&&(s.hoverIntent_t=setTimeout(function(){l(i,s)},r.timeout)))};return this.mouseover(c).mouseout(c)}}(jQuery),function(e){e.fn.superfish=function(t){var n=e.fn.superfish,r=n.c,i=e(['<span class="',r.arrowClass,'"> &#187;</span>'].join("")),s=function(){var t=e(this),n=u(t);clearTimeout(n.sfTimer),t.showSuperfishUl().siblings().hideSuperfishUl()},o=function(){var t=e(this),r=u(t),i=n.op;clearTimeout(r.sfTimer),r.sfTimer=setTimeout(function(){i.retainPath=e.inArray(t[0],i.$path)>-1,t.hideSuperfishUl(),i.$path.length&&t.parents(["li.",i.hoverClass].join("")).length<1&&s.call(i.$path)},i.delay)},u=function(e){var t=e.parents(["ul.",r.menuClass,":first"].join(""))[0];return n.op=n.o[t.serial],t},a=function(e){e.addClass(r.anchorClass).append(i.clone())};return this.each(function(){var i=this.serial=n.o.length,u=e.extend({},n.defaults,t);u.$path=e("li."+u.pathClass,this).slice(0,u.pathLevels).each(function(){e(this).addClass([u.hoverClass,r.bcClass].join(" ")).filter("li:has(ul)").removeClass(u.pathClass)}),n.o[i]=n.op=u,e("li:has(ul)",this)[e.fn.hoverIntent&&!u.disableHI?"hoverIntent":"hover"](s,o).each(function(){u.autoArrows&&a(e(">a:first-child",this))}).not("."+r.bcClass).hideSuperfishUl();var f=e("a",this);f.each(function(e){var t=f.eq(e).parents("li");f.eq(e).focus(function(){s.call(t)}).blur(function(){o.call(t)})}),u.onInit.call(this)}).each(function(){var t=[r.menuClass];n.op.dropShadows&&!(e.browser.msie&&e.browser.version<7)&&t.push(r.shadowClass),e(this).addClass(t.join(" "))})};var t=e.fn.superfish;t.o=[],t.op={},t.IE7fix=function(){var n=t.op;e.browser.msie&&e.browser.version>6&&n.dropShadows&&n.animation.opacity!=undefined&&this.toggleClass(t.c.shadowClass+"-off")},t.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator",shadowClass:"sf-shadow"},t.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},speed:"normal",autoArrows:!0,dropShadows:!0,disableHI:!1,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}},e.fn.extend({hideSuperfishUl:function(){var n=t.op,r=n.retainPath===!0?n.$path:"";n.retainPath=!1;var i=e(["li.",n.hoverClass].join(""),this).add(this).not(r).removeClass(n.hoverClass).find(">ul").hide().css("visibility","hidden");return n.onHide.call(i),this},showSuperfishUl:function(){var e=t.op,n=t.c.shadowClass+"-off",r=this.addClass(e.hoverClass).find(">ul:hidden").css("visibility","visible");return t.IE7fix.call(r),e.onBeforeShow.call(r),r.animate(e.animation,e.speed,function(){t.IE7fix.call(r),e.onShow.call(r)}),this}})}(jQuery),$(function(){jQuery("ul.sf-menu").superfish({animation:{height:"show"},speed:"fast",autoArrows:!1,dropShadows:!1}),$("#tabright> ul").tabs({fx:{height:"toggle",opacity:"toggle"}})}),function(e){e.fn.aeImageResize=function(t){var n=0,r=e.browser.msie&&6==~~e.browser.version;return!t.height&&!t.width?this:(t.height&&t.width&&(n=t.width/t.height),this.one("load",function(){this.removeAttribute("height"),this.removeAttribute("width"),this.style.height=this.style.width="";var e=this.height,r=this.width,i=r/e,s=t.height,o=t.width,u=n;u||(s?u=i+1:u=i-1);if(s&&e>s||o&&r>o)i>u?s=~~(e/r*o):o=~~(r/e*s),this.height=s,this.width=o}).each(function(){(this.complete||r)&&e(this).trigger("load")}))}}(jQuery),$.preloadImages=function(){for(var e=0;e<arguments.length;e++)img=new Image,img.src=arguments[e]},$(function(){jQuery.validator.addMethod("phone",function(e,t){return this.optional(t)||/^((\((\+?)\d+\))?|(\+\d+)?)[ ]*-?(\d+[ ]*\-?[ ]*\d*)+$/.test(e)}," Please enter a valid telephone number"),$(".edit_profile").validate({errorClass:"validation_error"})}),closeAllSettings=function(){$(".settings_content").hide("slow"),$(".settings_briefing").show("slow")},showSettings=function(e){closeAllSettings(),$("#"+e+"_content").css("display")=="none"?($("#"+e+"_briefing").hide("slow"),$("#"+e+"_content").show("slow")):($("#"+e+"_briefing").show("slow"),$("#"+e+"_content").hide("slow"))},SocialStream.Action=function(e,t,n){var r=[],i=function(e){r.push(e)},s=function(e){t.each(r,function(t,n){n(e)})},o=function(e){var t=e.follow;if(!t)return;u(e).replaceWith(t.form),a(e).replaceWith(t.sentence)},u=function(e){return t(".follow_form-"+e.activity_object.id)},a=function(e){return t(".follow_sentence-"+e.activity_object.id)};return i(o),{addUpdateCallback:i,update:s,followForms:u,followSentences:a}}(SocialStream,jQuery),SocialStream.Objects=function(e,t,n){var r=[],i=function(e){r.push(e)},s=function(){t.each(r,function(e,t){t()})};return i(SocialStream.Timeline.initPrivacyTooltips),i(SocialStream.Wall.activateAntiRebounds),{addInitCallback:i,init:s}}(SocialStream,jQuery),SocialStream.Activity=function(e,t,n){var r=function(){var e=window.location.hash.match(/^.*activity_(\d+).*$/);e&&e>0&&t.scrollTo("#activity_"+e[1],1500,{axis:"y"})};return e.Objects.addInitCallback(r),{}}(SocialStream,jQuery),SocialStream.Comments=function(e,t,n){var r=function(){t(".activity_new_comment").each(function(){t.trim(t(this).siblings(".activity_comments").text())!=""&&(t(this).show(),t(this).find(".input_new_comments").val(""))}),i(),s(),o(),u(),a()},i=function(){t(".activities_comment_btn").hide(),t(".actor_name_new_comment").hide(),t(".actor_logo_new_comment").hide()},s=function(){t(".input_new_comments").watermark(I18n.t("comment.input"),"#666")},o=function(){t(".input_new_comments").change(function(){f(this)}).keydown(function(){f(this)}).keyup(function(){f(this)}),t(".input_new_comments").each(function(){f(this)})},u=function(){t(".input_new_comments").click(function(){t(".activities_comment_btn").hide(),t(".new_comment").removeClass("new_comment_shown"),t(".actor_name_new_comment").hide(),t(".actor_logo_new_comment").hide();var e=t(this).parents(".activity_new_comment");return e.find(".activities_comment_btn").show(),t(this).parents(".new_comment").addClass("new_comment_shown"),e.find(".actor_name_new_comment").show(),e.find(".actor_logo_new_comment").show(),!1})},a=function(){t(".to_comment").click(function(){return t(this).parents(".activity_content").find(".activity_new_comment").show(),t(this).closest(".activity_content").find(".input_new_comments").click().focus().val(""),!1})},f=function(e){var n=t(e).val().replace(/\n/g,"<br/>");t(e).siblings(".copy_new_comment").html(n)};return SocialStream.Timeline.addInitCallback(r),SocialStream.Timeline.addCreateCallback(i),SocialStream.Timeline.addCreateCallback(s),SocialStream.Timeline.addCreateCallback(o),SocialStream.Timeline.addCreateCallback(u),SocialStream.Timeline.addCreateCallback(a),SocialStream.Objects.addInitCallback(r),{initNew:r}}(SocialStream,jQuery),SocialStream.Follow=function(e,t,n){var r=function(){t(".following-button").mouseenter(function(){t(this).hide(),t(this).siblings(".unfollow-button").show()}),t(".unfollow-button").mouseleave(function(){t(this).hide(),t(this).siblings(".following-button").show()}),t(".unfollow-button").hide()};return t(function(){SocialStream.Follow.initButtons()}),{initButtons:r}}(SocialStream,jQuery),SocialStream.Search=function(e,t,n){function r(){t.preloadImages("/assets/mini-loading.gif"),t("#search_form").submit(function(){return query=t("#global_search_input").val(),query==""||query.length<2||query==I18n.t("search.write")?(t("#too_short_error").show(),t("#global_search_input").removeClass("searching"),t("#global_search_input").blur(),t("#global_search_input").focus(),!1):(t("#global_search_input").addClass("searching"),t("#global_search_input").blur(),!0)}),t("#global_search_input").watermark(I18n.t("search.write"))}return{init:r}}(SocialStream,jQuery),SocialStream.Toolbar=function(e,t,n){var r=function(e){t(".toolbar_menu ul li ul").hide(),t(".toolbar_menu li a").click(function(){t(this).next().slideToggle("normal")}),i.init(e)},i=function(e,t,n){var r=function(e){t(".logo_grid.logo_full").hover(function(){t(".logo_menu",this).stop().animate({top:"101px"},{queue:!1,duration:160})},function(){t(".logo_menu",this).stop().animate({top:"1119px"},{queue:!1,duration:160})}),e!=n&&e["option"]!=n&&e.option.length&&i(e.option)},i=function(e){t("#toolbar_menu-"+e).next().show()};return{init:r,expand:i}}(e,t);return{init:r,expandMenu:i.expand}}(SocialStream,jQuery),function(){function i(){return this}function s(e){return e.length}function o(e){return e==null}function u(e){return e.replace(/(^\s+)|(\s+$)/g,"").replace(/\s+/g," ")}function f(e){var t={},n=[];return t.add=function(e){for(var r=0;r<n.length;r++)if(n[r].listener==e)return t;return n.push({listener:e,on:!0}),t},t.remove=function(e){for(var r=0;r<n.length;r++){var i=n[r];if(i.listener==e){i.on=!1,n=n.slice(0,r).concat(n.slice(r+1));break}}return t},t.dispatch=function(){var e=n;for(var t=0,r=e.length;t<r;t++){var i=e[t];i.on&&i.listener.apply(this,arguments)}},t}function h(e){return e+""}function p(e){var t=e.lastIndexOf("."),n=t>=0?e.substring(t):(t=e.length,""),r=[];while(t>0)r.push(e.substring(t-=3,t+3));return r.reverse().join(",")+n}function y(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function b(e){return function(t){return 1-e(1-t)}}function w(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function E(e){return e}function S(e){return function(t){return Math.pow(t,e)}}function x(e){return 1-Math.cos(e*Math.PI/2)}function T(e){return Math.pow(2,10*(e-1))}function N(e){return 1-Math.sqrt(1-e*e)}function C(e,t){var n;return arguments.length<2&&(t=.45),arguments.length<1?(e=1,n=t/4):n=t/(2*Math.PI)*Math.asin(1/e),function(r){return 1+e*Math.pow(2,10*-r)*Math.sin((r-n)*2*Math.PI/t)}}function k(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function L(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function M(e){return e in O||/\bcolor\b/.test(e)?d3.interpolateRgb:d3.interpolate}function _(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function D(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function P(e,t,n){return new H(e,t,n)}function H(e,t,n){this.r=e,this.g=t,this.b=n}function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function j(e,t,n){var r=0,i=0,s=0,o,u,a;o=/([a-z]+)\((.*)\)/i.exec(e);if(o){u=o[2].split(",");switch(o[1]){case"hsl":return n(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(I(u[0]),I(u[1]),I(u[2]))}}return(a=q[e])?t(a.r,a.g,a.b):(e!=null&&e.charAt(0)==="#"&&(e.length===4?(r=e.charAt(1),r+=r,i=e.charAt(2),i+=i,s=e.charAt(3),s+=s):e.length===7&&(r=e.substring(1,3),i=e.substring(3,5),s=e.substring(5,7)),r=parseInt(r,16),i=parseInt(i,16),s=parseInt(s,16)),t(r,i,s))}function F(e,t,n){var r=Math.min(e/=255,t/=255,n/=255),i=Math.max(e,t,n),s=i-r,o,u,a=(i+r)/2;return s?(u=a<.5?s/(i+r):s/(2-i-r),e==i?o=(t-n)/s+(t<n?6:0):t==i?o=(n-e)/s+2:o=(e-t)/s+4,o*=60):u=o=0,U(o,u,a)}function I(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}function U(e,t,n){return new z(e,t,n)}function z(e,t,n){this.h=e,this.s=t,this.l=n}function W(e,t,n){function s(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r}function o(e){return Math.round(s(e)*255)}var r,i;return e%=360,e<0&&(e+=360),t=t<0?0:t>1?1:t,n=n<0?0:n>1?1:n,i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i,P(o(e+120),o(e),o(e-120))}function X(e){return r(e,J),e}function K(e){return function(){return V(e,this)}}function Q(e){return function(){return $(e,this)}}function G(e){return{__data__:e}}function Y(e){return r(e,Z),e}function et(e){return arguments.length||(e=d3.ascending),function(t,n){return e(t&&t.__data__,n&&n.__data__)}}function nt(e,t){r(e,it);var n={},i=d3.dispatch("start","end"),s=ut,o=Date.now();return e.id=t,e.tween=function(t,r){return arguments.length<2?n[t]:(r==null?delete n[t]:n[t]=r,e)},e.ease=function(t){return arguments.length?(s=typeof t=="function"?t:d3.ease.apply(d3,arguments),e):s},e.each=function(t,n){return arguments.length<2?at.call(e,t):(i[t].add(n),e)},d3.timer(function(r){return e.each(function(u,a,f){function v(e){if(d.active>t)return g();d.active=t;for(var r in n)(r=n[r].call(c,u,a))&&l.push(r);return i.start.dispatch.call(c,u,a),m(e)||d3.timer(m,0,o),1}function m(e){if(d.active!==t)return g();var n=(e-h)/p,r=s(n),o=l.length;while(o>0)l[--o].call(c,r);if(n>=1)return g(),ot=t,i.end.dispatch.call(c,u,a),ot=0,1}function g(){return--d.count||delete c.__transition__,1}var l=[],c=this,h=e[f][a].delay,p=e[f][a].duration,d=c.__transition__||(c.__transition__={active:0,count:0});++d.count,h<=r?v(r):d3.timer(v,h,o)}),1},0,o),e}function rt(e){return typeof e=="function"?function(t,n,r){var i=e.call(this,t,n)+"";return r!=i&&d3.interpolate(r,i)}:(e+="",function(t,n,r){return r!=e&&d3.interpolate(r,e)})}function at(e){for(var t=0,n=this.length;t<n;t++)for(var r=this[t],i=0,s=r.length;i<s;i++){var o=r[i];o&&e.call(o=o.node,o.__data__,i,t)}return this}function ht(){var e,t=Date.now(),n=ft;while(n)e=t-n.then,e>=n.delay&&(n.flush=n.callback(e)),n=n.next;var r=pt()-t;r>24?(isFinite(r)&&(clearTimeout(ct),ct=setTimeout(ht,r)),lt=0):(lt=1,dt(ht))}function pt(){var e=null,t=ft,n=Infinity;while(t)t.flush?t=e?e.next=t.next:ft=t.next:(n=Math.min(n,t.then+t.delay),t=(e=t).next);return n}function vt(){}function mt(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function gt(e,t){var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t=t(s-i),e[n]=t.floor(i),e[r]=t.ceil(s),e}function yt(){return Math}function bt(e,t,n,r){function o(){var o=e.length==2?Nt:Ct,a=r?D:_;return i=o(e,t,a,n),s=o(t,e,a,d3.interpolate),u}function u(e){return i(e)}var i,s;return u.invert=function(e){return s(e)},u.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},u.range=function(e){return arguments.length?(t=e,o()):t},u.rangeRound=function(e){return u.range(e).interpolate(d3.interpolateRound)},u.clamp=function(e){return arguments.length?(r=e,o()):r},u.interpolate=function(e){return arguments.length?(n=e,o()):n},u.ticks=function(t){return xt(e,t)},u.tickFormat=function(t){return Tt(e,t)},u.nice=function(){return gt(e,Et),o()},u.copy=function(){return bt(e,t,n,r)},o()}function wt(e,t){return e.range=d3.rebind(e,t.range),e.rangeRound=d3.rebind(e,t.rangeRound),e.interpolate=d3.rebind(e,t.interpolate),e.clamp=d3.rebind(e,t.clamp),e}function Et(e){return e=Math.pow(10,Math.round(Math.log(e)/Math.LN10)-1),{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}}function St(e,t){var n=mt(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return s<=.15?i*=10:s<=.35?i*=5:s<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+i*.5,n[2]=i,n}function xt(e,t){return d3.range.apply(d3,St(e,t))}function Tt(e,t){return d3.format(",."+Math.max(0,-Math.floor(Math.log(St(e,t)[2])/Math.LN10+.01))+"f")}function Nt(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function Ct(e,t,n,r){var i=[],s=[],o=0,u=e.length;while(++o<u)i.push(n(e[o-1],e[o])),s.push(r(t[o-1],t[o]));return function(t){var n=d3.bisect(e,t,1,e.length-1)-1;return s[n](i[n](t))}}function kt(e,t){function r(n){return e(t(n))}var n=t.pow;return r.invert=function(t){return n(e.invert(t))},r.domain=function(i){return arguments.length?(t=i[0]<0?At:Lt,n=t.pow,e.domain(i.map(t)),r):e.domain().map(n)},r.nice=function(){return e.domain(gt(e.domain(),yt)),r},r.ticks=function(){var r=mt(e.domain()),i=[];if(r.every(isFinite)){var s=Math.floor(r[0]),o=Math.ceil(r[1]),u=n(r[0]),a=n(r[1]);if(t===At){i.push(n(s));for(;s++<o;)for(var f=9;f>0;f--)i.push(n(s)*f)}else{for(;s<o;s++)for(var f=1;f<10;f++)i.push(n(s)*f);i.push(n(s))}for(s=0;i[s]<u;s++);for(o=i.length;i[o-1]>a;o--);i=i.slice(s,o)}return i},r.tickFormat=function(){return Ot},r.copy=function(){return kt(e.copy(),t)},wt(r,e)}function Lt(e){return Math.log(e)/Math.LN10}function At(e){return-Math.log(-e)/Math.LN10}function Ot(e){return e.toPrecision(1)}function Mt(e,t){function i(t){return e(n(t))}var n=_t(t),r=_t(1/t);return i.invert=function(t){return r(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t.map(n)),i):e.domain().map(r)},i.ticks=function(e){return xt(i.domain(),e)},i.tickFormat=function(e){return Tt(i.domain(),e)},i.nice=function(){return i.domain(gt(i.domain(),Et))},i.exponent=function(e){if(!arguments.length)return t;var s=i.domain();return n=_t(t=e),r=_t(1/t),i.domain(s)},i.copy=function(){return Mt(e.copy(),t)},wt(i,e)}function _t(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Dt(e,t){function s(t){return r[((n[t]||(n[t]=e.push(t)))-1)%r.length]}var n,r,i;return s.domain=function(r){if(!arguments.length)return e;e=[],n={};var i=-1,o=r.length,u;while(++i<o)n[u=r[i]]||(n[u]=e.push(u));return s[t.t](t.x,t.p)},s.range=function(e){return arguments.length?(r=e,i=0,t={t:"range",x:e},s):r},s.rangePoints=function(n,o){arguments.length<2&&(o=0);var u=n[0],a=n[1],f=(a-u)/(e.length-1+o);return r=e.length<2?[(u+a)/2]:d3.range(u+f*o/2,a+f/2,f),i=0,t={t:"rangePoints",x:n,p:o},s},s.rangeBands=function(n,o){arguments.length<2&&(o=0);var u=n[0],a=n[1],f=(a-u)/(e.length+o);return r=d3.range(u+f*o,a,f),i=f*(1-o),t={t:"rangeBands",x:n,p:o},s},s.rangeRoundBands=function(n,o){arguments.length<2&&(o=0);var u=n[0],a=n[1],f=Math.floor((a-u)/(e.length+o)),l=a-u-(e.length-o)*f;return r=d3.range(u+Math.round(l/2),a,f),i=Math.round(f*(1-o)),t={t:"rangeRoundBands",x:n,p:o},s},s.rangeBand=function(){return i},s.copy=function(){return Dt(e,t)},s.domain(e)}function Ft(e,t){function r(){var r=0,s=e.length,o=t.length;n=[];while(++r<o)n[r-1]=d3.quantile(e,r/o);return i}function i(e){return isNaN(e=+e)?NaN:t[d3.bisect(n,e)]}var n;return i.domain=function(t){return arguments.length?(e=t.filter(function(e){return!isNaN(e)}).sort(d3.ascending),r()):e},i.range=function(e){return arguments.length?(t=e,r()):t},i.quantiles=function(){return n},i.copy=function(){return Ft(e,t)},r()}function It(e,t,n){function s(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function o(){return r=n.length/(t-e),i=n.length-1,s}var r,i;return s.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},s.range=function(e){return arguments.length?(n=e,o()):n},s.copy=function(){return It(e,t,n)},o()}function Ut(e){return e.innerRadius}function zt(e){return e.outerRadius}function Wt(e){return e.startAngle}function Xt(e){return e.endAngle}function Vt(e){function o(r){return r.length<1?null:"M"+i(e($t(this,r,t,n)),s)}var t=Jt,n=Kt,r="linear",i=Qt[r],s=.7;return o.x=function(e){return arguments.length?(t=e,o):t},o.y=function(e){return arguments.length?(n=e,o):n},o.interpolate=function(e){return arguments.length?(i=Qt[r=e],o):r},o.tension=function(e){return arguments.length?(s=e,o):s},o}function $t(e,t,n,r){var i=[],s=-1,o=t.length,u=typeof n=="function",a=typeof r=="function",f;if(u&&a)while(++s<o)i.push([n.call(e,f=t[s],s),r.call(e,f,s)]);else if(u)while(++s<o)i.push([n.call(e,t[s],s),r]);else if(a)while(++s<o)i.push([n,r.call(e,t[s],s)]);else while(++s<o)i.push([n,r]);return i}function Jt(e){return e[0]}function Kt(e){return e[1]}function Gt(e){var t=[],n=0,r=e.length,i=e[0];t.push(i[0],",",i[1]);while(++n<r)t.push("L",(i=e[n])[0],",",i[1]);return t.join("")}function Yt(e){var t=[],n=0,r=e.length,i=e[0];t.push(i[0],",",i[1]);while(++n<r)t.push("V",(i=e[n])[1],"H",i[0]);return t.join("")}function Zt(e){var t=[],n=0,r=e.length,i=e[0];t.push(i[0],",",i[1]);while(++n<r)t.push("H",(i=e[n])[0],"V",i[1]);return t.join("")}function en(e,t){return e.length<4?Gt(e):e[1]+rn(e.slice(1,e.length-1),sn(e,t))}function tn(e,t){return e.length<3?Gt(e):e[0]+rn((e.push(e[0]),e),sn([e[e.length-2]].concat(e,[e[1]]),t))}function nn(e,t,n){return e.length<3?Gt(e):e[0]+rn(e,sn(e,t))}function rn(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Gt(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;n&&(r+="Q"+(s[0]-o[0]*2/3)+","+(s[1]-o[1]*2/3)+","+s[0]+","+s[1],i=e[1],a=2);if(t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+u[0]*2/3)+","+(s[1]+u[1]*2/3)+","+l[0]+","+l[1]}return r}function sn(e,t){var n=[],r=(1-t)/2,i,s=e[0],o=e[1],u=1,a=e.length;while(++u<a)i=s,s=o,o=e[u],n.push([r*(o[0]-i[0]),r*(o[1]-i[1])]);return n}function on(e){if(e.length<3)return Gt(e);var t=[],n=1,r=e.length,i=e[0],s=i[0],o=i[1],u=[s,s,s,(i=e[1])[0]],a=[o,o,o,i[1]];t.push(s,",",o),dn(t,u,a);while(++n<r)i=e[n],u.shift(),u.push(i[0]),a.shift(),a.push(i[1]),dn(t,u,a);n=-1;while(++n<2)u.shift(),u.push(i[0]),a.shift(),a.push(i[1]),dn(t,u,a);return t.join("")}function un(e){if(e.length<4)return Gt(e);var t=[],n=-1,r=e.length,i,s=[0],o=[0];while(++n<3)i=e[n],s.push(i[0]),o.push(i[1]);t.push(ln(pn,s)+","+ln(pn,o)),--n;while(++n<r)i=e[n],s.shift(),s.push(i[0]),o.shift(),o.push(i[1]),dn(t,s,o);return t.join("")}function an(e){var t,n=-1,r=e.length,i=r+4,s,o=[],u=[];while(++n<4)s=e[n%r],o.push(s[0]),u.push(s[1]);t=[ln(pn,o),",",ln(pn,u)],--n;while(++n<i)s=e[n%r],o.shift(),o.push(s[0]),u.shift(),u.push(s[1]),dn(t,o,u);return t.join("")}function fn(e,t){var n=e.length-1,r=e[0][0],i=e[0][1],s=e[n][0]-r,o=e[n][1]-i,u=-1,a,f;while(++u<=n)a=e[u],f=u/n,a[0]=t*a[0]+(1-t)*(r+f*s),a[1]=t*a[1]+(1-t)*(i+f*o);return on(e)}function ln(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function dn(e,t,n){e.push("C",ln(cn,t),",",ln(cn,n),",",ln(hn,t),",",ln(hn,n),",",ln(pn,t),",",ln(pn,n))}function vn(e,t){return(t[1]-e[1])/(t[0]-e[0])}function mn(e){var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=vn(i,s);while(++t<n)r[t]=o+(o=vn(i=s,s=e[t+1]));return r[t]=o,r}function gn(e){var t=[],n,r,i,s,o=mn(e),u=-1,a=e.length-1;while(++u<a)n=vn(e[u],e[u+1]),Math.abs(n)<1e-6?o[u]=o[u+1]=0:(r=o[u]/n,i=o[u+1]/n,s=r*r+i*i,s>9&&(s=n*3/Math.sqrt(s),o[u]=s*r,o[u+1]=s*i));u=-1;while(++u<=a)s=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),t.push([s||0,o[u]*s||0]);return t}function yn(e){return e.length<3?Gt(e):e[0]+rn(e,gn(e))}function bn(e){var t,n=-1,r=e.length,i,s;while(++n<r)t=e[n],i=t[0],s=t[1]+qt,t[0]=i*Math.cos(s),t[1]=i*Math.sin(s);return e}function wn(e){function a(s){if(s.length<1)return null;var a=$t(this,s,t,r),f=$t(this,s,t===n?En(a):n,r===i?Sn(a):i);return"M"+o(e(f),u)+"L"+o(e(a.reverse()),u)+"Z"}var t=Jt,n=Jt,r=0,i=Kt,s="linear",o=Qt[s],u=.7;return a.x=function(e){return arguments.length?(t=n=e,a):n},a.x0=function(e){return arguments.length?(t=e,a):t},a.x1=function(e){return arguments.length?(n=e,a):n},a.y=function(e){return arguments.length?(r=i=e,a):i},a.y0=function(e){return arguments.length?(r=e,a):r},a.y1=function(e){return arguments.length?(i=e,a):i},a.interpolate=function(e){return arguments.length?(o=Qt[s=e],a):s},a.tension=function(e){return arguments.length?(u=e,a):u},a}function En(e){return function(t,n){return e[n][0]}}function Sn(e){return function(t,n){return e[n][1]}}function xn(e){return e.source}function Tn(e){return e.target}function Nn(e){return e.radius}function Cn(e){return e.startAngle}function kn(e){return e.endAngle}function Ln(e){return[e.x,e.y]}function An(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]+qt;return[n*Math.cos(r),n*Math.sin(r)]}}function Mn(e,t){var n=(e.ownerSVGElement||e).createSVGPoint();if(On<0&&(window.scrollX||window.scrollY)){var r=d3.select(document.body).append("svg:svg").style("position","absolute").style("top",0).style("left",0),i=r[0][0].getScreenCTM();On=!i.f&&!i.e,r.remove()}return On?(n.x=t.pageX,n.y=t.pageY):(n.x=t.clientX,n.y=t.clientY),n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}function _n(){return 64}function Dn(){return"circle"}function jn(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function Fn(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function In(e,t,n){i=[];if(n&&t.length>1){var r=mt(e.domain()),i,s=-1,o=t.length,u=(t[1]-t[0])/++n,a,f;while(++s<o)for(a=n;--a>0;)(f=+t[s]-a*u)>=r[0]&&i.push(f);for(--s,a=0;++a<n&&(f=+t[s]+a*u)<r[1];)i.push(f)}return i}function Vn(e){var t=d3.event,n=Rn.parentNode,r=0,i=0;n&&(n=$n(n),r=n[0]-zn[0],i=n[1]-zn[1],zn=n,Wn|=r|i);try{d3.event={dx:r,dy:i},qn[e].dispatch.apply(Rn,Un)}finally{d3.event=t}t.preventDefault()}function $n(e){return d3.event.touches?d3.svg.touches(e)[0]:d3.svg.mouse(e)}function Jn(){if(!Rn)return;var e=Rn.parentNode;if(!e)return Kn();Vn("drag"),Gn()}function Kn(){if(!Rn)return;Vn("dragend"),Rn=null,Wn&&(Xn=!0,Gn())}function Qn(){Xn&&(Gn(),Xn=!1)}function Gn(){d3.event.stopPropagation(),d3.event.preventDefault()}function fr(e){return[e[0]-rr[0],e[1]-rr[1],rr[2]]}function lr(){Yn||(Yn=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var e=d3.event,t;try{Yn.scrollTop=1e3,Yn.dispatchEvent(e),t=1e3-Yn.scrollTop}catch(n){t=e.wheelDelta||-e.detail*5}return t*.005}function cr(){var e=d3.svg.touches(sr),t=-1,n=e.length,r;while(++t<n)tr[(r=e[t]).identifier]=fr(r);return e}function hr(){var e=d3.svg.touches(sr);switch(e.length){case 1:var t=e[0];mr(rr[2],t,tr[t.identifier]);break;case 2:var n=e[0],r=e[1],i=[(n[0]+r[0])/2,(n[1]+r[1])/2],s=tr[n.identifier],o=tr[r.identifier],u=[(s[0]+o[0])/2,(s[1]+o[1])/2,s[2]];mr(Math.log(d3.event.scale)/Math.LN2+s[2],i,u)}}function pr(){er=null,Zn&&(ur=!0,mr(rr[2],d3.svg.mouse(sr),Zn))}function dr(){Zn&&(ur&&(ar=!0),pr(),Zn=null)}function vr(){ar&&(d3.event.stopPropagation(),d3.event.preventDefault(),ar=!1)}function mr(e,t,n){function a(e,t){var n=e.__domain||(e.__domain=e.domain()),r=e.range().map(function(e){return(e-t)/u});e.domain(n).domain(r.map(e.invert))}var r=Math.pow(2,(rr[2]=e)-n[2]),i=rr[0]=t[0]-r*n[0],s=rr[1]=t[1]-r*n[1],o=d3.event,u=Math.pow(2,e);d3.event={scale:u,translate:[i,s],transform:function(e,t){e&&a(e,i),t&&a(t,s)}};try{ir.apply(sr,or)}finally{d3.event=o}o.preventDefault()}Date.now||(Date.now=function(){return+(new Date)});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(e){var t=CSSStyleDeclaration.prototype,n=t.setProperty;t.setProperty=function(e,t,r){n.call(this,e,t+"",r)}}d3={version:"2.1.2"};var r=[].__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};d3.functor=function(e){return typeof e=="function"?e:function(){return e}},d3.rebind=function(e,t){return function(){var n=t.apply(e,arguments);return arguments.length?e:n}},d3.ascending=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},d3.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},d3.min=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r&&((i=e[n])==null||i!=i))i=undefined;while(++n<r)(s=e[n])!=null&&i>s&&(i=s)}else{while(++n<r&&((i=t.call(e,e[n],n))==null||i!=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&i>s&&(i=s)}return i},d3.max=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r&&((i=e[n])==null||i!=i))i=undefined;while(++n<r)(s=e[n])!=null&&s>i&&(i=s)}else{while(++n<r&&((i=t.call(e,e[n],n))==null||i!=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&s>i&&(i=s)}return i},d3.sum=function(e,t){var n=0,r=e.length,i,s=-1;if(arguments.length===1)while(++s<r)isNaN(i=+e[s])||(n+=i);else while(++s<r)isNaN(i=+t.call(e,e[s],s))||(n+=i);return n},d3.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=e[r-1],s=n-r;return s?i+s*(e[r]-i):i},d3.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,t=d3.min(arguments,s),n=new Array(t);++e<t;)for(var r=-1,i,o=n[e]=new Array(i);++r<i;)o[r]=arguments[r][e];return n},d3.bisectLeft=function(e,t,n,r){arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);while(n<r){var i=n+r>>1;e[i]<t?n=i+1:r=i}return n},d3.bisect=d3.bisectRight=function(e,t,n,r){arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);while(n<r){var i=n+r>>1;t<e[i]?r=i:n=i+1}return n},d3.first=function(e,t){var n=0,r=e.length,i=e[0],s;arguments.length===1&&(t=d3.ascending);while(++n<r)t.call(e,i,s=e[n])>0&&(i=s);return i},d3.last=function(e,t){var n=0,r=e.length,i=e[0],s;arguments.length===1&&(t=d3.ascending);while(++n<r)t.call(e,i,s=e[n])<=0&&(i=s);return i},d3.nest=function(){function s(n,o){if(o>=t.length)return i?i.call(e,n):r?n.sort(r):n;var u=-1,a=n.length,f=t[o++],l,c,h={};while(++u<a)(l=f(c=n[u]))in h?h[l].push(c):h[l]=[c];for(l in h)h[l]=s(h[l],o);return h}function o(e,r){if(r>=t.length)return e;var i=[],s=n[r++],u;for(u in e)i.push({key:u,values:o(e[u],r)});return s&&i.sort(function(e,t){return s(e.key,t.key)}),i}var e={},t=[],n=[],r,i;return e.map=function(e){return s(e,0)},e.entries=function(e){return o(s(e,0),0)},e.key=function(n){return t.push(n),e},e.sortKeys=function(r){return n[t.length-1]=r,e},e.sortValues=function(t){return r=t,e},e.rollup=function(t){return i=t,e},e},d3.keys=function(e){var t=[];for(var n in e)t.push(n);return t},d3.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},d3.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},d3.permute=function(e,t){var n=[],r=-1,i=t.length;while(++r<i)n[r]=e[t[r]];return n},d3.merge=function(e){return Array.prototype.concat.apply([],e)},d3.split=function(e,t){var n=[],r=[],i,s=-1,u=e.length;arguments.length<2&&(t=o);while(++s<u)t.call(r,i=e[s],s)?r=[]:(r.length||n.push(r),r.push(i));return n},d3.range=function(e,t,n){arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0));if((t-e)/n==Infinity)throw new Error("infinite range");var r=[],i=-1,s;if(n<0)while((s=e+n*++i)>t)r.push(s);else while((s=e+n*++i)<t)r.push(s);return r},d3.requote=function(e){return e.replace(a,"\\$&")};var a=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g
;d3.round=function(e,t){return t?Math.round(e*Math.pow(10,t))*Math.pow(10,-t):Math.round(e)},d3.xhr=function(e,t,n){var r=new XMLHttpRequest;arguments.length<3?n=t:t&&r.overrideMimeType&&r.overrideMimeType(t),r.open("GET",e,!0),r.onreadystatechange=function(){r.readyState===4&&n(r.status<300?r:null)},r.send(null)},d3.text=function(e,t,n){function r(e){n(e&&e.responseText)}arguments.length<3&&(n=t,t=null),d3.xhr(e,t,r)},d3.json=function(e,t){d3.text(e,"application/json",function(e){t(e?JSON.parse(e):null)})},d3.html=function(e,t){d3.text(e,"text/html",function(e){if(e!=null){var n=document.createRange();n.selectNode(document.body),e=n.createContextualFragment(e)}t(e)})},d3.xml=function(e,t,n){function r(e){n(e&&e.responseXML)}arguments.length<3&&(n=t,t=null),d3.xhr(e,t,r)},d3.ns={prefix:{svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},qualify:function(e){var t=e.indexOf(":");return t<0?e:{space:d3.ns.prefix[e.substring(0,t)],local:e.substring(t+1)}}},d3.dispatch=function(e){var t={},n;for(var r=0,i=arguments.length;r<i;r++)n=arguments[r],t[n]=f(n);return t},d3.format=function(e){var t=l.exec(e),n=t[1]||" ",r=t[3]||"",i=t[5],s=+t[6],o=t[7],u=t[8],a=t[9],f=!1,d=!1;u&&(u=u.substring(1)),i&&(n="0",o&&(s-=Math.floor((s-1)/4)));switch(a){case"n":o=!0,a="g";break;case"%":f=!0,a="f";break;case"p":f=!0,a="r";break;case"d":d=!0,u="0"}return a=c[a]||h,function(e){var t=f?e*100:+e,l=t<0&&(t=-t)?"−":r;if(d&&t%1)return"";e=a(t,u);if(i){var c=e.length+l.length;c<s&&(e=(new Array(s-c+1)).join(n)+e),o&&(e=p(e)),e=l+e}else{o&&(e=p(e)),e=l+e;var c=e.length;c<s&&(e=(new Array(s-c+1)).join(n)+e)}return f&&(e+="%"),e}};var l=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,c={g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){var n=1+Math.floor(1e-15+Math.log(e)/Math.LN10);return d3.round(e,t-n).toFixed(Math.max(0,Math.min(20,t-n)))}},d=S(2),v=S(3),m={linear:function(){return E},poly:S,quad:function(){return d},cubic:function(){return v},sin:function(){return x},exp:function(){return T},circle:function(){return N},elastic:C,back:k,bounce:function(){return L}},g={"in":function(e){return e},out:b,"in-out":w,"out-in":function(e){return w(b(e))}};d3.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,r=t>=0?e.substring(t+1):"in";return y(g[r](m[n].apply(null,Array.prototype.slice.call(arguments,1))))},d3.event=null,d3.interpolate=function(e,t){var n=d3.interpolators.length,r;while(--n>=0&&!(r=d3.interpolators[n](e,t)));return r},d3.interpolateNumber=function(e,t){return t-=e,function(n){return e+t*n}},d3.interpolateRound=function(e,t){return t-=e,function(n){return Math.round(e+t*n)}},d3.interpolateString=function(e,t){var n,r,i,s=0,o=0,u=[],a=[],f,l;A.lastIndex=0;for(r=0;n=A.exec(t);++r)n.index&&u.push(t.substring(s,o=n.index)),a.push({i:u.length,x:n[0]}),u.push(null),s=A.lastIndex;s<t.length&&u.push(t.substring(s));for(r=0,f=a.length;(n=A.exec(e))&&r<f;++r){l=a[r];if(l.x==n[0]){if(l.i)if(u[l.i+1]==null){u[l.i-1]+=l.x,u.splice(l.i,1);for(i=r+1;i<f;++i)a[i].i--}else{u[l.i-1]+=l.x+u[l.i+1],u.splice(l.i,2);for(i=r+1;i<f;++i)a[i].i-=2}else if(u[l.i+1]==null)u[l.i]=l.x;else{u[l.i]=l.x+u[l.i+1],u.splice(l.i+1,1);for(i=r+1;i<f;++i)a[i].i--}a.splice(r,1),f--,r--}else l.x=d3.interpolateNumber(parseFloat(n[0]),parseFloat(l.x))}while(r<f)l=a.pop(),u[l.i+1]==null?u[l.i]=l.x:(u[l.i]=l.x+u[l.i+1],u.splice(l.i+1,1)),f--;return u.length===1?u[0]==null?a[0].x:function(){return t}:function(e){for(r=0;r<f;++r)u[(l=a[r]).i]=l.x(e);return u.join("")}},d3.interpolateRgb=function(e,t){e=d3.rgb(e),t=d3.rgb(t);var n=e.r,r=e.g,i=e.b,s=t.r-n,o=t.g-r,u=t.b-i;return function(e){return"rgb("+Math.round(n+s*e)+","+Math.round(r+o*e)+","+Math.round(i+u*e)+")"}},d3.interpolateHsl=function(e,t){e=d3.hsl(e),t=d3.hsl(t);var n=e.h,r=e.s,i=e.l,s=t.h-n,o=t.s-r,u=t.l-i;return function(e){return W(n+s*e,r+o*e,i+u*e).toString()}},d3.interpolateArray=function(e,t){var n=[],r=[],i=e.length,s=t.length,o=Math.min(e.length,t.length),u;for(u=0;u<o;++u)n.push(d3.interpolate(e[u],t[u]));for(;u<i;++u)r[u]=e[u];for(;u<s;++u)r[u]=t[u];return function(e){for(u=0;u<o;++u)r[u]=n[u](e);return r}},d3.interpolateObject=function(e,t){var n={},r={},i;for(i in e)i in t?n[i]=M(i)(e[i],t[i]):r[i]=e[i];for(i in t)i in e||(r[i]=t[i]);return function(e){for(i in n)r[i]=n[i](e);return r}};var A=/[-+]?(?:\d+\.\d+|\d+\.|\.\d+|\d+)(?:[eE][-]?\d+)?/g,O={background:1,fill:1,stroke:1};d3.interpolators=[d3.interpolateObject,function(e,t){return t instanceof Array&&d3.interpolateArray(e,t)},function(e,t){return typeof t=="string"&&d3.interpolateString(String(e),t)},function(e,t){return(typeof t=="string"?t in q||/^(#|rgb\(|hsl\()/.test(t):t instanceof H||t instanceof z)&&d3.interpolateRgb(String(e),t)},function(e,t){return typeof t=="number"&&d3.interpolateNumber(+e,t)}],d3.rgb=function(e,t,n){return arguments.length===1?j(""+e,P,W):P(~~e,~~t,~~n)},H.prototype.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return!t&&!n&&!r?P(i,i,i):(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),P(Math.min(255,Math.floor(t/e)),Math.min(255,Math.floor(n/e)),Math.min(255,Math.floor(r/e))))},H.prototype.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),P(Math.max(0,Math.floor(e*this.r)),Math.max(0,Math.floor(e*this.g)),Math.max(0,Math.floor(e*this.b)))},H.prototype.hsl=function(){return F(this.r,this.g,this.b)},H.prototype.toString=function(){return"#"+B(this.r)+B(this.g)+B(this.b)};var q={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};for(var R in q)q[R]=j(q[R],P,W);d3.hsl=function(e,t,n){return arguments.length===1?j(""+e,F,U):U(+e,+t,+n)},z.prototype.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),U(this.h,this.s,this.l/e)},z.prototype.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),U(this.h,this.s,e*this.l)},z.prototype.rgb=function(){return W(this.h,this.s,this.l)},z.prototype.toString=function(){return"hsl("+this.h+","+this.s*100+"%,"+this.l*100+"%)"};var V=function(e,t){return t.querySelector(e)},$=function(e,t){return t.querySelectorAll(e)};typeof Sizzle=="function"&&(V=function(e,t){return Sizzle(e,t)[0]},$=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))});var J=[];d3.selection=function(){return tt},d3.selection.prototype=J,J.select=function(e){var t=[],n,r,i,s;typeof e!="function"&&(e=K(e));for(var o=-1,u=this.length;++o<u;){t.push(n=[]),n.parentNode=(i=this[o]).parentNode;for(var a=-1,f=i.length;++a<f;)(s=i[a])?(n.push(r=e.call(s,s.__data__,a)),r&&"__data__"in s&&(r.__data__=s.__data__)):n.push(null)}return X(t)},J.selectAll=function(e){var t=[],n,r;typeof e!="function"&&(e=Q(e));for(var i=-1,s=this.length;++i<s;)for(var o=this[i],u=-1,a=o.length;++u<a;)if(r=o[u])t.push(n=e.call(r,r.__data__,u)),n.parentNode=r;return X(t)},J.attr=function(e,t){function r(){this.removeAttribute(e)}function i(){this.removeAttributeNS(e.space,e.local)}function s(){this.setAttribute(e,t)}function o(){this.setAttributeNS(e.space,e.local,t)}function u(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}function a(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}e=d3.ns.qualify(e);if(arguments.length<2){var n=this.node();return e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}return this.each(t==null?e.local?i:r:typeof t=="function"?e.local?a:u:e.local?o:s)},J.classed=function(e,t){function s(){if(t=this.classList)return t.add(e);var t=this.className,r=t.baseVal!=null,i=r?t.baseVal:t;n.lastIndex=0,n.test(i)||(i=u(i+" "+e),r?t.baseVal=i:this.className=i)}function o(){if(t=this.classList)return t.remove(e);var t=this.className,r=t.baseVal!=null,i=r?t.baseVal:t;i=u(i.replace(n," ")),r?t.baseVal=i:this.className=i}function a(){(t.apply(this,arguments)?s:o).call(this)}var n=new RegExp("(^|\\s+)"+d3.requote(e)+"(\\s+|$)","g");if(arguments.length<2){var r=this.node();if(i=r.classList)return i.contains(e);var i=r.className;return n.lastIndex=0,n.test(i.baseVal!=null?i.baseVal:i)}return this.each(typeof t=="function"?a:t?s:o)},J.style=function(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return arguments.length<3&&(n=""),arguments.length<2?window.getComputedStyle(this.node(),null).getPropertyValue(e):this.each(t==null?r:typeof t=="function"?s:i)},J.property=function(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}return arguments.length<2?this.node()[e]:this.each(t==null?n:typeof t=="function"?i:r)},J.text=function(e){return arguments.length<1?this.node().textContent:this.each(typeof e=="function"?function(){this.textContent=e.apply(this,arguments)}:function(){this.textContent=e})},J.html=function(e){return arguments.length<1?this.node().innerHTML:this.each(typeof e=="function"?function(){this.innerHTML=e.apply(this,arguments)}:function(){this.innerHTML=e})},J.append=function(e){function t(){return this.appendChild(document.createElement(e))}function n(){return this.appendChild(document.createElementNS(e.space,e.local))}return e=d3.ns.qualify(e),this.select(e.local?n:t)},J.insert=function(e,t){function n(){return this.insertBefore(document.createElement(e),V(t,this))}function r(){return this.insertBefore(document.createElementNS(e.space,e.local),V(t,this))}return e=d3.ns.qualify(e),this.select(e.local?r:n)},J.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},J.data=function(e,t){function s(e,s){var o,u=e.length,a=s.length,f=Math.min(u,a),l=Math.max(u,a),c=[],h=[],p=[],d,v;if(t){var m={},g=[],y,b=s.length;for(o=-1;++o<u;)y=t.call(d=e[o],d.__data__,o),y in m?p[b++]=d:m[y]=d,g.push(y);for(o=-1;++o<a;)d=m[y=t.call(s,v=s[o],o)],d?(d.__data__=v,c[o]=d,h[o]=p[o]=null):(h[o]=G(v),c[o]=p[o]=null),delete m[y];for(o=-1;++o<u;)g[o]in m&&(p[o]=e[o])}else{for(o=-1;++o<f;)d=e[o],v=s[o],d?(d.__data__=v,c[o]=d,h[o]=p[o]=null):(h[o]=G(v),c[o]=p[o]=null);for(;o<a;++o)h[o]=G(s[o]),c[o]=p[o]=null;for(;o<l;++o)p[o]=e[o],h[o]=c[o]=null}h.update=c,h.parentNode=c.parentNode=p.parentNode=e.parentNode,n.push(h),r.push(c),i.push(p)}var n=[],r=[],i=[],o=-1,u=this.length,a;if(typeof e=="function")while(++o<u)s(a=this[o],e.call(a,a.parentNode.__data__,o));else while(++o<u)s(a=this[o],e);var f=X(r);return f.enter=function(){return Y(n)},f.exit=function(){return X(i)},f};var Z=[];Z.append=J.append,Z.insert=J.insert,Z.empty=J.empty,Z.select=function(e){var t=[],n,r,i,s,o;for(var u=-1,a=this.length;++u<a;){i=(s=this[u]).update,t.push(n=[]),n.parentNode=s.parentNode;for(var f=-1,l=s.length;++f<l;)(o=s[f])?(n.push(i[f]=r=e.call(s.parentNode,o.__data__,f)),r.__data__=o.__data__):n.push(null)}return X(t)},J.filter=function(e){var t=[],n,r,i;for(var s=0,o=this.length;s<o;s++){t.push(n=[]),n.parentNode=(r=this[s]).parentNode;for(var u=0,a=r.length;u<a;u++)(i=r[u])&&e.call(i,i.__data__,u)&&n.push(i)}return X(t)},J.map=function(e){return this.each(function(){this.__data__=e.apply(this,arguments)})},J.sort=function(e){e=et.apply(this,arguments);for(var t=0,n=this.length;t<n;t++)for(var r=this[t].sort(e),i=1,s=r.length,o=r[0];i<s;i++){var u=r[i];u&&(o&&o.parentNode.insertBefore(u,o.nextSibling),o=u)}return this},J.on=function(e,t,n){arguments.length<3&&(n=!1);var r="__on"+e,i=e.indexOf(".");return i>0&&(e=e.substring(0,i)),arguments.length<2?(i=this.node()[r])&&i._:this.each(function(i,s){function u(e){var n=d3.event;d3.event=e;try{t.call(o,o.__data__,s)}finally{d3.event=n}}var o=this;o[r]&&o.removeEventListener(e,o[r],n),t&&o.addEventListener(e,o[r]=u,n),u._=t})},J.each=function(e){for(var t=-1,n=this.length;++t<n;)for(var r=this[t],i=-1,s=r.length;++i<s;){var o=r[i];o&&e.call(o,o.__data__,i,t)}return this},J.call=function(e){return e.apply(this,(arguments[0]=this,arguments)),this},J.empty=function(){return!this.node()},J.node=function(e){for(var t=0,n=this.length;t<n;t++)for(var r=this[t],i=0,s=r.length;i<s;i++){var o=r[i];if(o)return o}return null},J.transition=function(){var e=[],t,n;for(var r=-1,i=this.length;++r<i;){e.push(t=[]);for(var s=this[r],o=-1,u=s.length;++o<u;)t.push((n=s[o])?{node:n,delay:0,duration:250}:null)}return nt(e,ot||++st)};var tt=X([[document]]);tt[0].parentNode=document.documentElement,d3.select=function(e){return typeof e=="string"?tt.select(e):X([[e]])},d3.selectAll=function(e){return typeof e=="string"?tt.selectAll(e):X([e])};var it=[],st=0,ot=0,ut=d3.ease("cubic-in-out");it.call=J.call,d3.transition=function(){return tt.transition()},d3.transition.prototype=it,it.select=function(e){var t=[],n,r,i;typeof e!="function"&&(e=K(e));for(var s=-1,o=this.length;++s<o;){t.push(n=[]);for(var u=this[s],a=-1,f=u.length;++a<f;)(i=u[a])&&(r=e.call(i.node,i.node.__data__,a))?("__data__"in i.node&&(r.__data__=i.node.__data__),n.push({node:r,delay:i.delay,duration:i.duration})):n.push(null)}return nt(t,this.id).ease(this.ease())},it.selectAll=function(e){var t=[],n,r;typeof e!="function"&&(e=Q(e));for(var i=-1,s=this.length;++i<s;)for(var o=this[i],u=-1,a=o.length;++u<a;)if(r=o[u]){t.push(n=e.call(r.node,r.node.__data__,u));for(var f=-1,l=n.length;++f<l;)n[f]={node:n[f],delay:r.delay,duration:r.duration}}return nt(t,this.id).ease(this.ease())},it.attr=function(e,t){return this.attrTween(e,rt(t))},it.attrTween=function(e,t){function n(n,r){var i=t.call(this,n,r,this.getAttribute(e));return i&&function(t){this.setAttribute(e,i(t))}}function r(n,r){var i=t.call(this,n,r,this.getAttributeNS(e.space,e.local));return i&&function(t){this.setAttributeNS(e.space,e.local,i(t))}}return e=d3.ns.qualify(e),this.tween("attr."+e,e.local?r:n)},it.style=function(e,t,n){return arguments.length<3&&(n=""),this.styleTween(e,rt(t),n)},it.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,function(r,i){var s=t.call(this,r,i,window.getComputedStyle(this,null).getPropertyValue(e));return s&&function(t){this.style.setProperty(e,s(t),n)}})},it.text=function(e){return this.tween("text",function(t,n){this.textContent=typeof e=="function"?e.call(this,t,n):e})},it.remove=function(){return this.each("end",function(){var e;!this.__transition__&&(e=this.parentNode)&&e.removeChild(this)})},it.delay=function(e){var t=this;return t.each(typeof e=="function"?function(n,r,i){t[i][r].delay=+e.apply(this,arguments)}:(e=+e,function(n,r,i){t[i][r].delay=e}))},it.duration=function(e){var t=this;return t.each(typeof e=="function"?function(n,r,i){t[i][r].duration=+e.apply(this,arguments)}:(e=+e,function(n,r,i){t[i][r].duration=e}))},it.transition=function(){return this.select(i)};var ft=null,lt,ct;d3.timer=function(e,t,n){var r=!1,i,s=ft;if(arguments.length<3){if(arguments.length<2)t=0;else if(!isFinite(t))return;n=Date.now()}while(s){if(s.callback===e){s.then=n,s.delay=t,r=!0;break}i=s,s=s.next}r||(ft={callback:e,then:n,delay:t,next:ft}),lt||(ct=clearTimeout(ct),lt=1,dt(ht))},d3.timer.flush=function(){var e,t=Date.now(),n=ft;while(n)e=t-n.then,n.delay||(n.flush=n.callback(e)),n=n.next;pt()};var dt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,17)};d3.scale={},d3.scale.linear=function(){return bt([0,1],[0,1],d3.interpolate,!1)},d3.scale.log=function(){return kt(d3.scale.linear(),Lt)},Lt.pow=function(e){return Math.pow(10,e)},At.pow=function(e){return-Math.pow(10,-e)},d3.scale.pow=function(){return Mt(d3.scale.linear(),1)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return Dt([],{t:"range",x:[]})},d3.scale.category10=function(){return d3.scale.ordinal().range(Pt)},d3.scale.category20=function(){return d3.scale.ordinal().range(Ht)},d3.scale.category20b=function(){return d3.scale.ordinal().range(Bt)},d3.scale.category20c=function(){return d3.scale.ordinal().range(jt)};var Pt=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Ht=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Bt=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],jt=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return Ft([],[])},d3.scale.quantize=function(){return It(0,1,[0,1])},d3.svg={},d3.svg.arc=function(){function i(){var i=e.apply(this,arguments),s=t.apply(this,arguments),o=n.apply(this,arguments)+qt,u=r.apply(this,arguments)+qt,a=(u<o&&(a=o,o=u,u=a),u-o),f=a<Math.PI?"0":"1",l=Math.cos(o),c=Math.sin(o),h=Math.cos(u),p=Math.sin(u);return a>=Rt?i?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+i+"A"+i+","+i+" 0 1,0 0,"+ -i+"A"+i+","+i+" 0 1,0 0,"+i+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":i?"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L"+i*h+","+i*p+"A"+i+","+i+" 0 "+f+",0 "+i*l+","+i*c+"Z":"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L0,0"+"Z"}var e=Ut,t=zt,n=Wt,r=Xt;return i.innerRadius=function(t){return arguments.length?(e=d3.functor(t),i):e},i.outerRadius=function(e){return arguments.length?(t=d3.functor(e),i):t},i.startAngle=function(e){return arguments.length?(n=d3.functor(e),i):n},i.endAngle=function(e){return arguments.length?(r=d3.functor(e),i):r},i.centroid=function(){var i=(e.apply(this,arguments)+t.apply(this,arguments))/2,s=(n.apply(this,arguments)+r.apply(this,arguments))/2+qt;return[Math.cos(s)*i,Math.sin(s)*i]},i};var qt=-Math.PI/2,Rt=2*Math.PI-1e-6;d3.svg.line=function(){return Vt(Object)};var Qt={linear:Gt,"step-before":Yt,"step-after":Zt,basis:on,"basis-open":un,"basis-closed":an,bundle:fn,cardinal:nn,"cardinal-open":en,"cardinal-closed":tn,monotone:yn},cn=[0,2/3,1/3,0],hn=[0,1/3,2/3,0],pn=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var e=Vt(bn);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},d3.svg.area=function(){return wn(Object)},d3.svg.area.radial=function(){var e=wn(bn);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},d3.svg.chord=function(){function s(n,r){var i=o(this,e,n,r),s=o(this,t,n,r);return"M"+i.p0+a(i.r,i.p1)+(u(i,s)?f(i.r,i.p1,i.r,i.p0):f(i.r,i.p1,s.r,s.p0)+a(s.r,s.p1)+f(s.r,s.p1,i.r,i.p0))+"Z"}function o(e,t,s,o){var u=t.call(e,s,o),a=n.call(e,u,o),f=r.call(e,u,o)+qt,l=i.call(e,u,o)+qt;return{r:a,a0:f,a1:l,p0:[a*Math.cos(f),a*Math.sin(f)],p1:[a*Math.cos(l),a*Math.sin(l)]}}function u(e,t){return e.a0==t.a0&&e.a1==t.a1}function a(e,t){return"A"+e+","+e+" 0 0,1 "+t}function f(e,t,n,r){return"Q 0,0 "+r}var e=xn,t=Tn,n=Nn,r=Wt,i=Xt;return s.radius=function(e){return arguments.length?(n=d3.functor(e),s):n},s.source=function(t){return arguments.length?(e=d3.functor(t),s):e},s.target=function(e){return arguments.length?(t=d3.functor(e),s):t},s.startAngle=function(e){return arguments.length?(r=d3.functor(e),s):r},s.endAngle=function(e){return arguments.length?(i=d3.functor(e),s):i},s},d3.svg.diagonal=function(){function r(r,i){var s=e.call(this,r,i),o=t.call(this,r,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(n),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var e=xn,t=Tn,n=Ln;return r.source=function(t){return arguments.length?(e=d3.functor(t),r):e},r.target=function(e){return arguments.length?(t=d3.functor(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},d3.svg.diagonal.radial=function(){var e=d3.svg.diagonal(),t=Ln,n=e.projection;return e.projection=function(e){return arguments.length?n(An(t=e)):t},e},d3.svg.mouse=function(e){return Mn(e,d3.event)};var On=/WebKit/.test(navigator.userAgent)?-1:0;d3.svg.touches=function(e){var t=d3.event.touches;return t?Array.prototype.map.call(t,function(t){var n=Mn(e,t);return n.identifier=t.identifier,n}):[]},d3.svg.symbol=function(){function n(n,r){return(Pn[e.call(this,n,r)]||Pn.circle)(t.call(this,n,r))}var e=Dn,t=_n;return n.type=function(t){return arguments.length?(e=d3.functor(t),n):e},n.size=function(e){return arguments.length?(t=d3.functor(e),n):t},n};var Pn={circle:function(e){var t=Math.sqrt(e/Math.PI);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"},cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Bn)),n=t*Bn;return"M0,"+ -t+"L"+n+",0"+" 0,"+t+" "+ -n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Hn),n=t*Hn/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Hn),n=t*Hn/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}};d3.svg.symbolTypes=d3.keys(Pn);var Hn=Math.sqrt(3),Bn=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function f(f){f.each(function(l,c,h){function M(e){return f.delay?e.transition().delay(f[h][c].delay).duration(f[h][c].duration).ease(f.ease()):e}var p=d3.select(this),d=e.ticks.apply(e,o),v=u==null?e.tickFormat.apply(e,o):u,m=In(e,d,a),g=p.selectAll(".minor").data(m,String),y=g.enter().insert("svg:line","g").attr("class","tick minor").style("opacity",1e-6),b=M(g.exit()).style("opacity",1e-6).remove(),w=M(g).style("opacity",1),E=p.selectAll("g").data(d,String),S=E.enter().insert("svg:g","path").style("opacity",1e-6),x=M(E.exit()).style("opacity",1e-6).remove(),T=M(E).style("opacity",1),N,C=mt(e.range()),k=p.selectAll(".domain").data([,]),L=k.enter().append("svg:path").attr("class","domain"),A=M(k),O=this.__chart__||e;this.__chart__=e.copy(),S.append("svg:line").attr("class","tick"),S.append("svg:text"),T.select("text").text(v);switch(t){case"bottom":N=jn,w.attr("y2",r),S.select("text").attr("dy",".71em").attr("text-anchor","middle"),T.select("line").attr("y2",n),T.select("text").attr("y",Math.max(n,0)+s),A.attr("d","M"+C[0]+","+i+"V0H"+C[1]+"V"+i);break;case"top":N=jn,w.attr("y2",-r),S.select("text").attr("text-anchor","middle"),T.select("line").attr("y2",-n),T.select("text").attr("y",-(Math.max(n,0)+s)),A.attr("d","M"+C[0]+","+ -i+"V0H"+C[1]+"V"+ -i);break;case"left":N=Fn,w.attr("x2",-r),S.select("text").attr("dy",".32em").attr("text-anchor","end"),T.select("line").attr("x2",-n),T.select("text").attr("x",-(Math.max(n,0)+s)),A.attr("d","M"+ -i+","+C[0]+"H0V"+C[1]+"H"+ -i);break;case"right":N=Fn,w.attr("x2",r),S.select("text").attr("dy",".32em"),T.select("line").attr("x2",n),T.select("text").attr("x",Math.max(n,0)+s),A.attr("d","M"+i+","+C[0]+"H0V"+C[1]+"H"+i)}S.call(N,O),T.call(N,e),x.call(N,e),y.call(N,O),w.call(N,e),b.call(N,e)})}var e=d3.scale.linear(),t="bottom",n=6,r=6,i=6,s=3,o=[10],u,a=0;return f.scale=function(t){return arguments.length?(e=t,f):e},f.orient=function(e){return arguments.length?(t=e,f):t},f.ticks=function(){return arguments.length?(o=arguments,f):o},f.tickFormat=function(e){return arguments.length?(u=e,f):u},f.tickSize=function(e,t,s){if(!arguments.length)return n;var o=arguments.length-1;return n=+e,r=o>1?+t:n,i=o>0?+arguments[o]:n,f},f.tickPadding=function(e){return arguments.length?(s=+e,f):s},f.tickSubdivide=function(e){return arguments.length?(a=+e,f):a},f},d3.behavior={},d3.behavior.drag=function(){function t(){this.on("mousedown.drag",r).on("touchstart.drag",r),d3.select(window).on("mousemove.drag",Jn).on("touchmove.drag",Jn).on("mouseup.drag",Kn,!0).on("touchend.drag",Kn,!0).on("click.drag",Qn,!0)}function n(){qn=e,zn=$n((Rn=this).parentNode),Wn=0,Un=arguments}function r(){n.apply(this,arguments),Vn("dragstart")}var e=d3.dispatch("drag","dragstart","dragend");return t.on=function(n,r){return e[n].add(r),t},t};var qn,Rn,Un,zn,Wn,Xn;d3.behavior.zoom=function(){function n(){this.on("mousedown.zoom",i).on("mousewheel.zoom",s).on("DOMMouseScroll.zoom",s).on("dblclick.zoom",o).on("touchstart.zoom",u),d3.select(window).on("mousemove.zoom",pr).on("mouseup.zoom",dr).on("touchmove.zoom",hr).on("touchend.zoom",cr).on("click.zoom",vr,!0)}function r(){rr=e,ir=t.zoom.dispatch,sr=this,or=arguments}function i(){r.apply(this,arguments),Zn=fr(d3.svg.mouse(sr)),ur=!1,d3.event.preventDefault(),window.focus()}function s(){r.apply(this,arguments),er||(er=fr(d3.svg.mouse(sr))),mr(lr()+e[2],d3.svg.mouse(sr),er)}function o(){r.apply(this,arguments);var t=d3.svg.mouse(sr);mr(d3.event.shiftKey?Math.ceil(e[2]-1):Math.floor(e[2]+1),t,fr(t))}function u(){r.apply(this,arguments);var t=cr(),n,i=Date.now();t.length===1&&i-nr<300&&mr(1+Math.floor(e[2]),n=t[0],tr[n.identifier]),nr=i}var e=[0,0,0],t=d3.dispatch("zoom");return n.on=function(e,r){return t[e].add(r),n},n};var Yn,Zn,er,tr={},nr=0,rr,ir,sr,or,ur,ar}(),function(){function e(e){var t=e.source,r=e.target,i=n(t,r),s=[t];while(t!==i)t=t.parent,s.push(t);var o=s.length;while(r!==i)s.splice(o,0,r),r=r.parent;return s}function t(e){var t=[],n=e.parent;while(n!=null)t.push(e),e=n,n=n.parent;return t.push(e),t}function n(e,n){if(e===n)return e;var r=t(e),i=t(n),s=r.pop(),o=i.pop(),u=null;while(s===o)u=s,s=r.pop(),o=i.pop();return u}function s(e){e.fixed|=2}function o(e){e!==i&&(e.fixed&=1)}function u(){a(),i.fixed&=1,r=i=null}function a(){i.px+=d3.event.dx,i.py+=d3.event.dy,r.resume()}function f(e){var t=0,n=0;e.count=0;if(!e.leaf){var r=e.nodes,i=r.length,s=-1,o;while(++s<i){o=r[s];if(o==null)continue;f(o),e.count+=o.count,t+=o.count*o.cx,n+=o.count*o.cy}}e.point&&(e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5),e.count++,t+=e.point.x,n+=e.point.y),e.cx=t/e.count,e.cy=n/e.count}function l(e){return 20}function c(e){return 1}function h(e){return e.x}function p(e){return e.y}function v(e,t,n){e.y0=t,e.y=n}function y(e){var t=1,n=0,r=e[0][1],i,s=e.length;for(;t<s;++t)(i=e[t][1])>r&&(n=t,r=i);return n}function b(e){return e.reduce(w,0)}function w(e,t){return e+t[1]}function E(e,t){return S(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function S(e,t){var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];while(++n<=t)s[n]=i*n+r;return s}function x(e){return[d3.min(e),d3.max(e)]}function T(e,t){return e.sort=d3.rebind(e,t.sort),e.children=d3.rebind(e,t.children),e.links=L,e.value=d3.rebind(e,t.value),e.nodes=function(t){return A=!0,(e.nodes=e)(t)},e}function N(e){return e.children}function C(e){return e.value}function k(e,t){return t.value-e.value}function L(e){return d3.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function O(e,t){return e.value-t.value}function M(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function _(e,t){e._pack_next=t,t._pack_prev=e}function D(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return i*i-n*n-r*r>.001}function P(e){function c(e){t=Math.min(e.x-e.r,t),n=Math.max(e.x+e.r,n),r=Math.min(e.y-e.r,r),i=Math.max(e.y+e.r,i)}var t=Infinity,n=-Infinity,r=Infinity,i=-Infinity,s=e.length,o,u,a,f,l;e.forEach(H),o=e[0],o.x=-o.r,o.y=0,c(o);if(s>1){u=e[1],u.x=u.r,u.y=0,c(u);if(s>2){a=e[2],I(o,u,a),c(a),M(o,a),o._pack_prev=a,M(a,u),u=o._pack_next;for(var h=3;h<s;h++){I(o,u,a=e[h]);var p=0,d=1,v=1;for(f=u._pack_next;f!==u;f=f._pack_next,d++)if(D(f,a)){p=1;break}if(p==1)for(l=o._pack_prev;l!==f._pack_prev;l=l._pack_prev,v++)if(D(l,a)){v<d&&(p=-1,f=l);break}p==0?(M(o,a),u=a,c(a)):p>0?(_(o,f),u=f,h--):(_(f,u),o=f,h--)}}}var m=(t+n)/2,g=(r+i)/2,y=0;for(var h=0;h<s;h++){var b=e[h];b.x-=m,b.y-=g,y=Math.max(y,b.r+Math.sqrt(b.x*b.x+b.y*b.y))}return e.forEach(B),y}function H(e){e._pack_next=e._pack_prev=e}function B(e){delete e._pack_next,delete e._pack_prev}function j(e){var t=e.children;t?(t.forEach(j),e.r=P(t)):e.r=Math.sqrt(e.value)}function F(e,t,n,r){var i=e.children;e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r;if(i){var s=-1,o=i.length;while(++s<o)F(i[s],t,n,r)}}function I(e,t,n){var r=t.r+n.r,i=e.r+n.r,s=t.x-e.x,o=t.y-e.y,u=Math.sqrt(s*s+o*o),a=(i*i+u*u-r*r)/(2*i*u),f=Math.acos(a),l=a*i,c=Math.sin(f)*i;s/=u,o/=u,n.x=e.x+l*s+c*o,n.y=e.y+l*o-c*s}function q(e){return 1+d3.max(e,function(e){return e.y})}function R(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function U(e){var t=e.children;return t?U(t[0]):e}function z(e){var t=e.children;return t?z(t[t.length-1]):e}function W(e,t){return e.parent==t.parent?1:2}function X(e){return e.children?e.children[0]:e._tree.thread}function V(e){return e.children?e.children[e.children.length-1]:e._tree.thread}function $(e,t){var n=e.children;if(n){var r,i=n.length,s=-1;while(++s<i)t(r=$(n[s],t),e)>0&&(e=r)}return e}function J(e,t){return e.x-t.x}function K(e,t){return t.x-e.x}function Q(e,t){return e.depth-t.depth}function G(e,t){function n(e,r){var i=e.children;if(i){var s,o=null,u=-1,a=i.length;while(++u<a)s=i[u],n(s,o),o=s}t(e,r)}n(e,null)}function Y(e){var t=0,n=0,r=e.children,i=r.length,s;while(--i>=0)s=r[i]._tree,s.prelim+=t,s.mod+=t,t+=s.shift+(n+=s.change)}function Z(e,t,n){e=e._tree,t=t._tree;var r=n/(t.number-e.number);e.change+=r,t.change-=r,t.shift+=n,t.prelim+=n,t.mod+=n}function et(e,t,n){return e._tree.ancestor.parent==t.parent?e._tree.ancestor:n}function tt(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function nt(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),s<0&&(r+=s/2,s=0),{x:n,y:r,dx:i,dy:s}}d3.layout={},
d3.layout.bundle=function(){return function(t){var n=[],r=-1,i=t.length;while(++r<i)n.push(e(t[r]));return n}},d3.layout.chord=function(){function f(){var e={},f=[],c=d3.range(i),h=[],p,d,v,m,g;t=[],n=[],p=0,m=-1;while(++m<i){d=0,g=-1;while(++g<i)d+=r[m][g];f.push(d),h.push(d3.range(i)),p+=d}o&&c.sort(function(e,t){return o(f[e],f[t])}),u&&h.forEach(function(e,t){e.sort(function(e,n){return u(r[t][e],r[t][n])})}),p=(2*Math.PI-s*i)/p,d=0,m=-1;while(++m<i){v=d,g=-1;while(++g<i){var y=c[m],b=h[m][g],w=r[y][b];e[y+"-"+b]={index:y,subindex:b,startAngle:d,endAngle:d+=w*p,value:w}}n.push({index:y,startAngle:v,endAngle:d,value:(d-v)/p}),d+=s}m=-1;while(++m<i){g=m-1;while(++g<i){var E=e[m+"-"+g],S=e[g+"-"+m];(E.value||S.value)&&t.push(E.value<S.value?{source:S,target:E}:{source:E,target:S})}}a&&l()}function l(){t.sort(function(e,t){return a(e.target.value,t.target.value)})}var e={},t,n,r,i,s=0,o,u,a;return e.matrix=function(s){return arguments.length?(i=(r=s)&&r.length,t=n=null,e):r},e.padding=function(r){return arguments.length?(s=r,t=n=null,e):s},e.sortGroups=function(r){return arguments.length?(o=r,t=n=null,e):o},e.sortSubgroups=function(n){return arguments.length?(u=n,t=null,e):u},e.sortChords=function(n){return arguments.length?(a=n,t&&l(),e):a},e.chords=function(){return t||f(),t},e.groups=function(){return n||f(),n},e},d3.layout.force=function(){function N(e,t){return function(n,r,i,s,o){if(n.point!==e){var u=n.cx-e.x,a=n.cy-e.y,f=1/Math.sqrt(u*u+a*a);if((s-r)*f<b){var l=t*n.count*f*f;return e.px-=u*l,e.py-=a*l,!0}if(n.point&&isFinite(f)){var l=t*f*f;e.px-=u*l,e.py-=a*l}}}}function C(){var e=E.length,r=S.length,i,s,o,u,a,l,c,h,v;for(s=0;s<r;++s){o=S[s],u=o.source,a=o.target,h=a.x-u.x,v=a.y-u.y;if(l=h*h+v*v)l=p*T[s]*((l=Math.sqrt(l))-x[s])/l,h*=l,v*=l,a.x-=h*(c=u.weight/(a.weight+u.weight)),a.y-=v*c,u.x+=h*(c=1-c),u.y+=v*c}if(c=p*y){h=n[0]/2,v=n[1]/2,s=-1;if(c)while(++s<e)o=E[s],o.x+=(h-o.x)*c,o.y+=(v-o.y)*c}if(c=p*g){f(i=d3.geom.quadtree(E)),s=-1;while(++s<e)(o=E[s]).fixed||i.visit(N(o,c))}s=-1;while(++s<e)o=E[s],o.fixed?(o.x=o.px,o.y=o.py):(o.x-=(o.px-(o.px=o.x))*d,o.y-=(o.py-(o.py=o.y))*d);return t.tick.dispatch({type:"tick",alpha:p}),(p*=.99)<.005}function k(t){s(i=t),r=e}var e={},t=d3.dispatch("tick"),n=[1,1],h,p,d=.9,v=l,m=c,g=-30,y=.1,b=.8,w,E=[],S=[],x,T;return e.on=function(n,r){return t[n].add(r),e},e.nodes=function(t){return arguments.length?(E=t,e):E},e.links=function(t){return arguments.length?(S=t,e):S},e.size=function(t){return arguments.length?(n=t,e):n},e.linkDistance=function(t){return arguments.length?(v=d3.functor(t),e):v},e.distance=e.linkDistance,e.linkStrength=function(t){return arguments.length?(m=d3.functor(t),e):m},e.friction=function(t){return arguments.length?(d=t,e):d},e.charge=function(t){return arguments.length?(g=t,e):g},e.gravity=function(t){return arguments.length?(y=t,e):y},e.theta=function(t){return arguments.length?(b=t,e):b},e.start=function(){function l(e,n){var r=c(t),i=-1,s=r.length,o;while(++i<s)if(!isNaN(o=r[i][e]))return o;return Math.random()*n}function c(){if(!a){a=[];for(r=0;r<i;++r)a[r]=[];for(r=0;r<s;++r){var e=S[r];a[e.source.index].push(e.target),a[e.target.index].push(e.source)}}return a[t]}var t,r,i=E.length,s=S.length,o=n[0],u=n[1],a,f;for(t=0;t<i;++t)(f=E[t]).index=t,f.weight=0;x=[],T=[];for(t=0;t<s;++t)f=S[t],typeof f.source=="number"&&(f.source=E[f.source]),typeof f.target=="number"&&(f.target=E[f.target]),x[t]=v.call(this,f,t),T[t]=m.call(this,f,t),++f.source.weight,++f.target.weight;for(t=0;t<i;++t)f=E[t],isNaN(f.x)&&(f.x=l("x",o)),isNaN(f.y)&&(f.y=l("y",u)),isNaN(f.px)&&(f.px=f.x),isNaN(f.py)&&(f.py=f.y);return e.resume()},e.resume=function(){return p=.1,d3.timer(C),e},e.stop=function(){return p=0,e},e.drag=function(){h||(h=d3.behavior.drag().on("dragstart",k).on("drag",a).on("dragend",u)),this.on("mouseover.force",s).on("mouseout.force",o).call(h)},e};var r,i;d3.layout.partition=function(){function n(e,t,r,i){var s=e.children;e.x=t,e.y=e.depth*i,e.dx=r,e.dy=i;if(s){var o=-1,u=s.length,a,f;r=e.value?r/e.value:0;while(++o<u)n(a=s[o],t,f=a.value*r,i),t+=f}}function r(e){var t=e.children,n=0;if(t){var i=-1,s=t.length;while(++i<s)n=Math.max(n,r(t[i]))}return 1+n}function i(i,s){var o=e.call(this,i,s);return n(o[0],0,t[0],t[1]/r(o[0])),o}var e=d3.layout.hierarchy(),t=[1,1];return i.size=function(e){return arguments.length?(t=e,i):t},T(i,e)},d3.layout.pie=function(){function i(i,s){var o=+(typeof n=="function"?n.apply(this,arguments):n),u=(typeof r=="function"?r.apply(this,arguments):r)-n,a=d3.range(i.length);t!=null&&a.sort(function(e,n){return t(i[e],i[n])});var f=i.map(e);u/=f.reduce(function(e,t){return e+t},0);var l=a.map(function(e){return{data:i[e],value:d=f[e],startAngle:o,endAngle:o+=d*u}});return i.map(function(e,t){return l[a[t]]})}var e=Number,t=null,n=0,r=2*Math.PI;return i.value=function(t){return arguments.length?(e=t,i):e},i.sort=function(e){return arguments.length?(t=e,i):t},i.startAngle=function(e){return arguments.length?(n=e,i):n},i.endAngle=function(e){return arguments.length?(r=e,i):r},i},d3.layout.stack=function(){function o(u,a){var f=u.map(function(t,n){return e.call(o,t,n)}),l=f.map(function(e,t){return e.map(function(e,t){return[i.call(o,e,t),s.call(o,e,t)]})}),c=t.call(o,l,a);f=d3.permute(f,c),l=d3.permute(l,c);var h=n.call(o,l,a),p=f.length,d=f[0].length,v,m,g;for(m=0;m<d;++m){r.call(o,f[0][m],g=h[m],l[0][m][1]);for(v=1;v<p;++v)r.call(o,f[v][m],g+=l[v-1][m][1],l[v][m][1])}return u}var e=Object,t=m["default"],n=g.zero,r=v,i=h,s=p;return o.values=function(t){return arguments.length?(e=t,o):e},o.order=function(e){return arguments.length?(t=typeof e=="function"?e:m[e],o):t},o.offset=function(e){return arguments.length?(n=typeof e=="function"?e:g[e],o):n},o.x=function(e){return arguments.length?(i=e,o):i},o.y=function(e){return arguments.length?(s=e,o):s},o.out=function(e){return arguments.length?(r=e,o):r},o};var m={"inside-out":function(e){var t=e.length,n,r,i=e.map(y),s=e.map(b),o=d3.range(t).sort(function(e,t){return i[e]-i[t]}),u=0,a=0,f=[],l=[];for(n=0;n<t;++n)r=o[n],u<a?(u+=s[r],f.push(r)):(a+=s[r],l.push(r));return l.reverse().concat(f)},reverse:function(e){return d3.range(e.length).reverse()},"default":function(e){return d3.range(e.length)}},g={silhouette:function(e){var t=e.length,n=e[0].length,r=[],i=0,s,o,u,a=[];for(o=0;o<n;++o){for(s=0,u=0;s<t;s++)u+=e[s][o][1];u>i&&(i=u),r.push(u)}for(o=0;o<n;++o)a[o]=(i-r[o])/2;return a},wiggle:function(e){var t=e.length,n=e[0],r=n.length,i=0,s,o,u,a,f,l,c,h,p,d=[];d[0]=h=p=0;for(o=1;o<r;++o){for(s=0,a=0;s<t;++s)a+=e[s][o][1];for(s=0,f=0,c=n[o][0]-n[o-1][0];s<t;++s){for(u=0,l=(e[s][o][1]-e[s][o-1][1])/(2*c);u<s;++u)l+=(e[u][o][1]-e[u][o-1][1])/c;f+=l*e[s][o][1]}d[o]=h-=a?f/a*c:0,h<p&&(p=h)}for(o=0;o<r;++o)d[o]-=p;return d},expand:function(e){var t=e.length,n=e[0].length,r=1/t,i,s,o,u=[];for(s=0;s<n;++s){for(i=0,o=0;i<t;i++)o+=e[i][s][1];if(o)for(i=0;i<t;i++)e[i][s][1]/=o;else for(i=0;i<t;i++)e[i][s][1]=r}for(s=0;s<n;++s)u[s]=0;return u},zero:function(e){var t=-1,n=e[0].length,r=[];while(++t<n)r[t]=0;return r}};d3.layout.histogram=function(){function i(i,s){var o=[],u=i.map(t,this),a=n.call(this,u,s),f=r.call(this,a,u,s),l,s=-1,c=u.length,h=f.length-1,p=e?1:1/c,d;while(++s<h)l=o[s]=[],l.dx=f[s+1]-(l.x=f[s]),l.y=0;s=-1;while(++s<c)d=u[s],d>=a[0]&&d<=a[1]&&(l=o[d3.bisect(f,d,1,h)-1],l.y+=p,l.push(i[s]));return o}var e=!0,t=Number,n=x,r=E;return i.value=function(e){return arguments.length?(t=e,i):t},i.range=function(e){return arguments.length?(n=d3.functor(e),i):n},i.bins=function(e){return arguments.length?(r=typeof e=="number"?function(t){return S(t,e)}:d3.functor(e),i):r},i.frequency=function(t){return arguments.length?(e=!!t,i):e},i},d3.layout.hierarchy=function(){function r(i,o,u){var a=t.call(s,i,o),f=A?i:{data:i};f.depth=o,u.push(f);if(a){var l=-1,c=a.length,h=f.children=[],p=0,v=o+1;while(++l<c)d=r(a[l],v,u),d.parent=f,h.push(d),p+=d.value;e&&h.sort(e),n&&(f.value=p)}else n&&(f.value=+n.call(s,i,o)||0);return f}function i(e,t){var r=e.children,o=0;if(r){var u=-1,a=r.length,f=t+1;while(++u<a)o+=i(r[u],f)}else n&&(o=+n.call(s,A?e:e.data,t)||0);return n&&(e.value=o),o}function s(e){var t=[];return r(e,0,t),t}var e=k,t=N,n=C;return s.sort=function(t){return arguments.length?(e=t,s):e},s.children=function(e){return arguments.length?(t=e,s):t},s.value=function(e){return arguments.length?(n=e,s):n},s.revalue=function(e){return i(e,0),e},s};var A=!1;d3.layout.pack=function(){function n(n,r){var i=e.call(this,n,r),s=i[0];s.x=0,s.y=0,j(s);var o=t[0],u=t[1],a=1/Math.max(2*s.r/o,2*s.r/u);return F(s,o/2,u/2,a),i}var e=d3.layout.hierarchy().sort(O),t=[1,1];return n.size=function(e){return arguments.length?(t=e,n):t},T(n,e)},d3.layout.cluster=function(){function r(r,i){var s=e.call(this,r,i),o=s[0],u,a=0,f,l;G(o,function(e){e.children?(e.x=R(e.children),e.y=q(e.children)):(e.x=u?a+=t(e,u):0,e.y=0,u=e)});var c=U(o),h=z(o),p=c.x-t(c,h)/2,d=h.x+t(h,c)/2;return G(o,function(e){e.x=(e.x-p)/(d-p)*n[0],e.y=(1-e.y/o.y)*n[1]}),s}var e=d3.layout.hierarchy().sort(null).value(null),t=W,n=[1,1];return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(e){return arguments.length?(n=e,r):n},T(r,e)},d3.layout.tree=function(){function r(r,i){function u(e,n){var r=e.children,i=e._tree;if(r&&(s=r.length)){var s,o=r[0],a,l=o,c,h=-1;while(++h<s)c=r[h],u(c,a),l=f(c,a,l),a=c;Y(e);var p=.5*(o._tree.prelim+c._tree.prelim);n?(i.prelim=n._tree.prelim+t(e,n),i.mod=i.prelim-p):i.prelim=p}else n&&(i.prelim=n._tree.prelim+t(e,n))}function a(e,t){e.x=e._tree.prelim+t;var n=e.children;if(n){var r=-1,i=n.length;t+=e._tree.mod;while(++r<i)a(n[r],t)}}function f(e,n,r){if(n){var i=e,s=e,o=n,u=e.parent.children[0],a=i._tree.mod,f=s._tree.mod,l=o._tree.mod,c=u._tree.mod,h;while(o=V(o),i=X(i),o&&i)u=X(u),s=V(s),s._tree.ancestor=e,h=o._tree.prelim+l-i._tree.prelim-a+t(o,i),h>0&&(Z(et(o,e,r),e,h),a+=h,f+=h),l+=o._tree.mod,a+=i._tree.mod,c+=u._tree.mod,f+=s._tree.mod;o&&!V(s)&&(s._tree.thread=o,s._tree.mod+=l-f),i&&!X(u)&&(u._tree.thread=i,u._tree.mod+=a-c,r=e)}return r}var s=e.call(this,r,i),o=s[0];G(o,function(e,t){e._tree={ancestor:e,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),u(o),a(o,-o._tree.prelim);var l=$(o,K),c=$(o,J),h=$(o,Q),p=l.x-t(l,c)/2,d=c.x+t(c,l)/2,v=h.depth||1;return G(o,function(e){e.x=(e.x-p)/(d-p)*n[0],e.y=e.depth/v*n[1],delete e._tree}),s}var e=d3.layout.hierarchy().sort(null).value(null),t=W,n=[1,1];return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(e){return arguments.length?(n=e,r):n},T(r,e)},d3.layout.treemap=function(){function a(e,t){var n=-1,r=e.length,i,s;while(++n<r)s=(i=e[n]).value*(t<0?0:t),i.area=isNaN(s)||s<=0?0:s}function f(e){if(!e.children)return;var t=i(e),n=[],r=e.children.slice(),s,o=Infinity,u,l=Math.min(t.dx,t.dy),p;a(r,t.dx*t.dy/e.value),n.area=0;while((p=r.length)>0)n.push(s=r[p-1]),n.area+=s.area,(u=c(n,l))<=o?(r.pop(),o=u):(n.area-=n.pop().area,h(n,l,t,!1),l=Math.min(t.dx,t.dy),n.length=n.area=0,o=Infinity);n.length&&(h(n,l,t,!0),n.length=n.area=0),e.children.forEach(f)}function l(e){if(!e.children)return;var t=i(e),n=e.children.slice(),r,s=[];a(n,t.dx*t.dy/e.value),s.area=0;while(r=n.pop())s.push(r),s.area+=r.area,r.z!=null&&(h(s,r.z?t.dx:t.dy,t,!n.length),s.length=s.area=0);e.children.forEach(l)}function c(e,t){var n=e.area,r,i=0,s=Infinity,o=-1,a=e.length;while(++o<a){if(!(r=e[o].area))continue;r<s&&(s=r),r>i&&(i=r)}return n*=n,t*=t,n?Math.max(t*i*u/n,n/(t*s*u)):Infinity}function h(e,n,r,i){var s=-1,o=e.length,u=r.x,a=r.y,f=n?t(e.area/n):0,l;if(n==r.dx){if(i||f>r.dy)f=f?r.dy:0;while(++s<o)l=e[s],l.x=u,l.y=a,l.dy=f,u+=l.dx=f?t(l.area/f):0;l.z=!0,l.dx+=r.x+r.dx-u,r.y+=f,r.dy-=f}else{if(i||f>r.dx)f=f?r.dx:0;while(++s<o)l=e[s],l.x=u,l.y=a,l.dx=f,a+=l.dy=f?t(l.area/f):0;l.z=!1,l.dy+=r.y+r.dy-a,r.x+=f,r.dx-=f}}function p(t){var r=o||e(t),i=r[0];return i.x=0,i.y=0,i.dx=n[0],i.dy=n[1],o&&e.revalue(i),a([i],i.dx*i.dy/i.value),(o?l:f)(i),s&&(o=r),r}var e=d3.layout.hierarchy(),t=Math.round,n=[1,1],r=null,i=tt,s=!1,o,u=.5*(1+Math.sqrt(5));return p.size=function(e){return arguments.length?(n=e,p):n},p.padding=function(e){function t(t){var n=e.call(p,t,t.depth);return n==null?tt(t):nt(t,typeof n=="number"?[n,n,n,n]:n)}function n(t){return nt(t,e)}if(!arguments.length)return r;var s;return i=(r=e)==null?tt:(s=typeof e)==="function"?t:s==="number"?(e=[e,e,e,e],n):n,p},p.round=function(e){return arguments.length?(t=e?Math.round:Number,p):t!=Number},p.sticky=function(e){return arguments.length?(s=e,o=null,p):s},p.ratio=function(e){return arguments.length?(u=e,p):u},T(p,e)}}(),function(){function n(e){var t=0,n=0;for(;;){if(e(t,n))return[t,n];t===0?(t=n+1,n=0):(t-=1,n+=1)}}function r(e,t,n,r){var i,s,o,u,a,f,l;return i=r[e],s=i[0],o=i[1],i=r[t],u=i[0],a=i[1],i=r[n],f=i[0],l=i[1],(l-o)*(u-s)-(a-o)*(f-s)>0}function i(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function s(e,t,n,r){var i=e[0],s=t[0],o=n[0],u=r[0],a=e[1],f=t[1],l=n[1],c=r[1],h=i-o,p=s-i,d=u-o,v=a-l,m=f-a,g=c-l,y=(d*v-g*h)/(g*p-d*m);return[i+y*p,a+y*m]}function u(e,t){var n={list:e.map(function(e,t){return{index:t,x:e[0],y:e[1]}}).sort(function(e,t){return e.y<t.y?-1:e.y>t.y?1:e.x<t.x?-1:e.x>t.x?1:0}),bottomSite:null},r={list:[],leftEnd:null,rightEnd:null,init:function(){r.leftEnd=r.createHalfEdge(null,"l"),r.rightEnd=r.createHalfEdge(null,"l"),r.leftEnd.r=r.rightEnd,r.rightEnd.l=r.leftEnd,r.list.unshift(r.leftEnd,r.rightEnd)},createHalfEdge:function(e,t){return{edge:e,side:t,vertex:null,l:null,r:null}},insert:function(e,t){t.l=e,t.r=e.r,e.r.l=t,e.r=t},leftBound:function(e){var t=r.leftEnd;do t=t.r;while(t!=r.rightEnd&&i.rightOf(t,e));return t=t.l,t},del:function(e){e.l.r=e.r,e.r.l=e.l,e.edge=null},right:function(e){return e.r},left:function(e){return e.l},leftRegion:function(e){return e.edge==null?n.bottomSite:e.edge.region[e.side]},rightRegion:function(e){return e.edge==null?n.bottomSite:e.edge.region[o[e.side]]}},i={bisect:function(e,t){var n={region:{l:e,r:t},ep:{l:null,r:null}},r=t.x-e.x,i=t.y-e.y,s=r>0?r:-r,o=i>0?i:-i;return n.c=e.x*r+e.y*i+(r*r+i*i)*.5,s>o?(n.a=1,n.b=i/r,n.c/=r):(n.b=1,n.a=r/i,n.c/=i),n},intersect:function(e,t){var n=e.edge,r=t.edge;if(!n||!r||n.region.r==r.region.r)return null;var i=n.a*r.b-n.b*r.a;if(Math.abs(i)<1e-10)return null;var s=(n.c*r.b-r.c*n.b)/i,o=(r.c*n.a-n.c*r.a)/i,u=n.region.r,a=r.region.r,f,l;u.y<a.y||u.y==a.y&&u.x<a.x?(f=e,l=n):(f=t,l=r);var c=s>=l.region.r.x;return c&&f.side==="l"||!c&&f.side==="r"?null:{x:s,y:o}},rightOf:function(e,t){var n=e.edge,r=n.region.r,i=t.x>r.x;if(i&&e.side==="l")return 1;if(!i&&e.side==="r")return 0;if(n.a===1){var s=t.y-r.y,o=t.x-r.x,u=0,a=0;!i&&n.b<0||i&&n.b>=0?a=u=s>=n.b*o:(a=t.x+t.y*n.b>n.c,n.b<0&&(a=!a),a||(u=1));if(!u){var f=r.x-n.region.l.x;a=n.b*(o*o-s*s)<f*s*(1+2*o/f+n.b*n.b),n.b<0&&(a=!a)}}else{var l=n.c-n.a*t.x,c=t.y-l,h=t.x-r.x,p=l-r.y;a=c*c>h*h+p*p}return e.side==="l"?a:!a},endPoint:function(e,n,r){e.ep[n]=r;if(!e.ep[o[n]])return;t(e)},distance:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}},s={list:[],insert:function(e,t,n){e.vertex=t,e.ystar=t.y+n;for(var r=0,i=s.list,o=i.length;r<o;r++){var u=i[r];if(e.ystar>u.ystar||e.ystar==u.ystar&&t.x>u.vertex.x)continue;break}i.splice(r,0,e)},del:function(e){for(var t=0,n=s.list,r=n.length;t<r&&n[t]!=e;++t);n.splice(t,1)},empty:function(){return s.list.length===0},nextEvent:function(e){for(var t=0,n=s.list,r=n.length;t<r;++t)if(n[t]==e)return n[t+1];return null},min:function(){var e=s.list[0];return{x:e.vertex.x,y:e.ystar}},extractMin:function(){return s.list.shift()}};r.init(),n.bottomSite=n.list.shift();var u=n.list.shift(),a,f,l,c,h,p,d,v,m,g,y,b,w;for(;;){s.empty()||(a=s.min());if(u&&(s.empty()||u.y<a.y||u.y==a.y&&u.x<a.x))f=r.leftBound(u),l=r.right(f),d=r.rightRegion(f),b=i.bisect(d,u),p=r.createHalfEdge(b,"l"),r.insert(f,p),g=i.intersect(f,p),g&&(s.del(f),s.insert(f,g,i.distance(g,u))),f=p,p=r.createHalfEdge(b,"r"),r.insert(f,p),g=i.intersect(p,l),g&&s.insert(p,g,i.distance(g,u)),u=n.list.shift();else{if(!!s.empty())break;f=s.extractMin(),c=r.left(f),l=r.right(f),h=r.right(l),d=r.leftRegion(f),v=r.rightRegion(l),y=f.vertex,i.endPoint(f.edge,f.side,y),i.endPoint(l.edge,l.side,y),r.del(f),s.del(l),r.del(l),w="l",d.y>v.y&&(m=d,d=v,v=m,w="r"),b=i.bisect(d,v),p=r.createHalfEdge(b,w),r.insert(c,p),i.endPoint(b,o[w],y),g=i.intersect(c,p),g&&(s.del(c),s.insert(c,g,i.distance(g,d))),g=i.intersect(p,h),g&&s.insert(p,g,i.distance(g,d))}}for(f=r.right(r.leftEnd);f!=r.rightEnd;f=r.right(f))t(f.edge)}function a(){return{leaf:!0,nodes:[],point:null}}function f(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=(n+i)*.5,u=(r+s)*.5,a=t.nodes;a[0]&&f(e,a[0],n,r,o,u),a[1]&&f(e,a[1],o,r,i,u),a[2]&&f(e,a[2],n,u,o,s),a[3]&&f(e,a[3],o,u,i,s)}}function l(e){return{x:e[0],y:e[1]}}d3.geom={},d3.geom.contour=function(r,i){var s=i||n(r),o=[],u=s[0],a=s[1],f=0,l=0,c=NaN,h=NaN,p=0;do p=0,r(u-1,a-1)&&(p+=1),r(u,a-1)&&(p+=2),r(u-1,a)&&(p+=4),r(u,a)&&(p+=8),p===6?(f=h===-1?-1:1,l=0):p===9?(f=0,l=c===1?-1:1):(f=e[p],l=t[p]),f!=c&&l!=h&&(o.push([u,a]),c=f,h=l),u+=f,a+=l;while(s[0]!=u||s[1]!=a);return o};var e=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,NaN],t=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,NaN];d3.geom.hull=function(e){if(e.length<3)return[];var t=e.length,n=t-1,i=[],s=[],o,u,a=0,f,l,c,h,p,d,v,m;for(o=1;o<t;++o)e[o][1]<e[a][1]?a=o:e[o][1]==e[a][1]&&(a=e[o][0]<e[a][0]?o:a);for(o=0;o<t;++o){if(o===a)continue;l=e[o][1]-e[a][1],f=e[o][0]-e[a][0],i.push({angle:Math.atan2(l,f),index:o})}i.sort(function(e,t){return e.angle-t.angle}),v=i[0].angle,d=i[0].index,p=0;for(o=1;o<n;++o)u=i[o].index,v==i[o].angle?(f=e[d][0]-e[a][0],l=e[d][1]-e[a][1],c=e[u][0]-e[a][0],h=e[u][1]-e[a][1],f*f+l*l>=c*c+h*h?i[o].index=-1:(i[p].index=-1,v=i[o].angle,p=o,d=u)):(v=i[o].angle,p=o,d=u);s.push(a);for(o=0,u=0;o<2;++u)i[u].index!==-1&&(s.push(i[u].index),o++);m=s.length;for(;u<n;++u){if(i[u].index===-1)continue;while(!r(s[m-2],s[m-1],i[u].index,e))--m;s[m++]=i[u].index}var g=[];for(o=0;o<m;++o)g.push(e[s[o]]);return g},d3.geom.polygon=function(e){return e.area=function(){var t=0,n=e.length,r=e[n-1][0]*e[0][1],i=e[n-1][1]*e[0][0];while(++t<n)r+=e[t-1][0]*e[t][1],i+=e[t-1][1]*e[t][0];return(i-r)*.5},e.centroid=function(t){var n=-1,r=e.length-1,i=0,s=0,o,u,a;arguments.length||(t=1/(6*e.area()));while(++n<r)o=e[n],u=e[n+1],a=o[0]*u[1]-u[0]*o[1],i+=(o[0]+u[0])*a,s+=(o[1]+u[1])*a;return[i*t,s*t]},e.clip=function(t){var n,r=-1,o=e.length,u,a,f=e[o-1],l,c,h;while(++r<o){n=t.slice(),t.length=0,l=e[r],c=n[(a=n.length)-1],u=-1;while(++u<a)h=n[u],i(h,f,l)?(i(c,f,l)||t.push(s(c,h,f,l)),t.push(h)):i(c,f,l)&&t.push(s(c,h,f,l)),c=h;f=l}return t},e},d3.geom.voronoi=function(e){var t=e.map(function(){return[]});return u(e,function(e){var n,r,i,s,o,u;e.a===1&&e.b>=0?(n=e.ep.r,r=e.ep.l):(n=e.ep.l,r=e.ep.r),e.a===1?(o=n?n.y:-1e6,i=e.c-e.b*o,u=r?r.y:1e6,s=e.c-e.b*u):(i=n?n.x:-1e6,o=e.c-e.a*i,s=r?r.x:1e6,u=e.c-e.a*s);var a=[i,o],f=[s,u];t[e.region.l.index].push(a,f),t[e.region.r.index].push(a,f)}),t.map(function(t,n){var r=e[n][0],i=e[n][1];return t.forEach(function(e){e.angle=Math.atan2(e[0]-r,e[1]-i)}),t.sort(function(e,t){return e.angle-t.angle}).filter(function(e,n){return!n||e.angle-t[n-1].angle>1e-10})})};var o={l:"r",r:"l"};d3.geom.delaunay=function(e){var t=e.map(function(){return[]}),n=[];return u(e,function(n){t[n.region.l.index].push(e[n.region.r.index])}),t.forEach(function(t,r){var i=e[r],s=i[0],o=i[1];t.forEach(function(e){e.angle=Math.atan2(e[0]-s,e[1]-o)}),t.sort(function(e,t){return e.angle-t.angle});for(var u=0,a=t.length-1;u<a;u++)n.push([i,t[u],t[u+1]])}),n},d3.geom.quadtree=function(e,t,n,r,i){function p(e,t,n,r,i,s){if(isNaN(t.x)||isNaN(t.y))return;if(e.leaf){var o=e.point;o?Math.abs(o.x-t.x)+Math.abs(o.y-t.y)<.01?d(e,t,n,r,i,s):(e.point=null,d(e,o,n,r,i,s),d(e,t,n,r,i,s)):e.point=t}else d(e,t,n,r,i,s)}function d(e,t,n,r,i,s){var o=(n+i)*.5,u=(r+s)*.5,f=t.x>=o,l=t.y>=u,c=(l<<1)+f;e.leaf=!1,e=e.nodes[c]||(e.nodes[c]=a()),f?n=o:i=o,l?r=u:s=u,p(e,t,n,r,i,s)}var s,o=-1,u=e.length;u&&isNaN(e[0].x)&&(e=e.map(l));if(arguments.length<5)if(arguments.length===3)i=r=n,n=t;else{t=n=Infinity,r=i=-Infinity;while(++o<u)s=e[o],s.x<t&&(t=s.x),s.y<n&&(n=s.y),s.x>r&&(r=s.x),s.y>i&&(i=s.y);var c=r-t,h=i-n;c>h?i=n+c:r=t+h}var v=a();return v.add=function(e){p(v,e,t,n,r,i)},v.visit=function(e){f(e,v,t,n,r,i)},e.forEach(v.add),v}}(),function(e){e.fn.tiesGraph=function(e){var t=860,n=500,r=d3.scale.category20(),i=d3.select(this.selector).append("svg:svg").attr("width",t).attr("height",n),s=d3.layout.force().charge(-120).linkDistance(40).nodes(e.nodes).links(e.links).size([t,n]).start(),o=i.selectAll("line.link").data(e.links).enter().append("svg:line").attr("class","link").style("stroke-width",function(e){return Math.sqrt(e.value)}).attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),u=i.selectAll("g.node").data(e.nodes).enter().append("svg:g").attr("class","node").call(s.drag);u.append("svg:image").attr("class","circle").attr("xlink:href",function(e){return e.logo}).attr("x","-10px").attr("y","-10px").attr("width","20px").attr("height","20px"),u.append("svg:title").text(function(e){return e.name}),i.style("opacity",1e-6).transition().duration(1e3).style("opacity",1),s.on("tick",function(){o.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),u.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})})}}(jQuery),function(e,t){e.fn.jPlayer=function(n){var r=typeof n=="string",i=Array.prototype.slice.call(arguments,1),s=this;return n=!r&&i.length?e.extend.apply(null,[!0,n].concat(i)):n,r&&n.charAt(0)==="_"?s:(r?this.each(function(){var r=e.data(this,"jPlayer"),o=r&&e.isFunction(r[n])?r[n].apply(r,i):r;if(o!==r&&o!==t)return s=o,!1}):this.each(function(){var t=e.data(this,"jPlayer");t?(t.option(n||{})._init(),t.option(n||{})):e.data(this,"jPlayer",new e.jPlayer(n,this))}),s)},e.jPlayer=function(t,n){if(arguments.length){this.element=e(n),this.options=e.extend(!0,{},this.options,t);var r=this;this.element.bind("remove.jPlayer",function(){r.destroy()}),this._init()}},e.jPlayer.event={ready:"jPlayer_ready",resize:"jPlayer_resize",error:"jPlayer_error",warning:"jPlayer_warning",loadstart:"jPlayer_loadstart",progress:"jPlayer_progress",suspend:"jPlayer_suspend",abort:"jPlayer_abort",emptied:"jPlayer_emptied",stalled:"jPlayer_stalled",play:"jPlayer_play",pause:"jPlayer_pause",loadedmetadata:"jPlayer_loadedmetadata",loadeddata:"jPlayer_loadeddata",waiting:"jPlayer_waiting",playing:"jPlayer_playing",canplay:"jPlayer_canplay",canplaythrough:"jPlayer_canplaythrough",seeking:"jPlayer_seeking",seeked:"jPlayer_seeked",timeupdate:"jPlayer_timeupdate",ended:"jPlayer_ended",ratechange:"jPlayer_ratechange",durationchange:"jPlayer_durationchange",volumechange:"jPlayer_volumechange"},e.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","loadeddata","canplaythrough","ratechange"],e.jPlayer.pause=function(){e.each(e.jPlayer.prototype.instances,function(e,t){t.data("jPlayer").status.srcSet&&t.jPlayer("pause")})},e.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""},e.jPlayer.convertTime=function(t){t=new Date(t*1e3);var n=t.getUTCHours(),r=t.getUTCMinutes();return t=t.getUTCSeconds(),n=e.jPlayer.timeFormat.padHour&&n<10?"0"+n:n,r=e.jPlayer.timeFormat.padMin&&r<10?"0"+r:r,t=e.jPlayer.timeFormat.padSec&&t<10?"0"+t:t,(e.jPlayer.timeFormat.showHour?n+e.jPlayer.timeFormat.sepHour:"")+(e.jPlayer.timeFormat.showMin?r+e.jPlayer.timeFormat.sepMin:"")+(e.jPlayer.timeFormat.showSec?t+e.jPlayer.timeFormat.sepSec:"")},e.jPlayer.uaMatch=function(e){e=e.toLowerCase();var t=/(opera)(?:.*version)?[ \/]([\w.]+)/,n=/(msie) ([\w.]+)/,r=/(mozilla)(?:.*? rv:([\w.]+))?/;return e=/(webkit)[ \/]([\w.]+)/.exec(e)||t.exec(e)||n.exec(e)||e.indexOf("compatible")<0&&r.exec(e)||[],{browser:e[1]||"",version:e[2]||"0"}},e.jPlayer.browser={};var n=e.jPlayer.uaMatch(navigator.userAgent);n.browser&&(e.jPlayer.browser[n.browser]=!0,e.jPlayer.browser.version=n.version),e.jPlayer.prototype={count:0,version:{script:"2.0.0",needFlash:"2.0.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:.8,muted:!1,backgroundColor:"#000000",cssSelectorAncestor:"#jp_interface_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",currentTime:".jp-current-time",duration:".jp-duration"},idPrefix:"jp",errorAlerts:!1,warningAlerts:!1},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0},_status:{volume:t,muted:!1,width:0,height:0},internal:{ready:!1,instance:t,htmlDlyCmdId:t},solution:{html:!0,flash:!0},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis"',flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"}},_init:function(){var n=this;this.element.empty(),this.status=e.extend({},this.status,this._status),this.internal=e.extend({},this.internal),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.flash={},this.css={},this.css.cs={},this.css.jq={},this.status.volume=this._limitValue(this.options.volume,0,1),this.status.muted=this.options.muted,this.status.width=this.element.css("width"),this.status.height=this.element.css("height"),this.element.css({"background-color":this.options.backgroundColor}),e.each(this.options.supplied.toLowerCase().split(","),function(t,r){var i=r.replace(/^\s+|\s+$/g,"");if(n.format[i]){var s=!1;e.each(n.formats,function(e,t){if(i===t)return s=!0,!1}),s||n.formats.push(i)}}),e.each(this.options.solution.toLowerCase().split(","),function(t,r){var i=r.replace(/^\s+|\s+$/g,"");if(n.solution[i]){var s=!1;e.each(n.solutions,function(e,t){if(i===t)return s=!0,!1}),s||n.solutions.push(i)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")===""&&this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=e.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=e.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:t}),this.internal.video=e.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:t}),this.internal.flash=e.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:t,swf:this.options.swfPath+(this.options.swfPath!==""&&this.options.swfPath.slice(-1)!=="/"?"/":"")+"Jplayer.swf"}),this.internal.poster=e.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:t}),e.each(e.jPlayer.event,function(e,r){n.options[e]!==t&&(n.element.bind(r+".jPlayer",n.options[e]),n.options[e]=t)}),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){(!n.status.video||n.status.waitForPlay)&&n.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=e("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.require.audio=!1,this.require.video=!1,e.each(this.formats,function(e,t){n.require[n.format[t].media]=!0}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType),this.flash.available=this._checkForFlash(10),this.html.canPlay={},this.flash.canPlay={},e.each(this.formats,function(e,t){n.html.canPlay[t]=n.html[n.format[t].media].available&&""!==n.htmlElement[n.format[t].media].canPlayType(n.format[t].codec),n.flash.canPlay[t]=n.format[t].flashCanPlay&&n.flash.available}),this.html.desired=!1,this.flash.desired=!1,e.each(this.solutions,function(t,r){if(t===0)n[r].desired=!0;else{var i=!1,s=!1;e.each(n.formats,function(e,t){n[n.solutions[0]].canPlay[t]&&(n.format[t].media==="video"?s=!0:i=!0)}),n[r].desired=n.require.audio&&!i||n.require.video&&!s}}),this.html.support={},this.flash.support={},e.each(this.formats,function(e,t){n.html.support[t]=n.html.canPlay[t]&&n.html.desired,n.flash.support[t]=n.flash.canPlay[t]&&n.flash.desired}),this.html.used=!1,this.flash.used=!1,e.each(this.solutions,function(t,r){e.each(n.formats,function(e,t){if(n[r].support[t])return n[r].used=!0,!1})}),this.html.used||this.flash.used||this._error({type:e.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SOLUTION,hint:e.jPlayer.errorHint.NO_SOLUTION}),this.html.active=!1,this.html.audio.gate=!1,this.html.video.gate=!1,this.flash.active=!1,this.flash.gate=!1;if(this.flash.used){var r="id="+escape(this.internal.self.id)+"&vol="+this.status.volume+"&muted="+this.status.muted;if(e.browser.msie&&Number(e.browser.version)<=8){var i='<object id="'+this.internal.flash.id+'"';i+=' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"',i+=' codebase="'+document.URL.substring(0,document.URL.indexOf(":"))+'://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab"',i+=' type="application/x-shockwave-flash"',i+=' width="0" height="0">',i+="</object>";var s=[];s[0]='<param name="movie" value="'+this.internal.flash.swf+'" />',s[1]='<param name="quality" value="high" />',s[2]='<param name="FlashVars" value="'+r+'" />',s[3]='<param name="allowScriptAccess" value="always" />',s[4]='<param name="bgcolor" value="'+this.options.backgroundColor+'" />',r=document.createElement(i);for(i=0;i<s.length;i++)r.appendChild(document.createElement(s[i]));this.element.append(r)}else s='<embed name="'+this.internal.flash.id+'" id="'+this.internal.flash.id+'" src="'+this.internal.flash.swf+'"',s+=' width="0" height="0" bgcolor="'+this.options.backgroundColor+'"',s+=' quality="high" FlashVars="'+r+'"',s+=' allowScriptAccess="always"',s+=' type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />',this.element.append(s);this.internal.flash.jq=e("#"+this.internal.flash.id),this.internal.flash.jq.css({width:"0px",height:"0px"})}this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=e("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=e("#"+this.internal.video.id),this.internal.video.jq.css({width:"0px",height:"0px"}))),this.html.used&&!this.flash.used&&window.setTimeout(function(){n.internal.ready=!0,n.version.flash="n/a",n._trigger(e.jPlayer.event.ready)},100),e.each(this.options.cssSelector,function(e,t){n._cssSelector(e,t)}),this._updateInterface(),this._updateButtons(!1),this._updateVolume(this.status.volume),this._updateMute(this.status.muted),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),e.jPlayer.prototype.count++},destroy:function(){this._resetStatus(),this._updateInterface(),this._seeked(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),this.status.srcSet&&this.pause(),e.each(this.css.jq,function(e,t){t.unbind(".jPlayer")}),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),this.instances[this.internal.instance]=t},enable:function(){},disable:function(){},_addHtmlEventListeners:function(t,n){var r=this;t.preload=this.options.preload,t.muted=this.options.muted,t.addEventListener("progress",function(){n.gate&&!r.status.waitForLoad&&(r._getHtmlStatus(t),r._updateInterface
(),r._trigger(e.jPlayer.event.progress))},!1),t.addEventListener("timeupdate",function(){n.gate&&!r.status.waitForLoad&&(r._getHtmlStatus(t),r._updateInterface(),r._trigger(e.jPlayer.event.timeupdate))},!1),t.addEventListener("durationchange",function(){n.gate&&!r.status.waitForLoad&&(r.status.duration=this.duration,r._getHtmlStatus(t),r._updateInterface(),r._trigger(e.jPlayer.event.durationchange))},!1),t.addEventListener("play",function(){n.gate&&!r.status.waitForLoad&&(r._updateButtons(!0),r._trigger(e.jPlayer.event.play))},!1),t.addEventListener("playing",function(){n.gate&&!r.status.waitForLoad&&(r._updateButtons(!0),r._seeked(),r._trigger(e.jPlayer.event.playing))},!1),t.addEventListener("pause",function(){n.gate&&!r.status.waitForLoad&&(r._updateButtons(!1),r._trigger(e.jPlayer.event.pause))},!1),t.addEventListener("waiting",function(){n.gate&&!r.status.waitForLoad&&(r._seeking(),r._trigger(e.jPlayer.event.waiting))},!1),t.addEventListener("canplay",function(){n.gate&&!r.status.waitForLoad&&(t.volume=r._volumeFix(r.status.volume),r._trigger(e.jPlayer.event.canplay))},!1),t.addEventListener("seeking",function(){n.gate&&!r.status.waitForLoad&&(r._seeking(),r._trigger(e.jPlayer.event.seeking))},!1),t.addEventListener("seeked",function(){n.gate&&!r.status.waitForLoad&&(r._seeked(),r._trigger(e.jPlayer.event.seeked))},!1),t.addEventListener("suspend",function(){n.gate&&!r.status.waitForLoad&&(r._seeked(),r._trigger(e.jPlayer.event.suspend))},!1),t.addEventListener("ended",function(){n.gate&&!r.status.waitForLoad&&(e.jPlayer.browser.webkit||(r.htmlElement.media.currentTime=0),r.htmlElement.media.pause(),r._updateButtons(!1),r._getHtmlStatus(t,!0),r._updateInterface(),r._trigger(e.jPlayer.event.ended))},!1),t.addEventListener("error",function(){n.gate&&!r.status.waitForLoad&&(r._updateButtons(!1),r._seeked(),r.status.srcSet&&(r.status.waitForLoad=!0,r.status.waitForPlay=!0,r.status.video&&r.internal.video.jq.css({width:"0px",height:"0px"}),r._validString(r.status.media.poster)&&r.internal.poster.jq.show(),r.css.jq.videoPlay.length&&r.css.jq.videoPlay.show(),r._error({type:e.jPlayer.error.URL,context:r.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1),e.each(e.jPlayer.htmlEvent,function(i,s){t.addEventListener(this,function(){n.gate&&!r.status.waitForLoad&&r._trigger(e.jPlayer.event[s])},!1)})},_getHtmlStatus:function(e,t){var n=0,r=0,i=0,s=0;n=e.currentTime,r=this.status.duration>0?100*n/this.status.duration:0,typeof e.seekable=="object"&&e.seekable.length>0?(i=this.status.duration>0?100*e.seekable.end(e.seekable.length-1)/this.status.duration:100,s=100*e.currentTime/e.seekable.end(e.seekable.length-1)):(i=100,s=r),t&&(r=s=n=0),this.status.seekPercent=i,this.status.currentPercentRelative=s,this.status.currentPercentAbsolute=r,this.status.currentTime=n},_resetStatus:function(){this.status=e.extend({},this.status,e.jPlayer.prototype.status)},_trigger:function(t,n,r){t=e.Event(t),t.jPlayer={},t.jPlayer.version=e.extend({},this.version),t.jPlayer.status=e.extend(!0,{},this.status),t.jPlayer.html=e.extend(!0,{},this.html),t.jPlayer.flash=e.extend(!0,{},this.flash),n&&(t.jPlayer.error=e.extend({},n)),r&&(t.jPlayer.warning=e.extend({},r)),this.element.trigger(t)},jPlayerFlashEvent:function(t,n){t===e.jPlayer.event.ready&&!this.internal.ready&&(this.internal.ready=!0,this.version.flash=n.version,this.version.needFlash!==this.version.flash&&this._error({type:e.jPlayer.error.VERSION,context:this.version.flash,message:e.jPlayer.errorMsg.VERSION+this.version.flash,hint:e.jPlayer.errorHint.VERSION}),this._trigger(t));if(this.flash.gate)switch(t){case e.jPlayer.event.progress:this._getFlashStatus(n),this._updateInterface(),this._trigger(t);break;case e.jPlayer.event.timeupdate:this._getFlashStatus(n),this._updateInterface(),this._trigger(t);break;case e.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(t);break;case e.jPlayer.event.pause:this._updateButtons(!1),this._trigger(t);break;case e.jPlayer.event.ended:this._updateButtons(!1),this._trigger(t);break;case e.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._error({type:e.jPlayer.error.URL,context:n.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL});break;case e.jPlayer.event.seeking:this._seeking(),this._trigger(t);break;case e.jPlayer.event.seeked:this._seeked(),this._trigger(t);break;default:this._trigger(t)}return!1},_getFlashStatus:function(e){this.status.seekPercent=e.seekPercent,this.status.currentPercentRelative=e.currentPercentRelative,this.status.currentPercentAbsolute=e.currentPercentAbsolute,this.status.currentTime=e.currentTime,this.status.duration=e.duration},_updateButtons:function(e){this.status.paused=!e,this.css.jq.play.length&&this.css.jq.pause.length&&(e?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&this.css.jq.playBar.width(this.status.currentPercentRelative+"%"),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(e.jPlayer.convertTime(this.status.currentTime)),this.css.jq.duration.length&&this.css.jq.duration.text(e.jPlayer.convertTime(this.status.duration))},_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg")},setMedia:function(t){var n=this;this._seeked(),clearTimeout(this.internal.htmlDlyCmdId);var r=this.html.audio.gate,i=this.html.video.gate,s=!1;e.each(this.formats,function(o,u){var l=n.format[u].media==="video";e.each(n.solutions,function(e,o){if(n[o].support[u]&&n._validString(t[u])){var c=o==="html";return l?c?(n.html.audio.gate=!1,n.html.video.gate=!0,n.flash.gate=!1):(n.html.audio.gate=!1,n.html.video.gate=!1,n.flash.gate=!0):c?(n.html.audio.gate=!0,n.html.video.gate=!1,n.flash.gate=!1):(n.html.audio.gate=!1,n.html.video.gate=!1,n.flash.gate=!0),n.flash.active||n.html.active&&n.flash.gate||r===n.html.audio.gate&&i===n.html.video.gate?n.clearMedia():r!==n.html.audio.gate&&i!==n.html.video.gate&&(n._html_pause(),n.status.video&&n.internal.video.jq.css({width:"0px",height:"0px"}),n._resetStatus()),l?(c?(n._html_setVideo(t),n.html.active=!0,n.flash.active=!1):(n._flash_setVideo(t),n.html.active=!1,n.flash.active=!0),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n.status.video=!0):(c?(n._html_setAudio(t),n.html.active=!0,n.flash.active=!1):(n._flash_setAudio(t),n.html.active=!1,n.flash.active=!0),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.hide(),n.status.video=!1),s=!0,!1}});if(s)return!1}),s?(this._validString(t.poster)?this.htmlElement.poster.src!==t.poster?this.htmlElement.poster.src=t.poster:this.internal.poster.jq.show():this.internal.poster.jq.hide(),this.status.srcSet=!0,this.status.media=e.extend({},t),this._updateButtons(!1),this._updateInterface()):(this.status.srcSet&&!this.status.waitForPlay&&this.pause(),this.html.audio.gate=!1,this.html.video.gate=!1,this.flash.gate=!1,this.html.active=!1,this.flash.active=!1,this._resetStatus(),this._updateInterface(),this._updateButtons(!1),this.internal.poster.jq.hide(),this.html.used&&this.require.video&&this.internal.video.jq.css({width:"0px",height:"0px"}),this.flash.used&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._error({type:e.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SUPPORT,hint:e.jPlayer.errorHint.NO_SUPPORT}))},clearMedia:function(){this._resetStatus(),this._updateButtons(!1),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_clearMedia():this.flash.active&&this._flash_clearMedia()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},play:function(e){e=typeof e=="number"?e:NaN,this.status.srcSet?this.html.active?this._html_play(e):this.flash.active&&this._flash_play(e):this._urlNotSetError("play")},videoPlay:function(){this.play()},pause:function(e){e=typeof e=="number"?e:NaN,this.status.srcSet?this.html.active?this._html_pause(e):this.flash.active&&this._flash_pause(e):this._urlNotSetError("pause")},pauseOthers:function(){var t=this;e.each(this.instances,function(e,n){t.element!==n&&n.data("jPlayer").status.srcSet&&n.jPlayer("pause")})},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(e){e=this._limitValue(e,0,100),this.status.srcSet?this.html.active?this._html_playHead(e):this.flash.active&&this._flash_playHead(e):this._urlNotSetError("playHead")},mute:function(){this.status.muted=!0,this.html.used&&this._html_mute(!0),this.flash.used&&this._flash_mute(!0),this._updateMute(!0),this._updateVolume(0),this._trigger(e.jPlayer.event.volumechange)},unmute:function(){this.status.muted=!1,this.html.used&&this._html_mute(!1),this.flash.used&&this._flash_mute(!1),this._updateMute(!1),this._updateVolume(this.status.volume),this._trigger(e.jPlayer.event.volumechange)},_updateMute:function(e){this.css.jq.mute.length&&this.css.jq.unmute.length&&(e?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(t){t=this._limitValue(t,0,1),this.status.volume=t,this.html.used&&this._html_volume(t),this.flash.used&&this._flash_volume(t),this.status.muted||this._updateVolume(t),this._trigger(e.jPlayer.event.volumechange)},volumeBar:function(e){if(!this.status.muted&&this.css.jq.volumeBar){var t=this.css.jq.volumeBar.offset();e=e.pageX-t.left,t=this.css.jq.volumeBar.width(),this.volume(e/t)}},volumeBarValue:function(e){this.volumeBar(e)},_updateVolume:function(e){this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.width(e*100+"%")},_volumeFix:function(e){var t=.001*Math.random();return e+(e<.5?t:-t)},_cssSelectorAncestor:function(t,n){this.options.cssSelectorAncestor=t,n&&e.each(this.options.cssSelector,function(e,t){self._cssSelector(e,t)})},_cssSelector:function(t,n){var r=this;typeof n=="string"?e.jPlayer.prototype.options.cssSelector[t]?(this.css.jq[t]&&this.css.jq[t].length&&this.css.jq[t].unbind(".jPlayer"),this.options.cssSelector[t]=n,this.css.cs[t]=this.options.cssSelectorAncestor+" "+n,this.css.jq[t]=n?e(this.css.cs[t]):[],this.css.jq[t].length&&this.css.jq[t].bind("click.jPlayer",function(n){return r[t](n),e(this).blur(),!1}),n&&this.css.jq[t].length!==1&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[t],message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[t].length+" found for "+t+" method.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:e.jPlayer.warning.CSS_SELECTOR_METHOD,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:e.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:e.jPlayer.warning.CSS_SELECTOR_STRING,context:n,message:e.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:e.jPlayer.warningHint.CSS_SELECTOR_STRING})},seekBar:function(e){if(this.css.jq.seekBar){var t=this.css.jq.seekBar.offset();e=e.pageX-t.left,t=this.css.jq.seekBar.width(),this.playHead(100*e/t)}},playBar:function(e){this.seekBar(e)},currentTime:function(){},duration:function(){},option:function(n,r){var i=n;if(arguments.length===0)return e.extend(!0,{},this.options);if(typeof n=="string"){var s=n.split(".");if(r===t){for(var o=e.extend(!0,{},this.options),u=0;u<s.length;u++){if(o[s[u]]===t)return this._warning({type:e.jPlayer.warning.OPTION_KEY,context:n,message:e.jPlayer.warningMsg.OPTION_KEY,hint:e.jPlayer.warningHint.OPTION_KEY}),t;o=o[s[u]]}return o}o=i={};for(u=0;u<s.length;u++)u<s.length-1?(o[s[u]]={},o=o[s[u]]):o[s[u]]=r}return this._setOptions(i),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(t,n){var r=this;switch(t){case"cssSelectorAncestor":this.options[t]=n,e.each(r.options.cssSelector,function(e,t){r._cssSelector(e,t)});break;case"cssSelector":e.each(n,function(e,t){r._cssSelector(e,t)})}return this},resize:function(t){this.html.active&&this._resizeHtml(t),this.flash.active&&this._resizeFlash(t),this._trigger(e.jPlayer.event.resize)},_resizePoster:function(){},_resizeHtml:function(){},_resizeFlash:function(e){this.internal.flash.jq.css({width:e.width,height:e.height})},_html_initMedia:function(){this.status.srcSet&&!this.status.waitForPlay&&this.htmlElement.media.pause(),this.options.preload!=="none"&&this._html_load(),this._trigger(e.jPlayer.event.timeupdate)},_html_setAudio:function(t){var n=this;e.each(this.formats,function(e,r){if(n.html.support[r]&&t[r])return n.status.src=t[r],n.status.format[r]=!0,n.status.formatType=r,!1}),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia()},_html_setVideo:function(t){var n=this;e.each(this.formats,function(e,r){if(n.html.support[r]&&t[r])return n.status.src=t[r],n.status.format[r]=!0,n.status.formatType=r,!1}),this.htmlElement.media=this.htmlElement.video,this._html_initMedia()},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id===this.internal.video.id&&this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause(),this.htmlElement.media.src="",e.browser.msie&&Number(e.browser.version)>=9||this.htmlElement.media.load())},_html_load:function(){if(this.status.waitForLoad){this.status.waitForLoad=!1,this.htmlElement.media.src=this.status.src;try{this.htmlElement.media.load()}catch(e){}}clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(e){var t=this;this._html_load(),this.htmlElement.media.play();if(!isNaN(e))try{this.htmlElement.media.currentTime=e}catch(n){this.internal.htmlDlyCmdId=setTimeout(function(){t.play(e)},100);return}this._html_checkWaitForPlay()},_html_pause:function(e){var t=this;e>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),this.htmlElement.media.pause();if(!isNaN(e))try{this.htmlElement.media.currentTime=e}catch(n){this.internal.htmlDlyCmdId=setTimeout(function(){t.pause(e)},100);return}e>0&&this._html_checkWaitForPlay()},_html_playHead:function(e){var t=this;this._html_load();try{if(typeof this.htmlElement.media.seekable=="object"&&this.htmlElement.media.seekable.length>0)this.htmlElement.media.currentTime=e*this.htmlElement.media.seekable.end(this.htmlElement.media.seekable.length-1)/100;else{if(!(this.htmlElement.media.duration>0&&!isNaN(this.htmlElement.media.duration)))throw"e";this.htmlElement.media.currentTime=e*this.htmlElement.media.duration/100}}catch(n){this.internal.htmlDlyCmdId=setTimeout(function(){t.playHead(e)},100);return}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_volume:function(e){this.html.audio.available&&(this.htmlElement.audio.volume=e),this.html.video.available&&(this.htmlElement.video.volume=e)},_html_mute:function(e){this.html.audio.available&&(this.htmlElement.audio.muted=e),this.html.video.available&&(this.htmlElement.video.muted=e)},_flash_setAudio:function(t){var n=this;try{e.each(this.formats,function(e,r){if(n.flash.support[r]&&t[r]){switch(r){case"m4a":n._getMovie().fl_setAudio_m4a(t[r]);break;case"mp3":n._getMovie().fl_setAudio_mp3(t[r])}return n.status.src=t[r],n.status.format[r]=!0,n.status.formatType=r,!1}}),this.options.preload==="auto"&&(this._flash_load(),this.status.waitForLoad=!1)}catch(r){this._flashError(r)}},_flash_setVideo:function(t){var n=this;try{e.each(this.formats,function(e,r){if(n.flash.support[r]&&t[r]){switch(r){case"m4v":n._getMovie().fl_setVideo_m4v(t[r])}return n.status.src=t[r],n.status.format[r]=!0,n.status.formatType=r,!1}}),this.options.preload==="auto"&&(this._flash_load(),this.status.waitForLoad=!1)}catch(r){this._flashError(r)}},_flash_clearMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});try{this._getMovie().fl_clearMedia()}catch(e){this._flashError(e)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(e){this._flashError(e)}this.status.waitForLoad=!1},_flash_play:function(e){try{this._getMovie().fl_play(e)}catch(t){this._flashError(t)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(e){try{this._getMovie().fl_pause(e)}catch(t){this._flashError(t)}e>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(e){try{this._getMovie().fl_play_head(e)}catch(t){this._flashError(t)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(e){try{this._getMovie().fl_volume(e)}catch(t){this._flashError(t)}},_flash_mute:function(e){try{this._getMovie().fl_mute(e)}catch(t){this._flashError(t)}},_getMovie:function(){return document[this.internal.flash.id]},_checkForFlash:function(t){var n=!1,r;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+t),n=!0}catch(i){}else navigator.plugins&&navigator.mimeTypes.length>0&&(r=navigator.plugins["Shockwave Flash"])&&navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")>=t&&(n=!0);return e.browser.msie&&Number(e.browser.version)>=9?!1:n},_validString:function(e){return e&&typeof e=="string"},_limitValue:function(e,t,n){return e<t?t:e>n?n:e},_urlNotSetError:function(t){this._error({type:e.jPlayer.error.URL_NOT_SET,context:t,message:e.jPlayer.errorMsg.URL_NOT_SET,hint:e.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(t){this._error({type:e.jPlayer.error.FLASH,context:this.internal.flash.swf,message:e.jPlayer.errorMsg.FLASH+t.message,hint:e.jPlayer.errorHint.FLASH})},_error:function(t){this._trigger(e.jPlayer.event.error,t),this.options.errorAlerts&&this._alert("Error!"+(t.message?"\n\n"+t.message:"")+(t.hint?"\n\n"+t.hint:"")+"\n\nContext: "+t.context)},_warning:function(n){this._trigger(e.jPlayer.event.warning,t,n),this.options.errorAlerts&&this._alert("Warning!"+(n.message?"\n\n"+n.message:"")+(n.hint?"\n\n"+n.hint:"")+"\n\nContext: "+n.context)},_alert:function(e){alert("jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+e)}},e.jPlayer.error={FLASH:"e_flash",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},e.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+e.jPlayer.prototype.version.script+" needs Jplayer.swf version "+e.jPlayer.prototype.version.needFlash+" but found "},e.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},e.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},e.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of methodCssSelectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},e.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}}(jQuery),SocialStream.Documents=SocialStream.Documents||{},SocialStream.Audio=function(e,t,n){var r=function(){t(".jp-audio .jp-jplayer").each(function(){t(this).jPlayer({ready:function(){t(this).jPlayer("setMedia",{webma:t(this).closest(".audio").find(".audio-webma").attr("href")})},preload:"none",supplied:"webma",swfPath:"/assets/",cssSelectorAncestor:"#"+t(this).closest(".audio-full").attr("id")})}),t(".audio-format-links").hide()};SocialStream.Timeline.addInitCallback(r)}(SocialStream,jQuery),SocialStream.Repository=function(e,t,n){var r=function(){t("body").screw({loadingHTML:'<img src="/assets/loading.gif">'})},i=function(e){t(".document_menu").each(function(){console.log(t(this)),t(this).css("display")!="none"&&(t(this).slideToggle("slow"),t("#"+t(this).attr("id")+"_action").removeClass("selected"))}),t("#document_"+e).css("display")=="none"&&(t("#document_"+e).slideToggle("slow"),t("#document_"+e+"_action").addClass("selected"))};return{init:r,toggleDocumentMenu:i}}(SocialStream,jQuery),SocialStream.Video=function(e,t,n){var r=function(){t(".jp-video .jp-jplayer").each(function(){t(this).jPlayer({ready:function(){t(this).jPlayer("setMedia",{webmv:t(this).closest(".video").find(".video-webm").attr("href"),flv:t(this).closest(".video").find(".video-flv").attr("href"),mp4:t(this).closest(".video").find(".video-mp4").attr("href")})},solution:"flash, html",preload:"none",supplied:"webmv, flv, mp4",swfPath:"/assets/",cssSelectorAncestor:"#"+t(this).closest(".video-full").attr("id")})}),t(".video-format-links").hide(),t(".video-full").hide(),t(".video_thumbnail_play_over").click(function(){var e=t(this).closest(".video");e.find(".video-thumb").hide(),e.find(".video-details").hide(),e.find(".jp-video-play").hide(),e.find(".video-full").show(),e.find(".jp-jplayer").jPlayer("play",0)})};SocialStream.Timeline.addInitCallback(r)}(SocialStream,jQuery),jQuery.fn.boxy=function(e){return e=e||{},this.each(function(){var t=this.nodeName.toLowerCase(),n=this;t=="a"?jQuery(this).click(function(){var t=Boxy.linkedTo(this),n=this.getAttribute("href"),r=jQuery.extend({actuator:this,title:this.title},e);if(t)t.show();else if(n.indexOf("#")>=0){var i=jQuery(n.substr(n.indexOf("#"))),s=i.clone(!0);i.remove(),r.unloadOnHide=!1,new Boxy(s,r)}else r.cache||(r.unloadOnHide=!0),Boxy.load(this.href,r);return!1}):t=="form"&&jQuery(this).bind("submit.boxy",function(){return Boxy.confirm(e.message||"Please confirm:",function(){jQuery(n).unbind("submit.boxy").submit()}),!1})})},Boxy.EF=function(){},jQuery.extend(Boxy,{WRAPPER:"<table cellspacing='0' cellpadding='0' border='0' class='boxy-wrapper'><tr><td class='top-left'></td><td class='top'></td><td class='top-right'></td></tr><tr><td class='left'></td><td class='boxy-inner'></td><td class='right'></td></tr><tr><td class='bottom-left'></td><td class='bottom'></td><td class='bottom-right'></td></tr></table>",DEFAULTS:{title:null,closeable:!0,draggable:!0,clone:!1,actuator:null,center:!0,show:!0,modal:!1,fixed:!0,closeText:"[close]",unloadOnHide:!1,clickToFront:!1,behaviours:Boxy.EF,afterDrop:Boxy.EF,afterShow:Boxy.EF,afterHide:Boxy.EF,beforeUnload:Boxy.EF},DEFAULT_X:50,DEFAULT_Y:50,zIndex:1337,dragConfigured:!1,resizeConfigured:!1,dragging:null,load:function(e,t){t=t||{};var n={url:e,type:"GET",dataType:"html",cache:!1,success:function(e){e=jQuery(e),t.filter&&(e=jQuery(t.filter,e)),new Boxy(e,t)}};jQuery.each(["type","cache"],function(){this in t&&(n[this]=t[this],delete t[this])}),jQuery.ajax(n)},get:function(e){var t=jQuery(e).parents(".boxy-wrapper");return t.length?jQuery.data(t[0],"boxy"):null},linkedTo:function(e){return jQuery.data(e,"active.boxy")},alert:function(e,t,n){return Boxy.ask(e,["OK"],t,n)},confirm:function(e,t,n){return Boxy.ask(e,["OK","Cancel"],function(e){e=="OK"&&t()},n)},ask:function(e,t,n,r){r=jQuery.extend({modal:!0,closeable:!1},r||{},{show:!0,unloadOnHide:!0});var i=jQuery("<div></div>").append(jQuery('<div class="question"></div>').html(e)),s={},o=[];if(t instanceof Array)for(var u=0;u<t.length;u++)s[t[u]]=t[u],o.push(t[u]);else for(var a in t)s[t[a]]=a,o.push(t[a]);var f=jQuery('<form class="answers"></form>');f.html(jQuery.map(o,function(e){return"<input type='button' value='"+e+"' />"}).join(" ")),jQuery("input[type=button]",f).click(function(){var e=this;Boxy.get(this).hide(function(){n&&n(s[e.value])})}),i.append(f),new Boxy(i,r)},isModalVisible:function(){return jQuery(".boxy-modal-blackout").length>0},_u:function(){for(var e=0;e<arguments.length;e++)if(typeof arguments[e]!="undefined")return!1;return!0},_handleResize:function(e){var t=jQuery(document);jQuery(".boxy-modal-blackout").css("display","none").css({width:t.width(),height:t.height()}).css("display","block")},_handleDrag:function(e){var t;(t=Boxy.dragging)&&t[0].boxy.css({left:e.pageX-t[1],top:e.pageY-t[2]})},_nextZ:function(){return Boxy.zIndex++},_viewport:function(){var e=document.documentElement,t=document.body,n=window;return jQuery.extend(jQuery.browser.msie?{left:t.scrollLeft||e.scrollLeft,top:t.scrollTop||e.scrollTop}:{left:n.pageXOffset,top:n.pageYOffset},Boxy._u(n.innerWidth)?!Boxy._u(e)&&!Boxy._u(e.clientWidth)&&e.clientWidth!=0?{width:e.clientWidth,height:e.clientHeight}:{width:t.clientWidth,height:t.clientHeight}:{width:n.innerWidth,height:n.innerHeight})}}),Boxy.prototype={estimateSize:function(){this.boxy.css({visibility:"hidden",display:"block"});var e=this.getSize();return this.boxy.css("display","none").css("visibility","visible"),e},getSize:function(){return[this.boxy.width(),this.boxy.height()]},getContentSize:function(){var e=this.getContent();return[e.width(),e.height()]},getPosition:function(){var e=this.boxy[0];return[e.offsetLeft,e.offsetTop]},getCenter:function(){var e=this.getPosition(),t=this.getSize();return[Math.floor(e[0]+t[0]/2),Math.floor(e[1]+t[1]/2)]},getInner:function(){return jQuery(".boxy-inner",this.boxy)},getContent:function(){return jQuery(".boxy-content",this.boxy)},setContent:function(e){return e=jQuery(e).css({display:"block"}).addClass("boxy-content"),this.options.clone&&(e=e.clone(!0)),this.getContent().remove(),this.getInner().append(e),this._setupDefaultBehaviours(e),this.options.behaviours.call(this,e),this},moveTo:function(e,t){return this.moveToX(e).moveToY(t),this},moveToX:function(e){return typeof e=="number"?this.boxy.css({left:e}):this.centerX(),this},moveToY:function(e){return typeof e=="number"?this.boxy.css({top:e}):this.centerY(),this},centerAt:function(e,t){var n=this[this.visible?"getSize":"estimateSize"]();return typeof e=="number"&&this.moveToX(e-n[0]/2),typeof t=="number"&&this.moveToY(t-n[1]/2),this},centerAtX:function(e){return this.centerAt(e,null)},centerAtY:function(e){return this.centerAt(null,e)},center:function(e){var t=Boxy._viewport(),n=this.options.fixed?[0,0]:[t.left,t.top];return(!e||e=="x")&&this.centerAt(n[0]+t.width/2,null),(!e||e=="y")&&this.centerAt(null,n[1]+t.height/2),this},centerX:function(){return this.center("x")},centerY:function(){return this.center("y")},resize:function(e,t,n){if(!this.visible)return;var r=this._getBoundsForResize(e,t);return this.boxy.css({left:r[0],top:r[1]}),this.getContent().css({width:r[2],height:r[3]}),n&&n(this),this},tween:function(e,t,n){if(!this.visible)return;var r=this._getBoundsForResize(e,t),i=this;return this.boxy.stop().animate({left:r[0],top:r[1]}),this.getContent().stop().animate({width:r[2],height:r[3]},function(){n&&n(i)}),this},isVisible:function(){return this.visible},show:function(){if(this.visible)return;if(this.options.modal){var e=this;Boxy.resizeConfigured||(Boxy.resizeConfigured=!0,jQuery(window).resize(function(){Boxy._handleResize()})),this.modalBlackout=jQuery('<div class="boxy-modal-blackout"></div>').css({zIndex:Boxy._nextZ(),opacity:.7,width:jQuery(document).width(),height:jQuery(document).height()}).appendTo(document.body),this.toTop(),this.options.closeable&&jQuery(document.body).bind("keypress.boxy",function(t){var n=t.which||t.keyCode;n==27&&(e.hide(),jQuery(document.body).unbind("keypress.boxy"))})}return this.boxy.stop().css({opacity:1}).show(),this.visible=!0,this._fire("afterShow"),this},hide:function(e){if(!this.visible)return;var t=this;return this.options.modal&&(jQuery(document.body).unbind("keypress.boxy"),this.modalBlackout.animate({opacity:0},function(){jQuery(this).remove()})),this.boxy.stop().animate({opacity:0},300,function(){t.boxy.css({display:"none"}),t.visible=!1,t._fire("afterHide"),e&&e(t),t.options.unloadOnHide&&t.unload()}),this},toggle:function(){return this[this.visible?"hide":"show"](),this},hideAndUnload:function(e){return this.options.unloadOnHide=!0,this.hide(e),this},unload:function(){this._fire("beforeUnload"),this.boxy.remove(),this.options.actuator&&jQuery.data(this.options.actuator,"active.boxy",!1)},toTop:function(){return this.boxy.css({zIndex:Boxy._nextZ()}),this},getTitle:function(){return jQuery("> .title-bar h2",this.getInner()).html()},setTitle:function(e){return jQuery("> .title-bar h2",this.getInner()).html(e),this},_getBoundsForResize:function(e,t){var n=this.getContentSize(),r=[e-n[0],t-n[1]],i=this.getPosition();return[Math.max(i[0]-r[0]/2,0),Math.max(i[1]-r[1]/2,0),e,t]},_setupTitleBar:function(){if(this.options.title){var e=this,t=jQuery("<div class='title-bar'></div>").html("<h2>"+this.options.title+"</h2>");this.options.closeable&&t.append(jQuery("<a href='#' class='close'></a>").html(this.options.closeText)),this.options.draggable&&(t[0].onselectstart=function(){return!1},t[0].unselectable="on",t[0].style.MozUserSelect="none",Boxy.dragConfigured||(jQuery(document).mousemove(Boxy._handleDrag),Boxy.dragConfigured=!0),t.mousedown(function(t){e.toTop(),Boxy.dragging=[e,t.pageX-e.boxy[0].offsetLeft,t.pageY-e.boxy[0].offsetTop],jQuery(this).addClass("dragging")}).mouseup(function(){jQuery(this).removeClass("dragging"),Boxy.dragging=null,e._fire("afterDrop")})),this.getInner().prepend(t),this._setupDefaultBehaviours(t)}},_setupDefaultBehaviours:function(e){var t=this;this.options.clickToFront&&e.click(function(){t.toTop()}),jQuery(".close",e).click(function(){return t.hide(),!1}).mousedown(function(e){e.stopPropagation()})},_fire:function(e){this.options[e].call(this)}},function(e,t){function o(t){e.extend(!0,n,t)}function u(n,r,i){function D(e){d?(z(),U(),et(),q(e)):P()}function P(){v=r.theme?"ui":"fc",n.addClass("fc"),r.isRTL&&n.addClass("fc-rtl"),r.theme&&n.addClass("ui-widget"),d=e("<div class='fc-content' style='position:relative'/>").prependTo(n),h=new a(o,r),p=h.render(),p&&n.prepend(p),I(r.defaultView),e(window).resize(X),F()||H()}function H(){setTimeout(function(){!b.start&&F()&&q()},0)}function B(){e(window).unbind("resize",X),h.destroy(),d.remove(),n.removeClass("fc fc-rtl ui-widget")}function j(){return l.offsetWidth!==0}function F(){return e("body")[0].offsetWidth!==0}function I(t){if(!b||t!=b.name){k++,nt();var n=b,r;n?((n.beforeHide||G)(),Q(d,d.height()),n.element.hide()):Q(d,1),d.css("overflow","hidden"),b=w[t],b?b.element.show():b=w[t]=new s[t](r=T=e("<div class='fc-view fc-view-"+t+"' style='position:absolute'/>").appendTo(d),o),n&&h.deactivateButton(n.name),h.activateButton(t),q(),d.css("overflow",""),n&&Q(d,1),r||(b.afterShow||G)(),k--}}function q(e){if(j()){k++,nt(),x===t&&z();var r=!1;!b.start||e||L<b.start||L>=b.end?(b.render(L,e||0),W(!0),r=!0):b.sizeDirty?(b.clearEvents(),W(),r=!0):b.eventsDirty&&(b.clearEvents(),r=!0),b.sizeDirty=!1,b.eventsDirty=!1,$(r),E=n.outerWidth(),h.updateTitle(b.title);var i=new Date;i>=b.start&&i<b.end?h.disableButton("today"):h.enableButton("today"),k--,b.trigger("viewDisplay",l)}}function R(){U(),j()&&(z(),W(),nt(),b.clearEvents(),b.renderEvents(A),b.sizeDirty=!1)}function U(){e.each(w,function(e,t){t.sizeDirty=!0})}function z(){r.contentHeight?x=r.contentHeight:r.height?x=r.height-(p?p.height():0)-V(d):x=Math.round(d.width()/Math.max(r.aspectRatio,.5))}function W(e){k++,b.setHeight(x,e),T&&
(T.css("position","relative"),T=null),b.setWidth(d.width(),e),k--}function X(){if(!k)if(b.start){var e=++N;setTimeout(function(){e==N&&!k&&j()&&E!=(E=n.outerWidth())&&(k++,R(),b.trigger("windowResize",l),k--)},200)}else H()}function $(e){!r.lazyFetching||u(b.visStart,b.visEnd)?J():e&&Z()}function J(){f(b.visStart,b.visEnd)}function K(e){A=e,Z()}function Y(e){Z(e)}function Z(e){et(),j()&&(b.clearEvents(),b.renderEvents(A,e),b.eventsDirty=!1)}function et(){e.each(w,function(e,t){t.eventsDirty=!0})}function tt(e,n,r){b.select(e,n,r===t?!0:r)}function nt(){b&&b.unselect()}function rt(){q(-1)}function it(){q(1)}function st(){m(L,-1),q()}function ot(){m(L,1),q()}function ut(){L=new Date,q()}function at(e,t,n){e instanceof Date?L=S(e):C(L,e,t,n),q()}function ft(e,n,r){e!==t&&m(L,e),n!==t&&g(L,n),r!==t&&y(L,r),q()}function lt(){return S(L)}function ct(){return b}function ht(e,n){if(n===t)return r[e];if(e=="height"||e=="contentHeight"||e=="aspectRatio")r[e]=n,R()}function pt(e,t){if(r[e])return r[e].apply(t||l,Array.prototype.slice.call(arguments,2))}var o=this;o.options=r,o.render=D,o.destroy=B,o.refetchEvents=J,o.reportEvents=K,o.reportEventChange=Y,o.rerenderEvents=Z,o.changeView=I,o.select=tt,o.unselect=nt,o.prev=rt,o.next=it,o.prevYear=st,o.nextYear=ot,o.today=ut,o.gotoDate=at,o.incrementDate=ft,o.formatDate=function(e,t){return O(e,t,r)},o.formatDates=function(e,t,n){return M(e,t,n,r)},o.getDate=lt,o.getView=ct,o.option=ht,o.trigger=pt,c.call(o,r,i);var u=o.isFetchNeeded,f=o.fetchEvents,l=n[0],h,p,d,v,b,w={},E,x,T,N=0,k=0,L=new Date,A=[],_;C(L,r.year,r.month,r.date),r.droppable&&e(document).bind("dragstart",function(t,n){var i=t.target,s=e(i);if(!s.parents(".fc").length){var o=r.dropAccept;if(e.isFunction(o)?o.call(i,s):s.is(o))_=i,b.dragStart(_,t,n)}}).bind("dragstop",function(e,t){_&&(b.dragStop(_,e,t),_=null)})}function a(t,n){function u(){o=n.theme?"ui":"fc";var t=n.header;if(t)return i=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(f("left")).append(f("center")).append(f("right"))),i}function a(){i.remove()}function f(r){var i=e("<td class='fc-header-"+r+"'/>"),u=n.header[r];return u&&e.each(u.split(" "),function(r){r>0&&i.append("<span class='fc-header-space'/>");var u;e.each(this.split(","),function(r,a){if(a=="title")i.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),u&&u.addClass(o+"-corner-right"),u=null;else{var f;t[a]?f=t[a]:s[a]&&(f=function(){h.removeClass(o+"-state-hover"),t.changeView(a)});if(f){var l=n.theme?tt(n.buttonIcons,a):null,c=tt(n.buttonText,a),h=e("<span class='fc-button fc-button-"+a+" "+o+"-state-default'>"+"<span class='fc-button-inner'>"+"<span class='fc-button-content'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":c)+"</span>"+"<span class='fc-button-effect'><span></span></span>"+"</span>"+"</span>");h&&(h.click(function(){h.hasClass(o+"-state-disabled")||f()}).mousedown(function(){h.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-down")}).mouseup(function(){h.removeClass(o+"-state-down")}).hover(function(){h.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-hover")},function(){h.removeClass(o+"-state-hover").removeClass(o+"-state-down")}).appendTo(i),u||h.addClass(o+"-corner-left"),u=h)}}}),u&&u.addClass(o+"-corner-right")}),i}function l(e){i.find("h2").html(e)}function c(e){i.find("span.fc-button-"+e).addClass(o+"-state-active")}function h(e){i.find("span.fc-button-"+e).removeClass(o+"-state-active")}function p(e){i.find("span.fc-button-"+e).addClass(o+"-state-disabled")}function d(e){i.find("span.fc-button-"+e).removeClass(o+"-state-disabled")}var r=this;r.render=u,r.destroy=a,r.updateTitle=l,r.activateButton=c,r.deactivateButton=h,r.disableButton=p,r.enableButton=d;var i=e([]),o}function c(n,r){function w(e,t){return!p||e<p||t>d}function E(e,t){p=e,d=t,y=[];var n=++v,r=h.length;m=r;for(var i=0;i<r;i++)x(h[i],n)}function x(e,t){T(e,function(n){if(t==v){if(n){for(var r=0;r<n.length;r++)n[r].source=e,H(n[r]);y=y.concat(n)}m--,m||a(y)}})}function T(t,r){var s,o=i.sourceFetchers,u;for(s=0;s<o.length;s++){u=o[s](t,p,d,r);if(u===!0)return;if(typeof u=="object"){T(u,r);return}}var a=t.events;if(a)e.isFunction(a)?(D(),a(S(p),S(d),function(e){r(e),P()})):e.isArray(a)?r(a):r();else{var l=t.url;if(l){var c=t.success,h=t.error,v=t.complete,m=e.extend({},t.data||{}),g=ft(t.startParam,n.startParam),y=ft(t.endParam,n.endParam);g&&(m[g]=Math.round(+p/1e3)),y&&(m[y]=Math.round(+d/1e3)),D(),e.ajax(e.extend({},f,t,{data:m,success:function(t){t=t||[];var n=at(c,this,arguments);e.isArray(n)&&(t=n),r(t)},error:function(){at(h,this,arguments),r()},complete:function(){at(v,this,arguments),P()}}))}else r()}}function N(e){e=C(e),e&&(m++,x(e,v))}function C(t){e.isFunction(t)||e.isArray(t)?t={events:t}:typeof t=="string"&&(t={url:t});if(typeof t=="object")return B(t),h.push(t),t}function L(t){h=e.grep(h,function(e){return!j(e,t)}),y=e.grep(y,function(e){return!j(e.source,t)}),a(y)}function A(e){var t,n=y.length,r,i=u().defaultEventEnd,s=e.start-e._start,o=e.end?e.end-(e._end||i(e)):0;for(t=0;t<n;t++)r=y[t],r._id==e._id&&r!=e&&(r.start=new Date(+r.start+s),e.end?r.end?r.end=new Date(+r.end+o):r.end=new Date(+i(r)+o):r.end=null,r.title=e.title,r.url=e.url,r.allDay=e.allDay,r.className=e.className,r.editable=e.editable,r.color=e.color,r.backgroudColor=e.backgroudColor,r.borderColor=e.borderColor,r.textColor=e.textColor,H(r));H(e),a(y)}function O(e,t){H(e),e.source||(t&&(c.events.push(e),e.source=c),y.push(e)),a(y)}function M(t){if(!t){y=[];for(var n=0;n<h.length;n++)e.isArray(h[n].events)&&(h[n].events=[])}else{if(!e.isFunction(t)){var r=t+"";t=function(e){return e._id==r}}y=e.grep(y,t,!0);for(var n=0;n<h.length;n++)e.isArray(h[n].events)&&(h[n].events=e.grep(h[n].events,t,!0))}a(y)}function _(t){return e.isFunction(t)?e.grep(y,t):t?(t+="",e.grep(y,function(e){return e._id==t})):y}function D(){g++||o("loading",null,!0)}function P(){--g||o("loading",null,!1)}function H(e){var r=e.source||{},i=ft(r.ignoreTimezone,n.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+l++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=S(e.start=k(e.start,i)),e.end=k(e.end,i),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?S(e.end):null,e.allDay===t&&(e.allDay=ft(r.allDayDefault,n.allDayDefault)),e.className?typeof e.className=="string"&&(e.className=e.className.split(/\s+/)):e.className=[]}function B(e){e.className?typeof e.className=="string"&&(e.className=e.className.split(/\s+/)):e.className=[];var t=i.sourceNormalizers;for(var n=0;n<t.length;n++)t[n](e)}function j(e,t){return e&&t&&F(e)==F(t)}function F(e){return(typeof e=="object"?e.events||e.url:"")||e}var s=this;s.isFetchNeeded=w,s.fetchEvents=E,s.addEventSource=N,s.removeEventSource=L,s.updateEvent=A,s.renderEvent=O,s.removeEvents=M,s.clientEvents=_,s.normalizeEvent=H;var o=s.trigger,u=s.getView,a=s.reportEvents,c={events:[]},h=[c],p,d,v=0,m=0,g=0,y=[];for(var b=0;b<r.length;b++)C(r[b])}function m(e,t,n){return e.setFullYear(e.getFullYear()+t),n||E(e),e}function g(e,t,n){if(+e){var r=e.getMonth()+t,i=S(e);i.setDate(1),i.setMonth(r),e.setMonth(r),n||E(e);while(e.getMonth()!=i.getMonth())e.setDate(e.getDate()+(e<i?1:-1))}return e}function y(e,t,n){if(+e){var r=e.getDate()+t,i=S(e);i.setHours(9),i.setDate(r),e.setDate(r),n||E(e),b(e,i)}return e}function b(e,t){if(+e)while(e.getDate()!=t.getDate())e.setTime(+e+(e<t?1:-1)*d)}function w(e,t){return e.setMinutes(e.getMinutes()+t),e}function E(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function S(e,t){return t?E(new Date(+e)):new Date(+e)}function x(){var e=0,t;do t=new Date(1970,e++,1);while(t.getHours());return t}function T(e,t,n){t=t||1;while(!e.getDay()||n&&e.getDay()==1||!n&&e.getDay()==6)y(e,t);return e}function N(e,t){return Math.round((S(e,!0)-S(t,!0))/p)}function C(e,n,r,i){n!==t&&n!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(n)),r!==t&&r!=e.getMonth()&&(e.setDate(1),e.setMonth(r)),i!==t&&e.setDate(i)}function k(e,n){return typeof e=="object"?e:typeof e=="number"?new Date(e*1e3):typeof e=="string"?e.match(/^\d+(\.\d+)?$/)?new Date(parseFloat(e)*1e3):(n===t&&(n=!0),L(e,n)||(e?new Date(e):null)):null}function L(e,t){var n=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(t||!n[13]){var i=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),i.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),i.setDate(n[5])),b(r,i),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(Number("0."+n[12])*1e3),b(r,i)}else{r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?Number("0."+n[12])*1e3:0);if(n[14]){var s=Number(n[16])*60+(n[18]?Number(n[18]):0);s*=n[15]=="-"?1:-1,r=new Date(+r+s*60*1e3)}}return r}function A(e){if(typeof e=="number")return e*60;if(typeof e=="object")return e.getHours()*60+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var n=parseInt(t[1],10);return t[3]&&(n%=12,t[3].toLowerCase().charAt(0)=="p"&&(n+=12)),n*60+(t[2]?parseInt(t[2],10):0)}}function O(e,t,n){return M(e,null,t,n)}function M(e,t,r,i){i=i||n;var s=e,o=t,u,a=r.length,f,l,c,h="";for(u=0;u<a;u++){f=r.charAt(u);if(f=="'"){for(l=u+1;l<a;l++)if(r.charAt(l)=="'"){s&&(l==u+1?h+="'":h+=r.substring(u+1,l),u=l);break}}else if(f=="("){for(l=u+1;l<a;l++)if(r.charAt(l)==")"){var p=O(s,r.substring(u+1,l),i);parseInt(p.replace(/\D/,""),10)&&(h+=p),u=l;break}}else if(f=="["){for(l=u+1;l<a;l++)if(r.charAt(l)=="]"){var d=r.substring(u+1,l),p=O(s,d,i);p!=O(o,d,i)&&(h+=p),u=l;break}}else if(f=="{")s=t,o=e;else if(f=="}")s=e,o=t;else{for(l=a;l>u;l--)if(c=_[r.substring(u,l)]){s&&(h+=c(s,i)),u=l-1;break}l==u&&s&&(h+=f)}}return h}function D(e){return e.end?P(e.end,e.allDay):y(S(e.start),1)}function P(e,t){return e=S(e),t||e.getHours()||e.getMinutes()?y(e,1):E(e)}function H(e,t){return(t.msLength-e.msLength)*100+(e.event.start-t.event.start)}function B(e,t){return e.end>t.start&&e.start<t.end}function j(e,t,n,r){var i=[],s,o=e.length,u,a,f,l,c,h,p;for(s=0;s<o;s++)u=e[s],a=u.start,f=t[s],f>n&&a<r&&(a<n?(l=S(n),h=!1):(l=a,h=!0),f>r?(c=S(r),p=!1):(c=f,p=!0),i.push({event:u,start:l,end:c,isStart:h,isEnd:p,msLength:c-l}));return i.sort(H)}function F(e){var t=[],n,r=e.length,i,s,o,u;for(n=0;n<r;n++){i=e[n],s=0;for(;;){o=!1;if(t[s])for(u=0;u<t[s].length;u++)if(B(t[s][u],i)){o=!0;break}if(!o)break;s++}t[s]?t[s].push(i):t[s]=[i]}return t}function I(n,r,i){n.unbind("mouseover").mouseover(function(n){var s=n.target,o,u,a;while(s!=this)o=s,s=s.parentNode;(u=o._fci)!==t&&(o._fci=t,a=r[u],i(a.event,a.element,a),e(n.target).trigger(n)),n.stopPropagation()})}function q(t,n,r){for(var i=0,s;i<t.length;i++)s=e(t[i]),s.width(Math.max(0,n-U(s,r)))}function R(t,n,r){for(var i=0,s;i<t.length;i++)s=e(t[i]),s.height(Math.max(0,n-V(s,r)))}function U(e,t){return z(e)+X(e)+(t?W(e):0)}function z(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function W(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function X(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function V(e,t){return $(e)+K(e)+(t?J(e):0)}function $(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function J(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function K(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function Q(e,t){t=typeof t=="number"?t+"px":t,e.each(function(e,n){n.style.cssText+=";min-height:"+t+";_height:"+t})}function G(){}function Y(e,t){return e-t}function Z(e){return Math.max.apply(Math,e)}function et(e){return(e<10?"0":"")+e}function tt(e,n){if(e[n]!==t)return e[n];var r=n.split(/(?=[A-Z])/),i=r.length-1,s;for(;i>=0;i--){s=e[r[i].toLowerCase()];if(s!==t)return s}return e[""]}function nt(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function rt(e){return e.id+"/"+e.className+"/"+e.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function it(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function st(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function ot(e,t){e.each(function(e,n){n.className=n.className.replace(/^fc-\w*/,"fc-"+h[t.getDay()])})}function ut(e,t){var n=e.source||{},r=e.color,i=n.color,s=t("eventColor"),o=e.backgroundColor||r||n.backgroundColor||i||t("eventBackgroundColor")||s,u=e.borderColor||r||n.borderColor||i||t("eventBorderColor")||s,a=e.textColor||n.textColor||t("eventTextColor"),f=[];return o&&f.push("background-color:"+o),u&&f.push("border-color:"+u),a&&f.push("color:"+a),f.join(";")}function at(t,n,r){e.isFunction(t)&&(t=[t]);if(t){var i,s;for(i=0;i<t.length;i++)s=t[i].apply(n,r)||s;return s}}function ft(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==t)return arguments[e]}function lt(e,t){function o(e,t){t&&(g(e,t),e.setDate(1));var o=S(e,!0);o.setDate(1);var u=g(S(o),1),a=S(o),f=S(u),l=r("firstDay"),c=r("weekends")?0:1;c&&(T(a),T(f,-1,!0)),y(a,-((a.getDay()-Math.max(l,c)+7)%7)),y(f,(7-f.getDay()+Math.max(l,c))%7);var h=Math.round((f-a)/(p*7));r("weekMode")=="fixed"&&(y(f,(6-h)*7),h=6),n.title=s(o,r("titleFormat")),n.start=o,n.end=u,n.visStart=a,n.visEnd=f,i(6,h,c?5:7,!0)}var n=this;n.render=o,pt.call(n,e,t,"month");var r=n.opt,i=n.renderBasic,s=t.formatDate}function ct(e,t){function o(e,t){t&&y(e,t*7);var o=y(S(e),-((e.getDay()-r("firstDay")+7)%7)),u=y(S(o),7),a=S(o),f=S(u),l=r("weekends");l||(T(a),T(f,-1,!0)),n.title=s(a,y(S(f),-1),r("titleFormat")),n.start=o,n.end=u,n.visStart=a,n.visEnd=f,i(1,1,l?7:5,!1)}var n=this;n.render=o,pt.call(n,e,t,"basicWeek");var r=n.opt,i=n.renderBasic,s=t.formatDates}function ht(e,t){function o(e,t){t&&(y(e,t),r("weekends")||T(e,t<0?-1:1)),n.title=s(e,r("titleFormat")),n.start=n.visStart=S(e,!0),n.end=n.visEnd=y(S(n.start),1),i(1,1,1,!1)}var n=this;n.render=o,pt.call(n,e,t,"basicDay");var r=n.opt,i=n.renderBasic,s=t.formatDate}function pt(t,n,r){function I(e,t,n,r){k=t,L=n,R();var i=!d;i?U(e,r):u(),z(i)}function R(){_=s("isRTL"),_?(D=-1,P=L-1):(D=1,P=0),H=s("firstDay"),B=s("weekends")?0:1,j=s("theme")?"ui":"fc",F=s("columnFormat")}function U(n,r){var i,s=j+"-widget-header",o=j+"-widget-content",u,a,f;i="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for(u=0;u<L;u++)i+="<th class='fc- "+s+"'/>";i+="</tr></thead><tbody>";for(u=0;u<n;u++){i+="<tr class='fc-week"+u+"'>";for(a=0;a<L;a++)i+="<td class='fc- "+o+" fc-day"+(u*L+a)+"'>"+"<div>"+(r?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";i+="</tr>"}i+="</tbody></table>",f=e(i).appendTo(t),h=f.find("thead"),p=h.find("th"),d=f.find("tbody"),v=d.find("tr"),m=d.find("td"),g=m.filter(":first-child"),b=v.eq(0).find("div.fc-day-content div"),st(h.add(h.find("tr"))),st(v),v.eq(0).addClass("fc-first"),$(m),w=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function z(t){var n=t||k==1,r=i.start.getMonth(),s=E(new Date),o,u,a;n&&p.each(function(t,n){o=e(n),u=pt(t),o.html(c(u,F)),ot(o,u)}),m.each(function(t,i){o=e(i),u=pt(t),u.getMonth()==r?o.removeClass("fc-other-month"):o.addClass("fc-other-month"),+u==+s?o.addClass(j+"-state-highlight fc-today"):o.removeClass(j+"-state-highlight fc-today"),o.find("div.fc-day-number").text(u.getDate()),n&&ot(o,u)}),v.each(function(t,n){a=e(n),t<k?(a.show(),t==k-1?a.addClass("fc-last"):a.removeClass("fc-last")):a.hide()})}function W(t){T=t;var n=T-h.height(),r,i,o;s("weekMode")=="variable"?r=i=Math.floor(n/(k==1?2:6)):(r=Math.floor(n/k),i=n-r*(k-1)),g.each(function(t,n){t<k&&(o=e(n),Q(o.find("> div"),(t==k-1?i:r)-V(o)))})}function X(e){x=e,M.clear(),C=Math.floor(x/L),q(p.slice(0,-1),C)}function $(e){e.click(J).mousedown(l)}function J(e){if(!s("selectable")){var t=parseInt(this.className.match(/fc\-day(\d+)/)[1]),n=pt(t);o("dayClick",this,n,!0,e)}}function K(e,t,n){n&&A.build();var r=S(i.visStart),s=y(S(r),L);for(var o=0;o<k;o++){var u=new Date(Math.max(r,e)),a=new Date(Math.min(s,t));if(u<a){var f,l;_?(f=N(a,r)*D+P+1,l=N(u,r)*D+P+1):(f=N(u,r),l=N(a,r)),$(G(o,f,o,l-1))}y(r,7),y(s,7)}}function G(e,n,r,i){var s=A.rect(e,n,r,i,t);return a(s,t)}function Y(e,t){return S(e)}function Z(e,t,n){K(e,y(S(t),1),!0)}function et(){f()}function tt(e,t,n){var r=lt(e),i=m[r.row*L+r.col];o("dayClick",i,e,t,n)}function nt(e,t,n){O.start(function(e){f(),e&&G(e.row,e.col,e.row,e.col)},t)}function rt(e,t,n){var r=O.stop();f();if(r){var i=ct(r);o("drop",e,i,!0,t,n)}}function ut(e){return S(e.start)}function at(e){return M.left(e)}function ft(e){return M.right(e)}function lt(e){return{row:Math.floor(N(e,i.visStart)/7),col:vt(e.getDay())}}function ct(e){return ht(e.row,e.col)}function ht(e,t){return y(S(i.visStart),e*7+t*D+P)}function pt(e){return ht(Math.floor(e/L),e%L)}function vt(e){return(e-Math.max(H,B)+L)%L*D+P}function mt(e){return v.eq(e)}function gt(e){return{left:0,right:x}}var i=this;i.renderBasic=I,i.setHeight=W,i.setWidth=X,i.renderDayOverlay=K,i.defaultSelectionEnd=Y,i.renderSelection=Z,i.clearSelection=et,i.reportDayClick=tt,i.dragStart=nt,i.dragStop=rt,i.defaultEventEnd=ut,i.getHoverListener=function(){return O},i.colContentLeft=at,i.colContentRight=ft,i.dayOfWeekCol=vt,i.dateCell=lt,i.cellDate=ct,i.cellIsAllDay=function(){return!0},i.allDayRow=mt,i.allDayBounds=gt,i.getRowCnt=function(){return k},i.getColCnt=function(){return L},i.getColWidth=function(){return C},i.getDaySegmentContainer=function(){return w},wt.call(i,t,n,r),xt.call(i),St.call(i),dt.call(i);var s=i.opt,o=i.trigger,u=i.clearEvents,a=i.renderOverlay,f=i.clearOverlays,l=i.daySelectionMousedown,c=n.formatDate,h,p,d,v,m,g,b,w,x,T,C,k,L,A,O,M,_,D,P,H,B,j,F;it(t.addClass("fc-grid")),A=new Tt(function(t,n){var r,i,s;p.each(function(t,o){r=e(o),i=r.offset().left,t&&(s[1]=i),s=[i],n[t]=s}),s[1]=i+r.outerWidth(),v.each(function(n,o){n<k&&(r=e(o),i=r.offset().top,n&&(s[1]=i),s=[i],t[n]=s)}),s[1]=i+r.outerHeight()}),O=new Nt(A),M=new kt(function(e){return b.eq(e)})}function dt(){function E(e,t){o(e),b(T(e),t)}function x(){u(),h().empty()}function T(n){var r=m(),i=g(),s=S(t.visStart),o=y(S(s),i),u=e.map(n,D),a,f,l,c,h,p,d=[];for(a=0;a<r;a++){f=F(j(n,u,s,o));for(l=0;l<f.length;l++){c=f[l];for(h=0;h<c.length;h++)p=c[h],p.row=a,p.level=l,d.push(p)}y(s,7),y(o,7)}return d}function N(e,t,n){i(e)&&C(e,t),n.isEnd&&s(e)&&w(e,t,n),a(e,t)}function C(e,t){var i=p(),s;t.draggable({zIndex:9,delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(o,u){r("eventDragStart",t,e,o,u),l(e,t),i.start(function(r,i,o,u){t.draggable("option","revert",!r||!o&&!u),v(),r?(s=o*7+u*(n("isRTL")?-1:1),d(y(S(e.start),s),y(D(e),s))):s=0},o,"drag")},stop:function(n,o){i.stop(),v(),r("eventDragStop",t,e,n,o),s?c(this,e,s,0,e.allDay,n,o):(t.css("filter",""),f(e,t))}})}var t=this;t.renderEvents=E,t.compileDaySegs=T,t.clearEvents=x,t.bindDaySeg=N,Et.call(t);var n=t.opt,r=t.trigger,i=t.isEventDraggable,s=t.isEventResizable,o=t.reportEvents,u=t.reportEventClear,a=t.eventElementHandlers,f=t.showEvents,l=t.hideEvents,c=t.eventDrop,h=t.getDaySegmentContainer,p=t.getHoverListener,d=t.renderDayOverlay,v=t.clearOverlays,m=t.getRowCnt,g=t.getColCnt,b=t.renderDaySegs,w=t.resizableDayEvent}function vt(e,t){function o(e,t){t&&y(e,t*7);var o=y(S(e),-((e.getDay()-r("firstDay")+7)%7)),u=y(S(o),7),a=S(o),f=S(u),l=r("weekends");l||(T(a),T(f,-1,!0)),n.title=s(a,y(S(f),-1),r("titleFormat")),n.start=o,n.end=u,n.visStart=a,n.visEnd=f,i(l?7:5)}var n=this;n.render=o,gt.call(n,e,t,"agendaWeek");var r=n.opt,i=n.renderAgenda,s=t.formatDates}function mt(e,t){function o(e,t){t&&(y(e,t),r("weekends")||T(e,t<0?-1:1));var o=S(e,!0),u=y(S(o),1);n.title=s(e,r("titleFormat")),n.start=n.visStart=o,n.end=n.visEnd=u,i(1)}var n=this;n.render=o,gt.call(n,e,t,"agendaDay");var r=n.opt,i=n.renderAgenda,s=t.formatDate}function gt(n,r,i){function bt(e){et=e,Et(),m?a():Ct(),Lt()}function Et(){ft=o("theme")?"ui":"fc",ct=o("weekends")?0:1,lt=o("firstDay"),(ht=o("isRTL"))?(pt=-1,dt=et-1):(pt=1,dt=0),vt=A(o("minTime")),mt=A(o("maxTime")),gt=o("columnFormat")}function Ct(){var t=ft+"-widget-header",r=ft+"-widget-content",i,s,u,a,f,l=o("slotMinutes")%15==0;i="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+t+"'>&nbsp;</th>";for(s=0;s<et;s++)i+="<th class='fc- fc-col"+s+" "+t+"'/>";i+="<th class='fc-agenda-gutter "+t+"'>&nbsp;</th>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<th class='fc-agenda-axis "+t+"'>&nbsp;</th>";for(s=0;s<et;s++)i+="<td class='fc- fc-col"+s+" "+r+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";i+="<td class='fc-agenda-gutter "+r+"'>&nbsp;</td>"+"</tr>"+"</tbody>"+"</table>",m=e(i).appendTo(n),g=m.find("thead"),b=g.find("th").slice(1,-1),T=m.find("tbody"),C=T.find("td").slice(0,-1),k=C.find("div.fc-day-content div"),L=C.eq(0),O=L.find("> div"),st(g.add(g.find("tr"))),st(T.add(T.find("tr"))),U=g.find("th:first"),z=m.find(".fc-agenda-gutter"),M=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),o("allDaySlot")?(_=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(M),i="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+t+" fc-agenda-axis'>"+o("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+t+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",D=e(i).appendTo(M),P=D.find("tr"),Pt(P.find("td")),U=U.add(D.find("th:first")),z=z.add(D.find("th.fc-agenda-gutter")),M.append("<div class='fc-agenda-divider "+t+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):_=e([]),H=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(M),B=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(H),j=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(B),i="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",u=x(),a=w(S(u),mt),w(u,vt),tt=0;for(s=0;u<a;s++)f=u.getMinutes(),i+="<tr class='fc-slot"+s+" "+(f?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+t+"'>"+(!l||!f?v(u,o("axisFormat")):"&nbsp;")+"</th>"+"<td class='"+r+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",w(u,o("slotMinutes")),tt++;i+="</tbody></table>",F=e(i).appendTo(B),I=F.find("div:first"),Ht(F.find("td")),U=U.add(F.find("th:first"))}function Lt(){var e,t,n,r,i=E(new Date);for(e=0;e<et;e++)r=Wt(e),t=b.eq(e),t.html(v(r,gt)),n=C.eq(e),+r==+i?n.addClass(ft+"-state-highlight fc-today"):n.removeClass(ft+"-state-highlight fc-today"),ot(t.add(n),r)}function At(e,n){e===t&&(e=$),$=e,at={};var r=T.position().top,i=H.position().top,s=Math.min(e-r,F.height()+i+1);O.height(s-V(L)),M.css("top",r),H.height(s-i-1),G=I.height()+1,n&&Mt()}function Ot(t){X=t,ut.clear(),J=0,q(U.width("").each(function(t,n){J=Math.max(J,e(n).outerWidth())}),J);var n=H[0].clientWidth;Q=H.width()-n,Q?(q(z,Q),z.show().prev().removeClass("fc-last")):z.hide().prev().addClass("fc-last"),K=Math.floor((n-J)/et),q(b.slice(0,-1),K)}function Mt(){function r(){H.scrollTop(n)}var e=x(),t=S(e);t.setHours(o("firstHour"));var n=$t(e,t)+1;r(),setTimeout(r,0)}function _t(){Z=H.scrollTop()}function Dt(){H.scrollTop(Z)}function Pt(e){e.click(Bt).mousedown(p)}function Ht(e){e.click(Bt).mousedown(tn)}function Bt(e){if(!o("selectable")){var t=Math.min(et-1,Math.floor((e.pageX-m.offset().left-J)/K)),n=Wt(t),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var i=parseInt(r[1])*o("slotMinutes"),s=Math.floor(i/60);n.setHours(s),n.setMinutes(i%60+vt),u("dayClick",C[t],n,!1,e)}else u("dayClick",C[t],n,!0,e)}}function jt(e,t,n){n&&nt.build();var r=S(s.visStart),i,o;ht?(i=N(t,r)*pt+dt+1,o=N(e,r)*pt+dt+1):(i=N(e,r),o=N(t,r)),i=Math.max(0,i),o=Math.min(et,o),i<o&&Pt(Ft(0,i,0,o-1))}function Ft(e,t,n,r){var i=nt.rect(e,t,n,r,M);return f(i,M)}function It(e,t){var n=S(s.visStart),r=y(S(n),1);for(var i=0;i<et;i++){var o=new Date(Math.max(n,e)),u=new Date(Math.min(r,t));if(o<u){var a=i*pt+dt,l=nt.rect(0,a,0,a,B),c=$t(n,o),h=$t(n,u);l.top=c,l.height=h-c,Ht(f(l,B))}y(n,1),y(r,1)}}function qt(e){return ut.left(e)}function Rt(e){return ut.right(e)}function Ut(e){return{row:Math.floor(N(e,s.visStart)/7),col:Vt(e.getDay())}}function zt(e){var t=Wt(e.col),n=e.row;return o("allDaySlot")&&n--,n>=0&&w(t,vt+n*o("slotMinutes")),t}function Wt(e){return y(S(s.visStart),e*pt+dt)}function Xt(e){return o("allDaySlot")&&!e.row}function Vt(e){return(e-Math.max(lt,ct)+et)%et*pt+dt}function $t(e,n){e=S(e,!0);if(n<w(S(e),vt))return 0;if(n>=w(S(e),mt))return F.height();var r=o("slotMinutes"),i=n.getHours()*60+n.getMinutes()-vt,s=Math.floor(i/r),u=at[s];return u===t&&(u=at[s]=F.find("tr:eq("+s+") td div")[0].offsetTop),Math.max(0,Math.round(u-1+G*(i%r/r)))}function Jt(){return{left:J,right:X-Q}}function Kt(e){return P}function Qt(e){var t=S(e.start);return e.allDay?t:w(t,o("defaultEventMinutes"))}function Gt(e,t){return t?S(e):w(S(e),o("slotMinutes"))}function Yt(e,t,n){n?o("allDaySlot")&&jt(e,y(S(t),1),!0):Zt(e,t)}function Zt(t,n){var r=o("selectHelper");nt.build();if(r){var i=N(t,s.visStart)*pt+dt;if(i>=0&&i<et){var u=nt.rect(0,i,0,i,B),a=$t(t,t),f=$t(t,n);if(f>a){u.top=a,u.height=f-a,u.left+=2,u.width-=5;if(e.isFunction(r)){var l=r(t,n);l&&(u.position="absolute",u.zIndex=8,W=e(l).css(u).appendTo(B))}else u.isStart=!0,u.isEnd=!0,W=e(d({title:"",start:t,end:n,className:["fc-select-helper"],editable:!1},u)),W.css("opacity",o("dragOpacity"));W&&(Ht(W),B.append(W),q(W,u.width,!0),R(W,u.height,!0))}}}else It(t,n)}function en(){l(),W&&(W.remove(),W=null)}function tn(t){if(t.which==1&&o("selectable")){h(t);var n;rt.start(function(e,t){en();if(e&&e.col==t.col&&!Xt(e)){var r=zt(t),i=zt(e);n=[r,w(S(r),o("slotMinutes")),i,w(S(i),o("slotMinutes"))].sort(Y),Zt(n[0],n[3])}else n=null},t),e(document).one("mouseup",function(e){rt.stop(),n&&(+n[0]==+n[1]&&nn(n[0],!1,e),c(n[0],n[3],!1,e))})}}function nn(e,t,n){u("dayClick",C[Vt(e.getDay())],e,t,n)}function rn(e,t,n){rt.start(function(e){l();if(e)if(Xt(e))Ft(e.row,e.col,e.row,e.col);else{var t=zt(e),n=w(S(t),o("defaultEventMinutes"));It(t,n)}},t)}function sn(e,t,n){var r=rt.stop();l(),r&&u("drop",e,zt(r),Xt(r),t,n)}var s=this;s.renderAgenda=bt,s.setWidth=Ot,s.setHeight=At,s.beforeHide=_t,s.afterShow=Dt,s.defaultEventEnd=Qt,s.timePosition=$t,s.dayOfWeekCol=Vt,s.dateCell=Ut,s.cellDate=zt,s.cellIsAllDay=Xt,s.allDayRow=Kt,s.allDayBounds=Jt,s.getHoverListener=function(){return rt},s.colContentLeft=qt,s.colContentRight=Rt,s.getDaySegmentContainer=function(){return _},s.getSlotSegmentContainer=function(){return j},s.getMinMinute=function(){return vt},s.getMaxMinute=function(){return mt},s.getBodyContent=function(){return B},s.getRowCnt=function(){return 1},s.getColCnt=function(){return et},s.getColWidth=function(){return K},s.getSlotHeight=function(){return G},s.defaultSelectionEnd=Gt,s.renderDayOverlay=jt,s.renderSelection=Yt,s.clearSelection=en,s.reportDayClick=nn,s.dragStart=rn,s.dragStop=sn,wt.call(s,n,r,i),xt.call(s),St.call(s),yt.call(s);var o=s.opt,u=s.trigger,a=s.clearEvents,f=s.renderOverlay,l=s.clearOverlays,c=s.reportSelection,h=s.unselect,p=s.daySelectionMousedown,d=s.slotSegHtml,v=r.formatDate,m,g,b,T,C,k,L,O,M,_,D,P,H,B,j,F,I,U,z,W,X,$,J,K,Q,G,Z,et,tt,nt,rt,ut,at={},ft,lt,ct,ht,pt,dt,vt,mt,gt;it(n.addClass("fc-agenda")),nt=new Tt(function(t,n){function l(e){return Math.max(a,Math.min(f,e))}var r,i,s;b.each(function(t,o){r=e(o),i=r.offset().left,t&&(s[1]=i),s=[i],n[t]=s}),s[1]=i+r.outerWidth(),o("allDaySlot")&&(r=P,i=r.offset().top,t[0]=[i,i+r.outerHeight()]);var u=B.offset().top,a=H.offset().top,f=a+H.outerHeight();for(var c=0;c<tt;c++)t.push([l(u+G*c),l(u+G*(c+1))])}),rt=new Nt(nt),ut=new kt(function(e){return k.eq(e)})}function yt(){function $(e,t){a(e);var n,i=e.length,s=[],o=[];for(n=0;n<i;n++)e[n].allDay?s.push(e[n]):o.push(e[n]);r("allDaySlot")&&(T(K(s),t),c()),Y(Q(o),t)}function J(){f(),h().empty(),p().empty()}function K(t){var r=F(j(t,e.map(t,D),n.visStart,n.visEnd)),i,s=r.length,o,u,a,f=[];for(i=0;i<s;i++){o=r[i];for(u=0;u<o.length;u++)a=o[u],a.row=0,a.level=i,f.push(a)}return f}function Q(t){var r=C(),i=g(),s=m(),o=w(S(n.visStart),i),u=e.map(t,G),a,f,l,c,h,p,d=[];for(a=0;a<r;a++){f=F(j(t,u,o,w(S(o),s-i))),bt(f);for(l=0;l<f.length;l++){c=f[l];for(h=0;h<c.length;h++)p=c[h],p.col=a,p.level=l,d.push(p)}y(o,1,!0)}return d}function G(e){return e.end?S(e.end):w(S(e.start),r("defaultEventMinutes"))}function Y(n,s){var o,u=n.length,a,f,l,c,h,d,v,m,g,y,w,S,T="",N,k,L,A={},M={},_,D,P,H,B=p(),j,F,q,R=C();(j=r("isRTL"))?(F=-1,q=R-1):(F=1,q=0);for(o=0;o<u;o++)a=n[o],f=a.event,c=b(a.start,a.start),h=b(a.start,a.end),d=a.col,v=a.level,m=a.forward||0,g=E(d*F+q),y=x(d*F+q)-g,y=Math.min(y-6,y*.95),v?w=y/(v+m+1):m?w=(y/(m+1)-6)*2:w=y,S=g+y/(v+m+1)*v*F+(j?y-w:0),a.top=c,a.left=S,a.outerWidth=w,a.outerHeight=h-c,T+=Z(f,a);B[0].innerHTML=T,N=B.children();for(o=0;o<u;o++)a=n[o],f=a.event,k=e(N[o]),L=i("eventRender",f,f,k),L===!1?k.remove():(L&&L!==!0&&(k.remove(),k=e(L).css({position:"absolute",top:a.top,left:a.left}).appendTo(B)),a.element=k,f._id===s?tt(f,k,a):k[0]._fci=o,O(f,k));I(B,n,tt);for(o=0;o<u;o++){a=n[o];if(k=a.element)D=A[_=a.key=rt(k[0])],a.vsides=D===t?A[_]=V(k,!0):D,D=M[_],a.hsides=D===t?M[_]=U(k,!0):D,P=k.find("div.fc-event-content"),P.length&&(a.contentTop=P[0].offsetTop)}for(o=0;o<u;o++){a=n[o];if(k=a.element)k[0].style.width=Math.max(0,a.outerWidth-a.hsides)+"px",H=Math.max(0,a.outerHeight-a.vsides),k[0].style.height=H+"px",f=a.event,a.contentTop!==t&&H-a.contentTop<10&&(k.find("div.fc-event-time").text(W(f.start,r("timeFormat"))+" - "+f.title),k.find("div.fc-event-title").remove()),i("eventAfterRender",f,f,k)}}function Z(e,t){var n="<",i=e.url,u=ut(e,r),a=u?" style='"+u+"'":"",f=["fc-event","fc-event-skin","fc-event-vert"];return s(e)&&f.push("fc-event-draggable"),t.isStart&&f.push("fc-corner-top"),t.isEnd&&f.push("fc-corner-bottom"),f=f.concat(e.className),e.source&&(f=f.concat(e.source.className||[])),i?n+="a href='"+nt(e.url)+"'":n+="div",n+=" class='"+f.join(" ")+"'"+" style='position:absolute;z-index:8;top:"+t.top+"px;left:"+t.left+"px;"+u+"'"+">"+"<div class='fc-event-inner fc-event-skin'"+a+">"+"<div class='fc-event-head fc-event-skin'"+a+">"+"<div class='fc-event-time'>"+nt(X(e.start,e.end,r("timeFormat")))+"</div>"+"</div>"+"<div class='fc-event-content'>"+"<div class='fc-event-title'>"+nt(e.title)+"</div>"+"</div>"+"<div class='fc-event-bg'></div>"+"</div>",t.isEnd&&o(e)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(i?"a":"div")+">",n}function et(e,t,n){s(e)&&it(e,t,n.isStart),n.isEnd&&o(e)&&N(e,t,n),l(e,t)}function tt(e,t,n){var r=t.find("div.fc-event-time");s(e)&&st(e,t,r),n.isEnd&&o(e)&&ot(e,t,r),l(e,t)}function it(e,t,n){function m(){u||(t.width(s).height("").draggable("option","grid",null),u=!0)}var s,o,u=!0,a,f=r("isRTL")?-1:1,l=d(),c=k(),h=L(),p=g();t.draggable({zIndex:9,opacity:r("dragOpacity","month"),revertDuration:r("dragRevertDuration"),start:function(p,d){i("eventDragStart",t,e,p,d),_(e,t),s=t.width(),l.start(function(i,s,l,p){q(),i?(o=!1,a=p*f,i.row?n?u&&(t.width(c-10),R(t,h*Math.round((e.end?(e.end-e.start)/v:r("defaultEventMinutes"))/r("slotMinutes"))),t.draggable("option","grid",[c,1]),u=!1):o=!0:(B(y(S(e.start),a),y(D(e),a)),m()),o=o||u&&!a):(m(),o=!0),t.draggable("option","revert",o)},p,"drag")},stop:function(n,s){l.stop(),q(),i("eventDragStop",t,e,n,s);if(o)m(),t.css("filter",""),M(e,t);else{var f=0;u||(f=Math.round((t.offset().top-A().offset().top)/h)*r("slotMinutes")+p-(e.start.getHours()*60+e.start.getMinutes())),P(this,e,a,f,u,n,s)}}})}function st(e,t,n){function m(t){var i=w(S(e.start),t),s;e.end&&(s=w(S(e.end),t)),n.text(X(i,s,r("timeFormat")))}function g(){o&&(n.css("display",""),t.draggable("option","grid",[p,v]),o=!1)}var s,o=!1,u,a,f,l=r("isRTL")?-1:1,c=d(),h=C(),p=k(),v=L();t.draggable({zIndex:9,scroll:!1,grid:[p,v],axis:h==1?"y":!1,opacity:r("dragOpacity"),revertDuration:r("dragRevertDuration"),start:function(h,p){i("eventDragStart",t,e,h,p),_(e,t),s=t.position(),a=f=0,c.start(function(i,s,a,f){t.draggable("option","revert",!i),q(),i&&(u=f*l,r("allDaySlot")&&!i.row?(o||(o=!0,n.
hide(),t.draggable("option","grid",null)),B(y(S(e.start),u),y(D(e),u))):g())},h,"drag")},drag:function(e,t){a=Math.round((t.position.top-s.top)/v)*r("slotMinutes"),a!=f&&(o||m(a),f=a)},stop:function(n,r){var f=c.stop();q(),i("eventDragStop",t,e,n,r),f&&(u||a||o)?P(this,e,u,o?0:a,o,n,r):(g(),t.css("filter",""),t.css(s),m(0),M(e,t))}})}function ot(e,t,n){var s,o,a=L();t.resizable({handles:{s:"div.ui-resizable-s"},grid:a,start:function(n,r){s=o=0,_(e,t),t.css("z-index",9),i("eventResizeStart",this,e,n,r)},resize:function(i,f){s=Math.round((Math.max(a,t.height())-f.originalSize.height)/a),s!=o&&(n.text(X(e.start,!s&&!e.end?null:w(u(e),r("slotMinutes")*s),r("timeFormat"))),o=s)},stop:function(n,o){i("eventResizeStop",this,e,n,o),s?H(this,e,0,r("slotMinutes")*s,n,o):(t.css("z-index",8),M(e,t))}})}var n=this;n.renderEvents=$,n.compileDaySegs=K,n.clearEvents=J,n.slotSegHtml=Z,n.bindDaySeg=et,Et.call(n);var r=n.opt,i=n.trigger,s=n.isEventDraggable,o=n.isEventResizable,u=n.eventEnd,a=n.reportEvents,f=n.reportEventClear,l=n.eventElementHandlers,c=n.setHeight,h=n.getDaySegmentContainer,p=n.getSlotSegmentContainer,d=n.getHoverListener,m=n.getMaxMinute,g=n.getMinMinute,b=n.timePosition,E=n.colContentLeft,x=n.colContentRight,T=n.renderDaySegs,N=n.resizableDayEvent,C=n.getColCnt,k=n.getColWidth,L=n.getSlotHeight,A=n.getBodyContent,O=n.reportEventElement,M=n.showEvents,_=n.hideEvents,P=n.eventDrop,H=n.eventResize,B=n.renderDayOverlay,q=n.clearOverlays,z=n.calendar,W=z.formatDate,X=z.formatDates}function bt(e){var t,n,r,i,s,o;for(t=e.length-1;t>0;t--){i=e[t];for(n=0;n<i.length;n++){s=i[n];for(r=0;r<e[t-1].length;r++)o=e[t-1][r],B(s,o)&&(o.forward=Math.max(o.forward||0,(s.forward||0)+1))}}}function wt(e,n,r){function h(e,t){var n=c[e];return typeof n=="object"?tt(n,t||r):n}function p(e,t){return n.trigger.apply(n,[e,t||i].concat(Array.prototype.slice.call(arguments,2),[i]))}function d(e){return m(e)&&!h("disableDragging")}function v(e){return m(e)&&!h("disableResizing")}function m(e){return ft(e.editable,(e.source||{}).editable,h("editable"))}function g(e){a={};var t,n=e.length,r;for(t=0;t<n;t++)r=e[t],a[r._id]?a[r._id].push(r):a[r._id]=[r]}function b(e){return e.end?S(e.end):s(e)}function E(e,t){f.push(t),l[e._id]?l[e._id].push(t):l[e._id]=[t]}function x(){f=[],l={}}function T(e,t){t.click(function(n){if(!t.hasClass("ui-draggable-dragging")&&!t.hasClass("ui-resizable-resizing"))return p("eventClick",this,e,n)}).hover(function(t){p("eventMouseover",this,e,t)},function(t){p("eventMouseout",this,e,t)})}function N(e,t){k(e,t,"show")}function C(e,t){k(e,t,"hide")}function k(e,t,n){var r=l[e._id],i,s=r.length;for(i=0;i<s;i++)(!t||r[i][0]!=t[0])&&r[i][n]()}function L(e,t,n,r,i,s,o){var f=t.allDay,l=t._id;O(a[l],n,r,i),p("eventDrop",e,t,n,r,i,function(){O(a[l],-n,-r,f),u(l)},s,o),u(l)}function A(e,t,n,r,i,s){var o=t._id;M(a[o],n,r),p("eventResize",e,t,n,r,function(){M(a[o],-n,-r),u(o)},i,s),u(o)}function O(e,n,r,i){r=r||0;for(var s,u=e.length,a=0;a<u;a++)s=e[a],i!==t&&(s.allDay=i),w(y(s.start,n,!0),r),s.end&&(s.end=w(y(s.end,n,!0),r)),o(s,c)}function M(e,t,n){n=n||0;for(var r,i=e.length,s=0;s<i;s++)r=e[s],r.end=w(y(b(r),t,!0),n),o(r,c)}var i=this;i.element=e,i.calendar=n,i.name=r,i.opt=h,i.trigger=p,i.isEventDraggable=d,i.isEventResizable=v,i.reportEvents=g,i.eventEnd=b,i.reportEventElement=E,i.reportEventClear=x,i.eventElementHandlers=T,i.showEvents=N,i.hideEvents=C,i.eventDrop=L,i.eventResize=A;var s=i.defaultEventEnd,o=n.normalizeEvent,u=n.reportEventChange,a={},f=[],l={},c=n.options}function Et(){function O(e,t){var n=T(),r,i=h(),s=p(),o=0,u,a,f,l,c=e.length,d,v,m;n[0].innerHTML=_(e),D(e,n.children()),P(e),H(e,n,t),B(e),j(e),F(e),r=q();for(u=0;u<i;u++){a=0,f=[];for(l=0;l<s;l++)f[l]=0;while(o<c&&(d=e[o]).row==u){v=Z(f.slice(d.startCol,d.endCol)),d.top=v,v+=d.outerHeight;for(m=d.startCol;m<d.endCol;m++)f[m]=v;o++}r[u].height(Z(f))}z(e,R(r))}function M(t,n,r){var i=e("<div/>"),s,o=T(),u,a=t.length,f;i[0].innerHTML=_(t),s=i.children(),o.append(s),D(t,s),B(t),j(t),F(t),z(t,R(q())),s=[];for(u=0;u<a;u++)f=t[u].element,f&&(t[u].row===n&&f.css("top",r),s.push(f[0]));return e(s)}function _(e){var t=r("isRTL"),n,i=e.length,u,a,f,l,c=m(),h=c.left,p=c.right,d,v,y,E,S,x="";for(n=0;n<i;n++)u=e[n],a=u.event,l=["fc-event","fc-event-skin","fc-event-hori"],s(a)&&l.push("fc-event-draggable"),t?(u.isStart&&l.push("fc-corner-right"),u.isEnd&&l.push("fc-corner-left"),d=w(u.end.getDay()-1),v=w(u.start.getDay()),y=u.isEnd?g(d):h,E=u.isStart?b(v):p):(u.isStart&&l.push("fc-corner-left"),u.isEnd&&l.push("fc-corner-right"),d=w(u.start.getDay()),v=w(u.end.getDay()-1),y=u.isStart?g(d):h,E=u.isEnd?b(v):p),l=l.concat(a.className),a.source&&(l=l.concat(a.source.className||[])),f=a.url,S=ut(a,r),f?x+="<a href='"+nt(f)+"'":x+="<div",x+=" class='"+l.join(" ")+"'"+" style='position:absolute;z-index:8;left:"+y+"px;"+S+"'"+">"+"<div"+" class='fc-event-inner fc-event-skin'"+(S?" style='"+S+"'":"")+">",!a.allDay&&u.isStart&&(x+="<span class='fc-event-time'>"+nt(C(a.start,a.end,r("timeFormat")))+"</span>"),x+="<span class='fc-event-title'>"+nt(a.title)+"</span>"+"</div>",u.isEnd&&o(a)&&(x+="<div class='ui-resizable-handle ui-resizable-"+(t?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),x+="</"+(f?"a":"div")+">",u.left=y,u.outerWidth=E-y,u.startCol=d,u.endCol=v+1;return x}function D(t,n){var r,s=t.length,o,u,a,f;for(r=0;r<s;r++)o=t[r],u=o.event,a=e(n[r]),f=i("eventRender",u,u,a),f===!1?a.remove():(f&&f!==!0&&(f=e(f).css({position:"absolute",left:o.left}),a.replaceWith(f),a=f),o.element=a)}function P(e){var t,n=e.length,r,i;for(t=0;t<n;t++)r=e[t],i=r.element,i&&a(r.event,i)}function H(e,t,n){var r,i=e.length,s,o,u;for(r=0;r<i;r++)s=e[r],o=s.element,o&&(u=s.event,u._id===n?N(u,o,s):o[0]._fci=r);I(t,e,N)}function B(e){var n,r=e.length,i,s,o,u,a={};for(n=0;n<r;n++)i=e[n],s=i.element,s&&(o=i.key=rt(s[0]),u=a[o],u===t&&(u=a[o]=U(s,!0)),i.hsides=u)}function j(e){var t,n=e.length,r,i;for(t=0;t<n;t++)r=e[t],i=r.element,i&&(i[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px")}function F(e){var n,r=e.length,i,s,o,u,a={};for(n=0;n<r;n++)i=e[n],s=i.element,s&&(o=i.key,u=a[o],u===t&&(u=a[o]=J(s)),i.outerHeight=s[0].offsetHeight+u)}function q(){var e,t=h(),n=[];for(e=0;e<t;e++)n[e]=v(e).find("td:first div.fc-day-content > div");return n}function R(e){var t,n=e.length,r=[];for(t=0;t<n;t++)r[t]=e[t][0].offsetTop;return r}function z(e,t){var n,r=e.length,s,o,u;for(n=0;n<r;n++)s=e[n],o=s.element,o&&(o[0].style.top=t[s.row]+(s.top||0)+"px",u=s.event,i("eventAfterRender",u,u,o))}function W(t,s,o){var a=r("isRTL"),d=a?"w":"e",v=s.find("div.ui-resizable-"+d),m=!1;it(s),s.mousedown(function(e){e.preventDefault()}).click(function(e){m&&(e.preventDefault(),e.stopImmediatePropagation())}),v.mousedown(function(r){function P(n){i("eventResizeStop",this,t,n),e("body").css("cursor",""),v.stop(),L(),C&&c(this,t,C,0,n),setTimeout(function(){m=!1},0)}if(r.which!=1)return;m=!0;var v=n.getHoverListener(),g=h(),b=p(),w=a?-1:1,T=a?b-1:0,N=s.css("top"),C,O,_=e.extend({},t),D=E(t.start);A(),e("body").css("cursor",d+"-resize").one("mouseup",P),i("eventResizeStart",this,t,r),v.start(function(e,n){if(e){var r=Math.max(D.row,e.row),i=e.col;g==1&&(r=0),r==D.row&&(a?i=Math.min(D.col,i):i=Math.max(D.col,i)),C=r*7+i*w+T-(n.row*7+n.col*w+T);var s=y(u(t),C,!0);if(C){_.end=s;var c=O;O=M(x([_]),o.row,N),O.find("*").css("cursor",d+"-resize"),c&&c.remove(),l(t)}else O&&(f(t),O.remove(),O=null);L(),k(t.start,y(S(s),1))}},r)})}var n=this;n.renderDaySegs=O,n.resizableDayEvent=W;var r=n.opt,i=n.trigger,s=n.isEventDraggable,o=n.isEventResizable,u=n.eventEnd,a=n.reportEventElement,f=n.showEvents,l=n.hideEvents,c=n.eventResize,h=n.getRowCnt,p=n.getColCnt,d=n.getColWidth,v=n.allDayRow,m=n.allDayBounds,g=n.colContentLeft,b=n.colContentRight,w=n.dayOfWeekCol,E=n.dateCell,x=n.compileDaySegs,T=n.getDaySegmentContainer,N=n.bindDaySeg,C=n.calendar.formatDates,k=n.renderDayOverlay,L=n.clearOverlays,A=n.clearSelection}function St(){function a(e,t,n){f(),t||(t=i(e,n)),s(e,t,n),l(e,t,n)}function f(e){u&&(u=!1,o(),r("unselect",null,e))}function l(e,t,n,i){u=!0,r("select",null,e,t,n,i)}function c(r){var i=t.cellDate,u=t.cellIsAllDay,a=t.getHoverListener(),c=t.reportDayClick;if(r.which==1&&n("selectable")){f(r);var h=this,p;a.start(function(e,t){o(),e&&u(e)?(p=[i(t),i(e)].sort(Y),s(p[0],p[1],!0)):p=null},r),e(document).one("mouseup",function(e){a.stop(),p&&(+p[0]==+p[1]&&c(p[0],!0,e),l(p[0],p[1],!0,e))})}}var t=this;t.select=a,t.unselect=f,t.reportSelection=l,t.daySelectionMousedown=c;var n=t.opt,r=t.trigger,i=t.defaultSelectionEnd,s=t.renderSelection,o=t.clearSelection,u=!1;n("selectable")&&n("unselectAuto")&&e(document).mousedown(function(t){var r=n("unselectCancel");if(r&&e(t.target).parents(r).length)return;f(t)})}function xt(){function i(t,i){var s=r.shift();return s||(s=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),s[0].parentNode!=i[0]&&s.appendTo(i),n.push(s.css(t).show()),s}function s(){var e;while(e=n.shift())r.push(e.hide().unbind())}var t=this;t.renderOverlay=i,t.clearOverlays=s;var n=[],r=[]}function Tt(e){var t=this,n,r;t.build=function(){n=[],r=[],e(n,r)},t.cell=function(e,t){var i=n.length,s=r.length,o,u=-1,a=-1;for(o=0;o<i;o++)if(t>=n[o][0]&&t<n[o][1]){u=o;break}for(o=0;o<s;o++)if(e>=r[o][0]&&e<r[o][1]){a=o;break}return u>=0&&a>=0?{row:u,col:a}:null},t.rect=function(e,t,i,s,o){var u=o.offset();return{top:n[e][0]-u.top,left:r[t][0]-u.left,width:r[s][1]-r[t][0],height:n[i][1]-n[e][0]}}}function Nt(t){function u(e){Ct(e);var n=t.cell(e.pageX,e.pageY);if(!n!=!o||n&&(n.row!=o.row||n.col!=o.col))n?(s||(s=n),i(n,s,n.row-s.row,n.col-s.col)):i(n,s),o=n}var n=this,r,i,s,o;n.start=function(n,a,f){i=n,s=o=null,t.build(),u(a),r=f||"mousemove",e(document).bind(r,u)},n.stop=function(){return e(document).unbind(r,u),o}}function Ct(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function kt(e){function o(t){return r[t]=r[t]||e(t)}var n=this,r={},i={},s={};n.left=function(e){return i[e]=i[e]===t?o(e).position().left:i[e]},n.right=function(e){return s[e]=s[e]===t?n.left(e)+o(e).width():s[e]},n.clear=function(){r={},i={},s={}}}var n={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},r={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},i=e.fullCalendar={version:"1.5.4"},s=i.views={};e.fn.fullCalendar=function(i){if(typeof i=="string"){var s=Array.prototype.slice.call(arguments,1),o;return this.each(function(){var n=e.data(this,"fullCalendar");if(n&&e.isFunction(n[i])){var r=n[i].apply(n,s);o===t&&(o=r),i=="destroy"&&e.removeData(this,"fullCalendar")}}),o!==t?o:this}var a=i.eventSources||[];return delete i.eventSources,i.events&&(a.push(i.events),delete i.events),i=e.extend(!0,{},n,i.isRTL||i.isRTL===t&&n.isRTL?r:{},i),this.each(function(t,n){var r=e(n),s=new u(r,i,a);r.data("fullCalendar",s),s.render()}),this},i.sourceNormalizers=[],i.sourceFetchers=[];var f={dataType:"json",cache:!1},l=1;i.addDays=y,i.cloneDate=S,i.parseDate=k,i.parseISO8601=L,i.parseTime=A,i.formatDate=O,i.formatDates=M;var h=["sun","mon","tue","wed","thu","fri","sat"],p=864e5,d=36e5,v=6e4,_={s:function(e){return e.getSeconds()},ss:function(e){return et(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return et(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return et(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return et(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return et(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return et(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return e.getHours()<12?"a":"p"},tt:function(e){return e.getHours()<12?"am":"pm"},T:function(e){return e.getHours()<12?"A":"P"},TT:function(e){return e.getHours()<12?"AM":"PM"},u:function(e){return O(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&t<20?"th":["st","nd","rd"][t%10-1]||"th"}};i.applyAll=at,s.month=lt,s.basicWeek=ct,s.basicDay=ht,o({weekMode:"fixed"}),s.agendaWeek=vt,s.agendaDay=mt,o({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}(jQuery);var Scheduler=Scheduler||{};Scheduler.form={},Scheduler.form.init=function(e,t){Scheduler.form.current=e,Scheduler.form.showFrequency(e.find("select.scheduler-frequency").val()),e.on("change","select.scheduler-frequency",function(){Scheduler.form.showFrequency($(this).val())});if(t){var n=(t.getDay()+6)%7,r=Math.floor((t.getDate()-t.getDay()+6)/7);r>3&&(r=-1),e.find("#event_week_days_"+n).attr("checked","checked"),e.find("#event_week_day_order").val(r),e.find("#event_week_day").val(n)}},Scheduler.form.showFrequency=function(e){form=Scheduler.form.current,form.find("#scheduler-options").children("div").hide(),form.find("#scheduler-options").find("select,input").attr("disabled","disabled"),form.find("#scheduler-frequency-"+e).show(),form.find("#scheduler-frequency-"+e).find("select,input").removeAttr("disabled")},SocialStream.Events=SocialStream.Events||{},SocialStream.Events.current=SocialStream.Events.current||{},SocialStream.Calendar=function(e,t,n){var r,i=function(){return t("#sidebar_calendar")},s=new RegExp("sidebar_day_(..?)_(..?)_(..?.?.?)"),o=function(e){return s.exec(e.id)},u=function(e){var t=o(e);if(t==null)return;return new Date(t[3],t[2]-1,t[1],23,59,59)},a=function(e){return t("#sidebar_day_"+e.getDate()+"_"+(e.getMonth()+1)+"_"+e.getFullYear())},f=function(e){r=e.eventsPath;var n=new Date;a(n).addClass("today"),t("#sidebar_calendar td").each(function(e,r){var i=u(r);i<n&&t(r).addClass("past"),i.getMonth()!=n.getMonth()&&i>n&&t(r).addClass("next_month")}),t.ajax({dataType:"json",cache:!1,url:r,data:{start:e.start,end:e.end},success:l})},l=function(e){t.map(e,function(e){var t=new Date(e.start),n=new Date(e.end);for(loopTime=t.getTime();loopTime<=n.getTime();loopTime+=864e5){var r=new Date(loopTime),i=a(r);i.addClass("busy"),i.tipsy({title:c,html:!0,fade:!0,hoverable:!0,gravity:"ne",opacity:.95})}})},c=function(){var e=u(this);e.setHours(0),e.setMinutes(0),e.setSeconds(0);var n=u(this);return t.ajax({dataType:"script",url:r,data:{start:Math.round(e.getTime()/1e3),end:Math.round(n.getTime()/1e3),tipsy:this.id}}),'<div id="tipsy-'+this.id+'" class="tipsy-sidebar_calendar"><img src="/assets/loading.gif"></div>'};return{init:f,element:i,eventElement:a}}(SocialStream,jQuery),SocialStream.Event=function(e,t,n){var r=[],i=function(e){r.push(e)},s=function(){t.each(r,function(e,t){t()})},o=function(){SocialStream.Events.current.eventColor},u=function(){t(".event").each(function(){dateString=t(this).find("time").attr("datetime"),date=new Date(dateString);var e=t(this).find(".event_day");e.length&&e.text(t.datepicker.formatDate("d",date));var n=t(this).find(".event_month");n.length&&n.text(t.datepicker.formatDate("M",date));var r=t(this).find(".event_hour");if(r.length){var i=date.getMinutes();i<10&&(i="0"+i),r.text(date.getHours()+":"+i)}})};return i(u),SocialStream.Timeline.addInitCallback(s),{addIndexCallback:i,color:o,index:s}}(SocialStream,jQuery),SocialStream.Events.Action=function(e,t,n){var r=function(t){if(t.activity_object.type!="Event")return;if(!t.follow)return;var n=e.Action.followForms(t).closest(".event").find("time"),r=new Date(n.attr("datetime")),i=e.Calendar.eventElement(r)||e.Calendar.element;t.follow.following?(n.effect("transfer",{to:i},1e3),i.addClass("busy")):i.effect("pulsate")};return SocialStream.Action.addUpdateCallback(r),{}}(SocialStream,jQuery),SocialStream.Events.Poster=function(e,t,n){var r=function(){t(".event_poster_update").hide(),t(".event_poster").hover(function(){t(this).find(".event_poster_update").fadeIn("slow")},function(){t(this).find(".event_poster_update").fadeOut("slow")})};return e.Timeline.addInitCallback(r),e.Event.addIndexCallback(r),{init:r}}(SocialStream,jQuery),SocialStream.Linkser=SocialStream.Linkser||{},SocialStream.Linkser.Wall=function(e,t){var n=/^(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&;:\/~+#-]*[\w@?^=%&;\/~+#-])?$/,r=function(){this.currentValue=t("#input_activities").val(),this.lastValue==null&&(this.lastValue="");if(n.test(t("#input_activities").val())){t("#link_url").val(t("#input_activities").val()),t("#link_loaded").val(!1),t("#new_post").attr("action","/links");if(this.currentValue!=this.lastValue){t("#link_preview").html(t("<img>").attr("src","/assets/loading.gif").addClass("loading")),this.lastValue=this.currentValue;var e=this.currentValue,r=this;t.ajax({type:"GET",url:"/linkser_parse?url="+e,dataType:"html",success:function(n){t("#input_activities").val()==e&&(t("#link_preview").html(n),t("#link_loaded").val(!0))},error:function(n,r,i){t("#input_activities").val()==e&&t("#link_preview").html(t("<div>").addClass("loading").html(I18n.t("link.errors.loading")+" "+e))}})}t("#link_preview").show()}else t("#new_post").attr("action","/posts"),t("#link_preview").hide(),t("#link_preview").html(""),t("#link_url").val("")},i=function(){t.preloadImages("/assets/loading.gif"),t("#new_post").length&&(t("#input_activities").change(r).keyup(r),t("#new_post").append(t("<input>").attr("type","hidden").attr("name","link[owner_id]").attr("id","link_owner_id").val(t("#post_owner_id").val())),t("#new_post").append(t("<input>").attr("type","hidden").attr("name","link[url]").attr("id","link_url")),t("#new_post").append(t("<input>").attr("type","hidden").attr("name","link[loaded]").attr("id","link_loaded").val(!1)),t("#new_post").append(t("<div>").attr("id","link_preview").css("display","none")))},s=function(e,n,r,i){var s="353";r>0&&i>0&&(s=470*i/r),t("#"+e).html(t("<iframe>").attr("src",n).attr("width","470").attr("height",s))};return SocialStream.Wall.addInitCallback(i),{openCallback:s}}(SocialStream,jQuery);var Base64=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t={encode:function(t){var n="",r,i,s,o,u,a,f,l=0;do r=t.charCodeAt(l++),i=t.charCodeAt(l++),s=t.charCodeAt(l++),o=r>>2,u=(r&3)<<4|i>>4,a=(i&15)<<2|s>>6,f=s&63,isNaN(i)?a=f=64:isNaN(s)&&(f=64),n=n+e.charAt(o)+e.charAt(u)+e.charAt(a)+e.charAt(f);while(l<t.length);return n},decode:function(t){var n="",r,i,s,o,u,a,f,l=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do o=e.indexOf(t.charAt(l++)),u=e.indexOf(t.charAt(l++)),a=e.indexOf(t.charAt(l++)),f=e.indexOf(t.charAt(l++)),r=o<<2|u>>4,i=(u&15)<<4|a>>2,s=(a&3)<<6|f,n+=String.fromCharCode(r),a!=64&&(n+=String.fromCharCode(i)),f!=64&&(n+=String.fromCharCode(s));while(l<t.length);return n}};return t}(),MD5=function(){var e=0,t="",n=8,r=function(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535},i=function(e,t){return e<<t|e>>>32-t},s=function(e){var t=[],r=(1<<n)-1;for(var i=0;i<e.length*n;i+=n)t[i>>5]|=(e.charCodeAt(i/n)&r)<<i%32;return t},o=function(e){var t="",r=(1<<n)-1;for(var i=0;i<e.length*32;i+=n)t+=String.fromCharCode(e[i>>5]>>>i%32&r);return t},u=function(t){var n=e?"0123456789ABCDEF":"0123456789abcdef",r="";for(var i=0;i<t.length*4;i++)r+=n.charAt(t[i>>2]>>i%4*8+4&15)+n.charAt(t[i>>2]>>i%4*8&15);return r},a=function(e){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",i,s;for(var o=0;o<e.length*4;o+=3){i=(e[o>>2]>>8*(o%4)&255)<<16|(e[o+1>>2]>>8*((o+1)%4)&255)<<8|e[o+2>>2]>>8*((o+2)%4)&255;for(s=0;s<4;s++)o*8+s*6>e.length*32?r+=t:r+=n.charAt(i>>6*(3-s)&63)}return r},f=function(e,t,n,s,o,u){return r(i(r(r(t,e),r(s,u)),o),n)},l=function(e,t,n,r,i,s,o){return f(t&n|~t&r,e,t,i,s,o)},c=function(e,t,n,r,i,s,o){return f(t&r|n&~r,e,t,i,s,o)},h=function(e,t,n,r,i,s,o){return f(t^n^r,e,t,i,s,o)},p=function(e,t,n,r,i,s,o){return f(n^(t|~r),e,t,i,s,o)},d=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var n=1732584193,i=-271733879,s=-1732584194,o=271733878,u,a,f,d;for(var v=0;v<e.length;v+=16)u=n,a=i,f=s,d=o,n=l(n,i,s,o,e[v+0],7,-680876936),o=l(o,n,i,s,e[v+1],12,-389564586),s=l(s,o,n,i,e[v+2],17,606105819),i=l(i,s,o,n,e[v+3],22,-1044525330),n=l(n,i,s,o,e[v+4],7,-176418897),o=l(o,n,i,s,e[v+5],12,1200080426),s=l(s,o,n,i,e[v+6],17,-1473231341),i=l(i,s,o,n,e[v+7],22,-45705983),n=l(n,i,s,o,e[v+8],7,1770035416),o=l(o,n,i,s,e[v+9],12,-1958414417),s=l(s,o,n,i,e[v+10],17,-42063),i=l(i,s,o,n,e[v+11],22,-1990404162),n=l(n,i,s,o,e[v+12],7,1804603682),o=l(o,n,i,s,e[v+13],12,-40341101),s=l(s,o,n,i,e[v+14],17,-1502002290),i=l(i,s,o,n,e[v+15],22,1236535329),n=c(n,i,s,o,e[v+1],5,-165796510),o=c(o,n,i,s,e[v+6],9,-1069501632),s=c(s,o,n,i,e[v+11],14,643717713),i=c(i,s,o,n,e[v+0],20,-373897302),n=c(n,i,s,o,e[v+5],5,-701558691),o=c(o,n,i,s,e[v+10],9,38016083),s=c(s,o,n,i,e[v+15],14,-660478335),i=c(i,s,o,n,e[v+4],20,-405537848),n=c(n,i,s,o,e[v+9],5,568446438),o=c(o,n,i,s,e[v+14],9,-1019803690),s=c(s,o,n,i,e[v+3],14,-187363961),i=c(i,s,o,n,e[v+8],20,1163531501),n=c(n,i,s,o,e[v+13],5,-1444681467),o=c(o,n,i,s,e[v+2],9,-51403784),s=c(s,o,n,i,e[v+7],14,1735328473),i=c(i,s,o,n,e[v+12],20,-1926607734),n=h(n,i,s,o,e[v+5],4,-378558),o=h(o,n,i,s,e[v+8],11,-2022574463),s=h(s,o,n,i,e[v+11],16,1839030562),i=h(i,s,o,n,e[v+14],23,-35309556),n=h(n,i,s,o,e[v+1],4,-1530992060),o=h(o,n,i,s,e[v+4],11,1272893353),s=h(s,o,n,i,e[v+7],16,-155497632),i=h(i,s,o,n,e[v+10],23,-1094730640),n=h(n,i,s,o,e[v+13],4,681279174),o=h(o,n,i,s,e[v+0],11,-358537222),s=h(s,o,n,i,e[v+3],16,-722521979),i=h(i,s,o,n,e[v+6],23,76029189),n=h(n,i,s,o,e[v+9],4,-640364487),o=h(o,n,i,s,e[v+12],11,-421815835),s=h(s,o,n,i,e[v+15],16,530742520),i=h(i,s,o,n,e[v+2],23,-995338651),n=p(n,i,s,o,e[v+0],6,-198630844),o=p(o,n,i,s,e[v+7],10,1126891415),s=p(s,o,n,i,e[v+14],15,-1416354905),i=p(i,s,o,n,e[v+5],21,-57434055),n=p(n,i,s,o,e[v+12],6,1700485571),o=p(o,n,i,s,e[v+3],10,-1894986606),s=p(s,o,n,i,e[v+10],15,-1051523),i=p(i,s,o,n,e[v+1],21,-2054922799),n=p(n,i,s,o,e[v+8],6,1873313359),o=p(o,n,i,s,e[v+15],10,-30611744),s=p(s,o,n,i,e[v+6],15,-1560198380),i=p(i,s,o,n,e[v+13],21,1309151649),n=p(n,i,s,o,e[v+4],6,-145523070),o=p(o,n,i,s,e[v+11],10,-1120210379),s=p(s,o,n,i,e[v+2],15,718787259),i=p(i,s,o,n,e[v+9],21,-343485551),n=r(n,u),i=r(i,a),s=r(s,f),o=r(o,d);return[n,i,s,o]},v=function(e,t){var r=s(e);r.length>16&&(r=d(r,e.length*n));var i=new Array(16),o=new Array(16);for(var u=0;u<16;u++)i[u]=r[u]^909522486,o[u]=r[u]^1549556828;var a=d(i.concat(s(t)),512+t.length*n);return d(o.concat(a),640)},m={hexdigest:function(e){return u(d(s(e),e.length*n))},b64digest:function(e){return a(d(s(e),e.length*n))},hash:function(e){return o(d(s(e),e.length*n))},hmac_hexdigest:function(e,t){return u(v(e,t))},hmac_b64digest:function(e,t){return a(v(e,t))},hmac_hash:function(e,t){return o(v(e,t))},test:function(){return MD5.hexdigest("abc")==="900150983cd24fb0d6963f7d28e17f72"}};return m}();Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice,r=Array.prototype.concat,i=n.call(arguments,1);return function(){return t.apply(e?e:this,r.call(i,n.call(arguments,0)))}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,n=Number(arguments[1])||0;n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=t);for(;n<t;n++)if(n in this&&this[n]===e)return n;return-1}),function(e){function n(e,n){return new t.Builder(e,n)}function r(e){return new t.Builder("message",e)}function i(e){return new t.Builder("iq",e)}function s(e){return new t.Builder("presence",e)}var t;t={VERSION:"1.0.2",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas"},addNamespace:function(e,n){t.NS[e]=n},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,forEachChild:function(e,n,r){var i,s;for(i=0;i<e.childNodes.length;i++)s=e.childNodes[i],s.nodeType==t.ElementType.NORMAL&&(!n||this.isTagEqual(s,n))&&r(s)},isTagEqual:function(e,t){return e.tagName.toLowerCase()==t.toLowerCase()},_xmlGenerator:null,_makeGenerator:function(){var e;return document.implementation.createDocument===undefined?(e=this._getIEXmlDom(),e.appendChild(e.createElement("strophe"))):e=document.implementation.createDocument("jabber:client","strophe",null),e},xmlGenerator:function(){return t._xmlGenerator||(t._xmlGenerator=t._makeGenerator()),t._xmlGenerator},_getIEXmlDom:function(){var e=null,t=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"];for(var n=0;n<t.length;n++){if(e!==null)break;try{e=new ActiveXObject(t[n])}catch(r){e=null}}return e},xmlElement:function(e){if(!e)return null;var n=t.xmlGenerator().createElement(e),r,i,s;for(r=1;r<arguments.length;r++){if(!arguments[r])continue;if(typeof arguments[r]=="string"||typeof arguments[r]=="number")n.appendChild(t.xmlTextNode(arguments[r]));else if(typeof arguments[r]=="object"&&typeof arguments[r].sort=="function")for(i=0;i<arguments[r].length;i++)typeof arguments[r][i]=="object"&&typeof arguments[r][i].sort=="function"&&n.setAttribute(arguments[r][i][0],arguments[r][i][1]);else if(typeof arguments[r]=="object")for(s in arguments[r])arguments[r].hasOwnProperty(s)&&n.setAttribute(s,arguments[r][s])}return n},xmlescape:function(e){return e=e.replace(/\&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/'/g,"&apos;"),e=e.replace(/"/g,"&quot;"),e},xmlTextNode:function(e){return e=t.xmlescape(e),t.xmlGenerator().createTextNode(e)},getText:function(e){if(!e)return null;var n="";e.childNodes.length===0&&e.nodeType==t.ElementType.TEXT&&(n+=e.nodeValue);for(var r=0;r<e.childNodes.length;r++)e.childNodes[r].nodeType==t.ElementType.TEXT&&(n+=e.childNodes[r].nodeValue);return n},copyElement:function(e){var n,r;if(e.nodeType==t.ElementType.NORMAL){r=t.xmlElement(e.tagName);for(n=0;n<e.attributes.length;n++)r.setAttribute(e.attributes[n].nodeName.toLowerCase(),e.attributes[n].value);for(n=0;n<e.childNodes.length;n++)r.appendChild(t.copyElement(e.childNodes[n]))}else e.nodeType==t.ElementType.TEXT&&(r=t.xmlGenerator().createTextNode(e.nodeValue));return r},escapeNode:function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(e){return e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(e){return e.indexOf("@")<0?null:e.split("@")[0]},getDomainFromJid:function(e){var n=t.getBareJidFromJid(e);if(n.indexOf("@")<0)return n;var r=n.split("@");return r.splice(0,1),r.join("@")},getResourceFromJid:function(e){var t=e.split("/");return t.length<2?null:(t.splice(0,1),t.join("/"))},getBareJidFromJid:function(e){return e?e.split("/")[0]:null},log:function(e,t){return},debug:function(e){this.log(this.LogLevel.DEBUG,e)},info:function(e){this.log(this.LogLevel.INFO,e)},warn:function(e){this.log(this.LogLevel.WARN,e)},error:function(e){this.log(this.LogLevel.ERROR,e)},fatal:function(e){this.log(this.LogLevel.FATAL,e)},serialize:function(e){var n;if(!e)return null;typeof e.tree=="function"&&(e=e.tree());var r=e.nodeName,i,s;e.getAttribute("_realname")&&(r=e.getAttribute("_realname")),n="<"+r;for(i=0;i<e.attributes.length;i++)e.attributes[i].nodeName!="_realname"&&(n+=" "+e.attributes[i].nodeName.toLowerCase()+"='"+e.attributes[i].value.replace(/&/g,"&amp;").replace(/\'/g,"&apos;").replace(/</g,"&lt;")+"'");if(e.childNodes.length>0){n+=">";for(i=0;i<e.childNodes.length;i++){s=e.childNodes[i];switch(s.nodeType){case t.ElementType.NORMAL:n+=t.serialize(s);break;case t.ElementType.TEXT:n+=t.xmlescape(s.nodeValue);break;case t.ElementType.CDATA:n+="<![CDATA["+s.nodeValue+"]]>"}}n+="</"+r+">"}else n+="/>";return n},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(e,n){t._connectionPlugins[e]=n}},t.Builder=function(e,n){if(e=="presence"||e=="message"||e=="iq")n&&!n.xmlns?n.xmlns=t.NS.CLIENT:n||(n={xmlns:t.NS.CLIENT});this.nodeTree=t.xmlElement(e,n),this.node=this.nodeTree},t.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return t.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},attrs:function(e){for(var t in e)e.hasOwnProperty(t)&&this.node.setAttribute(t,e[t]);return this},c:function(e,n,r){var i=t.xmlElement(e,n,r);return this.node.appendChild(i),r||(this.node=i),this},cnode:function(e){var n=t.xmlGenerator();try{var r=n.importNode!==undefined}catch(i){var r=!1}var s=r?n.importNode(e,!0):t.copyElement(e);return this.node.appendChild(s),this.node=s,this},t:function(e){var n=t.xmlTextNode(e);return this.node.appendChild(n),this}},t.Handler=function(e,n,r,i,s,o,u){this.handler=e,this.ns=n,this.name=r,this.type=i,this.id=s,this.options=u||{matchbare:!1},this.options.matchBare||(this.options.matchBare=!1),this.options.matchBare?this.from=o?t.getBareJidFromJid(o):null:this.from=o,this.user=!0},t.Handler.prototype={isMatch:function(e){var n,r=null;this.options.matchBare?r=t.getBareJidFromJid(e.getAttribute("from")):r=e.getAttribute("from"),n=!1;if(!this.ns)n=!0;else{var i=this;t.forEachChild(e,null,function(e){e.getAttribute("xmlns")==i.ns&&(n=!0)}),n=n||e.getAttribute("xmlns")==this.ns}return!n||!!this.name&&!t.isTagEqual(e,this.name)||!!this.type&&e.getAttribute("type")!=this.type||!!this.id&&e.getAttribute("id")!=this.id||!!this.from&&r!=this.from?!1:!0},run:function(e){var n=null;try{n=this.handler(e)}catch(r){throw r.sourceURL?t.fatal("error: "+this.handler+" "+r.sourceURL+":"+r.line+" - "+r.name+": "+r.message):r.fileName?(typeof console!="undefined"&&(console.trace(),console.error(this.handler," - error - ",r,r.message)),t.fatal("error: "+this.handler+" "+r.fileName+":"+r.lineNumber+" - "+r.name+": "+r.message)):t.fatal("error: "+this.handler),r}return n},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},t.TimedHandler=function(e,t){this.period=e,this.handler=t,this.lastCalled=(new Date).getTime(),this.user=!0},t.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},t.Request=function(e,n,r,i){this.id=++t._requestId,this.xmlData=e,this.data=t.serialize(e),this.origFunc=n,this.func=n,this.rid=r,this.date=NaN,this.sends=i||0,this.abort=!1,this.dead=null,this.age=function(){if(!this.date)return 0;var e=new Date;return(e-this.date)/1e3},this.timeDead=function(){if(!this.dead)return 0;var e=new Date;return(e-this.dead)/1e3},this.xhr=this
._newXHR()},t.Request.prototype={getResponse:function(){var e=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){e=this.xhr.responseXML.documentElement;if(e.tagName=="parsererror")throw t.error("invalid response received"),t.error("responseText: "+this.xhr.responseText),t.error("responseXML: "+t.serialize(this.xhr.responseXML)),"parsererror"}else this.xhr.responseText&&(t.error("invalid response received"),t.error("responseText: "+this.xhr.responseText),t.error("responseXML: "+t.serialize(this.xhr.responseXML)));return e},_newXHR:function(){var e=null;return window.XMLHttpRequest?(e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml")):window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e.onreadystatechange=this.func.bind(null,this),e}},t.Connection=function(e){this.service=e,this.jid="",this.rid=Math.floor(Math.random()*4294967295),this.sid=null,this.streamId=null,this.features=null,this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.disconnecting=!1,this.connected=!1,this.errors=0,this.paused=!1,this.hold=1,this.wait=60,this.window=5,this._data=[],this._requests=[],this._uniqueId=Math.round(Math.random()*1e4),this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this._idleTimeout=setTimeout(this._onIdle.bind(this),100);for(var n in t._connectionPlugins)if(t._connectionPlugins.hasOwnProperty(n)){var r=t._connectionPlugins[n],i=function(){};i.prototype=r,this[n]=new i,this[n].init(this)}},t.Connection.prototype={reset:function(){this.rid=Math.floor(Math.random()*4294967295),this.sid=null,this.streamId=null,this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.disconnecting=!1,this.connected=!1,this.errors=0,this._requests=[],this._uniqueId=Math.round(Math.random()*1e4)},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(e){return typeof e=="string"||typeof e=="number"?++this._uniqueId+":"+e:++this._uniqueId+""},connect:function(e,n,r,i,s){this.jid=e,this.pass=n,this.connect_callback=r,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.errors=0,this.wait=i||this.wait,this.hold=s||this.hold,this.domain=t.getDomainFromJid(this.jid);var o=this._buildBody().attrs({to:this.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":t.NS.BOSH});this._changeConnectStatus(t.Status.CONNECTING,null),this._requests.push(new t.Request(o.tree(),this._onRequestStateChange.bind(this,this._connect_cb.bind(this)),o.tree().getAttribute("rid"))),this._throttledRequestHandler()},attach:function(e,n,r,i,s,o,u){this.jid=e,this.sid=n,this.rid=r,this.connect_callback=i,this.domain=t.getDomainFromJid(this.jid),this.authenticated=!0,this.connected=!0,this.wait=s||this.wait,this.hold=o||this.hold,this.window=u||this.window,this._changeConnectStatus(t.Status.ATTACHED,null)},xmlInput:function(e){return},xmlOutput:function(e){return},rawInput:function(e){return},rawOutput:function(e){return},send:function(e){if(e===null)return;if(typeof e.sort=="function")for(var t=0;t<e.length;t++)this._queueData(e[t]);else typeof e.tree=="function"?this._queueData(e.tree()):this._queueData(e);this._throttledRequestHandler(),clearTimeout(this._idleTimeout),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendIQ:function(e,t,n,r){var i=null,s=this;typeof e.tree=="function"&&(e=e.tree());var o=e.getAttribute("id");o||(o=this.getUniqueId("sendIQ"),e.setAttribute("id",o));var u=this.addHandler(function(e){i&&s.deleteTimedHandler(i);var r=e.getAttribute("type");if(r=="result")t&&t(e);else{if(r!="error")throw{name:"StropheError",message:"Got bad IQ type of "+r};n&&n(e)}},null,"iq",null,o);return r&&(i=this.addTimedHandler(r,function(){return s.deleteHandler(u),n&&n(null),!1})),this.send(e),o},_queueData:function(e){if(e===null||!e.tagName||!e.childNodes)throw{name:"StropheError",message:"Cannot queue non-DOMElement."};this._data.push(e)},_sendRestart:function(){this._data.push("restart"),this._throttledRequestHandler(),clearTimeout(this._idleTimeout),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)},addTimedHandler:function(e,n){var r=new t.TimedHandler(e,n);return this.addTimeds.push(r),r},deleteTimedHandler:function(e){this.removeTimeds.push(e)},addHandler:function(e,n,r,i,s,o,u){var a=new t.Handler(e,n,r,i,s,o,u);return this.addHandlers.push(a),a},deleteHandler:function(e){this.removeHandlers.push(e)},disconnect:function(e){this._changeConnectStatus(t.Status.DISCONNECTING,e),t.info("Disconnect was called because: "+e),this.connected&&(this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._sendTerminate())},_changeConnectStatus:function(e,n){for(var r in t._connectionPlugins)if(t._connectionPlugins.hasOwnProperty(r)){var i=this[r];if(i.statusChanged)try{i.statusChanged(e,n)}catch(s){t.error(""+r+" plugin caused an exception "+"changing status: "+s)}}if(this.connect_callback)try{this.connect_callback(e,n)}catch(o){t.error("User connection callback caused an exception: "+o)}},_buildBody:function(){var e=n("body",{rid:this.rid++,xmlns:t.NS.HTTPBIND});return this.sid!==null&&e.attrs({sid:this.sid}),e},_removeRequest:function(e){t.debug("removing request");var n;for(n=this._requests.length-1;n>=0;n--)e==this._requests[n]&&this._requests.splice(n,1);e.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(e){var t=this._requests[e];t.dead===null&&(t.dead=new Date),this._processRequest(e)},_processRequest:function(e){var n=this._requests[e],r=-1;try{n.xhr.readyState==4&&(r=n.xhr.status)}catch(i){t.error("caught an error in _requests["+e+"], reqStatus: "+r)}typeof r=="undefined"&&(r=-1);if(n.sends>5){this._onDisconnectTimeout();return}var s=n.age(),o=!isNaN(s)&&s>Math.floor(t.TIMEOUT*this.wait),u=n.dead!==null&&n.timeDead()>Math.floor(t.SECONDARY_TIMEOUT*this.wait),a=n.xhr.readyState==4&&(r<1||r>=500);if(o||u||a)u&&t.error("Request "+this._requests[e].id+" timed out (secondary), restarting"),n.abort=!0,n.xhr.abort(),n.xhr.onreadystatechange=function(){},this._requests[e]=new t.Request(n.xmlData,n.origFunc,n.rid,n.sends),n=this._requests[e];if(n.xhr.readyState===0){t.debug("request id "+n.id+"."+n.sends+" posting");try{n.xhr.open("POST",this.service,!0)}catch(f){t.error("XHR open failed."),this.connected||this._changeConnectStatus(t.Status.CONNFAIL,"bad-service"),this.disconnect();return}var l=function(){n.date=new Date,n.xhr.send(n.data)};if(n.sends>1){var c=Math.min(Math.floor(t.TIMEOUT*this.wait),Math.pow(n.sends,3))*1e3;setTimeout(l,c)}else l();n.sends++,this.xmlOutput!==t.Connection.prototype.xmlOutput&&this.xmlOutput(n.xmlData),this.rawOutput!==t.Connection.prototype.rawOutput&&this.rawOutput(n.data)}else t.debug("_processRequest: "+(e===0?"first":"second")+" request has readyState of "+n.xhr.readyState)},_throttledRequestHandler:function(){this._requests?t.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):t.debug("_throttledRequestHandler called with undefined requests");if(!this._requests||this._requests.length===0)return;this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1)},_onRequestStateChange:function(e,n){t.debug("request id "+n.id+"."+n.sends+" state changed to "+n.xhr.readyState);if(n.abort){n.abort=!1;return}var r;if(n.xhr.readyState==4){r=0;try{r=n.xhr.status}catch(i){}typeof r=="undefined"&&(r=0);if(this.disconnecting&&r>=400){this._hitError(r);return}var s=this._requests[0]==n,o=this._requests[1]==n;if(r>0&&r<500||n.sends>5)this._removeRequest(n),t.debug("request id "+n.id+" should now be removed");if(r==200)(o||s&&this._requests.length>0&&this._requests[0].age()>Math.floor(t.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),t.debug("request id "+n.id+"."+n.sends+" got 200"),e(n),this.errors=0;else{t.error("request id "+n.id+"."+n.sends+" error "+r+" happened");if(r===0||r>=400&&r<600||r>=12e3)this._hitError(r),r>=400&&r<500&&(this._changeConnectStatus(t.Status.DISCONNECTING,null),this._doDisconnect())}r>0&&r<500||n.sends>5||this._throttledRequestHandler()}},_hitError:function(e){this.errors++,t.warn("request errored, status: "+e+", number of errors: "+this.errors),this.errors>4&&this._onDisconnectTimeout()},_doDisconnect:function(){t.info("_doDisconnect was called"),this.authenticated=!1,this.disconnecting=!1,this.sid=null,this.streamId=null,this.rid=Math.floor(Math.random()*4294967295),this.connected&&(this._changeConnectStatus(t.Status.DISCONNECTED,null),this.connected=!1),this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[]},_dataRecv:function(e){try{var n=e.getResponse()}catch(r){if(r!="parsererror")throw r;this.disconnect("strophe-parsererror")}if(n===null)return;this.xmlInput!==t.Connection.prototype.xmlInput&&this.xmlInput(n),this.rawInput!==t.Connection.prototype.rawInput&&this.rawInput(t.serialize(n));var i,s;while(this.removeHandlers.length>0)s=this.removeHandlers.pop(),i=this.handlers.indexOf(s),i>=0&&this.handlers.splice(i,1);while(this.addHandlers.length>0)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._requests.length===0){this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null,this._doDisconnect();return}var o=n.getAttribute("type"),u,a;if(o!==null&&o=="terminate"){if(this.disconnecting)return;u=n.getAttribute("condition"),a=n.getElementsByTagName("conflict"),u!==null?(u=="remote-stream-error"&&a.length>0&&(u="conflict"),this._changeConnectStatus(t.Status.CONNFAIL,u)):this._changeConnectStatus(t.Status.CONNFAIL,"unknown"),this.disconnect();return}var f=this;t.forEachChild(n,null,function(e){var t,n;n=f.handlers,f.handlers=[];for(t=0;t<n.length;t++){var r=n[t];try{r.isMatch(e)&&(f.authenticated||!r.user)?r.run(e)&&f.handlers.push(r):f.handlers.push(r)}catch(i){}}})},_sendTerminate:function(){t.info("_sendTerminate was called");var e=this._buildBody().attrs({type:"terminate"});this.authenticated&&e.c("presence",{xmlns:t.NS.CLIENT,type:"unavailable"}),this.disconnecting=!0;var n=new t.Request(e.tree(),this._onRequestStateChange.bind(this,this._dataRecv.bind(this)),e.tree().getAttribute("rid"));this._requests.push(n),this._throttledRequestHandler()},_connect_cb:function(e){t.info("_connect_cb was called"),this.connected=!0;var r=e.getResponse();if(!r)return;this.xmlInput!==t.Connection.prototype.xmlInput&&this.xmlInput(r),this.rawInput!==t.Connection.prototype.rawInput&&this.rawInput(t.serialize(r));var s=r.getAttribute("type"),o,u;if(s!==null&&s=="terminate"){o=r.getAttribute("condition"),u=r.getElementsByTagName("conflict"),o!==null?(o=="remote-stream-error"&&u.length>0&&(o="conflict"),this._changeConnectStatus(t.Status.CONNFAIL,o)):this._changeConnectStatus(t.Status.CONNFAIL,"unknown");return}this.sid||(this.sid=r.getAttribute("sid")),this.stream_id||(this.stream_id=r.getAttribute("authid"));var a=r.getAttribute("requests");a&&(this.window=parseInt(a,10));var f=r.getAttribute("hold");f&&(this.hold=parseInt(f,10));var l=r.getAttribute("wait");l&&(this.wait=parseInt(l,10));var c=!1,h=!1,p=!1,d=r.getElementsByTagName("mechanism"),v,m,g,y;if(!(d.length>0)){var b=this._buildBody();this._requests.push(new t.Request(b.tree(),this._onRequestStateChange.bind(this,this._connect_cb.bind(this)),b.tree().getAttribute("rid"))),this._throttledRequestHandler();return}for(v=0;v<d.length;v++)m=t.getText(d[v]),m=="DIGEST-MD5"?h=!0:m=="PLAIN"?c=!0:m=="ANONYMOUS"&&(p=!0);t.getNodeFromJid(this.jid)===null&&p?(this._changeConnectStatus(t.Status.AUTHENTICATING,null),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(n("auth",{xmlns:t.NS.SASL,mechanism:"ANONYMOUS"}).tree())):t.getNodeFromJid(this.jid)===null?(this._changeConnectStatus(t.Status.CONNFAIL,"x-strophe-bad-non-anon-jid"),this.disconnect()):h?(this._changeConnectStatus(t.Status.AUTHENTICATING,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge1_cb.bind(this),null,"challenge",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(n("auth",{xmlns:t.NS.SASL,mechanism:"DIGEST-MD5"}).tree())):c?(g=t.getBareJidFromJid(this.jid),g+="\0",g+=t.getNodeFromJid(this.jid),g+="\0",g+=this.pass,this._changeConnectStatus(t.Status.AUTHENTICATING,null),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),y=Base64.encode(g),this.send(n("auth",{xmlns:t.NS.SASL,mechanism:"PLAIN"}).t(y).tree())):(this._changeConnectStatus(t.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(i({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:t.NS.AUTH}).c("username",{}).t(t.getNodeFromJid(this.jid)).tree()))},_sasl_challenge1_cb:function(e){var r=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,i=Base64.decode(t.getText(e)),s=MD5.hexdigest(""+Math.random()*1234567890),o="",u=null,a="",f="",l;this.deleteHandler(this._sasl_failure_handler);while(i.match(r)){l=i.match(r),i=i.replace(l[0],""),l[2]=l[2].replace(/^"(.+)"$/,"$1");switch(l[1]){case"realm":o=l[2];break;case"nonce":a=l[2];break;case"qop":f=l[2];break;case"host":u=l[2]}}var c="xmpp/"+this.domain;u!==null&&(c=c+"/"+u);var h=MD5.hash(t.getNodeFromJid(this.jid)+":"+o+":"+this.pass)+":"+a+":"+s,p="AUTHENTICATE:"+c,d="";return d+="username="+this._quote(t.getNodeFromJid(this.jid))+",",d+="realm="+this._quote(o)+",",d+="nonce="+this._quote(a)+",",d+="cnonce="+this._quote(s)+",",d+='nc="00000001",',d+='qop="auth",',d+="digest-uri="+this._quote(c)+",",d+="response="+this._quote(MD5.hexdigest(MD5.hexdigest(h)+":"+a+":00000001:"+s+":auth:"+MD5.hexdigest(p)))+",",d+='charset="utf-8"',this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge2_cb.bind(this),null,"challenge",null,null),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(n("response",{xmlns:t.NS.SASL}).t(Base64.encode(d)).tree()),!1},_quote:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},_sasl_challenge2_cb:function(e){return this.deleteHandler(this._sasl_success_handler),this.deleteHandler(this._sasl_failure_handler),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(n("response",{xmlns:t.NS.SASL}).tree()),!1},_auth1_cb:function(e){var n=i({type:"set",id:"_auth_2"}).c("query",{xmlns:t.NS.AUTH}).c("username",{}).t(t.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return t.getResourceFromJid(this.jid)||(this.jid=t.getBareJidFromJid(this.jid)+"/strophe"),n.up().c("resource",{}).t(t.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(n.tree()),!1},_sasl_success_cb:function(e){return t.info("SASL authentication succeeded."),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._addSysHandler(this._sasl_auth1_cb.bind(this),null,"stream:features",null,null),this._sendRestart(),!1},_sasl_auth1_cb:function(e){this.features=e;var n,r;for(n=0;n<e.childNodes.length;n++)r=e.childNodes[n],r.nodeName=="bind"&&(this.do_bind=!0),r.nodeName=="session"&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(t.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var s=t.getResourceFromJid(this.jid);return s?this.send(i({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:t.NS.BIND}).c("resource",{}).t(s).tree()):this.send(i({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:t.NS.BIND}).tree()),!1},_sasl_bind_cb:function(e){if(e.getAttribute("type")=="error")return t.info("SASL binding failed."),this._changeConnectStatus(t.Status.AUTHFAIL,null),!1;var n=e.getElementsByTagName("bind"),r;if(!(n.length>0))return t.info("SASL binding failed."),this._changeConnectStatus(t.Status.AUTHFAIL,null),!1;r=n[0].getElementsByTagName("jid"),r.length>0&&(this.jid=t.getText(r[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(i({type:"set",id:"_session_auth_2"}).c("session",{xmlns:t.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(t.Status.CONNECTED,null)))},_sasl_session_cb:function(e){if(e.getAttribute("type")=="result")this.authenticated=!0,this._changeConnectStatus(t.Status.CONNECTED,null);else if(e.getAttribute("type")=="error")return t.info("Session creation failed."),this._changeConnectStatus(t.Status.AUTHFAIL,null),!1;return!1},_sasl_failure_cb:function(e){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._changeConnectStatus(t.Status.AUTHFAIL,null),!1},_auth2_cb:function(e){return e.getAttribute("type")=="result"?(this.authenticated=!0,this._changeConnectStatus(t.Status.CONNECTED,null)):e.getAttribute("type")=="error"&&(this._changeConnectStatus(t.Status.AUTHFAIL,null),this.disconnect()),!1},_addSysTimedHandler:function(e,n){var r=new t.TimedHandler(e,n);return r.user=!1,this.addTimeds.push(r),r},_addSysHandler:function(e,n,r,i,s){var o=new t.Handler(e,n,r,i,s);return o.user=!1,this.addHandlers.push(o),o},_onDisconnectTimeout:function(){t.info("_onDisconnectTimeout was called");var e;while(this._requests.length>0)e=this._requests.pop(),e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){};return this._doDisconnect(),!1},_onIdle:function(){var e,n,r,i;while(this.addTimeds.length>0)this.timedHandlers.push(this.addTimeds.pop());while(this.removeTimeds.length>0)n=this.removeTimeds.pop(),e=this.timedHandlers.indexOf(n),e>=0&&this.timedHandlers.splice(e,1);var s=(new Date).getTime();i=[];for(e=0;e<this.timedHandlers.length;e++){n=this.timedHandlers[e];if(this.authenticated||!n.user)r=n.lastCalled+n.period,r-s<=0?n.run()&&i.push(n):i.push(n)}this.timedHandlers=i;var o,u;this.authenticated&&this._requests.length===0&&this._data.length===0&&!this.disconnecting&&(t.info("no requests during idle cycle, sending blank request"),this._data.push(null));if(this._requests.length<2&&this._data.length>0&&!this.paused){o=this._buildBody();for(e=0;e<this._data.length;e++)this._data[e]!==null&&(this._data[e]==="restart"?o.attrs({to:this.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":t.NS.BOSH}):o.cnode(this._data[e]).up());delete this._data,this._data=[],this._requests.push(new t.Request(o.tree(),this._onRequestStateChange.bind(this,this._dataRecv.bind(this)),o.tree().getAttribute("rid"))),this._processRequest(this._requests.length-1)}this._requests.length>0&&(u=this._requests[0].age(),this._requests[0].dead!==null&&this._requests[0].timeDead()>Math.floor(t.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),u>Math.floor(t.TIMEOUT*this.wait)&&(t.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(t.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())),clearTimeout(this._idleTimeout),this.connected&&(this._idleTimeout=setTimeout(this._onIdle.bind(this),100))}},e&&e(t,n,r,i,s)}(function(){window.Strophe=arguments[0],window.$build=arguments[1],window.$msg=arguments[2],window.$iq=arguments[3],window.$pres=arguments[4]});var Occupant,RoomConfig,XmppRoom,__bind=function(e,t){return function(){return e.apply(t,arguments)}};Strophe.addConnectionPlugin("muc",{_connection:null,rooms:[],init:function(e){return this._connection=e,this._muc_handler=null,Strophe.addNamespace("MUC_OWNER",Strophe.NS.MUC+"#owner"),Strophe.addNamespace("MUC_ADMIN",Strophe.NS.MUC+"#admin"),Strophe.addNamespace("MUC_USER",Strophe.NS.MUC+"#user"),Strophe.addNamespace("MUC_ROOMCONF",Strophe.NS.MUC+"#roomconfig")},join:function(e,t,n,r,i,s){var o,u,a,f=this;return u=this.test_append_nick(e,t),o=$pres({from:this._connection.jid,to:u}).c("x",{xmlns:Strophe.NS.MUC}),s!=null&&o.cnode(Strophe.xmlElement("password",[],s)),this._muc_handler==null&&(this._muc_handler=this._connection.addHandler(function(t){var n,r,i,s,o,u,a,l,c,h;n=t.getAttribute("from"),o=n.split("/")[0];if(!f.rooms[o])return!0;e=f.rooms[o],i={};if(t.nodeName==="message")i=e._message_handlers;else if(t.nodeName==="presence"){l=t.getElementsByTagName("x");if(l.length>0)for(c=0,h=l.length;c<h;c++){u=l[c],a=u.getAttribute("xmlns");if(a&&a.match(Strophe.NS.MUC)){i=e._presence_handlers;break}}}for(s in i)r=i[s],r(t,e)||delete i[s];return!0})),(a=this.rooms)[e]==null&&(a[e]=new XmppRoom(this,e,t,s)),r&&this.rooms[e].addHandler("presence",r),n&&this.rooms[e].addHandler("message",n),i&&this.rooms[e].addHandler("roster",i),this._connection.send(o)},leave:function(e,t,n,r){var i,s,o;return delete this.rooms[e],this.rooms.length===0&&(this._connection.deleteHandler(this._muc_handler),this._muc_handler=null),o=this.test_append_nick(e,t),s=this._connection.getUniqueId(),i=$pres({type:"unavailable",id:s,from:this._connection.jid,to:o}),r!=null&&i.c("status",r),n!=null&&this._connection.addHandler(n,null,"presence",null,s),this._connection.send(i),s},message:function(e,t,n,r,i){var s,o,u,a;return a=this.test_append_nick(e,t),i=i||(t!=null?"chat":"groupchat"),o=this._connection.getUniqueId(),s=$msg({to:a,from:this._connection.jid,type:i,id:o}).c("body",{xmlns:Strophe.NS.CLIENT}).t(n),s.up(),r!=null&&(s.c("html",{xmlns:Strophe.NS.XHTML_IM}).c("body",{xmlns:Strophe.NS.XHTML}).h(r),s.node.childNodes.length===0?(u=s.node.parentNode,s.up().up(),s.node.removeChild(u)):s.up().up()),s.c("x",{xmlns:"jabber:x:event"}).c("composing"),this._connection.send(s),o},groupchat:function(e,t,n){return this.message(e,null,t,n)},invite:function(e,t,n){var r,i;return i=this._connection.getUniqueId(),r=$msg({from:this._connection.jid,to:e,id:i}).c("x",{xmlns:Strophe.NS.MUC_USER}).c("invite",{to:t}),n!=null&&r.c("reason",n),this._connection.send(r),i},directInvite:function(e,t,n,r){var i,s,o;return o=this._connection.getUniqueId(),i={xmlns:"jabber:x:conference",jid:e},n!=null&&(i.reason=n),r!=null&&(i.password=r),s=$msg({from:this._connection.jid,to:t,id:o}).c("x",i),this._connection.send(s),o},queryOccupants:function(e,t,n){var r,i;return r={xmlns:Strophe.NS.DISCO_ITEMS},i=$iq({from:this._connection.jid,to:e,type:"get"}).c("query",r),this._connection.sendIQ(i,t,n)},configure:function(e,t){var n,r,i;return n=$iq({to:e,type:"get"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}),i=n.tree(),r=this._connection.sendIQ(i),t!=null&&this._connection.addHandler(function(e){return t(e),!1},Strophe.NS.MUC_OWNER,"iq",null,r),r},cancelConfigure:function(e){var t,n;return t=$iq({to:e,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"cancel"}),n=t.tree(),this._connection.sendIQ(n)},saveConfiguration:function(e,t){var n,r,i,s,o;r=$iq({to:e,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"});for(s=0,o=t.length;s<o;s++)n=t[s],r.cnode(n).up();return i=r.tree(),this._connection.sendIQ(i)},createInstantRoom:function(e){var t;return t=$iq({to:e,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"}),this._connection.sendIQ(t.tree())},setTopic:function(e,t){var n;return n=$msg({to:e,from:this._connection.jid,type:"groupchat"}).c("subject",{xmlns:"jabber:client"}).t(t),this._connection.send(n.tree())},_modifyPrivilege:function(e,t,n,r,i){var s;return s=$iq({to:e,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_ADMIN}).cnode(t.node),n!=null&&s.c("reason",n),this._connection.sendIQ(s.tree(),r,i)},modifyRole:function(e,t,n,r,i,s){var o;return o=$build("item",{nick:t,role:n}),this._modifyPrivilege(e,o,r,i,s)},kick:function(e,t,n,r,i){return this.modifyRole(e,t,"none",n,r,i)},voice:function(e,t,n,r,i){return this.modifyRole(e,t,"participant",n,r,i)},mute:function(e,t,n,r,i){return this.modifyRole(e,t,"visitor",n,r,i)},op:function(e,t,n,r,i){return this.modifyRole(e,t,"moderator",n,r,i)},deop:function(e,t,n,r,i){return this.modifyRole(e,t,"participant",n,r,i)},modifyAffiliation:function(e,t,n,r,i,s){var o;return o=$build("item",{jid:t,affiliation:n}),this._modifyPrivilege(e,o,r,i,s)},ban:function(e,t,n,r,i){return this.modifyAffiliation(e,t,"outcast",n,r,i)},member:function(e,t,n,r,i){return this.modifyAffiliation(e,t,"member",n,r,i)},revoke:function(e,t,n,r,i){return this.modifyAffiliation(e,t,"none",n,r,i)},owner:function(e,t,n,r,i){return this.modifyAffiliation(e,t,"owner",n,r,i)},admin:function(e,t,n,r,i){return this.modifyAffiliation(e,t,"admin",n,r,i)},changeNick:function(e,t){var n,r;return r=this.test_append_nick(e,t),n=$pres({from:this._connection.jid,to:r,id:this._connection.getUniqueId()}),this._connection.send(n.tree())},setStatus:function(e,t,n,r){var i,s;return s=this.test_append_nick(e,t),i=$pres({from:this._connection.jid,to:s}),n!=null&&i.c("show",n).up(),r!=null&&i.c("status",r),this._connection.send(i.tree())},listRooms:function(e,t){var n;return n=$iq({to:e,from:this._connection.jid,type:"get"}).c("query",{xmlns:Strophe.NS.DISCO_ITEMS}),this._connection.sendIQ(n,t)},test_append_nick:function(e,t){return e+(t!=null?"/"+Strophe.escapeNode(t):"")}}),XmppRoom=function(){function e(e,t,n,r){this.client=e,this.name=t,this.nick=n,this.password=r,this._roomRosterHandler=__bind(this._roomRosterHandler,this),this._addOccupant=__bind(this._addOccupant,this),e.muc&&(this.client=e.muc),this.name=Strophe.getBareJidFromJid(t),this.client.rooms[this.name]=this,this.addHandler("presence",this._roomRosterHandler)}return e.prototype.roster={},e.prototype._message_handlers={},e.prototype._presence_handlers={},e.prototype._roster_handlers={},e.prototype._handler_ids=0,e.prototype.join=function(e,t){if(!this.client.rooms[this.name])return this.client.join(this.name,this.nick,e,t,this.password)},e.prototype.leave=function(e,t){return this.client.leave(this.name,this.nick,e,t),delete this.client.rooms[this.name]},e.prototype.message=function(e,t,n,r){return this.client.message(this.name,e,t,n,r)},e.prototype.groupchat=function(e,t){return this.client.groupchat(this.name,e,t)},e.prototype.invite=function(e,t){return this.client.invite(this.name,e,t)},e.prototype.directInvite=function(e,t){return this.client.directInvite(this.name,e,t,this.password)},e.prototype.configure=function(e){return this.client.configure(this.name,e)},e.prototype.cancelConfigure=function(){return this.client.cancelConfigure(this.name)},e.prototype.saveConfiguration=function(e){return this.client.saveConfiguration(this.name,e)},e.prototype.queryOccupants=function(e,t){return this.client.queryOccupants(this.name,e,t)},e.prototype.setTopic=function(e){return this.client.setTopic(this.name,e)},e.prototype.modifyRole=function(e,t,n,r,i){return this.client.modifyRole(this.name,e,t,n,r,i)},e.prototype.kick=function(e,t,n,r){return this.client.kick(this.name,e,t,n,r)},e.prototype.voice=function(e,t,n,r){return this.client.voice(this.name,e,t,n,r)},e.prototype.mute=function(e,t,n,r){return this.client.mute(this.name,e,t,n,r)},e.prototype.op=function(e,t,n,r){return this.client.op(this.name,e,t,n,r)},e.prototype.deop=function(e,t,n,r){return this.client.deop(this.name,e,t,n,r)},e.prototype.modifyAffiliation=function(e,t,n,r,i){return this.client.modifyAffiliation(this.name,e,t,n,r,i)},e.prototype.ban=function(e,t,n,r){return this.client.ban(this.name,e,t,n,r)},e.prototype.member=function(e,t,n,r){return this.client.member(this.name,e,t,n,r)},e.prototype.revoke=function(e,t,n,r){return this.client.revoke(this.name,e,t,n,r)},e.prototype.owner=function(e,t,n,r){return this.client.owner(this.name,e,t,n,r)},e.prototype.admin=function(e,t,n,r){return this.client.admin(this.name,e,t,n,r)},e.prototype.changeNick=function(e){return this.nick=e,this.client.changeNick(this.name,e)},e.prototype.setStatus=function(e,t){return this.client.setStatus(this.name,this.nick,e,t)},e.prototype.addHandler=function(e,t){var n;n=this._handler_ids++;switch(e){case"presence":this._presence_handlers[n]=t;break;case"message":this._message_handlers[n]=t;break;case"roster":this._roster_handlers[n]=t;break;default:return this._handler_ids--,null}return n},e.prototype.removeHandler=function(e){return delete this._presence_handlers[e],delete this._message_handlers[e],delete this._roster_handlers[e]},e.prototype._addOccupant=function(e){var t;return t=new Occupant(e,this),this.roster[t.nick]=t,t},e.prototype._roomRosterHandler=function(t){var n,r,i,s,o,u;n=e._parsePresence(t),o=n.nick,s=n.newnick||null;switch(n.type){case"error":return;case"unavailable":s&&(n.nick=s,this.roster[o]&&this.roster[s]&&(this.roster[o].update(this.roster[s]),this.roster[s]=this.roster[o]),this.roster[o]&&!this.roster[s]&&(this.roster[s]=this.roster[o].update(n))),delete this.roster[o];break;default:this.roster[o]?this.roster[o].update(n):this._addOccupant(n)}u=this._roster_handlers;for(i in u)r=u[i],r(this.roster,this)||delete this._roster_handlers[i];return!0},e._parsePresence=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m;i={},t=e.attributes,i.nick=Strophe.getResourceFromJid(t.from.textContent),i.type=((f=t.type)!=null?f.textContent:void 0)||null,i.states=[],l=e.children;for(s=0,u=l.length;s<u;s++){n=l[s];switch(n.nodeName){case"status":i.status=n.textContent||null;break;case"show":i.show=n.textContent||null;break;case"x":t=n.attributes;if(((c=t.xmlns)!=null?c.textContent:void 0)===Strophe.NS.MUC_USER){h=n.children;for(o=0,a=h.length;o<a;o++){r=h[o];switch(r.nodeName){case"item":t=r.attributes,i.affiliation=((p=t.affiliation)!=null?p.textContent:void 0)||null,i.role=((d=t.role)!=null?d.textContent:void 0)||null,i.jid=((v=t.jid)!=null?v.textContent:void 0)||null,i.newnick=((m=t.nick)!=null?m.textContent:void 0)||null;break;case"status":r.attributes.code&&i.states.push(r.attributes.code.textContent)}}}}}return i},e}(),RoomConfig=function(){function e(e){this.parse=__bind(this.parse,this),e!=null&&this.parse(e)}return e.prototype.parse=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p;o=e.getElementsByTagName("query")[0].children,this.identities=[],this.features=[],this.x=[];for(u=0,l=o.length;u<l;u++){r=o[u],n=r.attributes;switch(r.nodeName){case"identity":s={};for(a=0,c=n.length;a<c;a++)t=n[a],s[t.name]=t.textContent;this.identities.push(s);break;case"feature":this.features.push(n["var"].textContent);break;case"x":n=r.children[0].attributes;if(!n["var"].textContent==="FORM_TYPE"||!n.type.textContent==="hidden")break;p=r.children;for(f=0,h=p.length;f<h;f++){i=p[f];if(!!i.attributes.type)continue;n=i.attributes,this.x.push({"var":n["var"].textContent,label:n.label.textContent||"",value:i.firstChild.textContent||""})}}}return{identities:this.identities,features:this.features,x:this.x}},e}(),Occupant=function(){function e(e,t){this.room=t,this.update=__bind(this.update,this),this.admin=__bind(this.admin,this),this.owner=__bind(this.owner,this),this.revoke=__bind(this.revoke,this),this.member=__bind(this.member,this),this.ban=__bind(this.ban,this),this.modifyAffiliation=__bind(this.modifyAffiliation,this),this.deop=__bind(this.deop,this),this.op=__bind(this.op,this),this.mute=__bind(this.mute,this),this.voice=__bind(this.voice,this),this.kick=__bind(this.kick,this),this.modifyRole=__bind(this.modifyRole,this),this.update(e)}return e.prototype.modifyRole=function(e,t,n,r){return this.room.modifyRole(this.nick,e,t,n,r)},e.prototype.kick=function(e,t,n){return this.room.kick(this.nick,e,t,n)},e.prototype.voice=function(e,t,n){return this.room.voice(this.nick,e,t,n)},e.prototype.mute=function(e,t,n){return this.room.mute(this.nick,e,t,n)},e.prototype.op=function(e,t,n){return this.room.op(this.nick,e,t,n)},e.prototype.deop=function(e,t,n){return this.room.deop
(this.nick,e,t,n)},e.prototype.modifyAffiliation=function(e,t,n,r){return this.room.modifyAffiliation(this.jid,e,t,n,r)},e.prototype.ban=function(e,t,n){return this.room.ban(this.jid,e,t,n)},e.prototype.member=function(e,t,n){return this.room.member(this.jid,e,t,n)},e.prototype.revoke=function(e,t,n){return this.room.revoke(this.jid,e,t,n)},e.prototype.owner=function(e,t,n){return this.room.owner(this.jid,e,t,n)},e.prototype.admin=function(e,t,n){return this.room.admin(this.jid,e,t,n)},e.prototype.update=function(e){return this.nick=e.nick||null,this.affiliation=e.affiliation||null,this.role=e.role||null,this.jid=e.jid||null,this.status=e.status||null,this.show=e.show||null,this},e}(),function(e){function n(t,n,r){var i=r.relative?t.position().top:t.offset().top,s=r.relative?t.position().left:t.offset().left,o=r.position[0];i-=n.outerHeight()-r.offset[0],s+=t.outerWidth()+r.offset[1],/iPad/i.test(navigator.userAgent)&&(i-=e(window).scrollTop());var u=n.outerHeight()+t.outerHeight();o=="center"&&(i+=u/2),o=="bottom"&&(i+=u),o=r.position[1];var f=n.outerWidth()+t.outerWidth();return o=="center"&&(s-=f/2),o=="left"&&(s-=f),{top:i,left:s}}function r(r,i){var s=this,o=r.add(s),u,f=0,l=0,h=r.attr("title"),p=r.attr("data-tooltip"),d=t[i.effect],v,m=r.is(":input"),g=m&&r.is(":checkbox, :radio, select, :button, :submit"),y=r.attr("type"),w=i.events[y]||i.events[m?g?"widget":"input":"def"];if(!d)throw'Nonexistent effect "'+i.effect+'"';w=w.split(/,\s*/);if(w.length!=2)throw"Tooltip: bad events configuration for "+y;r.bind(w[0],function(e){clearTimeout(f),i.predelay?l=setTimeout(function(){s.show(e)},i.predelay):s.show(e)}).bind(w[1],function(e){clearTimeout(l),i.delay?f=setTimeout(function(){s.hide(e)},i.delay):s.hide(e)}),h&&i.cancelDefault&&(r.removeAttr("title"),r.data("title",h)),e.extend(s,{show:function(t){if(!u){p?u=e(p):i.tip?u=e(i.tip).eq(0):h?u=e(i.layout).addClass(i.tipClass).appendTo(document.body).hide().append(h):(u=r.next(),u.length||(u=r.parent().next()));if(!u.length)throw"Cannot find tooltip for "+r}if(s.isShown())return s;u.stop(!0,!0);var m=n(r,u,i);i.tip&&u.html(r.data("title")),t=t||e.Event(),t.type="onBeforeShow",o.trigger(t,[m]);if(t.isDefaultPrevented())return s;m=n(r,u,i),u.css({position:"absolute",top:m.top,left:m.left}),v=!0,d[0].call(s,function(){t.type="onShow",v="full",o.trigger(t)});var g=i.events.tooltip.split(/,\s*/);return u.data("__set")||(u.bind(g[0],function(){clearTimeout(f),clearTimeout(l)}),g[1]&&!r.is("input:not(:checkbox, :radio), textarea")&&u.bind(g[1],function(e){e.relatedTarget!=r[0]&&r.trigger(w[1].split(" ")[0])}),u.data("__set",!0)),s},hide:function(n){if(!u||!s.isShown())return s;n=n||e.Event(),n.type="onBeforeHide",o.trigger(n);if(!n.isDefaultPrevented())return v=!1,t[i.effect][1].call(s,function(){n.type="onHide",o.trigger(n)}),s},isShown:function(e){return e?v=="full":v},getConf:function(){return i},getTip:function(){return u},getTrigger:function(){return r}}),e.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(t,n){e.isFunction(i[n])&&e(s).bind(n,i[n]),s[n]=function(t){return t&&e(s).bind(n,t),s}})}e.tools=e.tools||{version:"v1.2.5"},e.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(e,n,r){t[e]=[n,r]}};var t={toggle:[function(e){var t=this.getConf(),n=this.getTip(),r=t.opacity;r<1&&n.css({opacity:r}),n.show(),e.call()},function(e){this.getTip().hide(),e.call()}],fade:[function(e){var t=this.getConf();this.getTip().fadeTo(t.fadeInSpeed,t.opacity,e)},function(e){this.getTip().fadeOut(this.getConf().fadeOutSpeed,e)}]};e.fn.tooltip=function(t){var n=this.data("tooltip");return n?n:(t=e.extend(!0,{},e.tools.tooltip.conf,t),typeof t.position=="string"&&(t.position=t.position.split(/,?\s/)),this.each(function(){n=new r(e(this),t),e(this).data("tooltip",n)}),t.api?n:this)}}(jQuery);var LiquidMetal=function(){function s(e,t){var n=e.charAt(t);return"A"<=n&&n<="Z"}function o(e,t){var n=e.charAt(t-1);return n==" "||n=="	"}function u(e,t,n,r){for(var i=n;i<r;i++)e[i]=t;return e}var e=0,t=1,n=.8,r=.9,i=.85;return{score:function(t,r){if(r.length===0)return n;if(r.length>t.length)return e;var i=this.buildScoreArray(t,r);if(i===!1)return 0;var s=0;for(var o=0;o<i.length;o++)s+=i[o];return s/i.length},buildScoreArray:function(a,f){var l=new Array(a.length),c=a.toLowerCase(),h=f.toLowerCase(),p=-1,d=!1;for(var v=0;v<h.length;v++){var m=h[v],g=c.indexOf(m,p+1);if(g===-1)return!1;g===0&&(d=!0),o(a,g)?(l[g-1]=1,u(l,i,p+1,g-1)):s(a,g)?u(l,i,p+1,g):u(l,e,p+1,g),l[g]=t,p=g}var y=d?r:n;return u(l,y,p+1,l.length),l}}}();TB=function(){function e(){this._listeners={},this.addEventListener=function(e,t){if(!e)throw new Error("EventDispatcher.addEventListener :: No type specified");if(!t)throw new Error("EventDispatcher.addEventListener :: No listener function specified");this._listeners.hasOwnProperty(e)||(this._listeners[e]=new Array),this.removeEventListener(e,t),X("TB.addEventListener("+e+")"),this._listeners[e].push(t)},this.removeEventListener=function(e,t){if(!e)throw new Error("EventDispatcher.removeEventListener :: No type specified");if(!t)throw new Error("EventDispatcher.removeEventListener :: No listener function specified");X("TB.removeEventListener("+e+")");if(this._listeners.hasOwnProperty(e))for(var n=0;n<this._listeners[e].length;n++)if(this._listeners[e][n]==t){this._listeners[e].splice(n,1);break}},this.dispatchEvent=function(e){if(!e)throw new Error("EventDispatcher.dispatchEvent :: No event specified");if(!e.type)throw new Error("EventDispatcher.dispatchEvent :: Event has no type");e.target||(e.target=this);if(this._listeners.hasOwnProperty(e.type)){var t=this._listeners[e.type];if(!(t instanceof Array))throw new Error("EventDispatcher.dispatchEvent :: Invalid object type in listeners");for(var n=0;n<t.length;n++){var r=z(t[n],e);setTimeout(r,1)}}}}function t(e,t){this.type=e,this.cancelable=t?t:!1,this.target;var n=!1;this.preventDefault=function(){this.cancelable?n=!0:$("Event.preventDefault :: Trying to preventDefault on an Event that isn't cancelable")},this.isDefaultPrevented=function(){return n}}function n(e,n,r,i){this.superClass=t,this.superClass(e),this.message=n,this.title=r,this.code=i}function r(e,n,r){this.superClass=t,this.superClass(e),this.connections=n,this.reason=r}function i(e,n,r,i){this.superClass=t,this.superClass(e,i),this.streams=n,this.reason=r}function s(e,n,r,i,s){this.superClass=t,this.superClass(e),this.connections=n,this.streams=r,this.groups=i,this.archives=s}function o(e,n,r){this.superClass=t,this.superClass(e,r),this.reason=n}function u(e,n){this.superClass=t,this.superClass(e),this.fromConnection=n}function a(e,n,r){this.superClass=t,this.superClass(e),this.streamId=n,this.volume=r}function f(e,n,r){this.superClass=t,this.superClass(e),this.camera=n,this.microphone=r}function l(e,n,r){this.superClass=t,this.superClass(e),this.group=n,this.reason=r}function c(e,n,r,i,s){this.superClass=t,this.superClass(e),this.cameras=n,this.microphones=r,this.selectedCamera=i,this.selectedMicrophone=s}function h(e,n,r,i,s){this.superClass=t,this.superClass(e),this.widthFrom=n,this.widthTo=r,this.heightFrom=i,this.heightTo=s}function p(e,n,r,i,s){this.superClass=t,this.superClass(e),this.type=e,this.stream=n,this.changedProperty=r,this.oldValue=i,this.newValue=s}function d(e,n){this.superClass=t,this.superClass(e),this.archives=n}function v(e,n,r){this.superClass=t,this.superClass(e),this.archive=n,this.streams=r}function m(e,n){this.superClass=t,this.superClass(e),this.changedValues=n}function g(e,n,r,i){this.superClass=t,this.superClass(e),this.reasonCode=n,this.reason=r,this.failedValues=i}function y(e,t,n){this.connectionId=e,this.creationTime=Number(t),this.data=n,this.quality}function b(e,t,n,r,i,s,o,u,a,f,l,c){this.streamId=e,this.connection=t,this.name=n,this.data=r,this.type=i,this.creationTime=s,this.hasAudio=o,this.hasVideo=u,this.orientation=a,this.peerId=l,this.quality=c,this.startRecording=function(e){X("Stream.startRecording()");var t="controller_"+f;e=At[f][e.archiveId];if(!e){var n="Stream.startRecording :: Archive not created.";throw J(n),new Error(n)}if(e.type!=TB.PER_STREAM)throw n="Stream.startRecording :: Trying to record per stream on a "+e.type+" archive",J(n),new Error(n);if(!(t&&this.connection&&this.connection.connectionId))throw n="Stream.startRecording :: Connection required to record an archive.",J(n),new Error(n);try{var r=document.getElementById(t);r.startRecordingStream(this.streamId,e.archiveId),e.recording=!0}catch(i){throw n="Stream.startRecording :: "+i,J(n),new Error(n)}},this.stopRecording=function(e){X("Stream.stopRecording()"),e=At[f][e.archiveId];if(!e){var t="Stream.stopRecording :: Archive not created.";throw J(t),new Error(t)}if(e.type!=TB.PER_STREAM)throw t="Stream.stopRecording :: Trying to stop recording per stream on a "+e.type+" archive",J(t),new Error(t);var n="controller_"+f;if(!(n&&this.connection&&this.connection.connectionId))throw t="Stream.stopRecording :: Connection required to record an archive.",J(t),new Error(t);try{var r=document.getElementById(n);r.stopRecordingStream(this.streamId,e.archiveId)}catch(i){throw t="Stream.stopRecording :: "+i,J(t),new Error(t)}}}function w(t,n){this.id=t,this.replacedDivId=n,this.parentClass=e,this.parentClass()}function E(e,t){this.uberClass=w,this.uberClass(e,t);var n=["showMicButton","showSpeakerButton","showSettingsButton","showCameraToggleButton","nameDisplayMode","buttonDisplayMode","showSaveButton","showRecordButton","showRecordStopButton","showReRecordButton","showPauseButton","showPlayButton","showPlayStopButton","showStopButton","backgroundImageURI","showControlPanel","showRecordCounter","showPlayCounter","showControlBar"];this.getStyle=function(e){var t=document.getElementById(this.id);if(!this.loaded)return e?this._style[e]:this._style;if(!t)throw o="Publisher.getStyle:: Publisher "+this.id+" does not exist.",J(o),new Error(o);try{var r=t.getStyle(e);if(typeof r=="string")return r;for(var i in r)r[i]=="false"&&(r[i]=!1),r[i]=="true"&&(r[i]=!0),n.indexOf(i)<0&&delete r[i];return r}catch(s){var o="Publisher.getStyle:: Failed to call getStyle. "+s;throw J(o),new Error(o)}},this._style={};var r={buttonDisplayMode:["auto","off","on"],nameDisplayMode:["auto","off","on"],showSettingsButton:[!0,!1],showMicButton:[!0,!1],showCameraToggleButton:[!0,!1],showSaveButton:[!0,!1],backgroundImageURI:null,showControlBar:[!0,!1],showPlayCounter:[!0,!1],showRecordCounter:[!0,!1]};this.setStyle=function(e,t){X("Publisher.setStyle: "+e.toString());var n=document.getElementById(this.id);if(!this.loaded){if(typeof e=="string"&&t!=null)this._style.hasOwnProperty(e)&&(e=="backgroundImageURI"||r[e].indexOf(t)>-1)?(X("setStyle::Setting "+e+" to "+t),this._style[e]=t):$("setStyle::Invalid style property passed "+e+" : "+t);else for(var i in e)this.setStyle(i,e[i]);this.modified=!0}else{if(!n)throw o="Publisher.setStyle:: Publisher "+this.id+" does not exist.",J(o),new Error(o);try{n.setStyle(e,t)}catch(s){var o="Publisher.setStyle:: Failed to call setStyle. "+s;throw J(o),new Error(o)}}return this}}function S(e,t){this.supClass=E,this.supClass(e,t),this.getImgData=function(){X("VideoComponent.getImgData");var e=document.getElementById(this.id);if(!e)throw n="VideoComponent.getImgData:: Component "+this.id+" does not exist.",J(n),new Error(n);try{return e.getImgData()}catch(t){var n="VideoComponent.getImgData:: Failed to call getImgData. "+t;throw J(n),new Error(n)}}}function x(e,t,n){this.superClass=S,this.superClass(e,t),this._style={showMicButton:!0,showSettingsButton:!0,showCameraToggleButton:!0,nameDisplayMode:"auto",buttonDisplayMode:"auto",backgroundImageURI:null},this.modified=!1,n&&n.hasOwnProperty("style")&&(this.setStyle(n.style),this.modified=!0),this.properties=n,this.loaded=!1,this.panelId=null,this.gain=50,n&&n.hasOwnProperty("microphoneGain")&&(this.gain=parseInt(n.microphoneGain,10)),this.enableMicrophone=function(){this.publishAudio(!0)},this.disableMicrophone=function(){this.publishAudio(!1)},this.setMicrophoneGain=function(e){var t=document.getElementById(this.id);if(!this.loaded)this.gain=e,this.modified=!0;else{if(!t)throw r="Publisher "+this.id+" does not exist.",J(r),new Error(r);try{t.setMicGain(e)}catch(n){var r="Microphone gain adjustment on publisher "+this.id+" failed";throw J(r),new Error(r)}}return this},this.getMicrophoneGain=function(){var e=document.getElementById(this.id);if(!this.loaded)return this.gain;if(!e)throw n="Publisher "+this.id+" does not exist.",J(n),new Error(n);try{return e.getMicGain()}catch(t){var n="Microphone gain adjustment on publisher "+this.id+" failed";throw J(n),new Error(n)}},this.getEchoCancellationMode=function(){X("Publisher.getEchoCancellationMode()");var e="",t=document.getElementById(this.id);if(!this.loaded)return"unknown";if(!t)throw r="Publisher "+this.id+" does not exist.",J(r),new Error(r);try{e=t.getEchoCancellationMode()}catch(n){var r="Getting echo cancellation mode for publisher "+this.id+" failed. "+n;throw J(r),new Error(r)}return e},this.publishAudio=function(e){X("Publisher.publishAudio()"),this.loaded?ft(this.id,"publishAudio",e):(this.audioPublished=e,this.modified=!0)},this.publishVideo=function(e){X("Publisher.publishVideo()"),this.loaded?ft(this.id,"publishVideo",e):(this.videoPublished=e,this.modified=!0)},this.setCamera=function(e){X("Publisher.setCamera("+e+")"),lt(this.id,e,!0)},this.setMicrophone=function(e){X("Publisher.setMicrophone("+e+")"),lt(this.id,e,!1)}}function T(e,t,n,r){this.superClass=S,this.superClass(t,n),this._style={nameDisplayMode:"auto",buttonDisplayMode:"auto",backgroundImageURI:null},this.modified=!1,r&&r.hasOwnProperty("style")&&(this.setStyle(r.style),this.modified=!0),this.stream=e,this.properties=r,this.loaded=!1,this.audioVolume=50;var i=!0,s=!0;r&&(r.hasOwnProperty("subscribeToAudio")&&(r["subscribeToAudio"]=="false"||r["subscribeToAudio"]==0)&&(i=!1),r.hasOwnProperty("subscribeToVideo")&&(r["subscribeToVideo"]=="false"||r["subscribeToVideo"]==0)&&(s=!1),r.hasOwnProperty("audioVolume")&&(this.audioVolume=parseInt(r.audioVolume,10))),this.enableAudio=function(){this.subscribeToAudio(!0)},this.disableAudio=function(){this.subscribeToAudio(!1)},this.setAudioVolume=function(e){var t=document.getElementById(this.id);if(!this.loaded)this.audioVolume=e;else{if(!t)throw r="Subscriber "+this.id+" does not exist.",J(r),new Error(r);try{t.setAudioVolume(e)}catch(n){var r="Volume adjustment on subscriber "+this.id+" failed";throw J(r),new Error(r)}}return this},this.getAudioVolume=function(){var e=document.getElementById(this.id);if(!this.loaded)return this.audioVolume;if(!e)throw n="Subscriber "+this.id+" does not exist.",J(n),new Error(n);try{return e.getAudioVolume()}catch(t){var n="Volume adjustment on subscriber "+this.id+" failed";throw J(n),new Error(n)}return this},this._subscribeToAudio=function(e,t){X("Subscriber.subscribeToAudio()");if(!t||i)this.loaded?ft(this.id,"subscribeToAudio",e):(this.audioSubscribed=e,this.modified=!0)},this.subscribeToAudio=function(e){i=e,this._subscribeToAudio(i,!1)},this._subscribeToVideo=function(e,t){X("Subscriber.subscribeToVideo()");if(!t||s)this.loaded?ft(this.id,"subscribeToVideo",e):(this.videoSubscribed=e,this.modified=!0)},this.subscribeToVideo=function(e){s=e,this._subscribeToVideo(s,!1)},this.changeOrientation=function(e){X("Subscriber.changeOrientation()"),ft(this.id,"changeOrientation",e)}}function N(e,t,n,r){this.superClass=w,this.superClass(e,t),n?(this.publisher=n,this.component=n):(this.publisher=null,this.component=n),this.parentCreated=!1,this.properties=r}function C(e,t){this.name=e,this.status=t}function k(e,t){this.name=e,this.status=t}function L(t,n){this.superClass=e,this.superClass(),this.groupId=n,this.sessionId=t,this.enableEchoSuppression=function(){X("Group.enableEchoSuppresion()"),I(this.sessionId,this.groupId,!0)},this.disableEchoSuppression=function(){X("Group.disableEchoSuppression()"),I(this.sessionId,this.groupId,!1)},this.getGroupProperties=function(){return X("Group.getGroupProperties()"),q(this.sessionId,this.groupId)}}function A(e){this.isEnabled=e}function O(e,t,n){this.numOutputStreams=e,this.switchType=t,this.switchTimeout=n}function M(e){this.echoSuppression=new A(e.echoSuppressionEnabled),this.multiplexer=new O(e.multiplexerNumOutputStreams,e.multiplexerSwitchType,e.multiplexerSwitchTimeout)}function _(e,t,n,r,i){this.archiveId=e,this.type=t,this.title=n,this.sessionId=r;var s;i=="sessionRecordingInProgress"?(this.recording=!0,this.status="open"):(this.recording=!1,this.status=i),this.startPlayback=function(e){e||(e=!1),X("Archive.startPlayback() : "+e);var t="controller_"+r,n=TB.sessions[r].connection;if(!Ot[r][this.archiveId]){var i="Archive.startPlayback :: Archive not loaded.";throw J(i),new Error(i)}if(!(t&&n&&n.connectionId))throw i="Archive.startPlayback :: Connection required to play back an archive.",J(i),new Error(i);try{var s=document.getElementById(t);s.startPlayback(this.archiveId,e)}catch(o){throw i="Archive.startPlayback :: "+o,J(i),new Error(i)}},this.stopPlayback=function(){X("Archive.stopPlayback()");var e="controller_"+r,t=TB.sessions[r].connection;if(!(e&&t&&t.connectionId))throw s="Archive.stopPlayback :: Connection required to stop playing back an archive.",J(s),new Error(s);try{var n=document.getElementById(e);n.stopPlayback(this.archiveId)}catch(i){var s="Archive.stopPlayback :: "+i;throw J(s),new Error(s)}},this.getStateManager=function(){X("Archive.getStateManager() "+e);if(s)return s;var t="controller_"+r,n=TB.sessions[r].connection;if(t&&n&&n.connectionId)return s=new F(t,e),s;var i="Archive.getStateManager :: Connection required to getStateManager. Make sure that this archive was loaded in a Session.";throw J(i),new Error(i)}}function D(e,t,n){this.superClass=S,this.superClass(e,t),this._style={buttonDisplayMode:"auto",showCameraToggleButton:!0,showControlBar:!0,showMicButton:!0,showPlayCounter:!0,showRecordCounter:!0,showSaveButton:!0,showSettingsButton:!0},this.id=e,this.properties=n,this.saveArchive=function(){var e=document.getElementById(this.id);e.save()},this.setCamera=function(e){X("Recorder.setCamera("+e+")"),lt(this.id,e,!0)},this.setMicrophone=function(e){X("Recorder.setMicrophone("+e+")"),lt(this.id,e,!1)},this.stopRecording=function(){recorderElement=document.getElementById(this.id),recorderElement.stopRecording()},this.startRecording=function(e){recorderElement=document.getElementById(this.id),recorderElement.startRecording(e)},this.startPlaying=function(){X("Recorder.startPlaying()");try{var e=document.getElementById(this.id);e.startPlaying()}catch(t){var n="Recorder.startPlaying :: "+t;throw J(n),new Error(n)}},this.stopPlaying=function(){X("Recorder.stopPlaying()");try{var e=document.getElementById(this.id);e.stopPlaying()}catch(t){var n="Recorder.stopPlaying :: "+t;throw J(n),new Error(n)}},this.setTitle=function(e){var t=document.getElementById(this.id);if(!this.loaded)this._title=e,this.modified=!0;else{if(!t)throw r="Recorder "+this.id+" does not exist.",J(r),new Error(r);try{t.setTitle(e)}catch(n){var r="Setting archive title on Recorder "+this.id+" failed.";throw J(r),new Error(r)}}}}function P(e,t,n){this.superClass=S,this.superClass(e,t),this._style={showPlayButton:!0,showStopButton:!0,showSpeakerButton:!0},this.id=e,this.properties=n,this.archiveId,this.loadArchive=function(e){if(!e)throw r="Player.loadArchive :: Archive id required to load an archive.",J(r),new Error(r);if(this.loaded)try{var t=document.getElementById(this.id);t.loadArchive(e),this.archiveId=e}catch(n){var r="Player.loadArchive :: "+n;throw J(r),new Error(r)}else this._archiveId=e},this.play=function(){if(this.loaded)try{var e=document.getElementById(this.id);e.startPlayback()}catch(t){var n="Player.play :: "+t;throw J(n),new Error(n)}else this._play=!0},this.stop=function(){if(this.loaded)try{var e=document.getElementById(this.id);e.stopPlayback()}catch(t){var n="Player.stop :: "+t;throw J(n),new Error(n)}else this._play=!1},this.pause=function(){if(this.loaded)try{var e=document.getElementById(this.id);e.pausePlayback()}catch(t){var n="Player.pause :: "+t;throw J(n),new Error(n)}else this._play=!1}}function H(t){this.superClass=e,this.superClass(),this.apiKey=t,this.panels={},this.showMicSettings=!0,this.showCamSettings=!0;var n=360,r=270,i=340,s=230;this.detectDevices=function(){X("DeviceManager.detectDevices()");if(!St){var e={};e.allowscriptaccess="always",St="opentok_deviceDetector";var n={};n.id=St;var r={};swfobject.addDomLoadEvent(function(){var i=document.createElement("div");i.setAttribute("id",St),i.style.display="none",document.body.appendChild(i),swfobject.embedSWF(kt+"/v0.91.46.b5f48f1/flash/f_devicedetectorwidget.swf?partnerId="+t,St,1,1,"10.0.0",!1,r,e,n)})}else try{var i=document.getElementById(St);i.detectDevices()}catch(s){throw J(s),new Error("DeviceManager.detectDevices() :: Failed to locate existing device detector "+s)}},this.displayPanel=function(e,t,o){X("DeviceManager.displayPanel("+e+")");var u;t?u="displayPanel_"+t.id:u="displayPanel_global";if(t&&TB.sessions)for(var a in TB.sessions)TB.sessions[a].hasOwnProperty("publishers")&&TB.sessions[a].publishers[t.id]&&(TB.sessions[a].publishers[t.id].panelId=u);var f=document.getElementById(u);if(f)return $("DeviceManager.displayPanel :: there is already a device panel"+(t?" for this component":"")),this.panels[u];var l=!1,c=o?mt(o):{},h={};h.allowscriptaccess="always";var p=n,d=r;"showCloseButton"in c?c["showCloseButton"]==0&&(p=i,d=s):c.showCloseButton=!0,"showMicSettings"in c||(c.showMicSettings=this.showMicSettings),"showCamSettings"in c||(c.showCamSettings=this.showCamSettings);if(!e){e="devicePanel_replace_div";var v=document.createElement("div");v.setAttribute("id",e);var m=document.createElement("div");m.setAttribute("id","devicePanel_parent_"+(t?t.id:"global")),m.style.position="absolute";var g="pageYOffset"in window&&typeof window.pageYOffset=="number"?window.pageYOffset:document.body&&document.body.scrollTop?document.body.scrollTop:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:0,y="innerHeight"in window?window.innerHeight:document.documentElement&&document.documentElement.offsetHeight?document.documentElement.offsetHeight:r;g+=y*.2,m.style.top=g+"px",m.style.left="50%",m.style.width=p+"px",m.style.height=d+"px",m.style.marginLeft=0-p/2+"px",m.style.marginTop=0-d/4+"px","zIndex"in c?(m.style.zIndex=c.zIndex,delete c.zIndex):m.style.zIndex=ct()+1,document.body.appendChild(m),l=!0,m.appendChild(v)}var b=document.getElementById(e);if(!b){var w="DeviceManager.displayPanel :: replaceElementId does not exist in DOM.";throw J(w),new Error(w)}var E;this.panels[u]&&this.removePanel(this.panels[u]),t?E=new N(u,e,t,c):E=new N(u,e,null,c),E.parentCreated=l,this.panels[u]=E;var S={};return S.id=E.id,S.style="outline:none;",c.devicePanelId=u,c.wmode?(h.wmode=c.wmode,delete c.wmode):h.wmode="transparent",U(kt+"/v0.91.46.b5f48f1/flash/f_devicewidget.swf?partnerId="+this.apiKey,e,p,d,gt,!1,c,h,S),E},this.removePanel=function(e){if(!e.hasOwnProperty("id")){var t="DeviceManager.removePanel :: invalid DevicePanel object";throw J(t),new Error(t)}X("DeviceManager.removePanel("+e.id+")");var n=document.getElementById(e.id);if(!n)throw t="DeviceManager.removePanel :: DevicePanel does not exist in DOM",J(t),new Error(t);var r=n.parentNode,i=e.parentCreated;for(var s in this.panels)if(this.panels[s].hasOwnProperty("id")&&s==e.id){var o=this.panels[s];ut(this.panels[s]),delete this.panels[s];var u=function(){if(o.publisher&&TB.sessions)for(var e in TB.sessions)TB.sessions[e].hasOwnProperty("disconnect")&&TB.sessions[e].publishers[o.publisher.id]&&(TB.sessions[e].publishers[o.publisher.id].panelId=null)};setTimeout(u,2)}if(i)try{var a=r.parentNode;a.removeChild(r)}catch(f){throw t="Failed to clean up the parent of the device panel "+f,J(t),new Error(t)}}}function B(e){var t=1,n=1;this.recorders={},this.players={},this.apiKey=e;var r=320,i=271,s=31;this.displayRecorder=function(n,o,u){if(!n)throw errorMsg="RecorderManager.displayRecorder :: Token required to displayRecorder",J(errorMsg),new Error(errorMsg);var a="recorder_"+e+"_"+t++,f=u?mt(u):{};f.token=n,f.partnerId=e,f.recorderId=a;if(f.hasOwnProperty("style")){var l=f.style.showControlBar;f.style=encodeURIComponent(vt(f.style))}var c={};c.allowscriptaccess="always",f.wmode?(c.wmode=f.wmode,delete f.wmode):c.wmode="transparent";var h={};h.id=a,h.style="outline:none;";if(!f.width||isNaN(f.width))f.width=r;if(!f.height||isNaN(f.height))f.height=i,l==0&&(f.height-=s);var p=!1;return o||(o="recorder_replace_"+t,p=!0),swfobject.addDomLoadEvent(function(){if(p){var t=document.createElement("div");t.setAttribute("id",o),document.body.appendChild(t)}U(kt+"/v0.91.46.b5f48f1/flash/f_recordwidget.swf?partnerId="+e,o,f.width,f.height,gt,!1,f,c,h)}),this.recorders[a]=new D(a,o,f),this.recorders[a]},this.removeRecorder=function(e){if(!e){var t="Session.removeRecorder :: recorder cannot be null";throw J(t),new Error(t)}X("Session.removeRecorder("+e.id+")"),ut(e),delete this.recorders[e.id]},this.displayPlayer=function(t,o,u,a){if(!t)throw errorMsg="RecorderManager.displayPlayer :: Valid ArchiveId required",J(errorMsg),new Error(errorMsg);var f="player_"+e+"_"+n++,l=a?mt(a):{};l.token=o,l.archiveId=t,l.partnerId=e,l.playerId=f;if(l.hasOwnProperty("style")){var c=l.style.showControlBar;l.style=encodeURIComponent(vt(l.style))}var h={};h.allowscriptaccess="always",l.wmode?(h.wmode=l.wmode,delete l.wmode):h.wmode="transparent";var p={};p.id=f,p.style="outline:none;";if(!l.width||isNaN(l.width))l.width=r;if(!l.height||isNaN(l.height))l.height=i,c==0&&(l.height-=s);l.autoPlay||(l.autoPlay=!1);var d=!1;return u||(u="player_replace_"+n,d=!0),swfobject.addDomLoadEvent(function(){if(d){var t=document.createElement("div");t.setAttribute("id",u),document.body.appendChild(t)}U(kt+"/v0.91.46.b5f48f1/flash/f_playerwidget.swf?partnerId="+e,u,l.width,l.height,gt,!1,l,h,p)}),this.players[f]=new P(f,u,l),this.players[f]},this.removePlayer=function(e){if(!e){var t="Session.removePlayer :: player cannot be null";throw J(t),new Error(t)}X("Session.removePlayer("+e.id+")"),ut(e),delete this.players[e.id]}}function j(t){this.superClass=e,this.superClass(),this.sessionId=t,this.connection,this.subscribers={},this.publishers={},this.apiKey,this.capabilities,this.connected=!1,this.connecting=!1;var n=1,r=1,i=264,s=198,o,u;this.connect=function(e,t,n){if(this.connecting){$("Session.connect :: Patience, please.");return}X("Session.connect("+e+")");if(!TB.checkSystemRequirements()){var r="Session.connect :: Flash Player Version 10+ required";throw J(r),new Error(r)}if(!e)throw r="Session.connect :: API key required to connect",J(r),new Error(r);if(!t)throw r="Session.connect :: Token required to connect",J(r),new Error(r);if(this.connected){$("Session.connect :: Session already connected");return}this.connecting=!0;var i=n?mt(n):{};this.apiKey=e,this.token=t,this.properties=n;var s={};s.allowscriptaccess="always",i.wmode&&(s.wmode=i.wmode,delete i.wmode),i.connectionData&&(i.connectionData=encodeURIComponent(i.connectionData)),o="controller_"+this.sessionId;var u={};u.id=o,i.sessionId=this.sessionId,i.token=this.token;var a="replace_"+this.sessionId;swfobject.addDomLoadEvent(function(){var t=document.createElement("div");t.setAttribute("id",a),t.style.display="none",document.body.appendChild(t);var n=new Date;i.startTime=n.getTime(),swfobject.embedSWF(kt+"/v0.91.46.b5f48f1/flash/f_controllerwidget.swf?partnerId="+e,a,1,1,gt,!1,i,s,u)}),window.location.protocol=="file:"&&setTimeout("TB.controllerLoadCheck()",8e3)},this.disconnect=function(){X("Session.disconnect()");if(!o||this.connecting){$("Session.disconnect :: No connection to disconnect");return}var e=document.getElementById(o);if(e){if(!isUnloading)try{e.cleanupView()}catch(t){var n="Session.disconnect :: Failed to disconnect - "+t;throw J(n),new Error(n)}}else $("Session.disconnect :: No connection to disconnect")},this.disconnectComponents=function(){X("Session.disconnectComponents() - disconnecting publishers and subscribers");for(var e in this.publishers)this.publishers[e].hasOwnProperty("id")&&ot(this.publishers[e]);for(var t in this.subscribers)this.subscribers[t].hasOwnProperty("id")&&ot(this.subscribers[t])},this.cleanup=function(){X("Session.cleanup()");for(var e in this.publishers)this.publishers[e].hasOwnProperty("id")&&this.unpublish(this.publishers[e]);for(var t in this.subscribers)this.subscribers[t].hasOwnProperty("id")&&this.unsubscribe(this.subscribers[t])},this.cleanupConnection=function(){X("Session.cleanupConnection() - removing controller"),this.connection=null;if(!o){$("Session.cleanup :: No connection to clean up");return}document.getElementById(o)?setTimeout(function(){at(o,"TB.sessionDisconnected :: "),o=null},0):$("Session.cleanup :: No connection to clean up")},this.publish=function(e,t){X("Session.publish("+e+"):"+t);if(!this.connection||!this.connection.connectionId){var r="Session.publish :: Connection required to publish";throw J(r),new Error(r)}if(!e){var i=document.createElement("div");e="publisher_replace_"+this.sessionId+"_"+n,i.setAttribute("id",e),document.body.appendChild(i)}var s=t?mt(t):{};if(s["name"]!=undefined&&s.name.length>1e3)throw r="Session.publish :: name property longer than 1000 chars.",J(r),new Error(r);if(s["data"]!=undefined&&s.data.length>1e3)throw r="Session.publish :: data property longer than 1000 chars.",J(r),new Error(r);var o="publisher_"+this.sessionId+"_"+n++,u=new x(o,e,s);return this._embedPublisher(u)},this._embedPublisher=function(e){var t=document.getElementById(e.replacedDivId);if(!t)throw errorMsg="Session.publish :: replaceElementId does not exist in DOM.",J(errorMsg),new Error(errorMsg);var n={};n.allowscriptaccess="always",n.cameraSelected=xt,e.properties.wmode?(n.wmode=e.properties.wmode,delete e.properties.wmode):n.wmode="transparent",e.properties.hasOwnProperty("style")&&(e.properties.style=encodeURIComponent(vt(e.properties.style)));var r={};r.id=e.id,r.style="outline:none;",e.properties.publisherId=e.id,e.properties.connectionId=this.connection.connectionId,e.properties.sessionId=this.sessionId,e.properties.token=this.token,e.properties.cameraSelected=xt,e.properties.simulateMobile=TB.simulateMobile,e.properties.publishCapability=this.capabilities.publish;if(!e.properties.width||isNaN(e.properties.width))e.properties.width=i;if(!e.properties.height||isNaN(e.properties.height))e.properties.height=s;this.publishers[e.id]=e;var o=new Date;return e.properties.startTime=o.getTime(),U(kt+"/v0.91.46.b5f48f1/flash/f_publishwidget.swf?partnerId="+this.apiKey,e.replacedDivId,e.properties.width,e.properties.height,gt,!1,e.properties,n,r),e},this.unpublish=function(e){if(!e){var t="Session.unpublish :: publisher cannot be null";throw J(t),new Error(t)}X("Session.unpublish("+e.id+")"),e.panelId&&wt&&wt.panels[e.panelId]&&wt.removePanel(wt.panels[e.panelId]),ut(e),delete this.publishers[e.id]},this.forceUnpublish=function(e){var t;if(e&&typeof e=="string")t=e;else{if(!e||typeof e!="object"||!e.hasOwnProperty("streamId")){var n="Session.forceUnpublish :: Invalid stream type";throw J(n),new Error(n)}t=e.streamId}X("Session.forceUnpublish("+t+")");if(!t)throw n="Session.forceUnpublish :: Stream does not exist.",J(n),new Error(n);try{var r=document.getElementById(o);r.forceUnpublish(t)}catch(i){throw n="Session.forceUnpublish :: "+i,J(n),new Error(n)}},this.subscribe=function(e,t,n){if(!this.connection||!this.connection.connectionId){var o="Session.subscribe :: Connection required to subscribe";throw J(o),new Error(o)}if(!e)throw o="Session.subscribe :: stream cannot be null",J(o),new Error(o);if(!e.hasOwnProperty("streamId"))throw o="Session.subscribe :: invalid stream object",J(o),new Error(o);X("Session.subscribe("+e.streamId+")");if(!t){var u=document.createElement("div");t="subscriber_replace_"+this.sessionId+"_"+r,u.setAttribute("id",t),document.body.appendChild(u)}var a=document.getElementById(t);if(!a)throw o="Session.subscribe :: replaceElementId does not exist in DOM.",J(o),new Error(o);var f=n?mt(n):{};e&&e.hasOwnProperty("type")&&e.type=="multiplexed"&&(f.mixedStreamURI="live-lowlatency");var l="subscriber_"+e.streamId+"_"+r++,c=new T(e,l,t,f),h={};h.allowscriptaccess="always",f.wmode?(h.wmode=f.wmode,delete f.wmode):h.wmode="transparent",f.hasOwnProperty("style")&&(f.style=encodeURIComponent(vt(f.style)));var p={};p.id=c.id,p.style="outline:none;",f.subscriberId=
l,f.connectionId=this.connection.connectionId,f.sessionId=this.sessionId,f.streamId=e.streamId,f.streamType=e.type,f.name=e.name,f.token=this.token,f.simulateMobile=TB.simulateMobile,f.isPublishing=Object.keys(this.publishers).length>0,e.hasAudio||(f.subscribeToAudio="false"),e.hasVideo||(f.subscribeToVideo="false"),f.orientation=e.orientation,f.peerId=e.peerId;if(!f.width||isNaN(f.width))f.width=i;if(!f.height||isNaN(f.height))f.height=s;this.subscribers[c.id]=c;var d=new Date;return f.startTime=d.getTime(),U(kt+"/v0.91.46.b5f48f1/flash/f_subscribewidget.swf?partnerId="+this.apiKey,t,f.width,f.height,gt,!1,f,h,p),c},this.unsubscribe=function(e){if(!e){var t="Subscribe.unsubscribe :: subscriber cannot be null";throw J(t),new Error(t)}X("Session.unsubscribe("+e.id+")"),ut(e),delete this.subscribers[e.id]},this.signal=function(){X("Session.signal()");if(!(o&&this.connection&&this.connection.connectionId))throw n="Session.signal :: Connection required to signal.",J(n),new Error(n);try{var e=document.getElementById(o);e.sendSignal()}catch(t){var n="Session.signal :: "+t;throw J(n),new Error(n)}},this.forceDisconnect=function(e){e&&X("Session.forceDisconnect("+e.connectionId+")");var t;if(e&&typeof e=="string")t=e;else{if(!e||typeof e!="object"||!e.hasOwnProperty("connectionId")){var n="Session.forceDisconnect :: Invalid connection type";throw J(n),new Error(n)}t=e.connectionId}if(!(o&&this.connection&&this.connection.connectionId))throw n="Session.forceDisconnect :: Connection required to forceDisconnect.",J(n),new Error(n);try{var r=document.getElementById(o);r.forceDisconnect(t)}catch(i){throw n="Session.forceDisconnect :: "+i,J(n),new Error(n)}},this.getSubscribersForStream=function(e){var t=null;if(!e){var n="Session.getSubscribersForStream :: stream cannot be null";throw J(n),new Error(n)}var r;if(typeof e=="string")r=e;else{if(typeof e!="object"||!e.hasOwnProperty("streamId"))throw n="Session.getSubscribersForStream :: Invalid stream type",J(n),new Error(n);r=e.streamId}t=[];for(var i in this.subscribers)this.subscribers[i].hasOwnProperty("stream")&&this.subscribers[i].stream.streamId==r&&t.push(this.subscribers[i]);return t},this.getPublisherForStream=function(e){if(!e){var t="Session.getPublisherForStream :: stream cannot be null";throw J(t),new Error(t)}var n;if(typeof e=="string")n=e;else{if(typeof e!="object"||!e.hasOwnProperty("streamId"))throw t="Session.getPublisherForStream :: Invalid stream type",J(t),new Error(t);n=e.streamId}for(var r in this.publishers){var i=document.getElementById(this.publishers[r].id);if(i)try{if(i.getStreamId()==n)return this.publishers[r]}catch(s){$("Failed to get streamId for publisher: "+this.publishers[r].id)}}return null},this.createArchive=function(e,t,n){X("Session.createArchive()");if(!(o&&this.connection&&this.connection.connectionId))throw errorMsg="Session.createArchive :: Connection required to create an archive.",J(errorMsg),new Error(errorMsg);if(t!=TB.PER_SESSION&&t!=TB.PER_STREAM)throw errorMsg="Session.createArchive :: Invalid type specfied.",J(errorMsg),new Error(errorMsg);try{var r=document.getElementById(o);r.createArchive(e,t,n)}catch(i){throw errorMsg="Session.createArchive :: "+i,J(errorMsg),new Error(errorMsg)}},this.loadArchive=function(e){X("Session.loadArchive()");if(!(o&&this.connection&&this.connection.connectionId))throw r="Session.loadArchive :: Connection required to load an archive.",J(r),new Error(r);try{var t=document.getElementById(o);t.loadArchive(e)}catch(n){var r="Session.loadArchive :: "+n;throw J(r),new Error(r)}},this.startRecording=function(e){X("Session.startRecording()"),e=At[this.sessionId][e.archiveId];if(!e){var t="Session.startRecording :: Archive not created.";throw J(t),new Error(t)}if(e.type!=TB.PER_SESSION)throw t="Session.startRecording :: Trying to record per session on a "+e.type+" archive",J(t),new Error(t);if(e.recording){$("Session.startRecording :: Trying to start recording when the archive is already recording");return}if(!(o&&this.connection&&this.connection.connectionId))throw t="Session.startRecording :: Connection required to record an archive.",J(t),new Error(t);try{var n=document.getElementById(o);n.startRecordingSession(e.archiveId),e.recording=!0}catch(r){throw t="Session.startRecording :: "+r,J(t),new Error(t)}},this.stopRecording=function(e){X("Session.stopRecording()"),e=At[this.sessionId][e.archiveId];if(!e){var t="Session.stopRecording :: Archive not created.";throw J(t),new Error(t)}if(e.type!=TB.PER_SESSION)throw t="Session.stopRecording :: Trying to stop recording per session on a "+e.type+" archive",J(t),new Error(t);if(!(o&&this.connection&&this.connection.connectionId))throw t="Session.stopRecording :: Connection required to record an archive.",J(t),new Error(t);try{var n=document.getElementById(o);n.stopRecordingSession(e.archiveId),e.recording=!1}catch(r){throw t="Session.stopRecording :: "+r,J(t),new Error(t)}},this.closeArchive=function(e){X("Session.closeArchive()");if(!(o&&this.connection&&this.connection.connectionId))throw r="Session.closeArchive :: Connection required to close an archive.",J(r),new Error(r);try{var t=document.getElementById(o);t.closeArchive(e.archiveId)}catch(n){var r="Session.closeArchive :: "+n;throw J(r),new Error(r)}},this.getStateManager=function(){X("Session.getStateManager()");if(u)return u;if(o&&this.connection&&this.connection.connectionId)return u=new F(o),u;var e="Session.getStateManager :: Connection required to getState. Wait for sessionConnected before you getStateManager.";throw J(e),new Error(e)}}function F(t,n){this.superClass=e,this.superClass();var r=20;this.archiveId=n,this.set=function(e,i){var s=e;if(n){var o="StateManager.set :: not allowed on StateManager objects for archives.";throw J(o),new Error(o)}if(typeof e!="string"||typeof i!="string"&&i!=null){if(typeof e!="object"||i!=null)throw o="StateManager.set :: Invalid parameters passed. set() takes either two string parameters or one object of key value pairs.",J(o),new Error(o);if(Object.keys(s).length>r){J("StateManager.set :: Maximum number of keys exceeded"),this.dispatchEvent(new g("changeFailed",405,"Maximum number of keys exceeded",s));return}}else s={},s[e]=i;for(var u in s)if(typeof s[u]!="string"&&s[u]!=null){J("StateManager.set :: Invalid value "+s[u].toString()+" is not a string"),this.dispatchEvent(new g("changeFailed",403," Invalid value, value must be a string",s));return}if(t)try{var a=document.getElementById(t);a.setState(s)}catch(f){throw o="StateManager.set :: "+f,J(o),new Error(o)}},this.superAddEventListener=this.addEventListener,this.addEventListener=function(e,r){var i=!1;e=="changed"?i=null:e.indexOf("changed:")==0&&(i=e.split(":")[1]);if(i!==!1){n&&(i="TB_archive_"+n+"_");if(t)try{var s=document.getElementById(t);s.subscribeToKeyChange(i)}catch(o){var u="StateManager.addEventListener :: "+o;throw J(u),new Error(u)}}this.superAddEventListener(e,r)}}function I(e,t,n){try{var r=document.getElementById("controller_"+e);r.setEchoSuppressionEnabled(t,n)}catch(i){var s="Group :: "+i;throw J(s),new Error(s)}}function q(e,t){var n=null;try{var r=document.getElementById("controller_"+e),i=r.getGroupProperties(t);n=new M(i)}catch(s){var o="Group :: "+s;throw J(o),new Error(o)}return n}function R(e){e.success||(J("Failed to embed SWF "+e.id),TB.exceptionHandler("Failed to embed SWF "+e.id,"Embed Failed",2001))}function U(e,t,n,r,i,s,o,u,a){if(!swfobject.hasFlashPlayerVersion(i)){J("Flash Player "+i+" or higher required"),TB.exceptionHandler("Flash Player "+i+" or higher required","Embed Failed",2001);return}swfobject.embedSWF(e,t,n,r,i,s,o,u,a,R)}function z(e,t){return function(){e!=null?e(t):J("Event handler is null")}}function W(e){window.opentokdebug.debug("[FLASHDEBUG] opentok: "+e)}function X(e){window.opentokdebug.debug("[DEBUG] opentok: "+e)}function V(e){window.opentokdebug.info("[INFO] opentok: "+e)}function $(e){window.opentokdebug.warn("[WARN] opentok: "+e)}function J(e){window.opentokdebug.error("[ERROR] opentok: "+e)}function K(e,t){var n=document.getElementById("opentok_console");n&&(n.innerHTML+=t+"<br>")}function Q(e){if(Nt.hasOwnProperty(e))var t=Nt[e];else t=new y(e,NaN,null);return t}function G(e,t){return new b(e.streamId,Q(e.connectionId),e.name,e.streamData,e.type,e.creationTime,e.hasAudio,e.hasVideo,e.orientation,t,e.peerId,e.quality)}function Y(e,t){var n=[];for(var r=0;r<e.length;r++)n.push(G(e[r],t));return n}function Z(e,t){var n=new _(e.id,e.type,e.title,t,e.status);return At.hasOwnProperty(t)||(At[t]={}),At[t][e.id]=n,n}function et(e){var t=[];for(var n=0;n<e.length;n++){var r=new y(e[n].connectionId,e[n].creationTime,e[n].data);t.push(r),Nt[r.connectionId]=r}return t}function tt(e,t){var n=[];for(var r in t)t[r].hasOwnProperty("groupId")&&n.push(new L(e,t[r].groupId));return n}function nt(e){return e.status==TB.ACTIVE?new C(e.name,TB.ACTIVE):e.status==TB.INACTIVE?new C(e.name,TB.INACTIVE):new C(e.name,TB.UNKNOWN)}function rt(e){return new k(e.name,e.status)}function it(e){var t=new Array;for(var n=0;n<e.length;n++)t.push(new C(e[n].name,e[n].status));return t}function st(e){var t=new Array;for(var n=0;n<e.length;n++)t.push(new k(e[n].name,e[n].status));return t}function ot(e){if(!e.hasOwnProperty("id"))return;var t=document.getElementById(e.id);if(t)try{t.cleanupView()}catch(n){$("Disconnecting "+e.id+" failed")}else $("Disconnecting "+e.id+" failed")}function ut(e){var t=document.getElementById(e.id);if(t)try{t.cleanupView();var n=t.parentNode;n.removeChild(t)}catch(r){$("Removing "+e.id+" failed "+r)}else $("Element "+e.id+" does not exist")}function at(e,t){try{e&&(swfobject.removeSWF(e),e=null)}catch(n){var r=t+n;J(r),TB.exceptionHandler(r,"Internal Error",2e3)}}function ft(e,t,n){var r=document.getElementById(e);if(!r)throw s="Component "+e+" does not exist.",J(s),new Error(s);try{r.setStreamProperty(t,n)}catch(i){var s="Changing settings on component "+e+" failed.";throw J(s),new Error(s)}}function lt(e,t,n){var r=document.getElementById(e);if(!r)throw s="Publisher "+e+" does not exist.",J(s),new Error(s);try{n?r.setCamera(t.name):r.setMicrophone(t.name)}catch(i){var s="Changing hardware settings on publisher "+e+" failed.";throw J(s),new Error(s)}}function ct(e,t){t=t||Infinity,e=e||document.body;var n,r,i=1,s=[],o=0,u=e.childNodes,a=u.length;while(o<a){n=u[o++];if(n.nodeType!=1)continue;ht(n,"position")!=="static"?(r=ht(n,"z-index"),r=="auto"?r=ct(n):r=parseInt(r,10)||0):r=ct(n),r>i&&r<=t&&(i=r)}return i}function ht(e,t){var n,r,i=document.defaultView||window;return e.nodeType==1&&(n=t.replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()}),r=e.style[n],r||(e.currentStyle?r=e.currentStyle[n]:i.getComputedStyle&&(r=i.getComputedStyle(e,"").getPropertyValue(t)))),r||""}function pt(e,t,n){var r=document.createElement("input");r.setAttribute("name",t),r.setAttribute("value",n),r.setAttribute("type","hidden"),e.appendChild(r)}function dt(e){try{var t=document.getElementById(e);if(t)return t.fetchData()}catch(n){return $("Failed to get logs for "+e+" "+n),""}}function vt(e){var t="{ ";for(var n in e)typeof e[n]=="boolean"?t+='"'+n+'":'+e[n]+", ":t+='"'+n+'":"'+e[n].toString()+'", ';return t.length>1?t=t.substring(0,t.length-2)+" }":t="{}",t}function mt(e){var t=e instanceof Array?[]:{};for(var n in e){if(n=="clone")continue;e[n]&&typeof e[n]=="object"?t[n]=mt(e[n]):t[n]=e[n]}return t}this.isUnloading=!1,window.onunload=function(){isUnloading=!0;for(var e in TB.sessions)TB.sessions[e].hasOwnProperty("disconnect")&&(TB.sessionDisconnectedHandler=function(){},TB.sessions[e].disconnect(),TB.sessions[e].cleanupConnection(),TB.sessions[e].cleanup())};var gt="10.0.0",yt=215,bt=138,wt,Et,St,xt=!1,Tt=!1,Nt={},Ct="true",kt="http://staging.tokbox.com";Ct=="true"&&window.location.protocol=="https:"&&(kt="https://staging.tokbox.com");var Lt=new e,At={},Ot={},Mt=!1;return{sessions:{},groups:{},LOG:5,DEBUG:4,INFO:3,WARN:2,ERROR:1,NONE:0,ACTIVE:"active",INACTIVE:"inactive",UNKNOWN:"unknown",PER_SESSION:"perSession",PER_STREAM:"perStream",EXCEPTION:"exception",SESSION_CONNECTED:"sessionConnected",SESSION_DISCONNECTED:"sessionDisconnected",STREAM_CREATED:"streamCreated",STREAM_DESTROYED:"streamDestroyed",CONNECTION_CREATED:"connectionCreated",CONNECTION_DESTROYED:"connectionDestroyed",SIGNAL_RECEIVED:"signalReceived",STREAM_PROPERTY_CHANGED:"streamPropertyChanged",MICROPHONE_LEVEL_CHANGED:"microphoneLevelChanged",ARCHIVE_CREATED:"archiveCreated",ARCHIVE_CLOSED:"archiveClosed",ARCHIVE_LOADED:"archiveLoaded",ARCHIVE_SAVED:"archiveSaved",SESSION_RECORDING_STARTED:"sessionRecordingStarted",SESSION_RECORDING_STOPPED:"sessionRecordingStopped",SESSION_RECORDING_IN_PROGRESS:"sessionRecordingInProgress",STREAM_RECORDING_IN_PROGRESS:"streamRecordingInProgress",SESSION_NOT_RECORDING:"sessionNotRecording",STREAM_RECORDING_STARTED:"streamRecordingStarted",STREAM_RECORDING_STOPPED:"streamRecordingStopped",PLAYBACK_STARTED:"playbackStarted",PLAYBACK_STOPPED:"playbackStopped",RECORDING_STARTED:"recordingStarted",RECORDING_STOPPED:"recordingStopped",GROUP_PROPERTIES_UPDATED:"groupPropertiesUpdated",RESIZE:"resize",SETTINGS_BUTTON_CLICK:"settingsButtonClick",DEVICE_INACTIVE:"deviceInactive",ACCESS_ALLOWED:"accessAllowed",ACCESS_DENIED:"accessDenied",ECHO_CANCELLATION_MODE_CHANGED:"echoCancellationModeChanged",DEVICES_DETECTED:"devicesDetected",DEVICES_SELECTED:"devicesSelected",CLOSE_BUTTON_CLICK:"closeButtonClick",HAS_REQUIREMENTS:1,OLD_FLASH_VERSION:0,BASIC_STREAM:"basic",MULTIPLEXED_STREAM:"multiplexed",ARCHIVED:"archive",GLOBAL_GROUP:"global",MULTIPLEXER_TIMEOUT_BASED_SWITCH:0,MULTIPLEXER_ACTIVITY_BASED_SWITCH:1,simulateMobile:!1,setLogLevel:function(e){window.opentokdebug.setLevel(e),e==this.NONE?window.opentokdebug.setCallback(null):window.opentokdebug.setCallback(K,!0),X("TB.setLogLevel("+e+")")},log:function(e){window.opentokdebug.log("[LOG] opentok: "+e)},initSession:function(e){X("TB.initSession("+e+")");if(e==null||e==""){var t="TB.initSession :: sessionId cannot be null";throw J(t),new Error(t)}return this.sessions.hasOwnProperty(e)||(this.sessions[e]=new j(e)),this.sessions[e]},initDeviceManager:function(e){X("TB.initDeviceManager("+e+")");if(!e){var t="TB.initDeviceManager :: apiKey cannot be null";throw J(t),new Error(t)}return wt||(wt=new H(e)),wt},initRecorderManager:function(e){X("TB.initRecorderManager("+e+")");if(!e){var t="TB.initRecorderManager :: apiKey cannot be null";throw J(t),new Error(t)}return Et||(Et=new B(e)),Et},addEventListener:function(e,t){X("TB.addEventListener("+e+")"),Lt.addEventListener(e,t)},removeEventListener:function(e,t){X("TB.removeEventListener("+e+")"),Lt.removeEventListener(e,t)},dispatchEvent:function(e){X("TB.dispatchEvent()"),e.target=this,Lt.dispatchEvent(e)},checkSystemRequirements:function(){return X("TB.checkSystemRequirements()"),swfobject.hasFlashPlayerVersion(gt)?this.HAS_REQUIREMENTS:this.OLD_FLASH_VERSION},exceptionHandler:function(e,t,r){J("TB.exception :: title: "+t+" msg: "+e+" errorCode: "+r);try{this.dispatchEvent(new n(this.EXCEPTION,e,t,r))}catch(i){var s="TB.exception :: Failed to dispatch exception - "+i;J(s)}},controllerLoadedHandler:function(){Mt=!0},controllerLoadCheck:function(e){if(!Mt){var t="The connection timed out. Make sure that you have allowed this page in theFlash Player Global Settings Manager. Go to:";adobeURL="http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",prompt(t,adobeURL)}},flashLogger:function(e){W(e)},destroyStreamHandler:function(e,t){X("TB.destroyStream");try{var n=this.sessions[e],r=Y(t,e),i=function(){for(var e=0;e<r.length;e++){var t=n.getPublisherForStream(r[e]);t&&n.unpublish(t)}};setTimeout(i,2)}catch(s){var o="TB.destroyStream :: "+s;J(o),TB.exceptionHandler(o,"Internal Error",2e3)}},sessionConnectedHandler:function(e,t,n,r,i,o,u,a){X("TB.sessionConnected");try{var f=this.sessions[e];for(var l=0,c=n.length;l<c;l++){connection=n[l];if(connection.connectionId==t){f.connection=new y(t,connection.creationTime,connection.data);break}}f.connected=!0,f.connecting=!1,f.connection.quality=u,f.capabilities=o;var h=et(n),p=Y(r,f.sessionId),d=tt(e,i);for(var l=0;l<d.length;l++)this.groups[e+"_"+d[l].groupId]=d[l];var v=[];for(var l=0;l<a.length;l++){var m=Z(a[l],e);v.push(m)}f.dispatchEvent(new s(this.SESSION_CONNECTED,h,p,d,v))}catch(g){var b="TB.sessionConnected :: "+g;J(b),TB.exceptionHandler(b,"Internal Error",2e3)}},sessionDisconnectedHandler:function(e,t){X("TB.sessionDisconnected("+t+")");try{var n=this.sessions[e];n.disconnectComponents(),n.cleanupConnection(),n.connected=!1;var r=new o(this.SESSION_DISCONNECTED,t,!0);n.dispatchEvent(r);var i=function(){r.isDefaultPrevented()||n.cleanup()};setTimeout(i,2)}catch(s){var u="TB.sessionDisconnected :: "+s;J(u),TB.exceptionHandler(u,"Internal Error",2e3)}},streamCreatedHandler:function(e,t,n){X("TB.streamCreated");try{var r=this.sessions[e],s=Y(t,e);r.dispatchEvent(new i(this.STREAM_CREATED,s,n));var o=At[e];for(var u in o)for(var a=0;a<s.length;a++)if(s[a].connection.connectionId==connection.connectionId)for(var f in r.publishers)if(r.publishers[f].hasOwnProperty("id")){var l=document.getElementById(r.publishers[f].id);u&&o[u]&&o[u].type==TB.PER_SESSION&&o[u].recording==1&&l.signalRecordingStarted()}}catch(c){var h="TB.streamCreated :: "+c;J(h),TB.exceptionHandler(h,"Internal Error",2e3)}},streamDestroyedHandler:function(e,t,n){X("TB.streamDestroyed");try{var r=this.sessions[e],s=Y(t,e),o=new i(this.STREAM_DESTROYED,s,n,!0);r.dispatchEvent(o);var u=function(){if(!o.isDefaultPrevented())for(var e=0;e<o.streams.length;e++){var t=r.getSubscribersForStream(o.streams[e]);for(var n=0;n<t.length;n++)r.unsubscribe(t[n]);var i=r.getPublisherForStream(o.streams[e]);i&&r.unpublish(i)}};setTimeout(u,2)}catch(a){var f="TB.streamDestroyed :: "+a;J(f),TB.exceptionHandler(f,"Internal Error",2e3)}},streamPropertyChangedHandler:function(e,t,n,r,i){X("TB.streamPropertyChangedHandler");var s=this.sessions[e],o=G(t,e),u=new p(this.STREAM_PROPERTY_CHANGED,o,n,r,i);s.dispatchEvent(u);try{var a;if("hasAudio"==n)for(var f in s.subscribers){a=s.subscribers[f];if(a.hasOwnProperty("stream")&&a.stream.streamId==o.streamId){a._subscribeToAudio(i,!0);break}}else if("hasVideo"==n)for(f in s.subscribers){a=s.subscribers[f];if(a.hasOwnProperty("stream")&&a.stream.streamId==o.streamId){a._subscribeToVideo(i,!0);break}}else if("orientation"==n)for(f in s.subscribers){a=s.subscribers[f];if(a.hasOwnProperty("stream")&&a.stream.streamId==o.streamId){a.changeOrientation(i);break}}else"quality"!=n&&X("Unknown property changed")}catch(l){var c="TB.streamPropertyChangedHandler :: "+l;J(c),TB.exceptionHandler(c,"Internal Error",2e3)}},microphoneLevelChangedHandler:function(e,t,n,r){try{var i=this.sessions[e];if(!i){var s="TB.microphoneLevelChangedHandler :: Invalid session ID: "+e;J(s),TB.exceptionHandler(s,"Internal Error",2e3);return}var o=i.subscribers[t],u=new a(this.MICROPHONE_LEVEL_CHANGED,n,r);i.dispatchEvent(u)}catch(f){s="microphoneLevelChanged :: "+f,J(s),TB.exceptionHandler(s,"Internal Error",2e3)}},connectionCreatedHandler:function(e,t,n){X("TB.connectionCreated");try{var i=this.sessions[e],s=et(t);i.dispatchEvent(new r(this.CONNECTION_CREATED,s,n))}catch(o){var u="TB.connectionCreated :: "+o;J(u),TB.exceptionHandler(u,"Internal Error",2e3)}},connectionDestroyedHandler:function(e,t,n){X("TB.connectionDestroyed");try{var i=this.sessions[e],s=et(t);i.dispatchEvent(new r(this.CONNECTION_DESTROYED,s,n))}catch(o){var u="TB.connectionDestroyed :: "+o;J(u),TB.exceptionHandler(u,"Internal Error",2e3)}},signalHandler:function(e,t){X("TB.signal");try{var n=this.sessions[e];n.dispatchEvent(new u(this.SIGNAL_RECEIVED,Q(t)))}catch(r){var i="TB.signal ::"+r;J(i),TB.exceptionHandler(i,"Internal Error",2e3)}},archiveCreatedHandler:function(e,t){X("TB.archiveCreatedHandler:"+e+" - "+t);try{var n=this.sessions[e],r=Z(t,e);n.dispatchEvent(new d(this.ARCHIVE_CREATED,[r]))}catch(i){var s="TB.archiveCreatedHandler :: "+i;J(s),TB.exceptionHandler(s,"Internal Error",2e3)}},archiveClosedHandler:function(e,t){X("TB.archiveClosedHandler:"+e+" - "+t.id);try{var n=this.sessions[e];n.dispatchEvent(new d(this.ARCHIVE_CLOSED,[At[e][t.id]])),delete At[e][t.id]}catch(r){var i="TB.archiveClosedHandler :: "+r;J(i),TB.exceptionHandler(i,"Internal Error",2e3)}},archiveLoadedHandler:function(e,t){X("TB.archiveLoadedHandler:"+e+" - "+t.archiveId);try{var n=this.sessions[e],r=new _(t.id,t.type,t.title,e);Ot.hasOwnProperty(e)||(Ot[e]={}),Ot[e][t.id]=r,n.dispatchEvent(new d(this.ARCHIVE_LOADED,[r]))}catch(i){var s="TB.archiveLoadedHandler :: "+i;J(s),TB.exceptionHandler(s,"Internal Error",2e3)}},sessionRecordingStartedHandler:function(e,t){X("TB.sessionRecordingStartedHandler:"+e+" - "+t.id);try{var n=this.sessions[e];n.dispatchEvent(new d(this.SESSION_RECORDING_STARTED,[At[t.id]]))}catch(r){var i="TB.sessionRecordingStartedHandler :: "+r;J(i),TB.exceptionHandler(i,"Internal Error",2e3)}},sessionRecordingStoppedHandler:function(e,t){X("TB.sessionRecordingStoppedHandler:"+e+" - "+t);try{var n=this.sessions[e];n.dispatchEvent(new d(this.SESSION_RECORDING_STOPPED,[At[t.id]]));for(var r in n.publishers)if(n.publishers[r].hasOwnProperty("id")){var i=document.getElementById(n.publishers[r].id);i.signalRecordingStopped()}}catch(s){var o="TB.sessionRecordingStoppedHandler :: "+s;J(o),TB.exceptionHandler(o,"Internal Error",2e3)}},sessionRecordingInProgressHandler:function(e){X("TB.sessionRecordingInProgressHandler");try{var n=this.sessions[e];n.dispatchEvent(new t(this.SESSION_RECORDING_IN_PROGRESS,!1))}catch(r){var i="TB.sessionRecordingStartedHandler :: "+r;J(i),TB.exceptionHandler(i,"Internal Error",2e3)}},sessionNotRecordingHandler:function(e){X("TB.sessionNotRecordingHandler");try{var n=this.sessions[e];n.dispatchEvent(new t(this.SESSION_NOT_RECORDING,!1))}catch(r){var i="TB.sessionNotRecordingHandler :: "+r;J(i),TB.exceptionHandler(i,"Internal Error",2e3)}},streamRecordingStartedHandler:function(e,t){X("TB.streamRecordingStartedHandler:"+e);try{var n=this.sessions[e],r=Y(t,e);n.dispatchEvent(new i(this.STREAM_RECORDING_STARTED,r,"",!1));for(var s in n.publishers)if(n.publishers[s].hasOwnProperty("id")){var o=document.getElementById(n.publishers[s].id);for(var u=0;u<t.length;u++)if(o.getStreamId()==t[u].streamId){o.signalRecordingStarted(),X("TB.streamRecordingStartedHandler: signal: "+t[u].streamId);break}}}catch(a){var f="TB.streamRecordingStartedHandler :: "+a;J(f),TB.exceptionHandler(f,"Internal Error",2e3)}},streamRecordingStoppedHandler:function(e,t){X("TB.streamRecordingStoppedHandler");try{var n=this.sessions[e],r=Y(t,e);n.dispatchEvent(new i(this.STREAM_RECORDING_STOPPED,r,"",!1));for(var s in n.publishers)if(n.publishers[s].hasOwnProperty("id")){var o=document.getElementById(n.publishers[s].id);for(var u=0;u<t.length;u++)if(o.getStreamId()==t[u].streamId){o.signalRecordingStopped(),X("TB.streamRecordingStoppedHandler: signal: "+t[u].streamId);break}}}catch(a){var f="TB.streamRecordingStoppedHandler :: "+a;J(f),TB.exceptionHandler(f,"Internal Error",2e3)}},streamRecordingInProgressHandler:function(e,t){X("TB.streamRecordingInProgressHandler");try{var n=this.sessions[e],r=Y(t,e);n.dispatchEvent(new i(this.STREAM_RECORDING_IN_PROGRESS,r,"",!1))}catch(s){var o="TB.streamRecordingInProgressHandler :: "+s;J(o),TB.exceptionHandler(o,"Internal Error",2e3)}},playbackStartedHandler:function(e,t){X("TB.playbackStartedHandler");try{var n=this.sessions[e];archiveObj=new _(t.id,t.type,t.title,e),n.dispatchEvent(new d(this.PLAYBACK_STARTED,[archiveObj]))}catch(r){var i="TB.playbackStartedHandler :: "+r;J(i),TB.exceptionHandler(i,"Internal Error",2e3)}},playbackStoppedHandler:function(e,t){X("TB.playbackStoppedHandler");try{var n=this.sessions[e];archiveObj=new _(t.id,t.type,t.title,e),n.dispatchEvent(new d(this.PLAYBACK_STOPPED,[archiveObj]))}catch(r){var i="TB.playbackStoppedHandler :: "+r;J(i),TB.exceptionHandler(i,"Internal Error",2e3)}},groupPropertiesUpdatedHandler:function(e,n){X("TB.groupPropertiesUpdated");try{var r=this.groups[e+"_"+n.groupId];if(!r){J("TB.groupPropertiesUpdated :: Invalid group ID: "+e+"_"+n.groupId);return}r.dispatchEvent(new t(this.GROUP_PROPERTIES_UPDATED))}catch(i){var s="TB.groupPropertiesUpdated :: "+i;J(s),TB.exceptionHandler(s,"Internal Error",2e3)}},videoComponentLoadedHandler:function(e,n){try{if(e){var r=this.sessions[e];if(!r)return;var i=r.publishers[n],s=r.subscribers[n];i&&!i.loaded&&(i.loaded=!0,i.modified&&(i.audioPublished!=null&&i.publishAudio(i.audioPublished),i.videoPublished!=null&&i.publishVideo(i.videoPublished),i.setMicrophoneGain(i.gain),i.setStyle(i._style),i.modified=!1),i.dispatchEvent(new t("loaded"))),s&&!s.loaded&&(s.loaded=!0,s.modified&&(s.audioSubscribed!=null&&s.subscribeToAudio(s.audioSubscribed),s.videoSubscribed!=null&&s.subscribeToVideo(s.videoSubscribed),s.setAudioVolume(s.audioVolume),s.setStyle(s._style),s.modified=!1),s.dispatchEvent(new t("loaded")))}else{var o=Et.players[n];o&&o._archiveId&&(o.loadArchive(o._archiveId),o._archiveId=null),o&&o._play&&(o.play(),o._play=!1);var u=Et.recorders[n],a=o?o:u;a&&!a.loaded&&(a.loaded=!0,a.modified&&(a.setStyle(a._style),a==u&&a._title&&(a.setTitle(_title),_title=""),a.modified=!1),a.dispatchEvent(new t("loaded")))}}catch(f){var l="videoComponentLoaded:: initialize component "+n+" - "+f;J(l),TB.exceptionHandler(l,"Internal Error",2e3)}},pubWidgetStyleHeightFrom:null,pubWidgetStyleWidthFrom:null,resizePublisherToTarget:function(e,t){X("TB.resize");try{var n=this.sessions[e];if(!n){var r="TB.resize :: Invalid session ID: "+e;J(r),TB.exceptionHandler(r,"Internal Error",2e3);return}var i=n.publishers[t];if(!i){r="TB.resize :: Invalid publisher ID: "+t,J(r),TB.exceptionHandler(r,"Internal Error",2e3);return}var s=document.getElementById(t);if(!s){r="TB.resize :: Publisher "+t+" does not exist in the DOM",J(r),TB.exceptionHandler(r,"Internal Error",2e3);return}var o=s.width,u=s.height;s.width!=i.properties.width&&(s.width=i.properties.width),s.height!=i.properties.height&&(s.height=i.properties.height),s.style.height!=pubWidgetStyleHeightFrom&&(s.style.height=pubWidgetStyleHeightFrom),s.style.width!=pubWidgetStyleWidthFrom&&(s.style.width=pubWidgetStyleWidthFrom);var a=s.width,f=s.height;(o!=a||u!=f)&&i.dispatchEvent(new h(this.RESIZE,o,a,u,f))}catch(l){r="resizePublisherToTarget :: Error resizing publisher - "+l,J(r),TB.exceptionHandler(r,"Internal Error",2e3)}},resizePublisherToShowSecurity:function(e,t,n){X("TB.resize");var r=this.sessions[e];if(!r){var i="TB.resize :: Invalid session ID: "+e;J(i),TB.exceptionHandler(i,"Internal Error",2e3);return}var s=r.publishers[t];if(!s){i="TB.resize :: Invalid publisher ID: "+t,J(i),TB.exceptionHandler(i,"Internal Error",2e3);return}var o=document.getElementById(t);if(!o){i="TB.resize :: Publisher "+t+" does not exist in the DOM",J(i),TB.exceptionHandler(i,"Internal Error",2e3);return}var u=s.properties.width=o.width,a=s.properties.height=o.height;pubWidgetStyleHeightFrom=o.style.height,pubWidgetStyleWidthFrom=o.style.width;var f=yt*n,l=bt*n;o.width<f&&(o.width=f,o.style.width=f+"px"),o.height<l&&(o.height=l,o.style.height=l+"px");var c=o.width,p=o.height,d=o.style;(u!=c||a!=p||pubWidgetStyleWidthFrom!=d.width||pubWidgetStyleHeightFrom!=d.height)&&s.dispatchEvent(new h(this.RESIZE,u,c,a,p))},settingsButtonClickHandler:function(e,n){X("TB.settingsButtonClick");try{var r=this.sessions[e];if(!r){var i="TB.settingsButtonClick :: Invalid session ID: "+e;J(i),TB.exceptionHandler(i,"Internal Error",2e3);return}var s=r.publishers[n];if(!s){i="TB.settingsButtonClick :: Invalid publisher ID: "+n,J(i),TB.exceptionHandler(i,"Internal Error",2e3);return}var o=new t(this.SETTINGS_BUTTON_CLICK,!0);s.dispatchEvent(o);var u=function(){if(!o.isDefaultPrevented()){var e=TB.initDeviceManager(r.apiKey);e.displayPanel(null,s,{})}};setTimeout(u,2)}catch(a){i="settingsButtonClick :: "+a,J(i),TB.exceptionHandler(i,"Internal Error",2e3)}},recorderSettingsButtonClickHandler:function(e){X("TB.recorderSettingsButtonClick");try{var n=Et.recorders[e];if(!n){errorMsg="TB.recorderSettingsButtonClick :: Invalid recorder ID: "+e,J(errorMsg),TB.exceptionHandler(errorMsg,"Internal Error",2e3);return}var r=new t(this.SETTINGS_BUTTON_CLICK,!0);n.dispatchEvent(r);var i=function(){if(!r.isDefaultPrevented()){var e=TB.initDeviceManager(Et.apiKey);e.displayPanel(null,n,{})}};setTimeout(i,2)}catch(s){errorMsg="recorderSettingsButtonClick :: "+s,J(errorMsg),TB.exceptionHandler(errorMsg,"Internal Error",2e3)}},deviceAccessHandler:function(e,n,r){X("TB.deviceAccessHandler: "+r);try{var i=this.sessions[e];if(!i){var s="TB.deviceAccessHandler :: Invalid session ID: "+e;J(s),TB.exceptionHandler(s,"Internal Error",2e3);return}var o=i.publishers[n];if(!o){s="TB.deviceAccessHandler :: Invalid publisher ID: "+n,J(s),TB.exceptionHandler(s,"Internal Error",2e3);return}var u=new t(r,!0);o.dispatchEvent(u);if(r==TB.ACCESS_DENIED){var a=function(){var e=document.getElementById(o.id);if(e){var t=e.parentNode;i.unpublish(o);var n=document.createElement("div");n.setAttribute("id",o.replacedDivId),t.appendChild(n),i._embedPublisher(o)}};setTimeout(a,2)}}catch(f){s=r+" :: "+f,J(s),TB.exceptionHandler(s,"Internal Error",2e3)}},deviceInactiveHandler:function(e,t,n,r){X("TB.deviceInactiveHandler");try{var i=this.sessions[e];if(!i){var s="TB.deviceInactiveHandler :: Invalid session ID: "+e;J(s),TB.exceptionHandler(s,"Internal Error",2e3);return}var o=i.publishers[t];if(!o){J("TB.deviceInactiveHandler :: Invalid publisher ID: "+t);return}var u=new f(this.DEVICE_INACTIVE,n,r);o.dispatchEvent(u)}catch(a){s="deviceInactive :: "+a,J(s),TB.exceptionHandler(s,"Internal Error",2e3)}},echoCancellationModeChangedHandler:function(e,t,n,r){X("TB.echoCancellationModeChangedHandler");try{var i=this.sessions[e];if(!i){var s="TB.echoCancellationModeChangedHandler :: Invalid session ID: "+e;J(s),TB.exceptionHandler(s,"Internal Error",2e3);return}var o=i.publishers[t];if(!o){J("TB.echoCancellationModeChangedHandler :: Invalid publisher ID: "+t);return}var u=new f(this.ECHO_CANCELLATION_MODE_CHANGED,n,r);o.dispatchEvent(u)}catch(a){s="echoCancellationModeChanged :: "+a,J(s),TB.exceptionHandler(s,"Internal Error",2e3)}},devicesDetectedHandler:function(e,t,n,r){X("TB.devicesDetected");try{var i=it(e),s=st(t);wt.dispatchEvent(new c(this.DEVICES_DETECTED,i,s,i[n],s[r])),setTimeout(function(){at(St,"devicesDetectedHandler :: "),St=null},0)}catch(o){var u="devicesDetectedHandler :: "+o;J(u),TB.exceptionHandler(u,"Internal Error",2e3)}},devicesSelectedHandler:function(e,t,n){X("TB.devicesSelected");try{xt=!0;var r=wt.panels[e];if(!r){J("TB.devicesSelected :: Invalid DevicePanel ID: "+e);return}r.component&&(r.component.setCamera(t),r.component.setMicrophone(n)),r.dispatchEvent(new f(this.DEVICES_SELECTED,t,n))}catch(i){var s="devicesSelected :: "+i;J(s),TB.exceptionHandler(s,"Internal Error",2e3)}},closeButtonClickHandler:function(e){X("TB.closeButtonClick");try{var n=wt.panels[e];if(!n){var r="TB.devicesSelected :: Invalid DevicePanel ID: "+e;J(r),TB.exceptionHandler(r,"Internal Error",2e3);return}var i=new t(this.CLOSE_BUTTON_CLICK,!0);n.dispatchEvent(i);var s=function(){i.isDefaultPrevented()||wt.removePanel(n)};setTimeout(s,2)}catch(o){r="closeButtonClick :: "+o,J(r),TB.exceptionHandler(r,"Internal Error",2e3)}},playerArchiveLoadedHandler:function(e){X("Player.archiveLoadedHandler");try{var n=Et.players[e];n.dispatchEvent(new t(this.ARCHIVE_LOADED))}catch(r){var i="Player.archiveLoadedHandler :: "+r;J(i),TB.exceptionHandler(i,"Internal Error",2e3)}},playingStartedHandler:function(e){X("Player.playingHandler");try{var n=Et.players[e];n.dispatchEvent(new t(this.PLAYBACK_STARTED))}catch(r){var i="Player.playingStartedHandler :: "+r;J(i),TB.exceptionHandler(i,"Internal Error",2e3)}},playingStoppedHandler:function(e,n){X("Player.playingStoppedHandler");try{var r=Et.players[e];r.dispatchEvent(new t(this.PLAYBACK_STOPPED))}catch(i){var s="Player.playingStoppedHandler :: "+i;J(s),TB.exceptionHandler(s,"Internal Error",2e3)}},recordingStartedHandler:function(e){X("Recorder.recordingStartedHandler");try{var n=Et.recorders[e];n.dispatchEvent(new t(this.RECORDING_STARTED))}catch(r){var i="Recorder.recordingStartedHandler :: "+r;J(i),TB.exceptionHandler(i,"Internal Error",2e3)}},recordingStoppedHandler:function(e){X("Recorder.recordingStoppedHandler");try{var n=Et.recorders[e];n.dispatchEvent(new t(this.RECORDING_STOPPED))}catch(r){var i="Recorder.recordingStoppedHandler :: "+r;J(i),TB.exceptionHandler(i,"Internal Error",2e3)}},recorderPlaybackStartedHandler:function(e){X("Recorder.playbackStartedddHandler");try{var n=Et.recorders[e];n.dispatchEvent(new t(this.PLAYBACK_STARTED))}catch(r){var i="Recorder.playbackStartedHandler :: "+r;J(i),TB.exceptionHandler
(i,"Internal Error",2e3)}},recorderPlaybackStoppedHandler:function(e){X("Recorder.playbackStoppedHandler");try{var n=Et.recorders[e];n.dispatchEvent(new t(this.PLAYBACK_STOPPED))}catch(r){var i="Recorder.playbackStoppedHandler :: "+r;J(i),TB.exceptionHandler(i,"Internal Error",2e3)}},archiveSavedHandler:function(e,t){X("Recorder.archiveSavedHandler");try{var n=Et.recorders[e],r=new _(t.id,t.type,t.title);n.dispatchEvent(new d(this.ARCHIVE_SAVED,[r]))}catch(i){var s="Recorder.archiveSavedHandler :: "+i;J(s),TB.exceptionHandler(s,"Internal Error",2e3)}},stateChangedHandler:function(e,t){function i(t){t=t.replace(/"/g,"");var r=t.match(/TB_archive_([^_]+)_(.*)/);if(r){archiveId=r[1],t=r[2];var i=Ot[e][archiveId];if(!i){var s="Archive.startPlayback :: Archive not loaded.";J(s),TB.exceptionHandler(s,"Internal Error",2e3);return}return i.getStateManager()}return n.getStateManager()}X("TB.stateChangeHandler");var n=this.sessions[e];if(!n){var r="TB.stateChangedHandler :: Invalid session ID: "+e;J(r),TB.exceptionHandler(r,"Internal Error",2e3);return}var s=!1;for(var o in t){var u=i(o);s||(u.dispatchEvent(new m("changed",t)),s=!0);var a={};a[o]=t[o],u.dispatchEvent(new m("changed:"+o,a))}s||n.getStateManager().dispatchEvent(new m("changed",t))},stateChangedFailedHandler:function(e,t,n,r){X("TB.stateChangedFailedHandler");var i=this.sessions[e];if(!i){var s="TB.stateChangedFailedHandler :: Invalid session ID: "+e;J(s),TB.exceptionHandler(s,"Internal Error",2e3);return}var o=i.getStateManager();o.dispatchEvent(new g("changeFailed",t,n,r))},reportIssueHandler:function(e,t){X("TB.reportIssue"),t==null&&(t=!1);if(Tt)return;var n=document.createElement("form");n.setAttribute("action","http://staging.tokbox.com/reportIssue.php"),n.setAttribute("method","post"),n.setAttribute("target","formresult"),pt(n,"issueId",e),pt(n,"userAgent",navigator.userAgent),pt(n,"environment","JS");var r=swfobject.getFlashPlayerVersion();pt(n,"flashVersion",r.major+"."+r.minor+"."+r.release);var i=window.opentokdebug.getLogs();pt(n,"jsLogs",i);var s=!1,o=0;for(var u in TB.sessions){var a=TB.sessions[u];if(!a.hasOwnProperty("sessionId"))continue;s||(pt(n,"apiKey",a.apiKey),s=!0);var f=0;pt(n,"session_"+ ++o,a.sessionId);var l="controller_"+a.sessionId,c=dt(l);c&&pt(n,"widget_"+a.sessionId+"_"+ ++f,c);if(a.hasOwnProperty("subscribers"))for(var h in a.subscribers)if(a.subscribers[h].hasOwnProperty("id")){var p=dt(a.subscribers[h].id);pt(n,"widget_"+a.sessionId+"_"+ ++f,p)}if(a.hasOwnProperty("publishers")){var d=0;for(var v in a.publishers)if(a.publishers[v].hasOwnProperty("id")){var m=dt(a.publishers[v].id);pt(n,"widget_"+a.sessionId+"_"+ ++f,m)}}}if(!t){var g=document.createElement("textarea");g.setAttribute("name","description"),g.setAttribute("rows",8),g.setAttribute("cols",40),g.style.height="110px",g.style.width="300px",g.style.display="block",g.style.visibility="visible",n.appendChild(g);var y=document.createElement("input");y.setAttribute("type","submit"),y.setAttribute("value","Report Issue"),y.style.display="inline",y.style.visibility="visible",n.appendChild(y);var b=document.createElement("input");b.setAttribute("type","button"),b.setAttribute("value","Cancel"),b.style.display="inline",b.style.visibility="visible",n.appendChild(b);var w=390,E=242,S=document.createElement("div");S.setAttribute("id","opentokReportIssue"),S.style.position="absolute",S.style.top="25%",S.style.left="50%",S.style.width=w+"px",S.style.height=E+"px",S.style.marginLeft=0-w/2+"px",S.style.marginTop=0-E/4+"px",S.style.paddingLeft="32px",S.style.paddingRight="15px",S.style.paddingTop="15px",S.style.display="block",S.style.visibility="visible",S.style.lineHeight="15px",S.style.zIndex=ct()+1,S.innerHTML='<span style="color:#4c4c4c;font-size:18px;display:inline;visibility:visible;">We\'re sorry to hear that something went wrong.</span><br/><br/>Please help us to debug your issue by providing a description of what happened.',S.style.backgroundColor="#F7F7F7",S.style.border="1px solid #CCC",S.style.fontWeight="normal",S.style.fontFamily="'Lucida Grande', 'Trebuchet MS', sans-serif",S.style.color="#4c4c4c",S.style.fontSize="13px",S.appendChild(n),document.body.appendChild(S),Tt=!0,closeForm=function(){document.body.removeChild(S),Tt=!1},b.onclick=closeForm}n.onsubmit=function(){window.open("#","formresult","scrollbars=no,menubar=no,height=200,width=400,resizable=yes,toolbar=no,status=no"),setTimeout(function(){closeForm()},1e3)},t&&(pt(n,"showReport",!0),document.body.appendChild(n),n.submit())}}}();var swfobject=function(){function C(){if(b)return;try{var e=a.getElementsByTagName("body")[0].appendChild(U("span"));e.parentNode.removeChild(e)}catch(t){return}b=!0;var n=c.length;for(var r=0;r<n;r++)c[r]()}function k(e){b?e():c[c.length]=e}function L(t){if(typeof u.addEventListener!=e)u.addEventListener("load",t,!1);else if(typeof a.addEventListener!=e)a.addEventListener("load",t,!1);else if(typeof u.attachEvent!=e)z(u,"onload",t);else if(typeof u.onload=="function"){var n=u.onload;u.onload=function(){n(),t()}}else u.onload=t}function A(){l?O():M()}function O(){var n=a.getElementsByTagName("body")[0],r=U(t);r.setAttribute("type",i);var s=n.appendChild(r);if(s){var o=0;(function(){if(typeof s.GetVariable!=e){var t=s.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),T.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(o<10){o++,setTimeout(arguments.callee,10);return}n.removeChild(r),s=null,M()})()}else M()}function M(){var t=h.length;if(t>0)for(var n=0;n<t;n++){var r=h[n].id,i=h[n].callbackFn,s={success:!1,id:r};if(T.pv[0]>0){var o=R(r);if(o)if(W(h[n].swfVersion)&&!(T.wk&&T.wk<312))V(r,!0),i&&(s.success=!0,s.ref=_(r),i(s));else if(h[n].expressInstall&&D()){var u={};u.data=h[n].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));var a={},f=o.getElementsByTagName("param"),l=f.length;for(var c=0;c<l;c++)f[c].getAttribute("name").toLowerCase()!="movie"&&(a[f[c].getAttribute("name")]=f[c].getAttribute("value"));P(u,a,r,i)}else H(o),i&&i(s)}else{V(r,!0);if(i){var p=_(r);p&&typeof p.SetVariable!=e&&(s.success=!0,s.ref=p),i(s)}}}}function _(n){var r=null,i=R(n);if(i&&i.nodeName=="OBJECT")if(typeof i.SetVariable!=e)r=i;else{var s=i.getElementsByTagName(t)[0];s&&(r=s)}return r}function D(){return!w&&W("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function P(t,n,r,i){w=!0,g=i||null,y={success:!1,id:r};var o=R(r);if(o){o.nodeName=="OBJECT"?(v=B(o),m=null):(v=o,m=r),t.id=s;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310)t.width="310";if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137)t.height="137";a.title=a.title.slice(0,47)+" - Flash Player Installation";var f=T.ie&&T.win?"ActiveX":"PlugIn",l="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+a.title;typeof n.flashvars!=e?n.flashvars+="&"+l:n.flashvars=l;if(T.ie&&T.win&&o.readyState!=4){var c=U("div");r+="SWFObjectNew",c.setAttribute("id",r),o.parentNode.insertBefore(c,o),o.style.display="none",function(){o.readyState==4?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}j(t,n,r)}}function H(e){if(T.ie&&T.win&&e.readyState!=4){var t=U("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(B(e),t),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(B(e),e)}function B(e){var n=U("div");if(T.win&&T.ie)n.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(t)[0];if(r){var i=r.childNodes;if(i){var s=i.length;for(var o=0;o<s;o++)(i[o].nodeType!=1||i[o].nodeName!="PARAM")&&i[o].nodeType!=8&&n.appendChild(i[o].cloneNode(!0))}}}return n}function j(n,r,s){var o,u=R(s);if(T.wk&&T.wk<312)return o;if(u){typeof n.id==e&&(n.id=s);if(T.ie&&T.win){var a="";for(var f in n)n[f]!=Object.prototype[f]&&(f.toLowerCase()=="data"?r.movie=n[f]:f.toLowerCase()=="styleclass"?a+=' class="'+n[f]+'"':f.toLowerCase()!="classid"&&(a+=" "+f+'="'+n[f]+'"'));var l="";for(var c in r)r[c]!=Object.prototype[c]&&(l+='<param name="'+c+'" value="'+r[c]+'" />');u.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+l+"</object>",p[p.length]=n.id,o=R(n.id)}else{var h=U(t);h.setAttribute("type",i);for(var d in n)n[d]!=Object.prototype[d]&&(d.toLowerCase()=="styleclass"?h.setAttribute("class",n[d]):d.toLowerCase()!="classid"&&h.setAttribute(d,n[d]));for(var v in r)r[v]!=Object.prototype[v]&&v.toLowerCase()!="movie"&&F(h,v,r[v]);u.parentNode.replaceChild(h,u),o=h}}return o}function F(e,t,n){var r=U("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function I(e){var t=R(e);t&&t.nodeName=="OBJECT"&&(T.ie&&T.win?(t.style.display="none",function(){t.readyState==4?q(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function q(e){var t=R(e);if(t){for(var n in t)typeof t[n]=="function"&&(t[n]=null);t.parentNode.removeChild(t)}}function R(e){var t=null;try{t=a.getElementById(e)}catch(n){}return t}function U(e){return a.createElement(e)}function z(e,t,n){e.attachEvent(t,n),d[d.length]=[e,t,n]}function W(e){var t=T.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function X(n,r,i,s){if(T.ie&&T.mac)return;var o=a.getElementsByTagName("head")[0];if(!o)return;var u=i&&typeof i=="string"?i:"screen";s&&(E=null,S=null);if(!E||S!=u){var f=U("style");f.setAttribute("type","text/css"),f.setAttribute("media",u),E=o.appendChild(f),T.ie&&T.win&&typeof a.styleSheets!=e&&a.styleSheets.length>0&&(E=a.styleSheets[a.styleSheets.length-1]),S=u}T.ie&&T.win?E&&typeof E.addRule==t&&E.addRule(n,r):E&&typeof a.createTextNode!=e&&E.appendChild(a.createTextNode(n+" {"+r+"}"))}function V(e,t){if(!x)return;var n=t?"visible":"hidden";b&&R(e)?R(e).style.visibility=n:X("#"+e,"visibility:"+n)}function $(t){var n=/[\\\"<>\.;]/,r=n.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var e="undefined",t="object",n="Shockwave Flash",r="ShockwaveFlash.ShockwaveFlash",i="application/x-shockwave-flash",s="SWFObjectExprInst",o="onreadystatechange",u=window,a=document,f=navigator,l=!1,c=[A],h=[],p=[],d=[],v,m,g,y,b=!1,w=!1,E,S,x=!0,T=function(){var s=typeof a.getElementById!=e&&typeof a.getElementsByTagName!=e&&typeof a.createElement!=e,o=f.userAgent.toLowerCase(),c=f.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(o),p=c?/mac/.test(c):/mac/.test(o),d=/webkit/.test(o)?parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=!1,m=[0,0,0],g=null;if(typeof f.plugins!=e&&typeof f.plugins[n]==t)g=f.plugins[n].description,g&&(typeof f.mimeTypes==e||!f.mimeTypes[i]||!!f.mimeTypes[i].enabledPlugin)&&(l=!0,v=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),m[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),m[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u.ActiveXObject!=e)try{var y=new ActiveXObject(r);y&&(g=y.GetVariable("$version"),g&&(v=!0,g=g.split(" ")[1].split(","),m=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:s,pv:m,wk:d,ie:v,win:h,mac:p}}(),N=function(){if(!T.w3)return;(typeof a.readyState!=e&&a.readyState=="complete"||typeof a.readyState==e&&(a.getElementsByTagName("body")[0]||a.body))&&C(),b||(typeof a.addEventListener!=e&&a.addEventListener("DOMContentLoaded",C,!1),T.ie&&T.win&&(a.attachEvent(o,function(){a.readyState=="complete"&&(a.detachEvent(o,arguments.callee),C())}),u==top&&function(){if(b)return;try{a.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}C()}()),T.wk&&function(){if(b)return;if(!/loaded|complete/.test(a.readyState)){setTimeout(arguments.callee,0);return}C()}(),L(C))}(),J=function(){T.ie&&T.win&&window.attachEvent("onunload",function(){var e=d.length;for(var t=0;t<e;t++)d[t][0].detachEvent(d[t][1],d[t][2]);var n=p.length;for(var r=0;r<n;r++)I(p[r]);for(var i in T)T[i]=null;T=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}();return{registerObject:function(e,t,n,r){if(T.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,h[h.length]=i,V(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(T.w3)return _(e)},embedSWF:function(n,r,i,s,o,u,a,f,l,c){var h={success:!1,id:r};T.w3&&!(T.wk&&T.wk<312)&&n&&r&&i&&s&&o?(V(r,!1),k(function(){i+="",s+="";var p={};if(l&&typeof l===t)for(var d in l)p[d]=l[d];p.data=n,p.width=i,p.height=s;var v={};if(f&&typeof f===t)for(var m in f)v[m]=f[m];if(a&&typeof a===t)for(var g in a)typeof v.flashvars!=e?v.flashvars+="&"+g+"="+a[g]:v.flashvars=g+"="+a[g];if(W(o)){var y=j(p,v,r);p.id==r&&V(r,!0),h.success=!0,h.ref=y}else{if(u&&D()){p.data=u,P(p,v,r,c);return}V(r,!0)}c&&c(h)})):c&&c(h)},switchOffAutoHideShow:function(){x=!1},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:W,createSWF:function(e,t,n){return T.w3?j(e,t,n):undefined},showExpressInstall:function(e,t,n,r){T.w3&&D()&&P(e,t,n,r)},removeSWF:function(e){T.w3&&I(e)},createCSS:function(e,t,n,r){T.w3&&X(e,t,n,r)},addDomLoadEvent:k,addLoadEvent:L,getQueryParamValue:function(e){var t=a.location.search||a.location.hash;if(t){/\?/.test(t)&&(t=t.split("?")[1]);if(e==null)return $(t);var n=t.split("&");for(var r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return $(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(w){var e=R(s);e&&v&&(e.parentNode.replaceChild(v,e),m&&(V(m,!0),T.ie&&T.win&&(v.style.display="block")),g&&g(y)),w=!1}}}}();window.opentokdebug=function(){function c(t){i&&(s||!n||!n.log)&&i.apply(e,t)}function h(e){return o>0?o>e:u.length+o<=e}var e=this,t=Array.prototype.slice,n=e.console,r={},i,s,o=0,u=["error","warn","info","debug","log"],a="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),f=a.length,l=[];while(--f>=0)(function(e){r[e]=function(){o!==0&&n&&n[e]&&n[e].apply(n,arguments)}})(a[f]);f=u.length;while(--f>=0)(function(i,s){r[s]=function(){var r=t.call(arguments),o=[s].concat(r);l.push(o);if(!n||!h(i))return;c(o),n.firebug||e.Firebug?n[s].apply(n,r):n[s]?n[s](r):n.log(r)}})(f,u[f]);return r.setLevel=function(e){o=typeof e=="number"?e:9},r.setCallback=function(){var e=t.call(arguments),n=l.length,r=n;i=e.shift()||null,s=typeof e[0]=="boolean"?e.shift():!1,r-=typeof e[0]=="number"?e.shift():n;while(r<n)c(l[r++])},r.getLogs=function(){return l.join("\n")},r}(),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(this===void 0||this===null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=0;arguments.length>0&&(r=Number(arguments[1]),r!==r?r=0:r!==0&&r!==Infinity&&r!==-Infinity&&(r=(r>0||-1)*Math.floor(Math.abs(r))));if(r>=n)return-1;var i=r>=0?r:Math.max(n-Math.abs(r),0);for(;i<n;i++)if(i in t&&t[i]===e)return i;return-1}),function(e){e.flexselect=function(e,t){this.init(e,t)},e.extend(e.flexselect.prototype,{settings:{allowMismatch:!1,selectedClass:"flexselect_selected",dropdownClass:"flexselect_dropdown",defaultmessage:"No results",inputIdTransform:function(e){return e+"_flexselect"},inputNameTransform:function(e){return},dropdownIdTransform:function(e){return e+"_flexselect_dropdown"}},select:null,input:null,hidden:null,dropdown:null,dropdownList:null,cache:[],results:[],lastAbbreviation:null,abbreviationBeforeFocus:null,selectedIndex:0,picked:!1,dropdownMouseover:!1,init:function(t,n){this.settings=e.extend({},this.settings,n),this.select=e(t),this.preloadCache(),this.renderControls(),this.wire()},preloadCache:function(){this.cache=this.select.children("option").map(function(){return{name:e.trim(e(this).text()),value:e(this).val(),score:0}})},renderControls:function(){var t=this.select.children("option:selected");this.hidden=e("<input type='hidden'/>").attr({id:this.select.attr("id"),name:this.select.attr("name")}).val(t.val()),this.input=e("<input type='text' autocomplete='off' />").attr({id:this.settings.inputIdTransform(this.select.attr("id")),name:this.settings.inputNameTransform(this.select.attr("name")),accesskey:this.select.attr("accesskey"),tabindex:this.select.attr("tabindex"),placeholder:this.select.attr("placeholder"),style:this.select.attr("style")}).addClass(this.select.attr("class")).val(e.trim(t.text())),this.dropdown=e("<div></div>").attr({id:this.settings.dropdownIdTransform(this.select.attr("id"))}).addClass(this.settings.dropdownClass),this.dropdownList=e("<ul></ul>"),this.dropdown.append(this.dropdownList),this.select.after(this.input).after(this.hidden).remove(),e("body").append(this.dropdown)},wire:function(){var t=this;this.input.click(function(){t.lastAbbreviation=null,t.focus(),t.picked||t.filterResults()}),this.input.mouseup(function(e){e.preventDefault()}),this.input.focus(function(){t.abbreviationBeforeFocus=t.input.val(),t.input.select()}),this.input.blur(function(){t.dropdownMouseover||(t.hide(),!t.settings.allowMismatch&&!t.picked&&t.reset())}),this.dropdownList.mouseover(function(n){if(n.target.tagName=="LI"){var r=t.dropdown.find("li");t.markSelected(r.index(e(n.target)))}}),this.dropdownList.mouseleave(function(){t.markSelected(-1)}),this.dropdownList.mouseup(function(e){t.pickSelected(),t.focusAndHide()}),this.dropdown.mouseover(function(e){t.dropdownMouseover=!0}),this.dropdown.mouseleave(function(e){t.dropdownMouseover=!1}),this.dropdown.mousedown(function(e){e.preventDefault()}),this.input.keyup(function(e){switch(e.keyCode){case 13:e.preventDefault(),t.pickSelected(),t.focusAndHide();break;case 27:e.preventDefault(),t.reset(),t.focusAndHide();break;default:t.filterResults()}}),this.input.keydown(function(e){switch(e.keyCode){case 9:t.pickSelected(),t.hide();break;case 33:e.preventDefault(),t.markFirst();break;case 34:e.preventDefault(),t.markLast();break;case 38:e.preventDefault(),t.moveSelected(-1);break;case 40:e.preventDefault(),t.moveSelected(1);break;case 13:case 27:e.preventDefault(),e.stopPropagation()}})},filterResults:function(){var t=this.input.val();if(t==this.lastAbbreviation)return;var n=[];e.each(this.cache,function(){this.score=LiquidMetal.score(this.name,t),this.score>0&&n.push(this)});if(n.length==0){var r={name:this.settings.defaultmessage,value:"ZERO_CONTACTS",score:9.9};n.push(r)}this.results=n,this.sortResults(),this.renderDropdown(),this.markFirst(),this.lastAbbreviation=t,this.picked=!1},sortResults:function(){this.results.sort(function(e,t){return t.score-e.score})},renderDropdown:function(){var t=this.dropdown.outerWidth()-this.dropdown.innerWidth(),n=this.input.offset();this.dropdown.css({width:this.input.outerWidth()-t+"px",top:n.top+this.input.outerHeight()+"px",left:n.left+"px"});var r=this.dropdownList.html("");this.results.length>0&&e.each(this.results,function(){r.append(e("<li/>").html(this.name))}),this.dropdown.show()},markSelected:function(t){if(t>this.results.length)return;var n=this.dropdown.find("li");n.removeClass(this.settings.selectedClass),this.selectedIndex=t,t>=0&&e(n[t]).addClass(this.settings.selectedClass)},pickSelected:function(){var e=this.results[this.selectedIndex];if(e){this.hidden.val(e.value),this.input.val("");if(typeof PRESENCE.UIMANAGER.changeSelectContactValue=="function")return PRESENCE.UIMANAGER.changeSelectContactValue(e.name,e.value)}else this.settings.allowMismatch?this.hidden.val(""):this.reset()},hide:function(){this.dropdown.hide(),this.lastAbbreviation=null},moveSelected:function(e){this.markSelected(this.selectedIndex+e)},markFirst:function(){this.markSelected(0)},markLast:function(){this.markSelected(this.results.length-1)},reset:function(){this.input.val(this.abbreviationBeforeFocus)},focus:function(){this.input.focus()},focusAndHide:function(){this.hide()}}),e.fn.flexselect=function(t){return this.each(function(){this.tagName=="SELECT"&&new e.flexselect(this,t)}),this}}(jQuery),function(e){e.widget("ui.chatbox",{options:{id:null,title:null,user:null,hidden:!1,offset:0,width:230,height:400,groupBox:!1,video:0,messageSent:function(e,t,n){this.boxManager.addMsg(t.first_name,n)},boxClosed:function(e){},boxManager:{init:function(e){this.elem=e},addMsg:function(t,n){var r=this,i=r.elem.uiChatboxLog,s=document.createElement("div");if(t==null||e(t).html()=="")var o=n;else var o="<b>"+t+":</b> "+n;e(s).html(o).addClass("ui-chatbox-msg"),i.append(s),r._scrollToBottom(),!r.elem.uiChatboxTitlebar.hasClass("ui-state-focus")&&!r.highlightLock&&(r.highlightLock=!0,r.highlightBox())},highlightBox:function(){this.elem.uiChatbox.addClass("ui-state-highlight");var t=this,n=e('<p class="chatWindowhighlighted"></div>'),r={color:e(n).css("color")};t.elem.uiChatboxTitlebar.effect("highlight",r,300),typeof PRESENCE.UTILITIES.mustBounceBoxForChatWindow=="function"&&PRESENCE.UTILITIES.mustBounceBoxForChatWindow(t)||typeof PRESENCE.UTILITIES.mustBounceBoxForChatWindow!="function"?t.elem.uiChatbox.effect("bounce",{times:3},300,function(){t.highlightLock=!1,t._scrollToBottom()}):t.highlightLock=!1},toggleBox:function(e){this.elem.uiChatbox.toggle(e)},_scrollToBottom:function(){var e=this.elem.uiChatboxLog;e.scrollTop(e.get(0).scrollHeight)}}},toggleContent:function(e){this.uiChatboxContent.toggle(),this.uiChatboxContent.is(":visible")&&this.uiChatboxInputBox.focus()},widget:function(){return this.uiChatbox},_create:function(){var t=this,n=t.options,r=n.title||"No Title",i=(t.uiChatbox=e("<div></div>")).appendTo(document.body).addClass("ui-widget ui-corner-top ui-chatbox").attr("outline",0).focusin(function(){t.uiChatbox.removeClass("ui-state-highlight"),t.uiChatboxTitlebar.addClass("ui-state-focus")}).focusout(function(){t.uiChatboxTitlebar.removeClass("ui-state-focus")}),s=(t.uiChatboxTitlebar=e("<div></div>")).addClass("ui-widget-header ui-corner-top ui-chatbox-titlebar ui-dialog-header").click(function(e){t.toggleContent(e)}).appendTo(i),o=(t.uiChatboxTitle=e("<span></span>")).html(r).appendTo(s),u=(t.uiChatboxTitlebarClose=e('<a href="#"></a>')).addClass("ui-corner-all ui-chatbox-icon ").attr("role","button").hover(function(){u.addClass("ui-state-hover")},function(){u.removeClass("ui-state-hover")}).click(function(e){return i.hide(),t.options.boxClosed(t.options.id),!1}).appendTo(s),a=e("<span></span>").addClass("ui-icon-closethick chat-thick chat-closethick").text("close").appendTo(u),f=(t.uiChatboxTitlebarMinimize=e('<a href="#"></a>')).addClass("ui-corner-all ui-chatbox-icon").attr("role","button").hover(function(){f.addClass("ui-state-hover")},function(){f.removeClass("ui-state-hover")}).click(function(e){return t.toggleContent(e),!1}).appendTo(s),l=e("<span></span>").addClass("ui-icon-minusthick chat-thick  chat-minusthick").text("minimize").appendTo(f),c=(t.uiChatboxTitlebarVideo=e('<a href="#"></a>')).addClass("ui-corner-all ui-chatbox-icon ui-videobox-icon").attr("role","button").hover(function(){c.addClass("ui-state-hover")},function(){c.removeClass("ui-state-hover")}).click(function(e){return PRESENCE.WINDOW.toggleVideoBox(t),!1}).appendTo(s),h=e("<span></span>").addClass("ui-icon-circle-triangle-e chat-thick  chat-videothick").text("     ").appendTo(c),p=(t.uiChatboxTitlebarVideoChange=e('<a href="#"></a>')).addClass("ui-corner-all ui-chatbox-icon ui-videobox-icon-change").attr("role","button").hover(function(){p.addClass("ui-state-hover")},function(){p.removeClass("ui-state-hover")}).click(function(e){return PRESENCE.WINDOW.toggleVideoBoxChange(t),!1}).appendTo(s),h=e("<span></span>").addClass("ui-icon-newwin chat-thick  chat-videoPublisherthick").text("").appendTo(p),d=(t.uiChatboxTitlebarGames=e('<a href="#"></a>')).addClass("ui-corner-all ui-chatbox-icon ui-games-icon").attr("role","button").hover(function(){d.addClass("ui-state-hover")},function(){d.removeClass("ui-state-hover")}).click(function(e){return PRESENCE.GAME.INTERFACE.pickGamesButton(t),!1}).appendTo(s),v=e("<span></span>").addClass("ui-icon-star chat-thick  chat-gamesthick").text("").appendTo(d),m=(t.uiChatboxContent=e("<div></div>")).addClass("ui-widget-content ui-chatbox-content ").appendTo(i),g=(t.uiChatboxNotify=e("<div></div>")).addClass("ui-widget-content ui-chatbox-notify").click(function(e){PRESENCE.NOTIFICATIONS.onClickChatNotification(t.uiChatboxNotify)}).appendTo(m),y=(t.uiVideobox=e("<div></div>")).addClass("ui-widget-content ui-videobox").click(function(e){}).appendTo(m),b=(t.uiChatboxLog=t.element).addClass("ui-widget-content ui-chatbox-log").appendTo(m),w=(t.uiChatboxInput=e("<div></div>")).addClass("ui-widget-content ui-chatbox-input").click(function(e){}).appendTo(m),E=(t.uiChatboxInputBox=e("<textarea></textarea>")).addClass("ui-widget-content ui-chatbox-input-box ui-corner-all").appendTo(w).keydown(function(n){if(n.keyCode&&n.keyCode==e.ui.keyCode.ENTER){var r=typeof PRESENCE.UTILITIES.userChatDataInputControl=="function"&&PRESENCE.UTILITIES.userChatDataInputControl()||typeof PRESENCE.UTILITIES.userChatDataInputControl!="function";return r&&(msg=e.trim(e(this).val()),msg.length>0&&t.options.messageSent(t.options.id,t.options.user,msg),e(this).val("")),!1}}).focusin(function(){E.addClass("ui-chatbox-input-focus");var t=e(this).parent().prev();t.scrollTop(t.get(0).scrollHeight)}).focusout(function(){E.removeClass("ui-chatbox-input-focus")});s.find("*").add(s).disableSelection(),m.children().click(function(){t.uiChatboxInputBox.focus()}),t._setWidth(t.options.width),t._setHeight(t.options.height),t._setVideo(t.options.video),t._position(t.options.offset),t.options.boxManager.init(t),t.options.hidden||i.show()},_setOption:function(t,n){if(n!=null)switch(t){case"hidden":n?this.uiChatbox.hide():this.uiChatbox.show();break;case"offset":this._position(n);break;case"width":this._setWidth(n);break;case"height":this._setHeight(n);break;case"video":this._setVideo(n);break;case"groupBox":this._setGroupBox(n)}e.Widget.prototype._setOption.apply(this,arguments)},_setWidth:function(e){this.uiChatboxTitlebar.width(e+"px"),this.uiChatboxLog.width(e+"px"),this.uiChatboxInputBox.css("width",e-14+"px")},_setHeight:function(e){this.uiChatboxLog.height(e+"px")},_setGroupBox:function(e){this.uiChatboxLog.groupBox(e)},_setVideo:function(e){this.uiVideobox.height(e+"px"),e==0?this.uiVideobox.hide():this.uiVideobox.show()},_position:function(e){this.uiChatbox.css("right",e)}})}(jQuery);var PRESENCE=PRESENCE||{};PRESENCE.VERSION="1.1.0",PRESENCE.AUTHORS="Aldo Gordillo",PRESENCE.CORE=function(e,t,n){var r=function(){PRESENCE.UIMANAGER.init(),PRESENCE.UTILITIES.init(),PRESENCE.XMPPClient.init(),PRESENCE.VIDEOCHAT.init(),PRESENCE.GAME.init(),PRESENCE.AUDIO.init()};return{init:r}}(PRESENCE,jQuery);var contactsInfo=new Array;PRESENCE.XMPPClient=function(e,t,n){function u(e,t,n,r){this.domain=e,this.resource=t,this.client=n,this.version=r,this.videoChatStatus="disconnected",this.session_id=null,this.user_token=null,this.guest_token=null,this.session=null,this.publisher=null,this.gameStatus="disconnected",this.game=null}function f(){this.occupants=[],this.joined=!1,this.affiliation="none",this.role="none",this.nick=St(),this.lastMessageId=null}var r="localhost",s=new Array;s.available="chat",s.away="away",s.autoaway="away",s.dnd="dnd";var o=new Array;o[""]="",o.chat="",o.away="Away",o.xa="Away",o.dnd="Busy";var a=new Array,l=new Array;l.cinfo="versionID",l.videochatRequest="videochatRequestID",l.videochatRequestCancel="videochatRequestCancelID";var c=function(){Rt()},h=function(e,t){if(d())return!0;g()?v(e,t)==0&&PRESENCE.UIMANAGER.updateChatWindow():m(e,t)==0&&PRESENCE.UIMANAGER.updateChatWindow()},p=function(){return x!=null&&x.connected?!0:!1},d=function(){return p()&&b!="offline"&&!k},v=function(e,t){try{x=Rt(),x.connect(e,t,O)}catch(n){return!1}return!0},m=function(e,t){if(t!=null&&t!="")var n=t;else{if(!window.sessionStorage||sessionStorage.getItem("ss_user_pass")==null)return!1;var n=sessionStorage.getItem("ss_user_pass")}try{x=Rt(),x.connect(e,n,O)}catch(r){return!1}return!0},g=function(){var e="cookie";return e=="cookie"},y=function(){var e="cookie";return e=="password"},b,w=6e4,E=6e5,S=0,x=null,T=3,N,C,k=!1,L=!1,A=!0,O=function(e){PRESENCE.UTILITIES.log("Strophe onConnect callback call with status "+e);if(e==Strophe.Status.ERROR){PRESENCE.UTILITIES.log("Strophe connection error");return}if(e==Strophe.Status.ATTACHED){PRESENCE.UTILITIES.log("Strophe connection attached");return}if(e==Strophe.Status.AUTHENTICATING){PRESENCE.UTILITIES.log("Strophe connection AUTHENTICATING");return}if(e==Strophe.Status.CONNECTING){PRESENCE.UTILITIES.log("Strophe is connecting.");return}if(e==Strophe.Status.DISCONNECTING){PRESENCE.UTILITIES.log("Strophe is disconnecting.");return}typeof initialTimer!="undefined"&&clearTimeout(initialTimer),e==Strophe.Status.CONNFAIL?(PRESENCE.UTILITIES.log("Strophe failed to connect."),C=setTimeout("PRESENCE.XMPPClient.onReconnect()",5e3),k=!0):e==Strophe.Status.AUTHFAIL?(PRESENCE.UTILITIES.log("Strophe authentication fail."),window.sessionStorage&&sessionStorage.getItem("ss_user_pass")!=null&&sessionStorage.setItem("ss_user_pass",null),k=!0):e==Strophe.Status.ERROR?(PRESENCE.UTILITIES.log("Strophe error."),k=!0):e==Strophe.Status.DISCONNECTED?(PRESENCE.UTILITIES.log("Strophe is disconnected."),k=!0,clearTimeout(N),PRESENCE.UIMANAGER.updateInterfaceAfterUserDisconnect(),bt(),C=setTimeout("PRESENCE.XMPPClient.onReconnect()",5e3)):e==Strophe.Status.CONNECTED&&(PRESENCE.UTILITIES.log("Strophe is connected."),clearTimeout(C),x.addHandler(B,null,"message","chat",null,null),x.addHandler(Tt,null,"message","groupchat",null,null),x.addHandler(j,null,"presence",null,null,null),x.addHandler(z,null,"iq",null,null),k=!1,L=!0,b||(b=PRESENCE.PERSISTENCE.getRestoreUserChatStatus()),b=="offline"&&(b="chat"),ot(b),N=setInterval("PRESENCE.XMPPClient.awayTimerFunction()",w)),PRESENCE.UIMANAGER.updateChatWindow()},M=function(){return},_=function(){b="offline",PRESENCE.UIMANAGER.setStatusWidgetTitle("offline");if(p()){if(a)for(var e in a)a[e].joined&&ft(e);x.send($pres({type:"unavailable"}).tree()),x.disconnect()}},D=function(){S++,S>E/w&&(b!="dnd"&&b!="away"&&(b="autoaway",ot(b)),clearTimeout(N))},P=function(){b=="autoaway"&&(b="available",ot(b))},H=function(){S>E/w&&(N=setInterval("PRESENCE.XMPPClient.awayTimerFunction()",w),P()),S=0},B=function(e){var t=e.getAttribute("from"),n=e.getAttribute("type"),r=e.getElementsByTagName("body");if(n=="chat"&&r.length>0){var i=r[0],e=Strophe.getText(i),s=Mt(t);if(Dt(t))return!0;var s=Mt(t);PRESENCE.UIMANAGER.afterReceivedChatMessage(s,e,null)}return!0},j=function(e){return Dt(t(e).attr("from"))?Nt(e):F(e)},F=function(e){var r=t(e).attr("type");switch(r){case n:I(e);break;case"available":I(e);break;case"unavailable":q(e);break;default:I(e)}return!0},I=function(e){var n=t(e).attr("from"),r=n.split("@")[0];if(r!=user_slug){R(e);if(PRESENCE.UIMANAGER.getConnectionBoxFromSlug(r)!=null){var i=t(e).find("show").text();PRESENCE.UIMANAGER.setUserIconStatus(r,i),PRESENCE.UIMANAGER.updateInterfaceAfterPresenceStanza(r,!0)}else PRESENCE.UTILITIES.isAdminSlug(r)||PRESENCE.UIMANAGER.updateChatWindow()}},q=function(e){var n=t(e).attr("from"),r=n.split("@")[0];r!=user_slug&&PRESENCE.UIMANAGER.getConnectionBoxFromSlug(r)!=null&&(PRESENCE.UIMANAGER.updateInterfaceAfterPresenceStanza(r,!1),PRESENCE.GAME.userDisconnected(r))},R=function(e){var n=t(e).attr("from"),r=n.split("@"),i=r[0],s=r[1].split("/")[0],o=r[1].split("/")[1];if(i in contactsInfo)contactsInfo[i].domain=s,contactsInfo[i].resource=o;else{var a=new u(s,o,null,null);contactsInfo[i]=a}},U=function(e){if(!(e in a)){var t=new f;a[e]=t}},z=function(e){var t=e.getAttribute("type"),n=e.getAttribute("from"),r=n.split("@")[0];return r==user_slug?!0:t=="get"?W(e,n,r):(t="result")?V(e,n,r):!0},W=function(e,t,n){var r=e.getAttribute("id"),i=e.getElementsByTagName("query");if(i.length>0){var s=i[0],o=s.getAttribute("xmlns");if(o=="jabber:iq:version")return Y(t,r),!0;if(o=="jabber:iq:last")return et(t,r),!0}return r==l["videochatRequest"]?(X(t,r,e,n),!0):r==PRESENCE.GAME.COMUNICATION.getIQStanzaID()["gameRequest"]?!0:(tt(t,r),!0)},X=function(e,n,r,i){R(r);var s=r.getElementsByTagName("query");if(s.length>0){var o=s[0],u=o.getElementsByTagName("session_id"),a=o.getElementsByTagName("token");if(u.length==1&&a.length==1){contactsInfo[i].session_id=t(u).text(),contactsInfo[i].user_token=t(a).text(),PRESENCE.VIDEOCHAT.updateInterfaceAfterVideoRequestReceived(i);return}}tt(e,n)},V=function(e,t,n){var r=
e.getAttribute("id");return r==l["cinfo"]?$(e,n):r==l["videochatRequest"]?J(e,n):r==l["videochatRequestCancel"]?K(e,n):!0},$=function(e,n){var r=e.getElementsByTagName("query");if(r.length>0){var i=r[0],s=i.getElementsByTagName("name"),o=i.getElementsByTagName("version");if(s.length==1&&o.length==1){var a=t(s).text(),f=t(o).text();if(n in contactsInfo)contactsInfo[n].client=a,contactsInfo[n].version=f;else{var l=new u(null,null,a,f);contactsInfo[n]=l}PRESENCE.VIDEOCHAT.clientInfoReceivedTrigger(n)}}return!0},J=function(e,n){var r=e.getElementsByTagName("query");if(r.length>0){var i=r[0],s=i.getElementsByTagName("response");if(s.length==1)return PRESENCE.VIDEOCHAT.receiveVideoChatResponseFromUser(n,t(s).text()),!0}return PRESENCE.VIDEOCHAT.receiveVideoChatResponseFromUser(n,"Bad response"),!0},K=function(e,t){var n=e.getElementsByTagName("query");if(n.length>0){var r=n[0],i=r.getElementsByTagName("response");if(i.length==1)return PRESENCE.VIDEOCHAT.receiveVideoChatCancelationFromUser(t),!0}return!0},Q=function(e){if(e in contactsInfo){var t=contactsInfo[e].domain,n=contactsInfo[e].resource,r=e+"@"+t+"/"+n,i=$iq({to:r,type:"get",id:l.cinfo,xmlns:"jabber:iq:version"}).c("query",{xmlns:"jabber:iq:version"});x.sendIQ(i)}},G=function(e){if(e in contactsInfo){var t=e+"@"+contactsInfo[e].domain+"/"+contactsInfo[e].resource,n=$iq({to:t,type:"get",id:l.videochatRequest}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("session_id").t(contactsInfo[e].session_id).up().c("token").t(contactsInfo[e].guest_token);x.sendIQ(n)}},Y=function(e,t){var n="Social Stream XMPP Client",r=Z(),i=$iq({to:e,type:"result",id:t}).c("query",{xmlns:"jabber:iq:version"}).c("name").t(n).up().c("version").t(r);x.sendIQ(i)},Z=function(){return"1.1.0"},et=function(e,t){var n=$iq({to:e,type:"result",id:t}).c("query",{xmlns:"jabber:iq:last",seconds:"0"});x.sendIQ(n)},tt=function(e,t){var n=$iq({to:e,type:"result",id:t});x.sendIQ(n)},nt=function(e,t){if(e in contactsInfo){var n=e+"@"+contactsInfo[e].domain+"/"+contactsInfo[e].resource,r=$iq({to:n,type:"result",id:l.videochatRequest}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("response").t(t);x.sendIQ(r)}},rt=function(e){if(e in contactsInfo){var t=e+"@"+contactsInfo[e].domain+"/"+contactsInfo[e].resource,n=$iq({to:t,type:"result",id:l.videochatRequestCancel}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("response").t("cancel");x.sendIQ(n)}},it=function(e,t){PRESENCE.WINDOW.rotatePriority(e);if(PRESENCE.WINDOW.isSlugGroup(e)){var n=wt(e);return ct(n,t)}var r=PRESENCE.PARSER.getParsedName(user_name,!0);PRESENCE.WINDOW.getChatBoxForSlug(e).chatbox("option","boxManager").addMsg(r,PRESENCE.PARSER.getParsedContent(t,!0));var n=jt(e);return st(n,t)},st=function(e,t){var n=user_jid,r="chat",i=$build("body");i.t(t);var s=$msg({to:e,from:n,type:"chat"}).cnode(i.tree());return x.send(s.tree()),H(),!0},ot=function(e){e||(e=b),e in s&&(e=s[e]);if(e in o){var t=$pres().c("status").t(o[e]).up().c("show").t(e);x.send(t.tree()),PRESENCE.UIMANAGER.setStatusWidgetTitle(e)}},ut="conference",at=function(e){return x.muc.join(wt(e),Et(e),null,null,null,null)},ft=function(e){return x.muc.leave(wt(e),Et(e),null,null)},lt=function(e,t){return sendMessageToRoom(wt(e),t)},ct=function(e,t){return x.muc.message(e,null,t,null,"groupchat")},ht=function(e,t,n){return x.muc.message(wt(e),t,n,null,"chat")},pt=function(e){return x.muc.queryOccupants(wt(e),dt,vt)},dt=function(e){return mt(e),!0},vt=function(){return!0},mt=function(e){var n=t(e).attr("from"),r=Mt(n),i=e.getElementsByTagName("query");if(i.length>0){var s=i[0],o=s.getElementsByTagName("item");t.each(o,function(e,n){var i=t(n).attr("name");a[r].occupants.indexOf(i)==-1&&(a[r].occupants.push(i),PRESENCE.NOTIFICATIONS.addNickToNotificationInGroup(r,i))})}},gt=function(e,t){return U(e),a[e].joined==0&&(at(e),pt(e)),PRESENCE.UIMANAGER.existsSlugChatBox(e)||PRESENCE.WINDOW.createGroupChatBox(e,t),!0},yt=function(e){U(e);var t=new f;a[e]=t},bt=function(){t.each(PRESENCE.WINDOW.getAllSlugsWithVisibleGroupBoxes(),function(e,t){yt(t),PRESENCE.NOTIFICATIONS.initialNotificationInGroup(t,I18n.t("chat.muc.offline"))})},wt=function(e){return e+"@"+ut+"."+r},Et=function(e){return e in a?a[e].nick:St()},St=function(){return user_name.split(" ")[0]},xt=function(e){var t=Et(e);return t.split("_").length>4?!1:(U(e),a[e].nick=t+"_",at(e),!0)},Tt=function(e){var t=e.getAttribute("from"),n=e.getAttribute("type"),r=e.getElementsByTagName("body");if(n=="groupchat"&&r.length>0){var i=r[0],s=Ft(t),o=Strophe.getText(i),u=Mt(t),f=e.getAttribute("id");if(u in a&&a[u].lastMessageId!=null&&a[u].lastMessageId==f)return!0;a[u].lastMessageId=f,PRESENCE.UIMANAGER.afterReceivedGroupChatMessage(t,o)}return!0},Nt=function(e){var r=t(e).attr("from"),i=t(e).attr("to"),s=Mt(r),o=Ft(r),u=t(e).attr("type");if(o==Et(s)&&Mt(i)==user_slug){switch(u){case n:Ct(e);break;case"available":Ct(e);break;case"unavailable":kt(e);break;case"error":Lt(e)}return!0}switch(u){case n:At(e);break;case"available":At(e);break;case"unavailable":Ot(e);break;default:return!0}return!0},Ct=function(e){var n=t(e).attr("from"),r=Mt(n);U(r);var i=e.getElementsByTagName("x");if(i.length==1){var s=i[0],o=s.getElementsByTagName("item");t.each(o,function(e,n){var i=t(n).attr("role"),s=t(n).attr("affiliation");a[r].affiliation=s,a[r].role=i,a[r].joined==0&&(a[r].joined=!0,PRESENCE.NOTIFICATIONS.changeInitialNotificationInGroup(r,I18n.t("chat.muc.occupants")))})}},kt=function(e){var n=t(e).attr("from"),r=Mt(n);yt(r),PRESENCE.NOTIFICATIONS.changeInitialNotificationInGroup(r,"")},Lt=function(e){var n=t(e).attr("from"),r=Mt(n),i="Error",s=e.getElementsByTagName("error");if(s.length==1){var o=s[0],u=t(o).attr("code"),a=t(o).attr("type");i=i+" with code:"+u+" and type:"+a;var f=o.getElementsByTagName("text");if(f.length==1){var l=t(f[0]).text();i=i+"\n"+l}if(u==409&&xt(r))return}yt(r),PRESENCE.NOTIFICATIONS.initialNotificationInGroup(r,I18n.t("chat.muc.joinError",{errorMsg:i}))},At=function(e){var n=t(e).attr("from"),r=Ft(n),i=Mt(n);U(i),a[i].occupants.indexOf(r)==-1&&(a[i].occupants.push(r),PRESENCE.NOTIFICATIONS.addNickToNotificationInGroup(i,r),PRESENCE.UIMANAGER.writeReceivedMessageOnChatWindow("",i,I18n.t("chat.muc.join",{nick:r})))},Ot=function(e){var n=t(e).attr("from"),r=Ft(n),i=Mt(n);U(i),a[i].occupants.indexOf(r)!=-1&&(a[i].occupants.splice(a[i].occupants.indexOf(r),1),PRESENCE.NOTIFICATIONS.removeNickFromNotificationInGroup(i,r),PRESENCE.UIMANAGER.writeReceivedMessageOnChatWindow("",i,I18n.t("chat.muc.leave",{nick:r})))},Mt=function(e){return e.split("@")[0]},_t=function(e){return e.split("@")[1].split("/")[0]},Dt=function(e){return _t(e).split(".")[0]==ut?!0:!1},Pt=function(e){var n=PRESENCE.UIMANAGER.getConnectionBoxFromSlug(e);if(n!=null)return t(n).attr("name");var r=PRESENCE.WINDOW.getChatBoxForSlug(e);return r!=null?r.attr("name"):e},Ht=function(e){var t=e.split("-"),n="";for(i=0;i<t.length;i++)i!=0&&(n+=" "),n=n+t[i][0].toUpperCase()+t[i].substring(1,t[i].length);return n},Bt=function(){return Pt(Mt(jid))},jt=function(e){return e+"@"+r},Ft=function(e){return e.split("/")[1]},It=function(e){return e.split("/")[0]},qt=function(){return s},Rt=function(){return x||(x=new Strophe.Connection(BOSH_SERVICE)),x},Ut=function(){return L},zt=function(e){L=e},Wt=function(){return A},Xt=function(e){A=e},Vt=function(){return b},$t=function(e){b=e},Jt=function(){return k},Kt=function(){return a};return{init:c,connectToChat:h,onReconnect:M,isStropheConnected:p,isUserConnected:d,authByCookie:g,authByPassword:y,disconnect:_,awayTimerFunction:D,restartAwayTimer:H,sendIQStanzaForRequestClientInfo:Q,sendIQStanzaToRequestVideochat:G,sendIQStanzaToResponseVideochat:nt,sendIQStanzaToCancelVideochat:rt,getJavascriptXMPPClientName:Z,sendChatMessage:it,sendStatus:ot,accessRoom:gt,joinRoom:at,leaveRoom:ft,getSlugFromJid:Mt,getJidFromSlug:jt,getNameFromSlug:Pt,getNickFromChatRoomJid:Ft,getConnection:Rt,isNewConnection:Ut,setNewConnection:zt,isFirstConnection:Wt,setFirstConnection:Xt,getUserStatus:Vt,setUserStatus:$t,getDisconnectionFlag:Jt,getRoomsInfo:Kt,getSStreamChatStatus:qt}}(PRESENCE,jQuery),PRESENCE.AUDIO=function(e,t,n){function f(){}function l(e){window[e]!=null?window[e].play():t("body").append('<embed src="'+r+"/"+e+'.mp3" autostart="true" hidden="true" loop="false">')}function c(e){a(e),l(e)}function h(e){return PRESENCE.XMPPClient.getUserStatus()=="dnd"?!1:PRESENCE.UTILITIES.getChatFocus()?!1:!0}var r="/assets/chat",s,o=[["mp3","audio/mpeg"],["wav","audio/wav"]],u=function(){a("onMessageAudio")},a=function(e){var t=document.createElement("audio");if(t.canPlayType){path=r+"/"+e,window[e]=new Audio;for(i=0;i<o.length;i++)if(window[e].canPlayType(o[i][1])){var n=document.createElement("source");n.type=o[i][1],n.src=path+"."+o[i][0],window[e].addEventListener("ended",f),window[e].appendChild(n)}}};return{init:u,mustPlaySoundForChatWindow:h,playSound:l}}(PRESENCE,jQuery),PRESENCE.GAME=function(e,t,n){function r(e,t,n,r){this.id=e,this.name=t,this.players=n,this.options=r,this.handler=null}function i(e,t){this.id=e,this.name=t}function s(e,t){this.pass=e,this.reason=t}var o=function(e,t){return new s(e,t)},u=function(){var t="false";t=="true"&&(e.GAME.INTERFACE.enableGameFeature(!0),e.GAME.COMUNICATION.init(PRESENCE.XMPPClient.getConnection()))},a=function(t,n){if(n==null)return;if(t in contactsInfo)var r=contactsInfo[t].gameStatus;else var r=null;if(!PRESENCE.XMPPClient.isUserConnected()){e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.offline")),r!=null&&(contactsInfo[t].gameStatus="disconnected");return}if(!PRESENCE.UIMANAGER.isSlugChatConnected(t)){e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.guestOffline",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),r!=null&&(contactsInfo[t].gameStatus="disconnected");return}if(r==null){e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.unable"));return}if(r!="disconnected"){e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,"Esta ocupado en otro estado!=desconectado...");return}contactsInfo[t].gameStatus="waiting",e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.waiting")),contactsInfo[t].game=n;var i=t+"@"+contactsInfo[t].domain+"/"+contactsInfo[t].resource;return e.GAME.COMUNICATION.sendIQStanzaToRequestGame(i,n)},f=function(t,n){if(!t in contactsInfo)return;var r=t+"@"+contactsInfo[t].domain+"/"+contactsInfo[t].resource;e.GAME.COMUNICATION.sendIQStanzaToResponseGameRequest(r,n),n=="yes"?(contactsInfo[t].gameStatus="playing",PRESENCE.GAME.INTERFACE.updateInterfaceBeforeStartGame(t)):(contactsInfo[t].gameStatus="disconnected",PRESENCE.GAME.INTERFACE.updateInterfaceAfterFinishGame(t))},l=function(n,r){t.each(n.players,function(t,i){var s=i.id;if(s!=user_slug&&s in contactsInfo){var o=s+"@"+contactsInfo[s].domain+"/"+contactsInfo[s].resource;e.GAME.COMUNICATION.sendIQStanzaWithAction(o,n.id,r)}})},c=function(t,n,i,s,o){if(!t in contactsInfo)return;contactsInfo[t].game=new r(n,i,s,o);if(contactsInfo[t].gameStatus!="disconnected")return e.GAME.COMUNICATION.sendIQStanzaToResponseGameRequest(t,"busy"),!0;contactsInfo[t].gameStatus="pending",e.GAME.INTERFACE.updateInterfaceAfterGameRequestReceived(t,contactsInfo[t].game)},h=function(t,n){if(contactsInfo[t].gameStatus!="waiting")return!0;n=="yes"?(contactsInfo[t].gameStatus="playing",e.GAME.INTERFACE.updateInterfaceBeforeStartGame(t,contactsInfo[t].game)):n=="no"?(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.rejected",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected"):n=="busy"?(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.rejectedBusy",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected"):(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.unknown",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected")},p=function(t,n){t in contactsInfo?n=="finish"&&(contactsInfo[t].gameStatus=="pending"?(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.cancel",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected"):contactsInfo[t].gameStatus=="playing"&&(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.finish",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected")):b(t)},d=function(t){if(contactsInfo[t].gameStatus!="waiting")return!0;e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.clientIssue",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected"},v=function(e){if(!e in contactsInfo){var n=contactsInfo[e].game;n!=null&&n.players!=null&&t.each(n.players,function(t,n){if(n[0]==e)return n[1]})}return null},m=function(e,t,n){var r;return r=g(t),r[0]?typeof e=="undefined"||typeof n=="undefined"?new s(!1,"myPlayer or myDivID undefined"):t.players.constructor.toString().indexOf("Array")==-1?new s(!1,"Game.Players is not an array"):t.options.constructor.toString().indexOf("Array")==-1?new s(!1,"Game.options is not an array"):t.players.indexOf(e)==-1?new s(!1,"myPlayer is not contained in players array"):new s(!0,"Ok"):r},g=function(e){return typeof e=="undefined"||typeof e.id=="undefined"||typeof e.name=="undefined"||typeof e.players=="undefined"||typeof e.options=="undefined"?new s(!1,"Some game field (game/game.id/game.name/game.players/game.options) is undefined"):e.id==""||e.name==""?new s(!1,"game.id or game.name is empty"):e.id.split(" ").length>2?new s(!1,"Invalid game.id. No whitespaces allowd in this field"):new s(!0,"Ok")},y=function(t,n){var r=contactsInfo[t].game,s=new i(user_slug,v(user_slug)),o=m(s,r,n);if(!o.pass){var u="StartPlay error with reason: "+o.reason;e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,u);return}if(typeof PRESENCE.GAME[r.id].validateParams=="function"){o=PRESENCE.GAME[r.id].validateParams(s,r,n);if(!o.pass){var u="StartPlay error with reason: "+o.reason;e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,u);return}}else PRESENCE.UTILITIES.log("Warning: Missed "+r.name+" validateParams method");typeof PRESENCE.GAME[r.id].minimumRequirements!="function"&&PRESENCE.UTILITIES.log("Warning: Missed "+r.name+" minRequirements method"),r.handler!=null&&PRESENCE.GAME.COMUNICATION.removeHandler(r.handler),r.handler=PRESENCE.GAME.COMUNICATION.addHandler(r.id);var s=new i(user_slug,user_name);PRESENCE.GAME[r.id].init(s,r,n)},b=function(t){var n=null;if(t in contactsInfo){var r=contactsInfo[t].gameStatus;if(r=="playing"){var i=t+"@"+contactsInfo[t].domain+"/"+contactsInfo[t].resource;e.GAME.COMUNICATION.sendIQStanzaToFinishGame(i),contactsInfo[t].game.handler!=null&&(e.GAME.COMUNICATION.removeHandler(contactsInfo[t].game.handler),contactsInfo[t].game.handler==null)}else if(r=="waiting"){var i=t+"@"+contactsInfo[t].domain+"/"+contactsInfo[t].resource;e.GAME.COMUNICATION.sendIQStanzaToFinishGame(i)}else r=="pending"&&e.GAME.COMUNICATION.sendIQStanzaToResponseGameRequest(t,"no");contactsInfo[t].gameStatus="disconnected",n=contactsInfo[t].game}PRESENCE.GAME.INTERFACE.updateInterfaceAfterFinishGame(t,n)},w=function(e){b(e)};return{init:u,game:r,player:i,startGame:y,finishGame:b,createValidationResult:o,requestUserToPlay:a,responseUserToPlay:f,updateLogicAfterReceivedGameRequest:c,updateLogicAfterReceivedGameRequestCancelation:p,updateLogicAfterReceivedGameRequestResponse:h,updateLogicAfterReceivedGameRequestError:d,sendAction:l,userDisconnected:w}}(PRESENCE,jQuery),PRESENCE.GAME.COMUNICATION=function(e,t,n){function d(){}var r=null,i=new Array;i.gameRequest="gameRequestID",i.gameRequestFinish="gameRequestFinishID",i.gameAction="gameActionID";var s=function(){return i},o=function(e){r=e,r&&(r.addHandler(a,null,"iq","get",i.gameRequest,null),r.addHandler(l,null,"iq","result",i.gameRequest,null),r.addHandler(c,null,"iq","error",i.gameRequest,null),r.addHandler(p,null,"iq","result",i.gameRequestFinish,null),r.addHandler(y,null,"iq","result",m("gameId"),null))},u=function(e,n){var s=0,o=Object.keys(n.options).length,u=$iq({to:e,type:"get",id:i.gameRequest}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("game",{id:n.id,name:n.name}).c("players",{});t.each(n.players,function(e,t){e==n.players.length-1?u.c("player",{id:t.id}).t(t.name).up().up():u.c("player",{id:t.id}).t(t.name).up()}),u.c("options",{});for(var a in n.options)s==o-1?u.c("option",{name:a}).t(n.options[a]).up().up():u.c("option",{name:a}).t(n.options[a]).up(),s+=1;r.sendIQ(u)},a=function(n){var r=n.getAttribute("from"),i=r.split("@")[0],s="",o="",u=[],a=new Array,f=n.getElementsByTagName("game");if(f.length==1){var l=f[0];o=t(l).attr("name"),s=t(l).attr("id");var c=n.getElementsByTagName("players");c.length>0&&t.each(t(c).children(),function(n,r){u.push(new e.GAME.player(t(r).attr("id"),t(r).text()))});var h=n.getElementsByTagName("options");h.length>0&&t.each(t(h).children(),function(e,n){a[t(n).attr("name")]=t(n).text()})}return e.GAME.updateLogicAfterReceivedGameRequest(i,s,o,u,a),!0},f=function(e,t){var n=$iq({to:e,type:"result",id:i.gameRequest}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("response").t(t);r.sendIQ(n)},l=function(n){var r=n.getAttribute("from"),i=r.split("@")[0],s=n.getElementsByTagName("query");if(s.length>0){var o=s[0],u=o.getElementsByTagName("response");if(u.length==1)return e.GAME.updateLogicAfterReceivedGameRequestResponse(i,t(u).text()),!0}return!0},c=function(t){var n=t.getAttribute("from"),r=n.split("@")[0];return e.GAME.updateLogicAfterReceivedGameRequestError(r),!0},h=function(e){var t=$iq({to:e,type:"result",id:i.gameRequestFinish}).c("game",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("status").t("finish");r.sendIQ(t)},p=function(n){var r=n.getAttribute("from"),i=r.split("@")[0],s=n.getElementsByTagName("game");if(s.length>0){var o=s[0],u=o.getElementsByTagName("status");if(u.length==1){var a=t(u).text();return e.GAME.updateLogicAfterReceivedGameRequestCancelation(i,a),!0}}return!0},v=function(e,t,n){var i=m(t),s=$iq({to:e,type:"result",id:i}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("game",{id:t}).c("action",{type:n.type});return n.type=null,s=g(s,n),r.sendIQ(s)},m=function(e){return i.gameAction+"_"+e},g=function(e,n){if(typeof n!="object")return e;var r=Object.keys(n).length,i=0;return t.each(n,function(t,n){if(n==null)return;if(typeof n=="object"){var s="object";n.constructor.toString().indexOf("Array")!=-1&&(s="array"),e.c(t,{type:s}),e=g(e,n)}else{var o=typeof n,u=typeof t;switch(o){case"number":n+="";break;case"boolean":n=n.toString();break;case"string":break;default:}switch(u){case"number":t="item";break;case"string":break;default:}i==r-1?e.c(t,{type:o}).t(n).up().up():e.c(t,{type:o}).t(n).up()}i++}),e},y=function(e){var n=e.getAttribute("from"),r=n.split("@")[0],i=e.getElementsByTagName("query");if(i.length==1){var s=i[0],o=s.getElementsByTagName("game");if(o.length==1){var u=o[0],a=t(u).attr("id"),f=u.getElementsByTagName("action");t.each(f,function(e,t){var n=b(t);PRESENCE.GAME[a].onActionReceived(n)})}}return!0},b=function(e){var n=new d,r=t(e).attr("type");return n.type=r,n=w(n,e),n},w=function(e,n){return t.each(t(n).children(),function(n,r){if(t(r).children().length>0)t(r).attr("type")=="array"?e[r.tagName]=new Array:e[r.tagName]=new Object,e[r.tagName]=w(e[r.tagName],t(r));else{var i=null,s=t(r).text(),o=t(r).attr("type");switch(o){case"number":isNaN(+s)||(i=+s);break;case"boolean":if(s=="true"||s=="false")i=s==="true";break;case"string":i=s;break;default:}e.constructor.toString().indexOf("Array")!=-1&&r.tagName=="item"?e.push(i):e[r.tagName]=i}}),e},E=function(e){r.deleteHandler(e)},S=function(e){return r.addHandler(y,null,"iq","result",m(e),null)};return{init:o,sendIQStanzaToRequestGame:u,handleRequestGameIQStanza:a,sendIQStanzaToResponseGameRequest:f,handleIQResultFromGameRequest:l,sendIQStanzaToFinishGame:h,handleIQResultFromGameRequestFinish:p,sendIQStanzaWithAction:v,handleActionIQStanza:y,addHandler:S,removeHandler:E,getIQStanzaID:s}}(PRESENCE,jQuery),PRESENCE.GAME.FACTORY=function(e,t,n){var r=function(e,t){switch(t){case"Modern-TER":var n=new Array;return n.theme="Modern",i(e,"TER",n);case"Classic-TER":var n=new Array;return n.theme="Classic",i(e,"TER",n);default:return null}},i=function(e,t,n){var r=new PRESENCE.GAME.player(user_slug,user_name),i=new PRESENCE.GAME.player(e,PRESENCE.XMPPClient.getNameFromSlug(e)),o=[r,i],u=new PRESENCE.GAME.game(t,s(t),o,n);return u},s=function(e){return typeof PRESENCE.GAME[e].getName=="function"?PRESENCE.GAME[e].getName():e};return{getGame:r}}(PRESENCE,jQuery),PRESENCE.GAME.INTERFACE=function(e,t,n){function u(e,t,n){this.name=e,this.choice=t,this.thumbnail=n}updateInterfaceAfterGameRequestReceived=function(e,t){PRESENCE.WINDOW.createBuddyChatBox(e);var n=PRESENCE.WINDOW.getChatBoxForSlug(e);v(e,t),g(e),PRESENCE.WINDOW.toggleVideoBoxForSlug(e,!0)};var r=function(e,n){var r=document.createElement("div"),i="game_"+e+contactsInfo[e].game.id;r.setAttribute("id",i),t(r).css("width","100%"),t(r).css("height","100%"),PRESENCE.WINDOW.setVideoBoxContent(e,r),PRESENCE.GAME.startGame(e,i)},i=function(e,t){PRESENCE.WINDOW.toggleVideoBoxForSlug(e,!1),y(e)},s=function(e,t){PRESENCE.WINDOW.setVideoBoxContent(e,'<p class="game-info"> '+t+" </p>")},o=function(e){var n=t(e.element).attr("id"),r=PRESENCE.WINDOW.toggleVideoBoxForSlug(n);r?(g(n),f(n)):(y(n),PRESENCE.GAME.finishGame(n))},a=[];a.push(new u("Modern Tic Tac Toe","Modern-TER","/assets/games/ter/modern_thumbnail.png")),a.push(new u("Classic Tic Tac Toe","Classic-TER","/assets/games/ter/classic_thumbnail.png"));var f=function(e,t){if(typeof t=="undefined"||t==null)a.length>0?t=a[0]:t=new t("No games available","None","");var n=c(e,t);PRESENCE.WINDOW.setVideoBoxContent(e,n),h()},l=function(e,t){PRESENCE.GAME.requestUserToPlay(e,t)},c=function(e,t){var n='<div class="game-choices"><div class="game-choice-buttonLeft"><a class="game-choice-linkLeft"><img class="game-button-img" src="/assets/btn/group_left.png" ></a></div><div class="game-choice"><a class="game-choice-link" slug='+e+' choice="'+t.choice+'" >'+'<img class="game-choice-img" src="'+t.thumbnail+'" >'+'<p class="game-name">'+t.name+" </p>"+"</a>"+"</div>"+'<div class="game-choice-buttonRight">'+'<a class="game-choice-linkRight">'+'<img class="game-button-img" src="/assets/btn/group_right.png" >'+"</a>"+"</div>"+"</div>";return n},h=function(){t(".game-choice-link").click(function(n){var r=t(this).attr("choice"),i=t(this).attr("slug"),s=e.GAME.FACTORY.getGame(i,r);l(i,s)}),t(".game-choice-linkLeft").click(function(e){var n=t(e.target).parent().parent().parent().find(".game-choice-link"),r=n.attr("slug"),i=n.attr("choice"),s=d(i);f(r,s)}),t(".game-choice-linkRight").click(function(e){var n=t(e.target).parent().parent().parent().find(".game-choice-link"),r=n.attr("slug"),i=n.attr("choice"),s=p(i);f(r,s)})},p=function(e){var n=null;return t.each(a,function(t,r){r.choice==e&&(t==a.length-1?n=a[0]:n=a[t+1])}),n},d=function(e){var n=null;return t.each(a,function(t,r){r.choice==e&&(t==0?n=a[a.length-1]:n=a[t-1])}),n},v=function(e,t){var n='<p class="game-info">'+I18n.t("chat.game.call",{name:PRESENCE.XMPPClient.getNameFromSlug(e),game:t.name})+" </p>",r=n+'<p class="game-request"> <a class="gameButton" slug="'+e+'" value="yes">'+I18n.t("chat.game.accept")+"</a> -"+' <a class="gameButton" slug="'+e+'" value="no">'+I18n.t("chat.game.deny")+"</a> </p>";PRESENCE.WINDOW.setVideoBoxContent(e,r),m()},m=function(){t(".gameButton").click(function(e){e.preventDefault();var n=t(this).attr("value"),r=t(this).attr("slug");PRESENCE.GAME.responseUserToPlay(r,n)})},g=function(e){t(PRESENCE.WINDOW.getChatBoxButtonForSlug(e,"video")).hide()},y=function(e){t(PRESENCE.WINDOW.getChatBoxButtonForSlug(e,"video")).show()},b=function(){t(".chat-gamesthick").css("display","block")},w=function(e){var t=document.styleSheets;for(var r=0;r<t.length;r++){var i=t[r].cssRules||t[r].rules;if(i!=n)for(var s=0;s<i.length;s++)i[s].selectorText===".chat-gamesthick"&&(e?i[s].style.display="block":i[s].style.display="none")}};return{pickGamesButton:o,updateInterfaceAfterGameRequestReceived:updateInterfaceAfterGameRequestReceived,updateInterfaceBeforeStartGame:r,updateInterfaceAfterFinishGame:i,updateInterfaceOnInformationMessage:s,play:b,enableGameFeature:w}}(PRESENCE,jQuery),PRESENCE.GAME.SFIGTHER=function(e,t,n){function T(e,t){this.player=e,this.move=t,this.type="movement"}function A(){t.playground().registerCallback(function(){var e=t("#cvs"),n=e.data("fighter"),r=e.position().left,i=t("#abobo"),s=i.data("fighter"),o=i.position().left;r+n.animations[n.currentState].width-2>o&&(n.currentState!=v&&n.currentState!=d||s.currentState==g?(s.currentState==v||s.currentState==d)&&n.currentState!=g&&n.currentState!=m&&q(e):s.currentState==v||s.currentState==d?(q(i),q(e)):s.currentState!=m&&q(i)),n.currentState==h?r+n.animations[n.currentState].width+2<o&&e.css("left",r+2):r>50&&n.currentState==p&&e.css("left",r-2),s.currentState==h?r+n.animations[n.currentState].width+2<o&&i.css("left",o-2):o<650&&s.currentState==p&&i.css("left",o+2);var u=i.position().left-s.animations[s.currentState].deltaX,a=e.position().left-n.animations[n.currentState].deltaX,f=(u-a)/2+a;return F(-(f-400)*.5),!1},30)}function D(){t(window).keydown(function(e){if(typeof O[e.which]!="undefined"){if(_==e.which){O[_]=!0;return}M=_,_=e.which,M!=null&&(O[M]=!1),O[_]=!0}}).keyup(function(e){typeof O[e.which]!="undefined"})}function P(e,t){if(e.data("fighter").currentState==y)return y;for(var n in O)if(O[n]){O[n]=!1;var r=e.position().left-t.position().left>0;switch(n){case"37":return r?h:p;case"39":return r?p:h;case"65":return d;case"83":return v;case"90":return m}}return c}function B(){x={id:a,health:100,currentState:c,position:250,adversary:"#abobo",animations:[{animation:new t.gameQuery.Animation({imageURL:E+"/cvs/cvs_idle_59x106x6.png",numberOfFrame:6,delta:59,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:0,width:59,height:106},{animation:new t.gameQuery.Animation({imageURL:E+"/cvs/cvs_walk_forward_58x106x5.png",numberOfFrame:5,delta:58,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:0,width:58,height:106},{animation:new t.gameQuery.Animation({imageURL:E+"/cvs/cvs_walk_backward_58x106x5.png",numberOfFrame:5,delta:58,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:0,width:58,height:106},{animation:new t.gameQuery.Animation({imageURL:E+"/cvs/cvs_punch_120x104x6.png",numberOfFrame:6,delta:120,rate:120,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:2,width:120,height:104},{animation:new t.gameQuery.Animation({imageURL:E+"/cvs/cvs_kick_156x106x9.png",numberOfFrame:9,delta:156,rate:90,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:-20,deltaY:0,width:156,height:106},{animation:new t.gameQuery.Animation({imageURL:E+"/cvs/cvs_block_69x99x2.png",numberOfFrame:2,delta:69,rate:480,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:7,width:69,height:99},{animation:new t.gameQuery.Animation({imageURL:E+"/cvs/cvs_hit_59x103x1.png",rate:720,type:t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:3,width:59,height:103},{animation:new t.gameQuery.Animation({imageURL:E+"/cvs/cvs_die_150x110x1.png",numberOfFrame:1,rate:720,type:t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:3,width:150,height:110}]},t("#fighters").addSprite("cvs",{posx:250,posy:70,height:106,width:58,animation:x.animations[0].animation,geometry:t.gameQuery.GEOMETRY_RECTANGLE,callback:j}),t("#cvs").data("fighter",x),S={id:f,health:100,currentState:c,position:500,adversary:"#cvs",animations:[{animation:new t.gameQuery.Animation({imageURL:E+"/abobo/abobo_idle_100x121x3.png",numberOfFrame:3,delta:100,rate:190,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:49,width:100,height:121},{animation:new t.gameQuery.Animation({imageURL:E+"/abobo/abobo_walk_forward_94x126x6.png",numberOfFrame:6,delta:94,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:44,width:94,height:126},{animation:new t.gameQuery.Animation({imageURL:E+"/abobo/abobo_walk_backward_94x126x6.png",numberOfFrame:6,delta:94,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:44,width:94,height:126},{animation:new t.gameQuery.Animation({imageURL:E+"/abobo/abobo_punch_131x170x4.png",numberOfFrame:4,delta:131,rate:150,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:-30,deltaY:0,width:131,height:170},{animation:new t.gameQuery.Animation({imageURL:E+"/abobo/abobo_kick_137x130x2.png",numberOfFrame:2,delta:137,rate:500,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:20,deltaY:40,width:137,height:130},{animation:new t.gameQuery.Animation({imageURL:E+"/abobo/abobo_block_81x130x1.png",rate:700,type:t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:40,width:81,height:130},{animation:new t.gameQuery.Animation({imageURL:E+"/abobo/abobo_hit_108x120x3.png",numberOfFrame:3,delta:108,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:50,width:108,height:120},{animation:new t.gameQuery.Animation({imageURL:E+"/abobo/abobo_die_156x119x1.png",numberOfFrame:1,delta:0,rate:500,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:50,width:156,height:120}]},t("#fighters").addSprite("abobo",{posx:550,posy:60,height:121,width:100,animation:S.animations[0].animation,geometry:t.gameQuery.GEOMETRY_RECTANGLE,callback:j}),t("#abobo").data("fighter",S)}function j(e){e=t(e),fighter=e.data("fighter"),adversary=t(fighter.adversary),adversaryFighter=adversary.data("fighter");var r=c;if(fighter.id==l){r=P(e,adversary);var i=new T(r);z(i)}else N!=null&&(r=N.move);I(e,fighter.animations,r,fighter.currentState),r==d||r==v?e.css("z-index",20):(fighter.currentState==d||fighter.currentState==v)&&e.css("z-index",n),fighter.currentState=r}function q(e){var t=e.data("fighter");t.health=t.health-45,t.health<0?(I(e,t.animations,y,t.currentState),t.currentState=y,u=!1):(I(e,t.animations,g,t.currentState),t.currentState=g)}var r=e.GAME,i,s="Street Fighter",o=null,u=!0,a="cvs",f="abobo",l=null,c=0,h=1,p=2,d=3,v=4,m=5,g=6,y=7,b=800,w=200,E="/assets/games/sfighter/",S,x,N=null,C=null,k=function(e,n,r){o=e,i=n,C="playground",n.players[0].id==e.id?l=f:l=a,i.options=L(n.options),u=!0,H(),D(),B(),A(),t().setLoadBar("loadingBar",600),t.playground().startGame(function(){t("#welcomMessage").fadeOut(2e3,function(){t(this).remove()})})},L=function(e){return e},O=new Array;O[37]=!1,O[39]=!1,O[65]=!1,O[83]=!1,O[90]=!1;var M=null,_=null,H=function(){var e=document.createElement("div");e.setAttribute("id",C),e.setAttribute("style","width: 800px; height: 200px;"),t("#wrapper_body").prepend(e);var n=document.createElement("div");n.setAttribute("id","welcomMessage"),n.setAttribute("style","position: absolute; top: 0px; width: 800px; height: 200px; color: white; z-index: 1000; background: #333;"),t("#"+C).prepend(n),t("#"+C).playground({height:w,width:b,refreshRate:30,keyTracker:!0});var r=new t.gameQuery.Animation({imageURL:E+"/stage/foreground.png",type:t.gameQuery.ANIMATION_VERTICAL}),i=new t.gameQuery.Animation({imageURL:E+"/stage/ground.png"}),s=new t.gameQuery.Animation({imageURL:E+"/stage/background1.png"}),o=new t.gameQuery.Animation({imageURL:E+"/stage/background2.png"}),u=new t.gameQuery.Animation({imageURL:E+"/stage/background3.png"});t.playground().addSprite("background3",{posx:90,posy:0,height:200,width:534,animation:u}).addSprite("background2",{posx:30,posy:-50,height:180,width:432,animation:o}).addSprite("background1",{posx:50,posy:-150,height:317,width:749,animation:s}).addSprite("ground",{posx:-300,posy:0,height:200,width:1493,animation:i}).addGroup("fighters").end().addSprite("foreground",{posx:-800,posy:165,height:44,width:2e3,animation:r}),t("#sceengraph").css("background-color","#121423")},F=function(e){e>50?e=50:e<-50&&(e=-50),t("#foreground").css("left",""+(-800+e/.5)+"px"),t("#ground").css("left",""+(-300+e)+"px"),t("#fighters").css("left",""+e+"px"),t("#background1").css("left",""+(50+e/2)+"px"),t("#background2").css("left",""+(30+e/4)+"px"),t("#background3").css("left",""+(90+e/5)+"px")},I=function(e,t,n,r){e.setAnimation(t[n].animation).width(t[n].width).height(t[n].height).css("top",e.position().top+t[n].deltaY-t[r].deltaY).css("left",e.position().left+t[n].deltaX-t[r].deltaX)},R=function(e,t,n){return t.players
.length!=2?new r.createValidationResult(!1,"This game needs two players"):new r.createValidationResult(!0,"Ok")},U=function(){var e=new Array;return e},z=function(e){r.sendAction(i,e);return},W=function(e){N=e;return},X=function(e){switch(key){case c:return"movement";case h:return"movement";case p:return"movement";case d:return"trigger";case v:return"trigger";case m:return"movement";case g:return"trigger";case y:return"trigger"}},V=function(){return s},$=function(){return i},J=function(){return o};return{init:k,getName:V,validateParams:R,minimumRequirements:U,onActionReceived:W}}(PRESENCE,jQuery),PRESENCE.GAME.TER=function(e,t,n){function f(e,t){this.player=e,this.square=t,this.type="general"}var r=e.GAME,i,s="Tic Tac Toe",o=null,u=null,a=!0,l=null,c="tresEnRayaContainerDivID",h="tresEnRayaMessageDivID",p=[],d=null,v=null,m=null,g=function(e,t,n){o=e,i=t,l=n,i.options=y(t.options),C(),k(),L(),u=i.players[0],a=!0,o.id==u.id?O("You start!"):O(u.name+" starts!")},y=function(e){return"theme"in e||(e.theme="Modern"),"rounds"in e||(e.rounds="1"),e},b=function(e,t,n){return t.players.length!=2?new r.createValidationResult(!1,"This game needs two players"):new r.createValidationResult(!0,"Ok")},w=function(){var e=new Array;return e},E=function(e){r.sendAction(i,e);return},S=function(e){x(e);return},x=function(e){if(a==0)return;if(!T(e))return O("Ilegal action"),!1;o.id==e.player.id&&E(e),_(e),D(e);var t=P();if(t!=null){H(t),M();return}N()},T=function(e){return u.id!=e.player.id?!1:p[e.square][2]!=0?!1:!0},N=function(){var e=i.players.length,t=i.players.indexOf(u);t==e-1?u=i.players[0]:u=i.players[t+1],o.id==u.id?O("Is your turn!"):O(u.name+" turn")},C=function(){var e=document.createElement("div");e.setAttribute("id",c),e.setAttribute("class","tresEnRayaContainerDivClass"),t("#"+l).append(e);var n=document.createElement("div");n.setAttribute("id",h),t(n).addClass("tresEnRayaMessageDivClass"),t(n).addClass("tresEnRayaMessageTheme"+i.options.theme),t("#"+l).append(n);var r=document.createElement("p");r.setAttribute("id",h+"p"),t(r).addClass("tresEnRayaMessagePTheme"+i.options.theme),t("#"+h).append(r);var s=12,o=t("#"+l).width(),u=t("#"+l).height(),a=300,f=100,p=Math.max(Math.min(o,u,a),f);d=p-s,t("#"+c).height(d),t("#"+c).width(d),t("#"+h).width(d),t("#"+c).addClass("tresEnRayaContainerTheme"+i.options.theme)},k=function(){v=d/3,m=v/2,p[0]=[m,m,0],p[1]=[m+v,m,0],p[2]=[d-m,m,0],p[3]=[m,m+v,0],p[4]=[m+v,m+v,0],p[5]=[d-m,m+v,0],p[6]=[m,d-m,0],p[7]=[m+v,d-m,0],p[8]=[d-m,d-m,0]},L=function(){t("#"+c).click(function(e){var n=e.pageX-t("#"+c).offset().left,r=e.pageY-t("#"+c).offset().top;if(t(e.target).is("img"))return;if(u.id!=o.id)return;square=A(n,r);var i=new f(u,square);x(i)})},A=function(e,t){for(var n=0;n<p.length;n++)if(Math.abs(e-p[n][0])<m&&Math.abs(t-p[n][1])<m)return n;return 0},O=function(e){t("#"+h+"p").html(e)},M=function(){a=!1},_=function(e){if(e.player.id==i.players[0].id)var t=1;else var t=2;p[e.square][2]=t},D=function(e){var n=document.createElement("img");if(e.player.id==i.players[0].id)var r="circle";else var r="aspa";t(n).attr("src","/assets/games/ter/"+i.options.theme.toLowerCase()+"_"+r+".png"),t("#"+c).append(n),t(n).addClass("tresEnRayaImgTheme"+i.options.theme);var s=.8,o=-v*s/2*.7,u=13;t(n).width(v*s),t(n).height(v*s),t(n).css("top",p[e.square][1]+u),t(n).css("left",p[e.square][0]+o);return},P=function(){var e=!0;for(var t=0;t<p.length;t++)if(p[t][2]==0){e=!1;break}return e?"finish":p[0][2]==p[1][2]&&p[1][2]==p[2][2]&&p[2][2]!=0?i.players[p[0][2]-1]:p[3][2]==p[4][2]&&p[4][2]==p[5][2]&&p[5][2]!=0?i.players[p[3][2]-1]:p[6][2]==p[7][2]&&p[7][2]==p[8][2]&&p[8][2]!=0?i.players[p[6][2]-1]:p[0][2]==p[3][2]&&p[3][2]==p[6][2]&&p[6][2]!=0?i.players[p[0][2]-1]:p[1][2]==p[4][2]&&p[4][2]==p[7][2]&&p[7][2]!=0?i.players[p[1][2]-1]:p[2][2]==p[5][2]&&p[5][2]==p[8][2]&&p[8][2]!=0?i.players[p[2][2]-1]:p[0][2]==p[4][2]&&p[4][2]==p[8][2]&&p[8][2]!=0?i.players[p[0][2]-1]:p[6][2]==p[4][2]&&p[4][2]==p[2][2]&&p[2][2]!=0?i.players[p[6][2]-1]:null},H=function(e){e!="finish"?o.id==e.id?O("You have won the game"):O(e.name+" has won the game"):O("Finished game")},B=function(){return s},j=function(){return i},F=function(){return p},I=function(){return o},q=function(){return u};return{init:g,getName:B,validateParams:b,minimumRequirements:w,onActionReceived:S}}(PRESENCE,jQuery),PRESENCE.NOTIFICATIONS=function(e,t,n){var r=function(){},i=function(e){e!=null&&(e.css("display","block"),e.css("visibility","visible"),e.fadeIn())},s=function(e,t,n){e.html('<p notification_type="'+t+'" class="ui-chatbox-notify-text">'+n+"</p>"),i(e)},o=function(e,n,r){var i=t("#"+e).parent().find("div.ui-chatbox-notify");i.length==1&&s(i,n,r)},u=function(e){var t=I18n.t("chat.notify.guestOffline",{name:PRESENCE.XMPPClient.getNameFromSlug(e)});o(e,"guestOffline",t)},a=function(e,t){o(e,"videochat",t)},f=function(e){var t=I18n.t("chat.notify.videochat.clientIssue",{name:PRESENCE.XMPPClient.getNameFromSlug(e)});a(e,t)},l=function(e){var t=I18n.t("chat.notify.videochat.offline",{name:PRESENCE.XMPPClient.getNameFromSlug(e)});a(e,t)},c=function(e){e!=null&&(e.fadeOut(),e.css("display","none"),e.css("visibility","hidden"))},h=function(e){var t=m(e);c(t)},p=function(){var e=t("div.ui-chatbox-notify"),n=I18n.t("chat.notify.offline");s(e,"userOffline",n)},d=function(){var e=t("div.ui-chatbox-notify");c(e)},v=function(){d(),PRESENCE.XMPPClient.getDisconnectionFlag()?p():t.each(PRESENCE.WINDOW.getAllDisconnectedSlugsWithChatBoxes(),function(e,t){PRESENCE.WINDOW.isSlugGroup(t)||u(t)})},m=function(e){var t=PRESENCE.WINDOW.getChatBoxForSlug(e);if(t!=null){var n=t.parent().find("div.ui-chatbox-notify");if(n.length==1)return n}return null},g=function(e){return t(e).find("p").attr("notification_type")},y=function(e,n,r,s){var o=document.createElement("p");t(o).attr("class","ui-chatbox-notify-text"),t(o).attr("notification_type",r),t(o).html(n),s!=null&&t(o).attr("name",s),t(e).append(o),i(e)},b=function(e,n){var r=t(e).find("p.ui-chatbox-notify-text[name="+n+"]");if(r!=null){r.remove();var i=t(e).find("p").length==0;i&&c(e)}},w=function(e){var n=t(e).find("p.ui-chatbox-notify-text");if(n!=null){n.remove();var r=t(e).find("p").length==0;r&&c(e)}},E=function(e,t,n,r){var i=m(e);i!=null&&y(i,t,n,r)},S=function(e,t){var n=m(e);n!=null&&b(n,t)},x=function(e){var t=m(e);t!=null&&w(t)},T=function(e,t){PRESENCE.WINDOW.isSlugGroup(e)&&E(e,t,"roomNotification",t)},N=function(e,t){PRESENCE.WINDOW.isSlugGroup(e)&&S(e,t)},C=function(e,t){x(e),E(e,t,"roomNotification","Initial_Notification")},k=function(e,n){var r=m(e);r!=null&&t(r).find("p.ui-chatbox-notify-text[name=Initial_Notification]").html(n)},L=function(e){if(g(e)=="roomNotification")return;c(e)};return{init:r,showOfflineChatNotificationForSlug:u,hideChatNotificationForSlug:h,updateNotificationsAfterUserDisconnect:p,updateAllNotifications:v,addNickToNotificationInGroup:T,removeNickFromNotificationInGroup:N,initialNotificationInGroup:C,changeInitialNotificationInGroup:k,onClickChatNotification:L}}(PRESENCE,jQuery),PRESENCE.PARSER=function(e,t,n){function d(e,t){if(t)var n="ownChatText";else var n="guestChatText";return'<span class="'+n+'">'+v(e)+"</span>"}function v(e){if(e.match(o)!=null)return e=e.replace(/>/g,"&gt;"),e=e.replace(/</g,"&lt;"),"<pre>"+e+"</pre>";var t=e.split(" ");for(i=0;i<t.length;i++)t[i]=m(t[i]);return t.join(" ")}function m(e){if(e.trim()==""||e.match(u)!=null)return e;var t=e.match(a);if(t!=null){var n=t[0],r=N(n);switch(r){case"link":var i=w(n,n),s=y(e,n);return m(s[0])+i+m(s[1]);case"image":var o=E(n),s=y(e,n);return m(s[0])+o+m(s[1]);case"video-youtube":var p=S(n),s=y(e,n);return m(s[0])+p+m(s[1]);default:return e}}var d=e.match(f);if(d!=null){var n=d[0],r=N(n);switch(r){case"link":var i=w("http://"+n,n),s=y(e,n);return m(s[0])+i+m(s[1]);case"image":var o=E("http://"+n),s=y(e,n);return m(s[0])+o+m(s[1]);case"video-youtube":var p=S("http://"+n),s=y(e,n);return m(s[0])+p+m(s[1]);default:return e}}var v=e.match(l);if(v!=null)for(g=0;g<v.length;g++)e=e.replace(x(v[g]),b(v[g]));var T=e.match(c);if(T!=null)for(h=0;h<T.length;h++)e=e.replace(x(T[h]),b(T[h]));return e}function y(e,t){var n=[],r=e.split(t);n[0]=r[0],r.shift();var i=r.join(t);return n[1]=i,n}function b(e){if(e in r){var t=r[e];return'<img class="chatEmoticon" src="/assets/emoticons/'+t+'"/>'}return e}function w(e,t){return'<a target="_blank" class="chatLink" href="'+e+'">'+t+"</a>"}function E(e){return'<a target="_blank" class="chatImageLink" href="'+e+'">'+'<img class="chatImage" src="'+e+'"/>'+"</a>"}function S(e){var n=e.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0],r="http://gdata.youtube.com/feeds/api/videos/"+n;return t.ajax({type:"GET",url:r,cache:!1,dataType:"jsonp",success:function(r){var i=e,s="",o=t(r).find("media\\:title");o.length>0&&(i=t(o).text());var u=t(r).find("media\\:thumbnail");if(u.length>0){var a=t(u[0]).attr("url");a!=null&&(s='<p><img class="chatVideoImage" src="'+a+'"/></p>')}t("a[youtube_id="+n+"]").html(w(e,i)+s)},error:function(e,t){}}),'<a target="_blank" youtube_id="'+n+'" class="chatLink" href="'+e+'">'+e+"</a>"}function x(e){e=e.replace(")","\\)"),e=e.replace("(","\\(");var t="("+e+")";return t=T(t),new RegExp(t,"g")}function T(e){return e=e.replace("+","\\+"),e=e.replace("?","\\?"),e}function N(e){if(e.match(p)!=null)return"video-youtube";var t=e.split(".");if(t!=null&&t.length>0)var n=t[t.length-1];else var n=null;switch(n){case"jpg":return"image";case"png":return"image";case"gif":return"image";default:return"link"}}function C(e,t){if(t)var n="ownName";else var n="guestName";return'<span class="'+n+'">'+e+"</span>"}var r=new Array;r[":)"]="face-smile.png",r[":("]="face-sad.png",r["(B)"]="beer.png",r["(C)"]="clock.png",r["(P)"]="present.png",r[":P"]="face-raspberry.png",r[":Z"]="face-tired.png",r["(R)"]="rain.png",r["(S)"]="sun.png",r[";)"]="face-wink.png";var s=function(){},o=/.*\<[^>]+>.*/g,u=/^[aA-zZ0-9]+$/g,a=/(http(s)?:\/\/)([aA-zZ0-9%=_&+?])+([./-][aA-zZ0-9%=_&+?]+)*[/]?/g,f=/(www[.])([aA-zZ0-9%=_&+?])+([./-][aA-zZ0-9%=_&+?]+)*[/]?/g,l=/\([A-Z]\)/g,c=/((:|;)([()A-Z]))/g,p=/(http(s)?:\/\/)?(((youtu.be\/)([aA-zZ0-9]+))|((www.youtube.com\/watch\?v=)([aA-z0-9Z&=.])+))/g;return{init:s,getParsedContent:d,getParsedName:C}}(PRESENCE,jQuery),PRESENCE.PERSISTENCE=function(e,t,n){var r=function(){},i=function(){if(!window.sessionStorage)return;s(),u(),o()},s=function(){var e=PRESENCE.WINDOW.getMainChatBox();e!=null?sessionStorage.setItem("chat_mainChatBox_status",t(e).is(":visible")):sessionStorage.setItem("chat_mainChatBox_status",null)},o=function(){var e=PRESENCE.WINDOW.getAllChatBoxes(),n=PRESENCE.WINDOW.getVisibleChatBoxes(),r=[],i=[],s=[],o=[];for(var u=0;u<e.length;u++){var a=e[u].id;if(PRESENCE.WINDOW.isSlugGroup(a))n.indexOf(PRESENCE.WINDOW.getChatBoxForSlug(a))!=-1&&i.push(a);else{var f=t(e[u]).html();sessionStorage.setItem("chat_log_"+a,f),r.push(a)}}r.length>0?sessionStorage.setItem("slugs_with_stored_log",r.join(",")):sessionStorage.setItem("slugs_with_stored_log",null),i.length>0?sessionStorage.setItem("open_group_slugs",i.join(",")):sessionStorage.setItem("open_group_slugs",null);for(var l=0;l<n.length;l++)n[l].is(":visible")?s.push(t(n[l]).attr("id")):o.push(t(n[l]).attr("id"));s.length>0?sessionStorage.setItem("slugs_with_visible_max_chatbox",s.join(",")):sessionStorage.setItem("slugs_with_visible_max_chatbox",null),o.length>0?sessionStorage.setItem("slugs_with_visible_min_chatbox",o.join(",")):sessionStorage.setItem("slugs_with_visible_min_chatbox",null)},u=function(){sessionStorage.setItem("chat_user_status",PRESENCE.XMPPClient.getUserStatus())},a=function(){sessionStorage.removeItem("chat_user_status"),sessionStorage.removeItem("chat_mainChatBox_status"),sessionStorage.removeItem("slugs_with_stored_log"),sessionStorage.removeItem("slugs_with_visible_max_chatbox"),sessionStorage.removeItem("slugs_with_visible_min_chatbox"),sessionStorage.removeItem("open_group_slugs")},f=function(){if(!window.sessionStorage)return"available";var e=sessionStorage.getItem("chat_user_status");return e!=null&&(e in PRESENCE.XMPPClient.getSStreamChatStatus()||e=="offline")?e:"available"},l=function(){if(!window.sessionStorage)return;h()},c=function(){return window.sessionStorage?sessionStorage.getItem("chat_mainChatBox_status")=="true"?!0:!1:!1},h=function(){var e=sessionStorage.getItem("slugs_with_visible_max_chatbox"),t=sessionStorage.getItem("slugs_with_visible_min_chatbox");if(e!=null)var n=e.split(",");else var n=[];if(t!=null)var r=t.split(",");else var r=[];d(n,r),p(n,r)},p=function(e,t){var n=sessionStorage.getItem("open_group_slugs");if(n!=null&&n!="null"){var r=n.split(",");for(var i=0;i<r.length;i++){var s=r[i],o=PRESENCE.XMPPClient.getNameFromSlug(s),u=t.indexOf(s)==-1;PRESENCE.XMPPClient.accessRoom(s,u)}}},d=function(e,t){var n=sessionStorage.getItem("slugs_with_stored_log");if(n!=null){var r=n.split(",");for(var i=0;i<r.length;i++){var s=sessionStorage.getItem("chat_log_"+r[i]);if(s!=null){var o=r[i],u=PRESENCE.XMPPClient.getNameFromSlug(o),a=PRESENCE.XMPPClient.getJidFromSlug(o);PRESENCE.WINDOW.createBuddyChatBox(o),t.indexOf(o)!=-1&&PRESENCE.WINDOW.getChatBoxForSlug(o).parent().toggle(!1),e.indexOf(o)==-1&&t.indexOf(o)==-1&&PRESENCE.WINDOW.closeChatBox(o),PRESENCE.WINDOW.getChatBoxForSlug(o).html(s),PRESENCE.UIMANAGER.isSlugChatConnected(o)||PRESENCE.NOTIFICATIONS.showOfflineChatNotificationForSlug(o)}}}};return{init:r,storeChatData:i,restoreChatData:l,getRestoreUserChatStatus:f,getRestoreMainChatBoxStatus:c}}(PRESENCE,jQuery),PRESENCE.STORE=function(e,t,n){var r=function(){},i=function(){if(PRESENCE.XMPPClient.authByCookie())return;window.sessionStorage&&(t("#user_password").length==1&&t("#user_password").val()!=""?sessionStorage.setItem("ss_user_pass",t("#user_password").val()):t("#password").length==1&&t("#password").val()!=""&&sessionStorage.setItem("ss_user_pass",t("#password").val()))};return{init:r,storePassword:i}}(PRESENCE,jQuery),PRESENCE.UIMANAGER=function(e,t,n){var r=new Array;r[""]="available",r.chat="available",r.away="away",r.xa="away",r.dnd="dnd";var i=function(){t(window).unload(function(){PRESENCE.PERSISTENCE.storeChatData(),PRESENCE.XMPPClient.disconnect()})},s,o=15,u=o+1,a=function(){u++,u>o-1&&(clearTimeout(s),PRESENCE.XMPPClient.isUserConnected()||l(I18n.t("chat.disconnected")))},f=function(){return u>o-1?(u=0,s=setInterval("PRESENCE.UIMANAGER.connectButtonTimerFunction()",1e3),l(I18n.t("chat.connecting")),!0):!1},l=function(e){PRESENCE.WINDOW.getMainChatBox()==null?t("#chat_header_title").html(e):PRESENCE.WINDOW.changeMainChatBoxHeaderTitle(e)},c=!1,h=!1,p=function(){t(".dropdown dt a").click(function(e){e.preventDefault(),t(".dropdown dd ul").toggle(),t(".dropdown dd ul").is(":visible")?w("default"):w(PRESENCE.XMPPClient.getUserStatus()),PRESENCE.XMPPClient.restartAwayTimer()}),t(".dropdown dd ul li a.option").click(function(e){e.preventDefault(),PRESENCE.XMPPClient.setUserStatus(t(this).find("span.value").html()),PRESENCE.XMPPClient.getUserStatus()=="offline"?PRESENCE.XMPPClient.disconnect():PRESENCE.XMPPClient.sendStatus(),t(".dropdown dd ul").hide()}),t(document).bind("click",function(e){var n=t(e.target);n.parents().hasClass("dropdown")||(t(".dropdown dd ul").hide(),w(PRESENCE.XMPPClient.getUserStatus()))})},d=function(){t("div.user_presence").click(function(e,n){var r=t(this).attr("slug");PRESENCE.WINDOW.createBuddyChatBox(r)}),t("div.user_presence").mouseleave(function(e){var n=t(this);t.each(t(".tooltip:visible"),function(e,r){t(t(".tooltip:visible")[0]).html()==t(n).attr("name")&&t(t(".tooltip:visible")[e]).hide()})})},v=function(){if(PRESENCE.WINDOW.getMainChatBox()==null)t(".user_presence a[title]").tooltip();else{var e=document.styleSheets;for(var n=0;n<e.length;n++){var r=e[n].cssRules||e[n].rules;for(var i=0;i<r.length;i++)r[i].selectorText===".tooltip"&&(r[i].style.background='url("black_arrow9.png") repeat scroll 0% 0% transparent')}t(".user_presence a[title]").tooltip({opacity:.95,relative:!1,position:"top left",offset:[0,31]})}},m=function(){t("#chat_partial select.flexselect").flexselect({allowMismatch:!0,defaultmessage:I18n.t("chat.zerocontacts")}),t("#chat_partial #search_chat_contact_flexselect").watermark(I18n.t("chat.search"),"#666"),t("#chat_partial #search_chat_contact_flexselect").focus(function(e){b(!0)}),t("#chat_partial #search_chat_contact_flexselect").blur(function(e){b(!1)})},g=function(){p(),d(),v()},y=function(e,n){if(n!="ZERO_CONTACTS"&&n!=""){var r=n;PRESENCE.WINDOW.createBuddyChatBox(r),P(r)||PRESENCE.NOTIFICATIONS.showOfflineChatNotificationForSlug(r)}t("#chat_partial #search_chat_contact_flexselect").blur(),b(!1)},b=function(e){var n=j();if(e){c=!0;if(n>9){var r=PRESENCE.WINDOW.getMainchatBoxParams()[1];PRESENCE.WINDOW.changeMainChatBoxHeight(r)}else{var i=PRESENCE.WINDOW.getMainchatBoxParams()[0],s=i+20+n*19;PRESENCE.WINDOW.changeMainChatBoxHeight(s)}t(".users_connected").hide()}else PRESENCE.WINDOW.changeMainChatBoxHeight(PRESENCE.WINDOW.getChatBoxHeightRequiredForConnectionBoxes()),t(".users_connected").show()},w=function(e){e in PRESENCE.XMPPClient.getSStreamChatStatus()&&(e=PRESENCE.XMPPClient.getSStreamChatStatus()[e]);if(t(".dropdown dt a span").length==0)return;if(e=="default"){var n=I18n.t("chat.status.choose");t(".dropdown dt a span").html(n);return}if(e=="offline"){var i=t("#"+e).html();t(".dropdown dt a span").html(i);return}if(e in r&&t("#"+r[e]).length>0){var i=t("#"+r[e]).html();t(".dropdown dt a span").html(i)}},E=function(){timerCounter=0,PRESENCE.UTILITIES.log("updateChatWindow()"),PRESENCE.UTILITIES.log("Connected "+PRESENCE.XMPPClient.isUserConnected());if(!PRESENCE.XMPPClient.isUserConnected()){x(),V();return}t.post("/chatWindow",{},function(e){t(".tooltip").hide(),T(e),k(),g(),V(),M(),PRESENCE.XMPPClient.isStropheConnected()&&PRESENCE.XMPPClient.isNewConnection()&&(PRESENCE.XMPPClient.setNewConnection(!1),PRESENCE.XMPPClient.isFirstConnection()?(PRESENCE.PERSISTENCE.restoreChatData(),typeof current_group_slug!="undefined"&&PRESENCE.XMPPClient.accessRoom(current_group_slug,!1),PRESENCE.XMPPClient.setFirstConnection(!1)):(PRESENCE.NOTIFICATIONS.updateAllNotifications(),t.each(PRESENCE.WINDOW.getAllSlugsWithVisibleGroupBoxes(),function(e,n){PRESENCE.XMPPClient.accessRoom(n,t(n).is(":visible"))})))},"html")},S=function(){t("#chat_partial").html(t("#chat_connecting").html())},x=function(){t("#chat_partial").html(PRESENCE.WINDOW.modifyChatPartialIfMainBox(t("#chat_connection_off").html())),t(".connectChatButton").bind("click",function(){f()&&(PRESENCE.XMPPClient.authByCookie()?PRESENCE.XMPPClient.connectToChat(user_jid,cookie):PRESENCE.XMPPClient.connectToChat(user_jid,t("#user_password").val()))}),PRESENCE.XMPPClient.authByCookie()?t("#chat_partial #passwordFormChat").hide():(t(".storePass").bind("click",function(){PRESENCE.STORE.storePassword()}),window.sessionStorage&&sessionStorage.getItem("ss_user_pass")!=null?t("#chat_partial #passwordFormChat").hide():t("#chat_partial #passwordFormChat").show())},T=function(e){t("#chat_partial").html(PRESENCE.WINDOW.modifyChatPartialIfMainBox(t("#chat_widgets").html())),t("#chat_partial").append(e),N(),m()},N=function(){t("#chat_partial #search_chat_contact").children().remove(),t("#chat_partial #search_chat_contact").append('<option value=""></option>'),t.each(I(),function(e,n){t("#chat_partial #search_chat_contact").append("<option value="+n+">"+PRESENCE.XMPPClient.getNameFromSlug(n)+"</option>")})},C=function(){PRESENCE.NOTIFICATIONS.updateNotificationsAfterUserDisconnect(),t.each(PRESENCE.WINDOW.getAllSlugsWithVisibleVideoBoxes(),function(e,t){PRESENCE.VIDEOCHAT.closeVideoSession(t)})},k=function(){t('div.user_presence[slug][connected="false"]').hide()},L=function(e){t("div.user_presence[slug="+e+"]").attr("connected","false"),t("div.user_presence[slug="+e+"]").hide()},A=function(e){t("div.user_presence[slug="+e+"]").attr("connected","true"),t("div.user_presence[slug="+e+"]").show()},O=function(e,t){t?(A(e),PRESENCE.NOTIFICATIONS.hideChatNotificationForSlug(e)):(L(e),PRESENCE.NOTIFICATIONS.showOfflineChatNotificationForSlug(e),PRESENCE.VIDEOCHAT.closeVideoSession(e)),$(),M()},M=function(){if(B()==0)if(t(".users_connected p.zero_users_connected").length>0)t(".users_connected p.zero_users_connected").show();else{var e=I18n.t("chat.zerousers");t(".users_connected").append('<p class="zero_users_connected">'+e+"</p>")}else t(".users_connected p.zero_users_connected").hide()},_=function(e,n){if(n in r){var i=r[n],s=t("img.presence_status"),o="/assets/status",u=D(e);t(u).find(s).attr("src",o+"/"+i+".png")}},D=function(e){return t("div.user_presence[slug="+e+"]").length>0?t("div.user_presence[slug="+e+"]")[0]:null},P=function(e){return t("div.user_presence[slug="+e+"]").attr("connected")=="true"},H=function(e){return PRESENCE.WINDOW.getChatBoxForSlug(e)!=null},B=function(){return t('div.user_presence[slug][connected="true"]').length},j=function(){return t("div.user_presence[slug]").length},F=function(){return t('div.user_presence[slug][connected="false"]').length},I=function(){return U()[2]},q=function(){return U()[0]},R=function(){return U()[1]},U=function(){var e=[],n=[],r=[],i=t("div.user_presence[slug]");return t.each(i,function(i,s){t(s).attr("connected")=="true"?e.push(t(s).attr("slug")):n.push(t(s).attr("slug")),r.push(t(s).attr("slug"))}),[e,n,r]},z=function(e,t,n){if(PRESENCE.UTILITIES.antifloodControl(e,t,n))return;var r=PRESENCE.XMPPClient.getNameFromSlug(e);PRESENCE.WINDOW.createBuddyChatBox(e),X(r,e,t)},W=function(e,t){var n=PRESENCE.XMPPClient.getSlugFromJid(e),r=PRESENCE.XMPPClient.getNickFromChatRoomJid(e);H(n)||PRESENCE.WINDOW.createGroupChatBox(n,!0),X(r,n,t)},X=function(e,t,n){var r=PRESENCE.PARSER.getParsedContent(n,!1),i=PRESENCE.PARSER.getParsedName(e,!1);PRESENCE.WINDOW.getChatBoxForSlug(t).chatbox("option","boxManager").addMsg(i,r),PRESENCE.WINDOW.rotatePriority(t),PRESENCE.UTILITIES.blinkTitleOnMessage(e),PRESENCE.AUDIO.mustPlaySoundForChatWindow(PRESENCE.WINDOW.getChatBoxForSlug(t))&&PRESENCE.AUDIO.playSound("onMessageAudio")},V=function(){if(PRESENCE.WINDOW.getMainChatBox()!=null)if(PRESENCE.XMPPClient.isUserConnected()){var e=B();PRESENCE.WINDOW.changeMainChatBoxHeaderTitle(I18n.t("chat.title")+" ("+e+")"),PRESENCE.WINDOW.changeMainChatBoxHeight(PRESENCE.WINDOW.getChatBoxHeightRequiredForConnectionBoxes())}else PRESENCE.XMPPClient.isFirstConnection()?l(I18n.t("chat.connecting")):l(I18n.t("chat.disconnected"))},$=function(){PRESENCE.WINDOW.changeMainChatBoxHeight(PRESENCE.WINDOW.getChatBoxHeightRequiredForConnectionBoxes()),V()};return{init:i,changeChatHeaderTitle:l,changeSelectContactValue:y,setStatusWidgetTitle:w,updateChatWindow:E,updateInterfaceAfterUserDisconnect:C,updateInterfaceAfterPresenceStanza:O,setUserIconStatus:_,connectButtonTimerFunction:a,getConnectionBoxFromSlug:D,isSlugChatConnected:P,existsSlugChatBox:H,getAllConnectedSlugs:q,afterReceivedChatMessage:z,afterReceivedGroupChatMessage:W,writeReceivedMessageOnChatWindow:X,updateConnectedUsersOfMainChatBox:V}}(PRESENCE,jQuery),PRESENCE.UTILITIES=function(e,t,n){var r=function(){f()},i=!1,s=function(e){i&&console.log(e)},o,u=function(){o=!1},a=function(){d(),h=[],o=!0},f=function(){window.onfocus=PRESENCE.UTILITIES.onChatFocus,window.onblur=PRESENCE.UTILITIES.onChatBlur},l=function(){return o},c,h=[],p=function(e,n){t(document).attr("title",e[n]),n=(n+1)%e.length,c=setTimeout(function(){PRESENCE.UTILITIES.blinkTitle(e,n)},2e3)},d=function(){clearTimeout(c),h.length>0&&t(document).attr("title",h[0])},v=function(e){o||(h.length==0&&h.push(t(document).attr("title")),h.indexOf(e)==-1&&h.push(e+" says..."),d(),p(h,h.length-1))},m=function(){var e=N(),t=A();return e&&t},g=new Array,y=500,b=function(e,t,n){e in g||(g[e]=[,[]]),n==null&&(n=E());var r=g[e][0],i=(new Date).getTime();if(i-r<y)return S(e,t,n);if(g[e][1].length>0){if(g[e][1][0]!=n)return S(e,t,n);g[e][1].splice(0,1)}return g[e][0]=i,!1},w=1,E=function(){return++w},S=function(e,t,n){return g[e][1].indexOf(n)==-1&&g[e][1].push(n),setTimeout(function(){PRESENCE.UIMANAGER.afterReceivedChatMessage(e,t,n)},y),!0},x=500,T=null,N=function(){var e=(new Date).getTime();return T==null?(T=e,!0):e-T<x?!1:(T=e,!0)},C=new Array,k=5e3,L=function(e){var t=e.elem.uiChatbox.find(".ui-chatbox-content").find(".ui-chatbox-log").attr("id");if(typeof t=="undefined")return!1;if(t in contactsInfo&&contactsInfo[t].videoChatStatus!="disconnected")return!1;var n=(new Date).getTime();if(t in C){var r=C[t];return n-r<k?!1:(C[t]=n,!0)}return C[t]=n,!0},A=function(){return!PRESENCE.XMPPClient.getDisconnectionFlag()&&PRESENCE.XMPPClient.isStropheConnected()},O=function(e){return e=="<%=SocialStream::Presence.social_stream_presence_username%>"};return{init:r,log:s,onChatFocus:a,onChatBlur:u,blinkTitleOnMessage:v,blinkTitle:p,userChatDataInputControl:m,antifloodControl:b,mustBounceBoxForChatWindow:L,isAdminSlug:O,getChatFocus:l}}(PRESENCE,jQuery),PRESENCE.VIDEOCHAT=function(e,t,n){var r=function(){T()},i="default",s=new Array,o=function(e){var t=PRESENCE.WINDOW.toggleVideoBoxForSlug(e);t?f(e):u(e)},u=function(e){t(PRESENCE.WINDOW.getChatBoxButtonForSlug(e,"games")).show(),m(e);return},a=1,f=function(e){t(PRESENCE.WINDOW.getChatBoxButtonForSlug(e,"games")).hide();if(e in contactsInfo)var n=contactsInfo[e].videoChatStatus;else var n=null;if(TB.checkSystemRequirements()!=TB.HAS_REQUIREMENTS){y(e,I18n.t("chat.videochat.requirements")),n!=null&&(contactsInfo[e].videoChatStatus="disconnected");return}if(!PRESENCE.XMPPClient.isUserConnected()){y(e,I18n.t("chat.videochat.offline")),n!=null&&(contactsInfo[e].videoChatStatus="disconnected");return}if(!PRESENCE.UIMANAGER.isSlugChatConnected(e)){y(e,I18n.t("chat.videochat.guestOffline",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})),n!=null&&(contactsInfo[e].videoChatStatus="disconnected");return}if(n==null){a>0?(a--,y(e,I18n.t("chat.videochat.connectingWait")),setTimeout(function(){f(e)},5e3)):y(e,I18n.t("chat.videochat.unable"));return}a=1;if(n!="disconnected")return;l(e)},l=function(e){y(e,I18n.t("chat.videochat.negotiating")),contactsInfo[e].videoChatStatus="negotiating";if(contactsInfo[e].version!=null){c(e);return}PRESENCE.XMPPClient.sendIQStanzaForRequestClientInfo(e)},c=function(e){contactsInfo[e].version==PRESENCE.XMPPClient.getJavascriptXMPPClientName()?(contactsInfo[e].videoChatStatus="connecting",y(e,I18n.t("chat.videochat.connecting")),h(e)):(y(e,I18n.t("chat.videochat.clientIssue",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})),contactsInfo[e].videoChatStatus="disconnected")},h=function(e){t.post("/requestVideoChat.xml",{},function(n){var r=t(n).find("session");if(r.length==1&&t(r).find("id").length==1&&t(r).find("user_token").length==1&&t(r).find("guest_token").length==1){contactsInfo[e].session_id=t(r).find("id").text(),contactsInfo[e].user_token=t(r).find("user_token").text(),contactsInfo[e].guest_token=t(r).find("guest_token").text(),p(e);return}y(e,I18n.t("chat.videochat.serverIssue")),contactsInfo[e].videoChatStatus="disconnected"})},p=function(e){contactsInfo[e].videoChatStatus="waiting",y(e,I18n.t("chat.videochat.waiting")),PRESENCE.XMPPClient.sendIQStanzaToRequestVideochat(e)},d=function(e,t){if(contactsInfo[e].videoChatStatus!="waiting")return;t=="yes"?(y(e,I18n.t("chat.videochat.establishing")),contactsInfo[e].videoChatStatus="establishing",O(e)):t=="no"?(y(e,I18n.t("chat.videochat.rejected",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})),contactsInfo[e].videoChatStatus="disconnected"):(y(e,I18n.t("chat.videochat.rejectedBusy",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})),contactsInfo[e].videoChatStatus="disconnected")},v=function(e){e in contactsInfo?contactsInfo[e].videoChatStatus=="pending"&&(y(e,I18n.t("chat.videochat.cancel",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})),contactsInfo[e].videoChatStatus="disconnected"):m(e)},m=function(e){if(e in contactsInfo){var t=contactsInfo[e].videoChatStatus;t=="connected"?(y(e,I18n.t("chat.videochat.disconnecting")),contactsInfo[e].session.connected&&contactsInfo[e].session.disconnect(),x(e)):t=="waiting"?PRESENCE.XMPPClient.sendIQStanzaToCancelVideochat(e):t=="pending"&&PRESENCE.XMPPClient.sendIQStanzaToResponseVideochat(e,"no"),contactsInfo[e].videoChatStatus="disconnected"}PRESENCE.WINDOW.toggleVideoBoxForSlug(e,!1)},g=function(e){e in contactsInfo&&(contactsInfo[e].videoChatStatus="negotiating")&&c(e)},y=function(e,t){PRESENCE.WINDOW.setVideoBoxContent(e,'<p class="video-info"> '+t+" </p>")},b=function(e){if(contactsInfo[e].videoChatStatus!="disconnected"){PRESENCE.XMPPClient.sendIQStanzaToResponseVideochat(e,"busy");return}contactsInfo[e].videoChatStatus="pending",PRESENCE.WINDOW.createBuddyChatBox(e);var t=PRESENCE.WINDOW.getChatBoxForSlug(e);w(e),PRESENCE.WINDOW.toggleVideoBoxForSlug(e,!0)},w=function(e){var t='<p class="video-info">'+I18n.t("chat.videochat.call",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})+" </p>",n=t+'<p class="video-request"> <a class="videoChatButton" slug="'+e+'" value="yes">'+I18n.t("chat.videochat.accept")+"</a> -"+' <a class="videoChatButton" slug="'+e+'" value="no">'+I18n.t("chat.videochat.deny")+"</a> </p>";PRESENCE.WINDOW.setVideoBoxContent(e,n),E()},E=function(){t(".videoChatButton").click(function(e){e.preventDefault();var n=t(this).attr("value"),r=t(this).attr("slug");PRESENCE.XMPPClient.sendIQStanzaToResponseVideochat(r,n),n=="yes"?(y(r,I18n.t("chat.videochat.establishing")),contactsInfo[r].videoChatStatus="establishing",O(r)):(contactsInfo[r].videoChatStatus="disconnected",m(r))})},S=function(e){var n=PRESENCE.WINDOW.getPublisherVideoBoxForSlug(e),r=PRESENCE.WINDOW.getChatBoxForSlug(e),i=PRESENCE.WINDOW.getVideoBoxForSlug(e);if(r==null||i==null||n==null)return;var s=n.css("z-index")!="-1",o=k+1,u=t(r)[0].scrollHeight,a=r.outerHeight(),f=u-r.scrollTop()-a,l=145;s?(n.css("z-index","-1"),r.css("height",r.height()+o),i.css("height",i.height()-o),f<o?r.scrollTop(r.scrollTop()-f):r.scrollTop(r.scrollTop()-l)):(n.css("z-index","100"),r.css("height",r.height()-o),i.css("height",i.height()+o),r.scrollTop(r.scrollTop()+l))},x=function(e){y(e,I18n.t("chat.videochat.disconnected")),t(PRESENCE.WINDOW.getChatBoxButtonForSlug(e,"videoChange")).find("span").hide(),PRESENCE.WINDOW.toggleVideoBoxForSlug(e,!1);var n=PRESENCE.WINDOW.getChatBoxForSlug(e);n.height(PRESENCE.WINDOW.getChatBoxHeight())},T=function(){if(i=="default"){var e=document.styleSheets;for(var t=0;t<e.length;t++){var r=e[t].cssRules||e[t].rules;if(r!=n)for(var s=0;s<r.length;s++)r[s].selectorText===".chat-videothick"&&(r[s].style.display="none")}}},N=function(e){S(e)},C=235,k=145,L=235,A=145,O=function(e){TB.checkSystemRequirements()!=TB.HAS_REQUIREMENTS?(y(e,I18n.t("chat.videochat.requirements")),contactsInfo[e].videoChatStatus="disconnected"):(contactsInfo[e].session=TB.initSession(contactsInfo[e].session_id),contactsInfo[e].session.addEventListener("sessionConnected",PRESENCE.VIDEOCHAT.sessionConnectedHandler),contactsInfo[e].session.addEventListener("sessionDisconnected",PRESENCE.VIDEOCHAT.sessionDisconnectedHandler),contactsInfo[e].session.addEventListener("streamCreated",PRESENCE.VIDEOCHAT.streamCreatedHandler),contactsInfo[e].session.addEventListener("streamDestroyed",PRESENCE.VIDEOCHAT.streamDestroyedHandler),contactsInfo[e].session.connect(i,contactsInfo[e].user_token),s[contactsInfo[e].session_id]=e)},M=function(e){if(e.target.sessionId in s){var n=s[e.target.sessionId];contactsInfo[n].videoChatStatus="connected",t(PRESENCE.WINDOW.getChatBoxButtonForSlug(n,"videoChange")).find("span").show();var r=document.createElement("div"),i="stream_publish_videochat_"+n;r.setAttribute("id",i),r.setAttribute("class","stream_publish_videochat");var o=document.createElement("div");o.id="opentok_publisher&"+n,r.appendChild(o),PRESENCE.WINDOW.setVideoBoxContent(n,r);var u={width:C,height:k};contactsInfo[n].publisher=contactsInfo[n].session.publish(o.id,u),contactsInfo[n].publisher.addEventListener("accessAllowed",B),H(e.streams,n),S(n)}},_=function(e){var t=s[e.target.sessionId];contactsInfo[t].publisher=null,contactsInfo[t].videoChatStatus="disconnected"},D=function(e){var t=s[e.target.sessionId];H(e.streams,t)},P=function(e){var t=s[e.target.sessionId];m(t)},H=function(e,t){var n=contactsInfo[t].session;for(var r=0;r<e.length;r++){if(e[r].connection.connectionId==n.connection.connectionId)return;var i=document.createElement("div");i.setAttribute("class","stream_videochat");var s=document.createElement("div");s.id="stream"+e[r].streamId,i.appendChild(s),PRESENCE.WINDOW.addVideoBoxContent(t,i);var o={width:L,height:A};n.subscribe(e[r],s.id,o)}},B=function(e){var t=e.target.replacedDivId.split("&")[1];S(t)};return{init:r,clickVideoChatButton:o,clientInfoReceivedTrigger:g,closeVideoSession:m,updateInterfaceAfterVideoRequestReceived:b,receiveVideoChatResponseFromUser:d,receiveVideoChatCancelationFromUser:v,clickVideoChangeChatButton
:N,sessionConnectedHandler:M,sessionDisconnectedHandler:_,streamCreatedHandler:D,streamDestroyedHandler:P}}(PRESENCE,jQuery),PRESENCE.WINDOW=function(e,t,n){var r=function(){},s=0,o=5,u=230,a=180,f=145,l=new Array,c=0,h=u+12,d=function(e,n){var r=PRESENCE.XMPPClient.getNameFromSlug(e);if(n)var i=I18n.t("chat.muc.group",{group:r});else var i=r;if(typeof window[K(e)]=="undefined"){t("#chat_divs").append("<div id="+e+" name="+r+" class=chatbox ></div>"),boxParams=v();var s=boxParams[0],o=boxParams[1];return window[K(e)]=t("#"+e).chatbox({id:user_name,user:{key:"value"},hidden:!1,offset:s,width:u,height:a,video:0,title:i,position:o,priority:l.length+1,groupBox:n,boxClosed:function(t){PRESENCE.WINDOW.closeChatBox(e)},messageSent:function(t,n,r){PRESENCE.XMPPClient.sendChatMessage(e,r)}}),l[o-1]=window[K(e)],!0}if(l.indexOf(window[K(e)])==-1){boxParams=v();var s=boxParams[0],o=boxParams[1];window[K(e)].chatbox("option","offset",s),window[K(e)].chatbox("option","position",o),l[o-1]=window[K(e)]}return window[K(e)].chatbox("option","hidden",!1),window[K(e)].parent().toggle(!0),!1},v=function(){var e=new Array(2);return s==o?(replaced=l[F()],replaced.chatbox("option","hidden",!0),index=l.indexOf(replaced),e[0]=replaced.chatbox("option","offset"),e[1]=replaced.chatbox("option","position")):(s++,e[0]=(s-1)*h,s!=1&&b!=null&&(e[0]=e[0]-c),e[1]=s),e},m=function(e){var n=Z(e).chatbox("option","position");for(i=n+1;i<l.length+1;i++)l[i-1].chatbox("option","offset",l[i-1].chatbox("option","offset")-h),l[i-1].chatbox("option","position",l[i-1].chatbox("option","position")-1);l.splice(n-1,1),t("#"+e).chatbox("option","hidden",!0),s--,ut(e)&&PRESENCE.XMPPClient.leaveRoom(e)},g=function(e){return d(e,!1)},y=function(e,n){if(d(e,!0)){var r=Z(e);return t(nt(e,"games")).remove(),t(nt(e,"video")).remove(),t(r.parent()).find(".ui-videobox").remove(),r.parent().toggle(n),PRESENCE.NOTIFICATIONS.initialNotificationInGroup(e,I18n.t("chat.muc.joining")),!0}return!1},b,w=5,E=11,S=150,x=50,T=30,N=260,C=136,k=x+T*E,L="SocialStream_MainChat",A=[x,N],O=function(){b==null&&(d(L,!1),b=window[K(L)],t(b.parent().parent()).find(".ui-chatbox-titlebar").find(".ui-icon-closethick").remove(),t(b.parent().parent()).find(".ui-videobox-icon").remove(),t(b.parent().parent()).find(".chat-gamesthick").remove(),b.parent().parent().find(".ui-chatbox-titlebar").find(".chat-minusthick").parent().css("margin-right","5px"),t(b.parent()).find(".ui-chatbox-notify").remove(),t(b.parent()).find(".ui-videobox").remove(),t(b.parent()).find(".ui-chatbox-input").remove(),t(b).css("background-color",t(b.parent().parent()).find(".ui-chatbox-titlebar").css("background-color")),B(j()),window[K(L)].parent().parent().css("width",S),t(b.parent().parent()).find(".ui-chatbox-titlebar").css("width",S-6),t(b).css("width",S-6),c=235-S,t("#chat_partial").css("margin-top",-3),t("#chat_partial").css("margin-left",-3),t(".dropdown dd ul").css("min-width",147),t(b).css("overflow-x","hidden"),t(b).css("overflow-y","hidden"),b.parent().toggle(PRESENCE.PERSISTENCE.getRestoreMainChatBoxStatus()),PRESENCE.UIMANAGER.updateConnectedUsersOfMainChatBox())},M=function(){return b},_=function(){return A},D=function(e){b!=null&&t(b.parent()).find("#"+L).html(e)},P=function(e){return b!=null?(p=t(e),t(p).find(".header").remove(),t(p).find(".dropdown dd ul").css("min-width",147),t(p)):e},H=function(e){b!=null&&t(t(b.parent().parent()).find(".ui-chatbox-titlebar").find("span")[0]).html(e)},B=function(e){if(b!=null){if(t("#chat_partial #search_chat_contact_flexselect").is(":focus")&&!focusSearchContactsFlag)return;focusSearchContactsFlag=!1,e>k?(e=k,t(b).css("overflow-y","visible"),b.chatbox("option","offset","5px"),b.chatbox("option","width",S+5)):(t(b).css("overflow-y","hidden"),b.chatbox("option","offset","0px"),b.chatbox("option","width",S),e=Math.max(e,C)),window[K(L)].css("height",e)}},j=function(){if(b!=null){var e=x+Math.ceil(PRESENCE.UIMANAGER.getAllConnectedSlugs().length/w)*T;return e}return null},F=function(){tmp=l[0];for(i=0;i<l.length;i++)l[i].chatbox("option","priority")>tmp.chatbox("option","priority")&&(tmp=l[i]);return l.indexOf(tmp)},I=function(e){priority=t("#"+e).chatbox("option","priority");if(priority>1){for(i=0;i<l.length;i++)l[i].chatbox("option","priority")<priority&&l[i].chatbox("option","priority",l[i].chatbox("option","priority")+1);t("#"+e).chatbox("option","priority",1)}},q=function(e){var n=t("#"+e).parent().find("div.ui-videobox");return n.length==1?n:null},R=function(e){var n=t("#stream_publish_videochat_"+e);return n.length>0?n:null},U=function(e,t){var n=q(e);n!=null&&n.html(t)},z=function(e,t){var n=q(e);n!=null&&n.append(t)},W=function(e){e.chatbox("option","video",f)},X=function(e){e.chatbox("option","video",0)},V=function(e){var n=t(e.element).attr("id");PRESENCE.VIDEOCHAT.clickVideoChatButton(n)},$=function(e){var n=t(e.element).attr("id");PRESENCE.VIDEOCHAT.clickVideoChangeChatButton(n)},J=function(e,t){var n,r=Z(e);return r==null?null:(typeof t!="undefined"?n=t:r.chatbox("option","video")==0?n=!0:n=!1,n?(W(r),!0):(X(r),!1))},K=function(e){return"Slug_"+e},Q=function(e){return e.split("_")[1]},G=function(){var e=new Array;for(i=0;i<l.length;i++)l[i][0].id!=L&&e.push(l[i]);return e},Y=function(){return t(".chatbox").not(document.getElementById(L))},Z=function(e){return typeof window[K(e)]=="undefined"?null:window[K(e)]},et=function(e){var t=Z(e);return t!=null?t.parent().parent().find(".ui-chatbox-titlebar"):null},tt=function(e){var t=et(e);return t!=null?t.find(".ui-chatbox-icon"):null},nt=function(e,t){var n=tt(e);if(n==null)return null;switch(t){case"close":return n[0];case"min":return n[1];case"video":return n[2];case"videoChange":return n[3];case"games":return n[4];default:return null}},rt=function(){var e=[],n=[];return t.each(Y(),function(r,i){t(i).parent().find(".ui-videobox").is(":visible")&&n.push(t(i).attr("id")),e.push(t(i).attr("id"))}),[e,n]},it=function(){return rt()[0]},st=function(){return rt()[1]},ot=function(){var e=it(),n=PRESENCE.UIMANAGER.getAllConnectedSlugs(),r=[];return t.each(e,function(e,t){n.indexOf(t)==-1&&r.push(t)}),r},ut=function(e){var t=Z(e);return t!=null?t.chatbox("option","groupBox"):!1},at=function(){var e=[];return t.each(G(),function(n,r){t(r).chatbox("option","groupBox")&&e.push(t(r).attr("id"))}),e},ft=function(){return a};return{init:r,createMainChatBox:O,createBuddyChatBox:g,createGroupChatBox:y,closeChatBox:m,rotatePriority:I,addContentToMainChatBox:D,modifyChatPartialIfMainBox:P,changeMainChatBoxHeaderTitle:H,changeMainChatBoxHeight:B,getChatBoxHeightRequiredForConnectionBoxes:j,getVideoBoxForSlug:q,getPublisherVideoBoxForSlug:R,setVideoBoxContent:U,addVideoBoxContent:z,toggleVideoBox:V,toggleVideoBoxChange:$,toggleVideoBoxForSlug:J,getVisibleChatBoxes:G,getAllChatBoxes:Y,getChatBoxForSlug:Z,getChatBoxHeaderForSlug:et,getChatBoxButtonForSlug:nt,getAllSlugsWithVisibleVideoBoxes:st,getAllDisconnectedSlugsWithChatBoxes:ot,isSlugGroup:ut,getAllSlugsWithVisibleGroupBoxes:at,getMainChatBox:M,getMainchatBoxParams:_,getChatBoxHeight:ft}}(PRESENCE,jQuery);